{"version":3,"sources":["com/Email.js","def/prototype.js","lib/bootstrap-4.0.0/lib/jquery.js","lib/bootstrap-4.0.0/lib/tether.js","lib/bootstrap-4.0.0/lib/popper.js","com/Icon.js","com/Menu.js","com/FastMessage.js","com/Button.js","com/Col.js","com/Modal.js","com/Row.js","com/InformarValor.js","com/Progress.js","com/Loading.js","com/MessageBox.js","com/Servidor.js","def/postgresql.js","com/Content.js","com/DataGrid.js","com/ColorInput.js","com/Select.js","com/FormControl.js","com/Label.js","com/FormGroup.js","com/Hr.js","com/ModalCategoria.js","com/Title.js","view/Categoria.js","com/Atualizacao.js","view/Configuracoes.js","com/SubTitle.js","view/Contador.js","com/ButtonGroup.js","com/Center.js","view/Estatistica.js","com/EscPos.js","com/Printer.js","view/Fechamento.js","com/Importacao.js","view/Ferramentas.js","com/ListGroup.js","com/ListItem.js","view/Parametro.js","com/ModalProduto.js","view/Produto.js","view/Relatorios.js","view/RelOrcamento.js","com/Image.js","view/Suporte.js","com/PainelRapidoPesquisa.js","com/PainelRapidoPoucosProdutos.js","com/PainelRapidoMediosProdutos.js","com/PainelRapidoMuitosProdutos.js","com/PainelRapido.js","com/VendaAplicarAcrescimo.js","com/VendaAplicarDesconto.js","com/ComDLL.js","com/SAT.js","com/VendaCancelarCupom.js","com/VendaDetalhe.js","com/VendaEditarProduto.js","com/Card.js","com/VendaFinalizacao.js","com/VendaFinalizacaoOrcamento.js","com/VendaReimprimirCupom.js","view/Venda.js","com/Processo.js","com/ProcessoAutomatico.js","index.js","def/function.js"],"names":["fs","window","require","Email","Pool","this","_anexos","_destinatario","_titulo","_remetente","filename","push","nome","split","reverse","conteudo","Buffer","from","readFileSync","toString","corpo","_corpo","destinatario","Array","isArray","join","success","fail","a","valorParametro","cnpj","data","remetente_email","remtente_nome","assunto","anexos","console","log","$","ajax","url","type","beforeSend","request","setRequestHeader","error","result","response","JSON","parse","responseText","message","erro","statusText","remetente","titulo","Number","prototype","format","c","d","t","n","isNaN","Math","abs","undefined","s","i","String","parseInt","toFixed","j","length","substr","replace","slice","toFloat","byteList","text","map","charCodeAt","cpad","char","value","lpad","removeFormat","forEach","symbol","replaceAll","removeSpecial","oldChars","newChars","find","rpad","indexOf","parseFloat","jQuery","Tether","Popper","Icon","className","props","name","style","onClick","cursor","React","Component","Menu","id","MenuList","state","activeItem","changeActiveItem","bind","setState","icon","link","active","action","MessageBox","show","title","buttons","color","close","hide","listItem","item","pKey","MenuListItem","to","FastMessageEmitter","visible","callback","on","emit","Object","assign","element","get","removeListener","commitChange","settings","extend","EventEmitter","FastMessageModal","animateHide","animateShow","onChangeData","onDocumentClick","getData","stop","animate","opacity","top","innerHeight","currentTime","stages","progress","animateStages","stage","shift","animationTime","getElement","addChangeListener","document","addEventListener","removeChangeListener","removeEventListener","Button","innerButton","mlSize","size","iconPosition","dangerouslySetInnerHTML","__html","block","disabled","defaultProps","Col","offset","label","labelMargin","children","Modal","ReactDOM","findDOMNode","beforeOpen","afterOpen","beforeClose","afterClose","zIndex","css","setTimeout","not","addClass","nextProps","modal","closeOnOutClick","Row","InformarValorEmitter","decimal","mask","money","lastHide","Date","getTime","time","dif","InformarValorModal","backspace","cancelar","confirmar","drawButton","pressNumber","valorKeyDown","valorKeyUp","pristine","StringMask","focus","valor","val","InformarValor","maskedValue","pow","e","keyCode","number","apply","html","verificarTamanho","removeClass","displayClass","readOnly","onKeyDown","onKeyUp","Progress","round","background","width","LoadingEmitter","LoadingElement","MessageBoxEmitter","focusOnClose","MessageBoxModal","first","button","Servidor","serialNumber","dados","stringify","requisicao","carregarDados","status","api","numeroserie","idrequisicao","referencia","resposta","serialnumber","Promise","resolve","terminal","pg","user","host","database","password","port","Content","DataGrid","calcBlankSpace","elementScroll","onClickHeadCell","onScroll","updateBlankSpace","updateReceivedProps","header","limit","blankSpace","bottom","scrollActive","longScroll","grid","referenceElement","eScroll","eRefTop","position","scrollTop","scrollHeight","firstUpdateBlankSpace","floatThead","table","tr","tr50","eq","floor","elem","parent","is","parentTop","parentBottom","height","elemTop","elemBottom","key","target","attr","cell","hIndex","hOrder","order","sort","b","currentScroll","datagrid","thead","bsFirst","bsLast","last","trFirst","next","trLast","prev","tr20","tr80","hTop","count","elementIsVisibleByScroll","currScroll","initialBlankSpace","trHeight","rowsHeight","reduce","align","row","DataGridBody","DataGridBodyCell","DataGridBodyRow","DataGridHead","DataGridHeadCell","cellkey","DataGridBlankSpace","border","padding","ColorInput","picker","onChange","event","persist","hex","parents","preventDefault","found","each","Select","options","getDBOptions","verifyComponentId","dbtable","dbcolumn","dbfilter","dbparent","getElementById","ajaxDBOptions","abort","query","rowMode","err","res","defaultMessageBoxError","rows","option","input","optionsAux","clearable","classNamePrefix","onInputChange","placeholder","searchable","hasValue","setValue","defaultValue","FormControl","onFocus","checked","htmlFor","Label","FormGroup","warning","inputClassName","Hr","ModalCategoria","showDiv","changeDiv","changeTitle","excluir","gravar","limpar","onChangeNcm","onChangeInput","onChangeSincTributacao","sincronizarTributacao","idcategoria","toLocaleString","descricao","updateShowState","carregar","input_descricao","FastMessage","columns","values","name2","idncm","num","sets","input_sinctributacao","input_codigoncm","input_cor","input_dthrcriacao","input_origem","input_cfop","input_csosn","input_aliqicms","input_cstpis","input_aliqpis","input_cstcofins","input_aliqcofins","input_codcontribsocial","input_cest","Title","model","Categoria","dataGrid","pesquisa","showModalCategoria","redirectToProduto","beforeCloseModal","loadDataGrid","novaCategoria","onChangePesquisa","onClickBtnProduto","onKeyUpPesquisa","pesquisaLimpar","end","codigoncm","produtos","dthrcriacao","carregarCategoria","electron","Atualizacao","atualizarAplicativoParcial","atualizarBancoDeDados","baixarAplicativoParcial","verificarAtualizacao","callBack","ftp","ftpReadSync","client","stream","Error","chunks","chunk","paramAtualizacaoInstrucaoSQL","list","arrArquivoSQL","file","arquivoSQL","instrucaoSQL","connect","__ignoreAppUpdate","childProcess","exec","gitDir","applicationDirectory","execSync","spawn","shell","stdout","stderr","openExternal","fileName","version","Loading","baixarGit","ipcRenderer","sendSync","Configuracoes","redirect","versaoAtual","SubTitle","Contador","atualizarEmailContador","carregarDocumentos","enviarEmail","carregarEmailContador","dtinicial","dtfinal","documentos","zip","nodeZip","documento","xml","chave","xmlcanc","chavecanc","zippedData","generate","base64","compression","toISOString","zipfile","writeTemporary","email","anexo","enviar","date","dtinical","getFullYear","getMonth","ButtonGroup","Center","Estatistica","carregarDadosCategoria","carregarDadosFormaPagamento","carregarDadosGeral","carregarDadosProduto","tabela","LineChart","Line","queryDiario","resDiario","dadosDiario","prepararDados","querySemanal","resSemanal","dadosSemanal","queryMensal","resMensal","dadosMensal","queryAnual","resAnual","dadosAnual","diario","semanal","mensal","anual","tipoData","groups","labels","x","getDate","dataGroup","group","y","datasets","cor","random","rgb","fillColor","strokeColor","pointColor","pointStrokeColor","pointHighlightFill","pointHighlightStroke","legend","display","chartHeight","chartWidth","chartDiario","chartSemanal","chartMensal","chartAnual","ESC","EscPos","font","content","barcode","GS","fromCharCode","bool","lines","qrcode","len","pl","ph","bold","Printer","os","child_process","escpos","colunas","modelo","documentoprodutos","documentopagamentos","parametroImpressoraGuilhotina","parametroImpressoraModeloImpressao","linhas","carregarEscPos","feed","fonte","iddocumento","queryDocumentoProduto","queryDocumentoPagamento","release","getContent","drawer","cut","texto","command","toUpperCase","nomefantasia","razaosocial","paramEmitenteEndereco","paramEmitenteNumero","paramEmitenteBairro","paramEmitenteMunicipio","paramEmitenteUF","paramEmitenteCNPJ","paramEmitenteIE","linha","reiniciar","carregarDadosDocumento","imprimirDocumentoAtivo","imprimirDocumentoCancelado","numerovias","informacoes","operacao","xmlJS","xml2json","compact","CFe","infCFe","infAdic","infCpl","_text","ide","assinaturaQRCODE","imprimirCabecalho","numero","dtcriacao","hrcriacao","getHours","getMinutes","getSeconds","cpfcnpj","nomeorcamento","idparceiro","parceiro","tipopessoa","inscricaoestadual","cidade","estado","cep","bairro","endereco","complemento","imprimirListaProdutosModelo01","imprimirListaProdutosModelo02","totaldocumento","repeat","alimentar","documentopagamento","totalpagamento","formapagamento","totaltroco","paramSatSerie","guilhotina","imprimir","paramSATSerie","qrcodecanc","orcamento","dthrcancelamento","dtcancelamento","hrcancelamento","documentoproduto","sequencial","totalproduto","quantidade","preco","precisao","sigla","calculo","descricaoLength","totaldesconto","totalacrescimo","linha1","linha2","reset","Fechamento","tipo","ativarFechamentoRelatorio","ativarFechamentoResumo","gerar","arrOperacao","operacaoQuery","prepararImpressao","disabledImprimir","currentDate","ativar","FechamentoRelatorio","tipoDescritivo","colDescricao","colQuantidade","colTotal","total","t_quantidade","t_total","FechamentoResumo","totalbruto","totalcancelado","qtdecancelado","totalativo","qtdeativo","totalorcamento","colResumo2","colResumo1","remote","Importacao","cores","categoria","corAleatoria","produto","balanca","precovariavel","aliqicms","aliqpis","aliqcofins","idunidade","cest","cfop","csosn","cstpis","cstcofins","sinctributacao","idcateogria","incluirCategoria","keys","references","sql","importados","planilha","xlsx","codigoean","origem","codcontribsocial","incluirProduto","dialog","showOpenDialog","filters","extensions","filePaths","processarPlanilha","Ferramentas","descobrirPortaImpressora","importarPlanilha","printer","then","selecionarPlanilha","consoleDesenvolvedor","ListGroup","ListItem","Parametro","listaGrupo","listaParametro","grupoAtivo","parametroAtivo","idparametro","observacao","ajustarAltura","carregarListaGrupo","carregarListaParametro","carregarParametro","onChangeValor","grupo","ModalProduto","onChangeCategoria","idproduto","input_idcategoria","input_codigoean","input_idunidade","input_precovariavel","input_preco","input_status","Produto","showModalProduto","redirectToCategoria","novoProduto","onClickBtnCategoria","carregarProduto","Relatorios","RelOrcamento","acaoOrcamento","info","totalquantidade","decimaisQuantidade","RelOrcamentoRelatorio","colNomeOrcamento","colIdDocumento","colTotalQuantidade","colTotalDocumento","t_totalquantidade","t_totaldocumento","Image","src","existsSync","ext","alt","Suporte","logotipo","informativo","telefone","toLowerCase","PainelRapidoPesquisa","carregarProdutos","where","layoutVendas","selecionarProduto","onSelectProduto","borderColor","PainelRapidoPoucosProdutos","categorias","carregarCategorias","trocarCategoria","backgroundColor","PainelRapidoMediosProdutos","PainelRapidoMuitosProdutos","voltarCategoria","painelRapidoCategoria","painelRapidoProduto","PainelRapido","VendaEditarProduto","acrescimovalor","acrescimopercentual","onChangeAcrescimoPercentual","onChangeAcrescimoValor","onChangeTotalLiquido","aplicarAcrescimo","descontovalor","descontopercentual","onChangeDescontoPercentual","onChangeDescontoValor","aplicarDesconto","ComDLL","appPath","srcPath","comDLLPath","dllPath","method","args","commandExec","commandArgs","concat","xmlFile","returnFile","unlinkSync","writeFileSync","execFileSync","timeout","trim","code","SAT","jsontoxml","paramSATModelo","paramSATAtivacao","xmlEntrada","gerarXMLCancelamento","retorno","arrRetorno","sleep","execute","validarRetorno","xmlSaida","atob","objectName","constructor","paramDesenvolvedoraCNPJ","paramDesenvolvedoraAssinatura","paramSATCaixa","attrs","finalXML","paramEmitenteImpostoFederal","paramEmitenteImpostoEstadual","destChildren","destCPFCNPJ","dest","dets","prod","ICMS","PIS","basepis","COFINS","basecofins","pgtoChildren","especie","pgto","impostoFederal","impostoEstadual","infCFeChildren","gerarXMLDocumento","sucesso","VendaCancelarCupom","atualizarState","carregarUltimoDocumento","outroCupom","localizarNumero","rowCount","cancelarDocumento","currentTimestamp","ini","numeroVias","cancelamento","imprimirDocumento","stack","carregarDocumento","VendaDetalhe","cancelarUltimaVenda","cancelarVendaAtual","carregarOrcamento","listaDocumentoProduto","reimprimirCupom","trocarOperacao","aumentarQuantidade","diminuirQuantidade","editarProduto","removerProduto","abrirFinalizacao","informarCPF","VendaDetalheCabecalho","alternarOrcamento","alternarVenda","efetivarOrcamento","onClickDocument","onClickIcon","exibindoOpcoes","opcoes","iconClicked","contains","fecharOpcoes","abrirOpcoes","countLista","ref","VendaDetalheCorpo","scrollToBottom","VendaDetalheCorpoItem","espaco","descontounitario","acrescimounitario","stopPropagation","VendaDetalheRodape","calcularTotais","onChangeAcrescimoUnitario","onChangeDescontoUnitario","onChangePreco","onChangeQuantidade","onChangeTotalAcrescimo","onChangeTotalDesconto","atualizarDocumentoProduto","decimalQuantidade","Card","VendaFinalizacao","listaDocumentoPagamento","formaspagamento","finalizarVenda","removerPagamento","totalpago","totalrestante","carregarFormasPagamento","idformapagamento","splice","iconEspecie","incluirPagamento","incluirDezPorcento","VendaFinalizacaoListaPagamentos","VendaFinalizacaoOrcamento","onChangeCpfCnpj","onChangeNomeOrcamento","onFocusCpfCnpj","finalizarOrcamento","validarCPF","validarCNPJ","VendaReimprimirCupom","listaUltimosDocumentos","carregarUltimosDocumentos","Venda","criarObjetoDocumentoProduto","iddocumentoorcamento","pesquisaEfetiva","showEditarProduto","showVendaAplicarDesconto","showVendaAplicarAcrescimo","showVendaCancelarCupom","showVendaFinalizacao","showVendaFinalizacaoOrcamento","showVendaReimprimirCupom","carregarTemporario","finalizarDocumento","gravarTemporario","onClickBuscar","temporaryFileName","calcularDocumentoProduto","descontoproduto","calcularDiferenca","t_descontoproduto","diferenca","index","resDocumento","resDocumentoProduto","unidade","temporaryDirectory","match","params","nextState","sqlInsertDocumento","listaIdProduto","queryProduto","resProduto","listaProdutos","sqlInsertDocumentoProduto","sqlInsertDocumentoPagamento","sat","transmitirDocumento","venda","informarPeso","incluirProdutoDefinitivo","documentoproduto2","documentoprodutoComp1","documentoprodutoComp2","contentClassName","Processo","dthrinicial","now","intervalo","ProcessoAutomatico","interval","running","executandoBackup","setInterval","executar","clearInterval","executarRefreshView","executarVerificarDtVerificacao","executarVerificarTerminal","isDev","executarBackup","processo","verificarIntervalo","platform","dadosFTP","pgDump","tempDir","mkdirSync","files","readdirSync","currTimeStr","localFile","remoteFile","cwd","mkdir","put","atualizarProcesso","view","dtverificacao","dtatual","servidor","verificarTerminal","App","processoAutomatico","iniciar","ctrlKey","path","exact","component","render","serialNumberFunc","timezoneOffset","getTimezoneOffset","process","ms","homedir","tamanho","numeros","substring","digitos","soma","pos","charAt","resultado","cpf","add","rev","dirname","finalName","encode"],"mappings":"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","file":"static/js/main.92022424.chunk.js","sourcesContent":["import { valorParametro } from \"../def/function.js\";\n\nconst fs = window.require(\"fs\");\n\nexport default class Email {\n\n\tconstructor(Pool){\n\t\tthis.Pool = Pool;\n\n\t\tthis._anexos = [];\n\t\tthis._destinatario = null;\n\t\tthis._titulo = null;\n\t\tthis._remetente = null;\n\t}\n\n\tanexo(filename){\n\t\tthis._anexos.push({\n\t\t\tnome: filename.split(\"/\").reverse()[0],\n\t\t\tconteudo: Buffer.from(fs.readFileSync(filename)).toString('base64')\n\t\t});\n\t}\n\n\tcorpo(corpo){\n\t\tthis._corpo = corpo;\n\t}\n\n\tdestinatario(destinatario){\n\t\tif(Array.isArray(destinatario)){\n\t\t\tdestinatario = destinatario.join(\"; \");\n\t\t}\n\t\tthis._destinatario = destinatario;\n\t}\n\n\tasync enviar(success, fail){\n\t\tlet cnpj = await valorParametro(this.Pool, \"EMITENTE\", \"CNPJ\");\n\n\t\tconst data = {\n\t\t\tremetente_email: 'satflex@controlware.com.br',\n\t\t\tremtente_nome: this._remetente,\n\t\t\tdestinatario: this._destinatario,\n\t\t\tassunto: this._titulo,\n\t\t\tcorpo: this._corpo,\n\t\t\tanexos: this._anexos\n\t\t};\n\t\tconsole.log({ data });\n\n\t\t$.ajax({\n\t\t\turl: 'https://andromeda.controlware.com.br/api/email/enviar',\n\t\t\ttype: 'POST',\n\t\t\tbeforeSend: request => {\n\t\t\t\trequest.setRequestHeader(\"idchave\", \"7ba93327-465f-41ee-975a-f208d4995bf1\");\n\t\t\t\trequest.setRequestHeader(\"cnpj\", cnpj);\n\t\t\t},\n\t\t\tdata,\n\t\t\tsuccess: () => success(),\n\t\t\terror: result => {\n\t\t\t\tconst response = JSON.parse(result.responseText);\n\t\t\t\tif(response){\n\t\t\t\t\tif(!response.message && response.erro){\n\t\t\t\t\t\tresponse.message = response.erro;\n\t\t\t\t\t}\n\t\t\t\t\tfail(response);\n\t\t\t\t}else{\n\t\t\t\t\tfail({ message: result.statusText });\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tremetente(remetente){\n\t\tthis._remetente = remetente;\n\t}\n\n\ttitulo(titulo){\n\t\tthis._titulo = titulo;\n\t}\n\n}\n","// Metodo para formatar um numero\n// Ex: (999999.9999).format(2,\",\",\".\")  =>  \"1.000.000,00\"\nNumber.prototype.format = function(c, d, t){\n\tlet n = this;\n\n\tc = (isNaN(c = Math.abs(c)) ? 2 : c);\n\td = (d === undefined ? \",\" : d);\n\tt = (t === undefined ? \".\" : t);\n\n\tlet s = (n < 0 ? \"-\" : \"\");\n\tlet i = String(parseInt(n = Math.abs(+n || 0).toFixed(c), 10));\n\tlet j = (i.length > 3 ? i.length % 3 : 0);\n\n\treturn s + (j ? i.substr(0, j) + t : \"\") + i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : \"\");\n};\n\n// Tranforma uma string em um numero\n// (nessa caso eh apenas para evitar erro quando a variavel ja for float)\nNumber.prototype.toFloat = function(){\n\treturn this;\n}\n\n// Retorna um array com o codigo de cada caracter do texto\nString.prototype.byteList = function(text){\n\treturn text.split(\"\").map(function(c){\n\t\treturn c.charCodeAt(0);\n\t});\n};\n\n\n// Preenche com o caracter desejado centralizando o texto\nString.prototype.cpad = function(length, char){\n    let value = this;\n\tlet i = 0;\n    while(value.length < length){\n\t\tif(i++ % 2 === 0){\n\t\t\tvalue = value + char;\n\t\t}else{\n\t\t\tvalue = char + value;\n\t\t}\n\t}\n    return String(value);\n}\n\n// Executa o \"format\" do tipo Number, porem esse metodo ja identifica a formatacao do numero\nString.prototype.format = function(c, d, t){\n\treturn this.toFloat().format(c, d, t);\n};\n\n// Preenche com o caracter desejado a esquerda do texto\nString.prototype.lpad = function(length, char){\n    let value = this;\n    while(value.length < length){\n\t\tvalue = char + value;\n\t}\n    return String(value);\n}\n\n// Remove a formatacao de textos\n// Ex: (\"(11) 99565-3470\").removeFormat() => \"11995653470\"\nString.prototype.removeFormat = function(){\n\tlet value = this;\n\tlet symbols = [\" \", \".\", \",\", \"-\", \"/\", \"\\\\\", \"(\", \")\"];\n\tsymbols.forEach((symbol) => {\n\t\tvalue = value.replaceAll(symbol, \"\");\n\t});\n\treturn value;\n};\n\n// Remove caracteres especiais\nString.prototype.removeSpecial = function(){\n\tlet oldChars = [\"á\", \"à\", \"ã\", \"â\", \"é\", \"è\", \"ê\", \"í\", \"ì\", \"î\", \"ó\", \"ò\", \"õ\", \"ô\", \"ú\", \"ù\", \"û\", \"ü\", \"ç\", \"Á\", \"À\", \"Ã\", \"Â\", \"É\", \"È\", \"Ê\", \"Í\", \"Ì\", \"Î\", \"Ó\", \"Ò\", \"Õ\", \"Ô\", \"Ú\", \"Ù\", \"Û\", \"Ü\", \"Ç\", \"ª\", \"º\"];\n\tlet newChars = [\"a\", \"a\", \"a\", \"a\", \"e\", \"e\", \"e\", \"i\", \"i\", \"i\", \"o\", \"o\", \"o\", \"o\", \"u\", \"u\", \"u\", \"u\", \"c\", \"A\", \"A\", \"A\", \"A\", \"E\", \"E\", \"E\", \"I\", \"I\", \"I\", \"O\", \"O\", \"O\", \"O\", \"U\", \"U\", \"U\", \"U\", \"C\", \"a\", \"o\"];\n\tlet value = this;\n\tfor(let i = 0; i < oldChars.length; i++){\n\t\tvalue = value.replaceAll(oldChars[i], newChars[i]);\n\t}\n\treturn value;\n};\n\n// Metodo para substituir todas as ocorrencias em uma string\nString.prototype.replaceAll = function(find, replace){\n\treturn this.split(find).join(replace);\n};\n\n// Preenche com o caracter desejado a direita do texto\nString.prototype.rpad = function(length, char){\n    let value = this;\n    while(value.length < length){\n\t\tvalue = value + char;\n\t}\n    return String(value);\n}\n\n// Tranforma uma string em um numero\n// Exemplo: 1.200,85 => 1200.85\nString.prototype.toFloat = function(){\n\tvar value = this;\n\tif(value.indexOf(\".\") === -1 && value.indexOf(\",\") > -1){ // 1200,85\n\t\tvalue = value.replace(\",\", \".\");\n\t}else if(value.indexOf(\".\") > -1 && value.indexOf(\",\") > -1){ // 1.200,85 ou 1,200.85\n\t\tif(value.indexOf(\".\") < value.indexOf(\",\")){ // 1.200,85\n\t\t\tvalue = value.replace(\".\", \"\").replace(\",\", \".\");\n\t\t}else if(value.indexOf(\".\") > value.indexOf(\",\")){ // 1,200.85\n\t\t\tvalue = value.replace(\",\", \"\");\n\t\t}\n\t}\n\treturn parseFloat(value);\n};\n","import * as $ from \"jquery\"\nwindow.jQuery = window.$ = $","import Tether from 'tether'\nwindow.Tether = Tether","import Popper from 'popper.js'\nwindow.Popper = Popper","import React from \"react\";\nimport \"./../lib/metro-icons-3.0.15/css/metro-icons.min.css\";\n\nexport default class Icon extends React.Component {\n\trender(){\n\t\tvar className = [\n\t\t\t\"icon\",\n\t\t\t\"mif-\" + this.props.name\n\t\t];\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\n\t\tvar style = {};\n\t\tif(this.props.onClick){\n\t\t\tstyle.cursor = \"pointer\";\n\t\t}\n\n\t\treturn (\n\t\t\t<span {...this.props} className={className.join(\" \")} style={style}></span>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Icon from \"./Icon.js\";\n\nimport \"../css/Menu.css\";\n\nexport default class Menu extends React.Component {\n\trender(){\n\t\treturn(\n\t\t\t<div id=\"menu\">\n\t\t\t\t<MenuList />\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass MenuList extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tactiveItem: \"Vender\"\n\t\t};\n\n\t\tthis.changeActiveItem = this.changeActiveItem.bind(this);\n\t}\n\n\tchangeActiveItem(text){\n\t\tthis.setState({\n\t\t\tactiveItem: text\n\t\t});\n\t}\n\n\tlistItem(){\n\t\treturn [\n\t\t\t{\n\t\t\t\ttext: \"Vender\",\n\t\t\t\ticon: \"shop\",\n\t\t\t\tlink: \"/\"\n\t\t\t},/*\n\t\t\t{\n\t\t\t\ttext: \"Notas fiscais\",\n\t\t\t\ticon: \"clipboard\",\n\t\t\t\tlink: \"/notafiscal\",\n\t\t\t\tactive: false\n\t\t\t},*/\n\t\t\t{\n\t\t\t\ttext: \"Cadastros\",\n\t\t\t\ticon: \"stack\",\n\t\t\t\tlink: \"/produto\",\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"Relatórios\",\n\t\t\t\ticon: \"chart-line\",\n\t\t\t\tlink: \"/relatorio\",\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"Contador\",\n\t\t\t\ticon: \"suitcase\",\n\t\t\t\tlink: \"/contador\",\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"Configurações\",\n\t\t\t\ticon: \"cogs\",\n\t\t\t\tlink: \"/configuracao\",\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"Suporte\",\n\t\t\t\ticon: \"help\",\n\t\t\t\tlink: \"/suporte\",\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"Sair\",\n\t\t\t\ticon: \"exit\",\n\t\t\t\tactive: false,\n\t\t\t\taction: () => {\n\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\ttitle: \"Sair do SAT-Flex\",\n\t\t\t\t\t\ttext: \"Você tem certeza que deseja encerrar o SAT-Flex agora?\",\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\twindow.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: \"Não\",\n\t\t\t\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t]\n\t}\n\n\trender(){\n\t\treturn <div className=\"menu-list\">\n\t\t\t<ul>\n\t\t\t\t{this.listItem().map((item, i) => {\n\t\t\t\t\treturn <MenuListItem key={i} pKey={i} item={item} activeItem={this.state.activeItem} changeActiveItem={this.changeActiveItem} />\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t</div>\n\t}\n}\n\nclass MenuListItem extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(){\n\t\tif(this.props.item.link){\n\t\t\tthis.props.changeActiveItem(this.props.item.text);\n\t\t}\n\t\tif(this.props.item.action){\n\t\t\tthis.props.item.action();\n\t\t}\n\t}\n\n\trender(){\n\t\tlet className = null;\n\t\tif(this.props.activeItem === this.props.item.text){\n\t\t\tclassName = \"active\";\n\t\t}\n\n\t\tif(this.props.item.link){\n\t\t\treturn (\n\t\t\t\t<Link to={this.props.item.link} onClick={this.onClick} className={className}>\n\t\t\t\t\t<Icon name={this.props.item.icon} />\n\t\t\t\t\t<span>{this.props.item.text}</span>\n\t\t\t\t</Link>\n\t\t\t);\n\t\t}else{\n\t\t\treturn (\n\t\t\t\t<a onClick={this.onClick} className={className}>\n\t\t\t\t\t<Icon name={this.props.item.icon} />\n\t\t\t\t\t<span>{this.props.item.text}</span>\n\t\t\t\t</a>\n\t\t\t);\n\t\t}\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport {EventEmitter} from \"events\";\n\nimport Icon from \"./Icon.js\";\n\nimport \"../css/FastMessage.css\";\n\nexport class FastMessageEmitter extends EventEmitter  {\n\tconstructor(){\n\t\tsuper();\n\n\t\tthis.data = {\n\t\t\ticon: null,\n\t\t\ttext: null,\n\t\t\tvisible: false\n\t\t}\n\t}\n\n\t// Adiciona um metodo a ser executado quando houver uma mudanca\n\taddChangeListener(callback){\n\t\tthis.on(\"change\", callback);\n\t}\n\n\t// Metodo responsavel em propagar as mudancas dos dados\n\tcommitChange(){\n\t\tthis.emit(\"change\");\n\t}\n\n\t// Captura os dados atuais da classe\n\tgetData(){\n\t\treturn Object.assign({}, this.data);\n\t}\n\n\t// Retorna o elemento modal da caixa de mensagem\n\tgetElement(){\n\t\tif(this.element === undefined){\n\t\t\tthis.element = $(\"#FastMessage\").get(0);\n\t\t}\n\t\treturn this.element;\n\t}\n\n\t// Remove um metodo a ser executado quando houver uma mudanca\n\tremoveChangeListener(callback){\n\t\tthis.removeListener(\"change\", callback);\n\t}\n\n\t// Esconde a caixa de mensagem\n\thide(){\n\t\tthis.data.visible = false;\n\t\tthis.commitChange();\n\t}\n\n\t// Exibe a caixa de mensagem\n\tshow(settings){\n\t\tif(typeof settings === \"string\"){\n\t\t\tsettings = {text: settings};\n\t\t}\n\n\t\tsettings = $.extend({\n\t\t\ticon: null,\n\t\t\ttext: null,\n\t\t\tvisible: true\n\t\t}, settings);\n\n\t\tthis.data = $.extend(this.data, settings);\n\t\tthis.commitChange();\n\t}\n}\n\nexport class FastMessageModal extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.animateHide = this.animateHide.bind(this);\n\t\tthis.animateShow = this.animateShow.bind(this);\n\t\tthis.onChangeData = this.onChangeData.bind(this);\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\n\n\t\tthis.state = props.FastMessageEmitter.getData();\n\t}\n\n\tanimateHide(){\n\t\tif(!this.state.visible){\n\t\t\treturn true;\n\t\t}\n\t\t$(this.element).stop().animate({\n\t\t\topacity: 0,\n\t\t\ttop: window.innerHeight\n\t\t}, 180, () => {\n\t\t\tthis.setState({\n\t\t\t\tvisible: false\n\t\t\t});\n\t\t});\n\t}\n\n\tanimateShow(){\n\t\t$(this.element).show();\n\n\t\tlet totalTime = 3000;\n\t\tlet currentTime = 0;\n\n\t\tlet stages = [\n\t\t\t{progress: 0,    opacity: 0, top: 0},\n\t\t\t{progress: 0.05, opacity: 1, top: 0.3},\n\t\t\t{progress: 0.95, opacity: 1, top: 0.35},\n\t\t\t{progress: 1,    opacity: 0, top: 1}\n\t\t];\n\n\t\tlet animateStages = () => {\n\t\t\tlet stage = stages.shift();\n\n\t\t\tlet animationTime = (totalTime * stage.progress) - currentTime;\n\t\t\tcurrentTime += animationTime;\n\n\t\t\t$(this.element).stop().animate({\n\t\t\t\topacity: stage.opacity,\n\t\t\t\ttop: (window.innerHeight * stage.top)\n\t\t\t}, animationTime, () => {\n\t\t\t\tif(stages.length > 0){\n\t\t\t\t\tanimateStages();\n\t\t\t\t}else{\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tvisible: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tanimateStages();\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.element = this.props.FastMessageEmitter.getElement();\n\t\tthis.props.FastMessageEmitter.addChangeListener(this.onChangeData);\n\t\tdocument.addEventListener(\"click\", this.onDocumentClick);\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.props.FastMessageEmitter.removeChangeListener(this.onChangeData);\n\t\tdocument.removeEventListener(\"click\", this.onDocumentClick);\n\t}\n\n\tonChangeData(){\n\t\tlet data = this.props.FastMessageEmitter.getData();\n\t\tif(data.visible !== this.state.visible){\n\t\t\tif(data.visible){\n\t\t\t\tthis.animateShow();\n\t\t\t}else{\n\t\t\t\tthis.animateHide();\n\t\t\t}\n\t\t}\n\t\tthis.setState(data);\n\t}\n\n\tonDocumentClick(){\n\t\tif(this.state.visible){\n\t\t\tthis.animateHide();\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div id=\"FastMessage\">\n\t\t\t\t{this.state.icon ? <Icon name={this.state.icon} /> : null}\n\t\t\t\t<span>{this.state.text}</span>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport Icon from \"./Icon.js\";\nimport \"../css/Button.css\";\n\nexport default class Button extends React.Component {\n\tstatic defaultProps = {\n\t\tactive: false,\n\t\tblock: false,\n\t\tdisabled: false,\n\t\ticonPosition: \"left\",\n\t\tsize: \"md\",\n\t\tcolor: \"blue\"\n\t}\n\n\trender(){\n\t\tvar innerButton = null;\n\t\tif(this.props.icon){\n\t\t\tif(this.props.text){\n\t\t\t\tlet mlSize = (this.props.size === \"lg\" ? \"3\" : \"2\");\n\n\t\t\t\tswitch(this.props.iconPosition){\n\t\t\t\t\tdefault:\n\t\t\t\t\tcase \"left\":\n\t\t\t\t\t\tinnerButton = [\n\t\t\t\t\t\t\t<Icon name={this.props.icon} key=\"0\" />,\n\t\t\t\t\t\t\t<span className={\"ml-\" + mlSize} key=\"1\" dangerouslySetInnerHTML={{__html: this.props.text}}></span>\n\t\t\t\t\t\t];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\tinnerButton = [\n\t\t\t\t\t\t\t<span className=\"mr-2\" key=\"0\" dangerouslySetInnerHTML={{__html: this.props.text}}></span>,\n\t\t\t\t\t\t\t<Icon name={this.props.icon} key=\"1\" />\n\t\t\t\t\t\t];\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tinnerButton = <Icon name={this.props.icon} />;\n\t\t\t}\n\t\t}else{\n\t\t\tinnerButton = <span dangerouslySetInnerHTML={{__html: this.props.text}}></span>;\n\t\t}\n\n\t\tvar className = [\n\t\t\t\"btn\",\n\t\t\t\"btn-primary\",\n\t\t\t\"btn-\" + this.props.size,\n\t\t\t\"btn-color-\" + this.props.color,\n\t\t];\n\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\t\tif(this.props.active){\n\t\t\tclassName.push(\"active\");\n\t\t}\n\t\tif(this.props.block){\n\t\t\tclassName.push(\"btn-block\");\n\t\t}\n\n\t\treturn (\n\t\t\t<button className={className.join(\" \")} onClick={this.props.onClick} disabled={this.props.disabled}>\n\t\t\t\t{innerButton}\n\t\t\t</button>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nexport default class Col extends React.Component {\n\trender(){\n\t\tlet size = (this.props.size === undefined ? 1 : this.props.size);\n\t\tlet className = [\"col-\" + size];\n\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\n\t\tif(this.props.offset){\n\t\t\tclassName.push(\"offset-\" + this.props.offset);\n\t\t}\n\n\t\tlet label = null;\n\t\tif(this.props.labelMargin){\n\t\t\tlabel = <label>&nbsp;</label>;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{label}\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport $ from \"jquery\";\n\nimport \"../css/Modal.css\";\n\nclass Modal extends React.Component {\n\n\tcomponentDidMount(){\n\t\tthis.element = ReactDOM.findDOMNode(this);\n\n\t\t$(this.element).on(\"show.bs.modal\", this.props.beforeOpen);\n\t\t$(this.element).on(\"shown.bs.modal\", this.props.afterOpen);\n\t\t$(this.element).on(\"hide.bs.modal\", this.props.beforeClose);\n\t\t$(this.element).on(\"hidden.bs.modal\", this.props.afterClose);\n\n\t\t$(this.element).on(\"show.bs.modal\", () => {\n\t\t\tlet zIndex = 1040 + (10 * $(\".modal:visible\").length);\n\t\t\t$(this.element).css(\"z-index\", zIndex);\n\t\t\tsetTimeout(() => {\n\t\t\t\t$(\".modal-backdrop\").not(\".modal-stack\").css(\"z-index\", zIndex - 1).addClass(\"modal-stack\");\n\t\t\t}, 0);\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tif(nextProps.show !== this.props.show){\n\t\t\tif(nextProps.show){\n\t\t\t\t$(this.element).modal(\"show\");\n\t\t\t}else{\n\t\t\t\t$(this.element).modal(\"hide\");\n\t\t\t}\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps){\n\t\treturn (\n\t\t\tnextProps.size !== this.props.size ||\n\t\t\tnextProps.title !== this.props.title ||\n\t\t\tnextProps.children !== this.props.children\n\t\t);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div id={this.props.id} className=\"modal fade\" data-backdrop={this.props.closeOnOutClick ? true : \"static\"}>\n\t\t\t\t<div className={\"modal-dialog modal-\" + this.props.size}>\n\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t{this.props.title}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"modal-body\">\n\t\t\t\t\t\t\t{this.props.children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nModal.defaultProps = {\n\tcloseOnOutClick: true,\n\tid: null,\n\tsize: \"md\",\n\ttitle: null\n};\n\nexport default Modal;\n","import React from \"react\";\n\nexport default class Row extends React.Component {\n\trender(){\n\t\tlet className = [\"row\"];\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\n\t\tlet props = Object.assign({}, this.props);\n\t\tdelete props.className;\n\n\t\treturn (\n\t\t\t<div {...props} className={className.join(\" \")}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport {EventEmitter} from \"events\";\nimport StringMask from \"string-mask\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport Icon from \"./Icon.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport \"../css/InformarValor.css\";\n\nexport class InformarValorEmitter extends EventEmitter {\n\tconstructor(){\n\t\tsuper();\n\n\t\tthis.data = {\n\t\t\tdecimal: 0, // Quantidade de casas decimais\n\t\t\tmask: null, // Mascara de entrada\n\t\t\tmoney: false, // Simbolo monetario a frente do valor\n\t\t\ttitle: null, // Titulo da janela\n\t\t\tvalue: \"\", // Valor pre-informado\n\t\t\tvisible: false, // Define se o modal esta visivel\n\t\t\tsuccess: () => {}, // Metodo executado ao confirmar valor\n\t\t\tfail: () => {} // Metodo executado ao cancelar\n\t\t};\n\n\t\tthis.lastHide = new Date().getTime();\n\t}\n\n\t// Adiciona um metodo a ser executado quando houver uma mudanca\n\taddChangeListener(callback){\n\t\tthis.on(\"change\", callback);\n\t}\n\n\t// Metodo responsavel em propagar as mudancas dos dados\n\tcommitChange(){\n\t\tthis.emit(\"change\");\n\t}\n\n\t// Captura os dados atuais da classe\n\tgetData(){\n\t\treturn Object.assign({}, this.data);\n\t}\n\n\t// Retorna o elemento modal da caixa de mensagem\n\tgetElement(){\n\t\tif(this.element === undefined){\n\t\t\tthis.element = $(\"#informarvalor\").get(0);\n\t\t}\n\t\treturn this.element;\n\t}\n\n\t// Remove um metodo a ser executado quando houver uma mudanca\n\tremoveChangeListener(callback){\n\t\tthis.removeListener(\"change\", callback);\n\t}\n\n\t// Escone a caixa de mensagem\n\thide(){\n\t\tthis.lastHide = new Date().getTime();\n\t\tthis.data.visible = false;\n\t\tthis.commitChange();\n\t}\n\n\t// Exibe a caixa de mensagem\n\tshow(settings){\n\t\tsettings = $.extend({\n\t\t\tdecimal: 0, // Quantidade de casas decimais\n\t\t\tmask: null, // Mascara de entrada\n\t\t\tmoney: false, // Simbolo monetario a frente do valor\n\t\t\ttitle: \"Informe o valor\", // Titulo da janela\n\t\t\tvalue: \"\", // Valor pre-informado\n\t\t\tvisible: true, // Define se o modal esta visivel\n\t\t\tsuccess: () => {}, // Metodo executado ao confirmar valor\n\t\t\tfail: () => {} // Metodo executado ao cancelar\n\t\t}, settings);\n\n\t\tlet time = 0;\n\t\tlet minTime = 750;\n\t\tlet dif = new Date().getTime() - this.lastHide;\n\t\tif(dif < minTime){\n\t\t\ttime = minTime - dif;\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tthis.data = $.extend(this.data, settings);\n\t\t\tthis.commitChange();\n\t\t}, time);\n\t}\n}\n\nexport class InformarValorModal extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdecimal: 0, // Quantidade de casas decimais\n\t\t\tmask: null, // Mascara de entrada\n\t\t\tmoney: false, // Simbolo monetario a frente do valor\n\t\t\ttitle: null, // Titulo da janela\n\t\t\tvalue: \"\", // Valor pre-informado\n\t\t\tvisible: false, // Define se o modal esta visivel\n\t\t\tsuccess: () => {}, // Metodo executado ao confirmar valor\n\t\t\tfail: () => {} // Metodo executado ao cancelar\n\t\t};\n\n\t\tthis.backspace = this.backspace.bind(this);\n\t\tthis.beforeClose = this.beforeClose.bind(this);\n\t\tthis.beforeOpen = this.beforeOpen.bind(this);\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.drawButton = this.drawButton.bind(this);\n\t\tthis.onChangeData = this.onChangeData.bind(this);\n\t\tthis.pressNumber = this.pressNumber.bind(this);\n\t\tthis.valorKeyDown = this.valorKeyDown.bind(this);\n\t\tthis.valorKeyUp = this.valorKeyUp.bind(this);\n\n\t\tthis.pristine = true;\n\t\tthis.visible = false;\n\n\t\tthis.StringMask = StringMask;\n\t}\n\n\tafterOpen(){\n\t\t$(\"#informarvalor-valor\").focus();\n\t}\n\n\tbackspace(){\n\t\tlet valor = $(\"#informarvalor-valor\").val();\n\t\t$(\"#informarvalor-valor\").val(valor.substr(0, valor.length - 1));\n\t\tthis.valorKeyUp();\n\t}\n\n\tbeforeClose(){\n\t\tthis.visible = false;\n\t}\n\n\tbeforeOpen(){\n\t\tthis.visible = true;\n\t}\n\n\tcancelar(){\n\t\twindow.InformarValor.hide();\n\t\tthis.state.fail();\n\t}\n\n\tconfirmar(){\n\t\twindow.InformarValor.hide();\n\n\t\tlet valor = $(\"#informarvalor-valor\").val();\n\t\tif(typeof this.state.mask === \"string\"){\n\t\t\tvalor = this.maskedValue(valor);\n\t\t}else{\n\t\t\tvalor = valor / Math.pow(10, this.state.decimal);\n\t\t\tvalor = valor.format(this.state.decimal, \",\", \".\");\n\t\t}\n\n\t\tthis.state.success(valor);\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.props.InformarValorEmitter.addChangeListener(this.onChangeData);\n\t\tthis.element = this.props.InformarValorEmitter.getElement();\n\n\t\tdocument.addEventListener(\"keyup\", (e) => {\n\t\t\tif(this.visible){\n\t\t\t\tswitch(e.keyCode){\n\t\t\t\t\tcase 8: this.backspace(); return;\n\t\t\t\t\tcase 48: this.pressNumber(0); return;\n\t\t\t\t\tcase 49: this.pressNumber(1); return;\n\t\t\t\t\tcase 50: this.pressNumber(2); return;\n\t\t\t\t\tcase 51: this.pressNumber(3); return;\n\t\t\t\t\tcase 52: this.pressNumber(4); return;\n\t\t\t\t\tcase 53: this.pressNumber(5); return;\n\t\t\t\t\tcase 54: this.pressNumber(6); return;\n\t\t\t\t\tcase 55: this.pressNumber(7); return;\n\t\t\t\t\tcase 56: this.pressNumber(8); return;\n\t\t\t\t\tcase 57: this.pressNumber(9); return;\n\t\t\t\t\tcase 96: this.pressNumber(0); return;\n\t\t\t\t\tcase 97: this.pressNumber(1); return;\n\t\t\t\t\tcase 98: this.pressNumber(2); return;\n\t\t\t\t\tcase 99: this.pressNumber(3); return;\n\t\t\t\t\tcase 100: this.pressNumber(4); return;\n\t\t\t\t\tcase 101: this.pressNumber(5); return;\n\t\t\t\t\tcase 102: this.pressNumber(6); return;\n\t\t\t\t\tcase 103: this.pressNumber(7); return;\n\t\t\t\t\tcase 104: this.pressNumber(8); return;\n\t\t\t\t\tcase 105: this.pressNumber(9); return;\n\t\t\t\t\tdefault: return;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.props.InformarValorEmitter.removeChangeListener(this.onChangeData);\n\t}\n\n\tdrawButton(number, i){\n\t\treturn (\n\t\t\t<Col size=\"4\" key={i}>\n\t\t\t\t<Button text={number} block={true} color=\"blue\" onClick={() => {this.pressNumber(number)}} />\n\t\t\t</Col>\n\t\t);\n\t}\n\n\tmaskedValue(value){\n\t\tlet mask = new this.StringMask(this.state.mask);\n\t\treturn mask.apply(value);\n\t}\n\n\tonChangeData(){\n\t\tlet data = this.props.InformarValorEmitter.getData();\n\n\t\tif(data.visible){\n\t\t\t$(this.element).modal(\"show\");\n\t\t}else{\n\t\t\t$(this.element).modal(\"hide\");\n\t\t}\n\n\t\tif(data.value !== undefined && data.value.length > 0){\n\t\t\tdata.value = data.value.toFloat().format(data.decimal, \"\", \"\");\n\t\t}\n\n\t\tthis.setState(data, () => {\n\t\t\tthis.pristine = false;\n\t\t\t$(\"#informarvalor-valor\").val(data.value);\n\t\t\tthis.valorKeyUp();\n\t\t\tthis.pristine = true;\n\t\t});\n\t}\n\n\tpressNumber(number){\n\t\t$(\"#informarvalor-valor\").val($(\"#informarvalor-valor\").val() + number);\n\t\tthis.valorKeyUp();\n\t}\n\n\tvalorKeyDown(e){\n\t\tif([8, 13, 27, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57].indexOf(e.keyCode) === -1){\n\t\t\treturn false;\n\t\t}\n\t\tif(e.keyCode === 13){\n\t\t\tthis.confirmar();\n\t\t}\n\t}\n\n\tvalorKeyUp(){\n\t\tif(this.pristine){\n\t\t\tthis.pristine = false;\n\t\t\t$(\"#informarvalor-valor\").val($(\"#informarvalor-valor\").val().substr(-1));\n\t\t}\n\n\t\tlet valor = $(\"#informarvalor-valor\").val();\n\t\tif(typeof this.state.mask === \"string\"){\n\t\t\tvalor = this.maskedValue(valor);\n\t\t}else{\n\t\t\tif(valor.length === 0){\n\t\t\t\t$(\"#informarvalor-valor\").val(0);\n\t\t\t}\n\t\t\tvalor = valor / Math.pow(10, this.state.decimal);\n\t\t\tvalor = valor.format(this.state.decimal, \",\", \".\");\n\t\t}\n\t\t$(\"#informarvalor-display\").html(valor);\n\t\tthis.verificarTamanho();\n\n\t\tif(valor.length > 0){\n\t\t\t$(\"#informarvalor-backspace\").show();\n\t\t}else{\n\t\t\t$(\"#informarvalor-backspace\").hide();\n\t\t}\n\n\t\t$(\"#informarvalor-valor\").focus();\n\t}\n\n\tverificarTamanho(){\n\t\tif($(\"#informarvalor-display\").text().length < 10){\n\t\t\t$(\"#informarvalor-display\").removeClass(\"informarvalor-display-sm\");\n\t\t}else{\n\t\t\t$(\"#informarvalor-display\").addClass(\"informarvalor-display-sm\");\n\t\t}\n\t}\n\n\trender(){\n\t\tlet numbers = [7, 8, 9, 4, 5, 6, 1, 2, 3];\n\t\tlet displayClass = (this.state.money ? \"informarvalor-display-money\" : \"\");\n\n\t\treturn (\n\t\t\t<Modal id=\"informarvalor\" size=\"sm\" title={this.state.title} afterOpen={this.afterOpen} beforeOpen={this.beforeOpen} beforeClose={this.beforeClose}>\n\t\t\t\t<input type=\"text\" id=\"informarvalor-valor\" readOnly={true} onKeyDown={this.valorKeyDown} onKeyUp={this.valorKeyUp} />\n\t\t\t\t<div id=\"informarvalor-display-parent\">\n\t\t\t\t\t<div id=\"informarvalor-display\" className={displayClass}></div>\n\t\t\t\t\t<Icon id=\"informarvalor-backspace\" name=\"chevron-left\" onClick={this.backspace} />\n\t\t\t\t</div>\n\t\t\t\t<Row id=\"informarvalor-keyboard\">\n\t\t\t\t\t{numbers.map(this.drawButton)}\n\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t<Button icon=\"cross\" block={true} color=\"red\" onClick={this.cancelar} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t{this.drawButton(0)}\n\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t<Button icon=\"checkmark\" block={true} color=\"green\" onClick={this.confirmar} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nexport default class Progress extends React.Component {\n\trender(){\n\t\tlet value = Math.round(this.props.value) + \"%\";\n\t\tlet background = null;\n\t\tswitch(this.props.color){\n\t\t\tcase \"green\":\n\t\t\t\tbackground = \"bg-success\";\n\t\t\t\tbreak;\n\t\t\tcase \"yellow\":\n\t\t\t\tbackground = \"bg-warning\";\n\t\t\t\tbreak;\n\t\t\tcase \"red\":\n\t\t\t\tbackground = \"bg-danger\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbackground = \"bg-primary\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\tlet className = \"progress\";\n\t\tif(this.props.className){\n\t\t\tclassName += \" \" + this.props.className;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={className}>\n\t\t\t\t<div className={\"progress-bar progress-bar-striped progress-bar-animated \" + background} style={{width: value}}>\n\t\t\t\t\t{value}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport {EventEmitter} from \"events\";\n\nimport Progress from \"./Progress.js\";\n\nimport \"../css/Loading.css\";\n\nexport class LoadingEmitter extends EventEmitter  {\n\tconstructor(){\n\t\tsuper();\n\n\t\tthis.data = {\n\t\t\tvisible: false,\n\t\t\tprogress: null\n\t\t}\n\t}\n\n\t// Adiciona um metodo a ser executado quando houver uma mudanca\n\taddChangeListener(callback){\n\t\tthis.on(\"change\", callback);\n\t}\n\n\t// Metodo responsavel em propagar as mudancas dos dados\n\tcommitChange(){\n\t\tthis.emit(\"change\");\n\t}\n\n\t// Captura os dados atuais da classe\n\tgetData(){\n\t\treturn Object.assign({}, this.data);\n\t}\n\n\t// Retorna o elemento modal da caixa de mensagem\n\tgetElement(){\n\t\tif(this.element === undefined){\n\t\t\tthis.element = $(\"#Loading\").get(0);\n\t\t}\n\t\treturn this.element;\n\t}\n\n\t// Remove um metodo a ser executado quando houver uma mudanca\n\tremoveChangeListener(callback){\n\t\tthis.removeListener(\"change\", callback);\n\t}\n\n\t// Esconde a caixa de mensagem\n\tasync hide(){\n\t\tthis.data.visible = false;\n\t\tthis.commitChange();\n\t}\n\n\t// Exibe a caixa de mensagem\n\tasync show(){\n\t\tthis.data.visible = true;\n\t\tthis.data.progress = null;\n\t\tthis.commitChange();\n\t}\n\n\t// Exibe a barra de progresso\n\tasync progress(value){\n\t\tthis.data.progress = value;\n\t\tthis.commitChange();\n\t}\n}\n\nexport class LoadingElement extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onChangeData = this.onChangeData.bind(this);\n\n\t\tthis.state = props.LoadingEmitter.getData();\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.element = this.props.LoadingEmitter.getElement();\n\t\tthis.props.LoadingEmitter.addChangeListener(this.onChangeData);\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.props.LoadingEmitter.removeChangeListener(this.onChangeData);\n\t}\n\n\tonChangeData(){\n\t\tlet data = this.props.LoadingEmitter.getData();\n\t\tthis.setState(data);\n\t}\n\n\trender(){\n\t\tif(!this.state.visible){\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"Loading\">\n\t\t\t\t<div className=\"Loading-Spinner\"></div>\n\t\t\t\t<Progress value={this.state.progress} color=\"green\" className={this.state.progress === null ? \"d-none\" : null} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport {EventEmitter} from \"events\";\n\nimport Button from \"./Button.js\";\n\nexport class MessageBoxEmitter extends EventEmitter {\n\n\tconstructor(){\n\t\tsuper();\n\n\t\tthis.data = {\n\t\t\tbuttons: [],\n\t\t\tfocusOnClose: null,\n\t\t\tsize: \"md\",\n\t\t\ttext: null,\n\t\t\ttitle: null,\n\t\t\tvisible: false\n\t\t}\n\n\t\tthis.lastHide = new Date().getTime();\n\t}\n\n\t// Adiciona um metodo a ser executado quando houver uma mudanca\n\taddChangeListener(callback){\n\t\tthis.on(\"change\", callback);\n\t}\n\n\t// Metodo responsavel em propagar as mudancas dos dados\n\tcommitChange(){\n\t\tthis.emit(\"change\");\n\t}\n\n\t// Captura os dados atuais da classe\n\tgetData(){\n\t\treturn Object.assign({}, this.data);\n\t}\n\n\t// Retorna o elemento modal da caixa de mensagem\n\tgetElement(){\n\t\tif(this.element === undefined){\n\t\t\tthis.element = $(\"#__messagebox\").get(0);\n\t\t}\n\t\treturn this.element;\n\t}\n\n\t// Remove um metodo a ser executado quando houver uma mudanca\n\tremoveChangeListener(callback){\n\t\tthis.removeListener(\"change\", callback);\n\t}\n\n\t// Esconde a caixa de mensagem\n\thide(){\n\t\tthis.lastHide = new Date().getTime();\n\t\tthis.data.visible = false;\n\t\tthis.commitChange();\n\t}\n\n\t// Exibe a caixa de mensagem\n\tshow(settings){\n\t\tsettings = $.extend({\n\t\t\ttitle: null,\n\t\t\ttext: null,\n\t\t\tfocusOnClose: null,\n\t\t\tsize: \"md\",\n\t\t\tvisible: true,\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Ok\",\n\t\t\t\t\tcolor: \"blue\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t}, settings);\n\n\t\tlet time = 0;\n\t\tlet minTime = 750;\n\t\tlet dif = new Date().getTime() - this.lastHide;\n\t\tif(dif < minTime){\n\t\t\ttime = minTime - dif;\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tthis.data = $.extend(this.data, settings);\n\t\t\tthis.commitChange();\n\t\t}, time);\n\t}\n}\n\nexport class MessageBoxModal extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onChangeData = this.onChangeData.bind(this);\n\n\t\tthis.state = props.MessageBoxEmitter.getData();\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.props.MessageBoxEmitter.addChangeListener(this.onChangeData);\n\n\t\tlet element = this.props.MessageBoxEmitter.getElement();\n\t\t$(element).on(\"shown.bs.modal\", () => {\n\t\t\t$(element).find(\".btn\").first().focus();\n\t\t});\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.props.MessageBoxEmitter.removeChangeListener(this.onChangeData);\n\t}\n\n\tonChangeData(){\n\t\tlet data = this.props.MessageBoxEmitter.getData();\n\t\tif(data.visible !== this.state.visible){\n\t\t\tlet element = this.props.MessageBoxEmitter.getElement();\n\t\t\tif(data.visible){\n\t\t\t\t$(element).modal(\"show\");\n\t\t\t}else{\n\t\t\t\t$(element).modal(\"hide\");\n\t\t\t}\n\t\t}\n\t\tthis.setState(data);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div id=\"__messagebox\" className=\"messagebox modal fade\" data-backdrop=\"static\">\n\t\t\t\t<div className={\"modal-dialog modal-\" + this.state.size}>\n\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t<h4 className=\"modal-title\">{this.state.title}</h4>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"modal-body\" dangerouslySetInnerHTML={{__html: this.state.text}}></div>\n\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t{this.state.buttons.map(function(button, i){\n\t\t\t\t\t\t\t\treturn <Button key={i} color={button.color} text={button.text} icon={button.icon} onClick={button.onClick} />\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\n\n/*\nwindow.MessageBox.show({\n\t\ttext: \"Texto 1\",\n\t\tbuttons: [\n\t\t\t{\n\t\t\t\ttext: \"Ok\",\n\t\t\t\tonClick: () => {\n\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\ttext: \"Texto 2\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t]\n});\n*/\n","import $ from \"jquery\";\nimport {serialNumber, valorParametro} from \"../def/function\";\n\nexport default class Servidor {\n\n   constructor(Pool){\n      this.Pool = Pool;\n\n      this.cnpj = null;\n      this.serialNumber = null;\n   }\n\n   async api(nome, dados = {}, success = ()=>{}, error = ()=>{}){\n      let url = \"http://server.satflex.com.br/serv/terminal/\" + nome + \".php\";\n\n      $.ajax({\n         url: url,\n         type: \"POST\",\n         data: JSON.stringify(dados),\n         success: (result) => {\n            success(JSON.parse(result))\n         },\n         error: error\n      });\n   }\n\n   async atualizarRequisicao(requisicao, success, fail){\n      await this.carregarDados();\n\n      let status = null;\n      switch(requisicao.status){\n         case \"0\":\n\t\t\t\tstatus = \"1\";\n\t\t\t\tbreak;\n\t\t\tcase \"1\":\n\t\t\tcase \"2\":\n\t\t\t\tstatus = \"2\";\n\t\t\t\tbreak;\n         default:\n            break;\n      }\n\n      this.api(\"atualizar_requisicao\", {\n         numeroserie: this.serialNumber,\n         cnpj: this.cnpj,\n         requisicao: {\n\t\t\t\tidrequisicao: requisicao.referencia,\n\t\t\t\tstatus: status,\n\t\t\t\tresposta: requisicao.resposta\n         }\n      }, (result) => {\n         switch(result.status){\n            case \"0\":\n               success();\n               break;\n            case \"2\":\n               fail(result.message);\n               break;\n            default:\n               break;\n         }\n      }, () => {\n         fail(\"Houve uma falha na conexão com o servidor.\");\n      });\n\t}\n\n   async carregarDados(){\n      if(!this.cnpj || !this.serialnumber){\n         this.cnpj = await valorParametro(this.Pool, \"EMITENTE\", \"CNPJ\");\n         this.serialNumber = await serialNumber();\n      }\n   }\n\n   async verificarRequisicao(success, fail){\n      await this.carregarDados();\n\n      this.api(\"verificar_requisicao\", {\n         numeroserie: this.serialNumber,\n         cnpj: this.cnpj\n      }, (result) => {\n         switch(result.status){\n            case \"0\":\n               success(result.requisicao);\n               break;\n            case \"2\":\n               fail(result.message);\n               break;\n            default:\n               break;\n         }\n      }, () => {\n         fail(\"Houve uma falha na conexão com o servidor.\");\n      });\n\t}\n\n\tasync verificarTerminal(){\n      return await new Promise(async (resolve) => {\n         await this.carregarDados();\n\n         this.api(\"verificar_terminal\", {\n            numeroserie: this.serialNumber,\n            cnpj: this.cnpj\n         }, (result) => {\n            switch(result.status){\n               case \"0\":\n                  resolve(result.terminal.status);\n                  break;\n               case \"2\":\n                  resolve(false);\n                  break;\n               default:\n                  break;\n            }\n         }, () => {\n            resolve(false);\n         });\n      });\n\t}\n\n}\n","const pg = window.require(\"pg\");\n\nexport function Client(){\n\treturn pg.Client(Configuration());\n}\n\nexport function Pool(){\n\treturn new pg.Pool(Configuration());\n}\n\nfunction Configuration(){\n\treturn {\n\t\tuser: \"postgres\",\n\t\thost: \"127.0.0.1\",\n\t\tdatabase: \"satflex\",\n\t\tpassword: \"postgres\",\n\t\tport: 5432\n\t};\n}\n","import React from \"react\";\nimport \"../css/Content.css\";\n\nexport default class Content extends React.Component {\n\n\trender(){\n\t\treturn (\n\t\t\t<div id=\"content\" {...this.props}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport $ from \"jquery\";\nimport \"floatthead\";\n\nimport \"../css/DataGrid.css\";\n\nexport default class DataGrid extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.calcBlankSpace = this.calcBlankSpace.bind(this);\n\t\tthis.elementScroll = this.elementScroll.bind(this);\n\t\tthis.onClickHeadCell = this.onClickHeadCell.bind(this);\n\t\tthis.onScroll = this.onScroll.bind(this);\n\t\tthis.updateBlankSpace = this.updateBlankSpace.bind(this);\n\t\tthis.updateReceivedProps = this.updateReceivedProps.bind(this);\n\n\t\tvar nextProps = this.updateReceivedProps(props.header, props.data);\n\n\t\tthis.state = {\n\t\t\tdata: nextProps.data,\n\t\t\theader: nextProps.header,\n\t\t\tlimit: 100,\n\t\t\toffset: 0,\n\t\t\tblankSpace: {\n\t\t\t\tbottom: 0,\n\t\t\t\ttop: 0\n\t\t\t}\n\t\t};\n\n\t\tthis.scrollActive = true;\n\t\tthis.longScroll = false;\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.elementScroll().addEventListener(\"scroll\", this.onScroll);\n\t\tthis.element = ReactDOM.findDOMNode(this);\n\t\twindow.grid = this.element;\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.elementScroll().removeEventListener(\"scroll\", this.onScroll);\n\t}\n\n\tcomponentDidUpdate(){\n\t\tif(this.referenceElement && !this.longScroll){\n\t\t\tvar eScroll = this.elementScroll();\n\t\t\tvar eRefTop = $(this.referenceElement.element).position().top;\n\t\t\tthis.scrollActive = false;\n\n\t\t\tvar scrollTop = $(eScroll).scrollTop() - (eRefTop - this.referenceElement.top);\n\t\t\tif(scrollTop > this.element.scrollHeight){\n\t\t\t\tscrollTop = this.element.scrollHeight;\n\t\t\t}\n\n\t\t\t$(eScroll).scrollTop(scrollTop);\n\t\t\tthis.scrollActive = true;\n\t\t}\n\n\t\tif(this.firstUpdateBlankSpace !== true){\n\t\t\tthis.firstUpdateBlankSpace = true;\n\t\t\tthis.updateBlankSpace();\n\t\t}\n\n\t\t$(this.element).children(\"table\").floatThead();\n\t\t$(this.element).children(\"table\").floatThead(\"reflow\");\n\t}\n\n\tcomponentWillUpdate(){\n\t\tvar table = $(this.element).children(\"table\"); // Corpo da grade\n\t\tvar tr = $(table).children(\"tbody\").children(); // Lista com todas as linhas da grade, inclusive o BlankSpace\n\t\tvar tr50 = $(tr).eq(Math.floor(this.state.limit * 0.5));\n\t\tif($(tr50).length > 0){\n\t\t\tthis.referenceElement = {\n\t\t\t\telement: tr50,\n\t\t\t\ttop: $(tr50).position().top\n\t\t\t};\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\t// Trata os dados recebidos\n\t\tnextProps = this.updateReceivedProps(nextProps.header, nextProps.data);\n\n\t\t// Atualiza os dados\n\t\tthis.setState({\n\t\t\theader: nextProps.header,\n\t\t\tdata: nextProps.data\n\t\t});\n\n\t\t// Atualiza o tamanho dos BlankSpaces\n\t\tthis.firstUpdateBlankSpace = false;\n\t}\n\n\telementIsVisibleByScroll(elem, parent){\n\t\tif(!$(this.element).is(\":visible\")){\n\t\t\treturn false;\n\t\t}\n\n\t\tparent = (parent === undefined ? window : parent);\n\n\t\tvar parentTop = $(parent).scrollTop();\n\t\tvar parentBottom = parentTop + $(parent).height();\n\n\t\tvar elemTop = (parent === window ? $(elem).offset().top : $(elem).position().top);\n\t\tvar elemBottom = elemTop + $(elem).height();\n\n\t\tif(elemTop < parentTop && elemBottom > parentTop){\n\t\t\treturn true;\n\t\t}else if(elemTop > parentTop && elemBottom < parentBottom){\n\t\t\treturn true;\n\t\t}else if(elemTop < parentBottom && elemBottom > parentBottom){\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n\n\telementScroll(){\n\t\tif(this.props.height === undefined){\n\t\t\treturn window;\n\t\t}else{\n\t\t\treturn ReactDOM.findDOMNode(this);\n\t\t}\n\t}\n\n\tonClickHeadCell(e){\n\t\t// Captura a chave do elemento clicado\n\t\tvar key = $(e.target).attr(\"cellkey\");\n\n\t\t// Atualiza a ordenacao no grid\n\t\tvar cell = null;\n\t\tvar hIndex = null;\n\t\tvar hOrder = null;\n\t\tvar header = this.state.header;\n\t\tfor(var i in header){\n\t\t\tcell = header[i];\n\t\t\tif(cell.key === key){\n\t\t\t\thIndex = i;\n\t\t\t\thOrder = (cell.order === 1 ? -1 : 1);\n\t\t\t\tcell.order = hOrder;\n\t\t\t}else{\n\t\t\t\tcell.order = 0;\n\t\t\t}\n\t\t\theader[i] = cell;\n\t\t}\n\n\t\t// Atualiza a ordem dos dados\n\t\tvar data = this.state.data;\n\t\tdata.sort(function(a, b){\n\t\t\tif(a[\"data\"][hIndex][\"text\"] < b[\"data\"][hIndex][\"text\"])\n\t\t\t\treturn (hOrder === 1 ? -1 : 1);\n\t\t\tif(a[\"data\"][hIndex][\"text\"] > b[\"data\"][hIndex][\"text\"])\n\t\t\t\treturn (hOrder === 1 ? 1 : -1);\n\t\t\treturn 0;\n\t\t});\n\n\t\t// Atualiza o header no state\n\t\tthis.setState({\n\t\t\theader: header,\n\t\t\tdata: data\n\t\t});\n\t}\n\n\tonScroll(){\n\t\tif(!this.scrollActive){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(!$(this.element).is(\":visible\")){\n\t\t\treturn true;\n\t\t}\n\n\t\tvar eScroll = this.elementScroll(); // Elemento que esta controlando o Scroll (window, ou div principal da grade)\n\t\tif(this.currentScroll === undefined || Math.abs(this.currentScroll - $(eScroll).scrollTop()) > 50){\n\t\t\tthis.currentScroll = $(eScroll).scrollTop();\n\t\t}else{\n\t\t\treturn true;\n\t\t}\n\n\t\tvar datagrid = this.element; // Elemento principal da grade (div)\n\t\tvar table = $(datagrid).children(\"table\"); // Tabela da grade\n\t\tvar thead = $(table).children(\"thead\"); // Header da grade\n\t\tvar tr = $(table).children(\"tbody\").children(); // Lista com todas as linhas da grade, inclusive o BlankSpace\n\t\tvar bsFirst = $(tr).first(); // BlankSpace superior\n\t\tvar bsLast = $(tr).last(); // BlankSpace inferior\n\t\tvar trFirst = $(bsFirst).next(); // Primeira linha da grade, ignorando o BlankSpace\n\t\tvar trLast = $(bsLast).prev(); // Ultima linha da grade, ignorando o BlankSpace\n\t\tvar tr20 = $(tr).eq(Math.floor(this.state.limit * 0.2)); // Linha de posicao equivalente a 20% do total de linhas\n\t\tvar tr80 = $(tr).eq(Math.floor(this.state.limit * 0.8)); // Linha de posicao equivalente a 80% do total de linhas\n\n\t\tvar hTop = ($(thead).position().top - $(eScroll).scrollTop()) * -1;\n\t\tif(hTop < 0){\n\t\t\thTop = 0;\n\t\t}\n\n\t\tvar limit = this.state.limit;\n\t\tvar offset = this.state.offset;\n\t\tvar count = this.state.data.length;\n\n\t\tthis.longScroll = false;\n\n\t\tif(offset > 0 && (this.elementIsVisibleByScroll(trFirst, eScroll) || this.elementIsVisibleByScroll(tr20, eScroll))){\n\t\t\toffset = offset - Math.floor(limit / 2);\n\t\t\tif(offset < 0){\n\t\t\t\toffset = 0;\n\t\t\t}\n\t\t}else if(offset + limit < count && (this.elementIsVisibleByScroll(trLast, eScroll) || this.elementIsVisibleByScroll(tr80, eScroll))){\n\t\t\toffset = offset + Math.floor(limit / 2);\n\t\t}else if((this.elementIsVisibleByScroll(bsFirst, eScroll) || this.elementIsVisibleByScroll(bsLast, eScroll)) && (!this.elementIsVisibleByScroll(trFirst, eScroll) && !this.elementIsVisibleByScroll(trLast, eScroll))){\n\t\t\tvar currScroll = null;\n\t\t\tif(eScroll === window){\n\t\t\t\tcurrScroll = ($(eScroll).scrollTop() - $(datagrid).offset().top) / $(datagrid).height();\n\t\t\t}else{\n\t\t\t\tcurrScroll = $(eScroll).scrollTop() / $(table).height();\n\t\t\t}\n\t\t\toffset = Math.round(this.state.data.length * currScroll);\n\t\t\tthis.longScroll = true;\n\t\t}\n\n\t\tif(offset > count - limit){\n\t\t\toffset = count - limit;\n\t\t}\n\t\tif(offset < 0){\n\t\t\toffset = 0;\n\t\t}\n\n\t\tif(offset !== this.state.offset){\n\t\t\tvar blankSpace = this.calcBlankSpace(offset);\n\n\t\t\tif(this.initialBlankSpace === undefined){\n\t\t\t\tthis.initialBlankSpace = blankSpace;\n\t\t\t\tthis.initialBlankSpace.height = blankSpace.top + blankSpace.bottom;\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\toffset: offset,\n\t\t\t\tblankSpace: blankSpace\n\t\t\t});\n\t\t}\n\t}\n\n\tcalcBlankSpace(offset){\n\t\toffset = (offset === undefined ? this.state.offset : offset);\n\n\t\tvar data = this.state.data;\n\t\tvar limit = this.state.limit;\n\n\t\tvar table = $(this.element).children(\".table\"); // Tabela da grade\n\t\tvar tr = $(table).children(\"tbody\").children(); // Lista com todas as linhas da grade, inclusive o BlankSpace\n\t\tvar bsFirst = $(tr).first(); // BlankSpace superior\n\t\tvar trFirst = $(bsFirst).next(); // Primeira linha da grade, ignorando o BlankSpace\n\t\tvar trHeight = $(trFirst).height() - 5;\n\n\t\tvar top = offset * trHeight;\n\t\tvar bottom = (data.length - offset - limit) * trHeight;\n\n\t\tif(this.longScroll && this.initialBlankSpace !== undefined){\n\t\t\tvar eScroll = this.elementScroll();\n\n\t\t\tvar rowsHeight = $(tr).not(\":first, :last\").map(function(){\n\t\t\t\treturn $(this).height();\n\t\t\t}).get().reduce(((a, b) => a + b), 0);\n\n\t\t\ttop = $(eScroll).scrollTop() - (trHeight * 10);\n\t\t\tbottom = $(table).height() - rowsHeight - top;\n\n\t\t\tif(top > this.initialBlankSpace.height){\n\t\t\t\ttop = this.initialBlankSpace.height;\n\t\t\t}\n\t\t\tif(bottom > this.initialBlankSpace.height){\n\t\t\t\tbottom = this.initialBlankSpace.height;\n\t\t\t}\n\t\t}\n\n\t\tif(top < 0){\n\t\t\ttop = 0;\n\t\t}\n\t\tif(bottom < 0){\n\t\t\tbottom = 0;\n\t\t}\n\n\t\treturn {\n\t\t\ttop: top,\n\t\t\tbottom: bottom\n\t\t};\n\t}\n\n\tupdateBlankSpace(){\n\t\tthis.setState({\n\t\t\tblankSpace: this.calcBlankSpace()\n\t\t});\n\t}\n\n\tupdateReceivedProps(header, data){\n\t\theader = (header === undefined ? this.state.header : header);\n\t\tdata = (data === undefined ? this.state.data : data);\n\n\t\t// Trata os dados do cabecalho\n\t\tfor(let i in header){\n\t\t\tlet cell = header[i];\n\n\t\t\tif(typeof cell === \"string\"){\n\t\t\t\tcell = {\n\t\t\t\t\t\"text\": cell\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcell = $.extend({\n\t\t\t\talign: \"left\",\n\t\t\t\tkey: i,\n\t\t\t\torder: 0,\n\t\t\t\ttext: \"\"\n\t\t\t}, cell);\n\n\t\t\theader[i] = cell;\n\t\t}\n\n\t\t// Trata os dados principais da grade\n\t\tvar key = 0;\n\t\tfor(let i in data){\n\t\t\tlet row = data[i];\n\n\t\t\tif($.isArray(row)){\n\t\t\t\trow = {\n\t\t\t\t\tdata: row\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tdata[i] = row;\n\n\t\t\tfor(let j in data[i].data){\n\t\t\t\tlet cell = data[i].data[j];\n\n\t\t\t\tif(typeof cell === \"string\"){\n\t\t\t\t\tcell = {\n\t\t\t\t\t\t\"text\": cell\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tcell = $.extend({\n\t\t\t\t\talign: \"left\",\n\t\t\t\t\tkey: key++,\n\t\t\t\t\ttext: \"\",\n\t\t\t\t\twidth: null\n\t\t\t\t}, cell);\n\n\t\t\t\tdata[i].data[j] = cell;\n\t\t\t}\n\t\t}\n\n\t\treturn {header: header, data: data};\n\t}\n\n\trender(){\n\t\tvar data = this.state.data.slice(this.state.offset, (this.state.offset + this.state.limit));\n\t\treturn (\n\t\t\t<div className=\"DataGrid\" style={{height: this.props.height}}>\n\t\t\t\t<table className={\"DataGridTable table table-striped table-hover \" + this.props.className}>\n\t\t\t\t\t<DataGridHead header={this.state.header} onClickHeadCell={this.onClickHeadCell} />\n\t\t\t\t\t<DataGridBody data={data} blankSpace={this.state.blankSpace} />\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass DataGridBody extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<tbody>\n\t\t\t\t<DataGridBlankSpace height={this.props.blankSpace.top} />\n\t\t\t\t\t{this.props.data.map(function(row, i){\n\t\t\t\t\t\treturn <DataGridBodyRow row={row} key={i} />\n\t\t\t\t\t})}\n\t\t\t\t<DataGridBlankSpace height={this.props.blankSpace.bottom} />\n\t\t\t</tbody>\n\t\t)\n\t}\n}\n\nclass DataGridBodyCell extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<td className={\"text-\" + this.props.cell.align} onClick={this.props.cell.onClick} style={{width: this.props.cell.width}}>{this.props.cell.text}</td>\n\t\t)\n\t}\n}\n\nclass DataGridBodyRow extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<tr onClick={this.props.row.onClick}>\n\t\t\t\t{this.props.row.data.map(function(cell, i){\n\t\t\t\t\treturn <DataGridBodyCell cell={cell} key={i} />\n\t\t\t\t})}\n\t\t\t</tr>\n\t\t)\n\t}\n}\n\nclass DataGridHead extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t{this.props.header.map((cell, i) => {\n\t\t\t\t\t\treturn <DataGridHeadCell cell={cell} onClick={this.props.onClickHeadCell} key={i} />\n\t\t\t\t\t})}\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t)\n\t}\n\n}\n\nclass DataGridHeadCell extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<th className={\"text-\"+this.props.cell.align + \" DataGridHeadCellOrder-\"+this.props.cell.order} onClick={this.props.onClick} cellkey={this.props.cell.key}>\n\t\t\t\t{this.props.cell.text}\n\t\t\t</th>\n\t\t)\n\t}\n}\n\nclass DataGridBlankSpace extends React.Component {\n\trender(){\n\t\tvar height = (this.props.height === undefined ? 0 : this.props.height);\n\n\t\treturn (\n\t\t\t<tr>\n\t\t\t\t<td style={{border: 0, height: height, padding: 0}}></td>\n\t\t\t</tr>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {SwatchesPicker} from \"react-color\";\nimport $ from \"jquery\";\n\nimport \"../css/ColorInput.css\";\n\nexport default class ColorInput extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpicker: false,\n\t\t\tvalue: props.value\n\t\t};\n\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.onClick = this.onClick.bind(this);\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tvalue: nextProps.value\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tdocument.addEventListener(\"click\", this.onDocumentClick);\n\t\tthis.element = ReactDOM.findDOMNode(this);\n\t}\n\n\tcomponentWillUnmount(){\n\t\tdocument.removeEventListener(\"click\", this.onDocumentClick);\n\t}\n\n\tonChange(color, event){\n\t\tevent.persist();\n\n\t\tthis.setState({\n\t\t\tpicker: false,\n\t\t\tvalue: color.hex\n\t\t}, () => {\n\t\t\tif(this.props.onChange){\n\t\t\t\tlet target = $(event.target).parents(\"[class*='-picker']\").first().prev().get(0);\n\t\t\t\tevent.target = target;\n\t\t\t\tthis.props.onChange(event);\n\t\t\t}\n\t\t});\n\t}\n\n\tonClick(event){\n\t\tthis.setState({\n\t\t\tpicker: true\n\t\t});\n\t\tevent.preventDefault();\n\t}\n\n\tonDocumentClick(event){\n\t\tif(this.state.picker){\n\t\t\tlet found = false;\n\t\t\t$(this.element).find(\"*\").each((i, element) => {\n\t\t\t\tif(event.target === element){\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(!found){\n\t\t\t\tthis.setState({\n\t\t\t\t\tpicker: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\trender(){\n\t\tlet props = Object.assign({}, this.props);\n\n\t\tdelete props.value;\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<input {...props} value={this.state.value} onClick={this.onClick} />\n\t\t\t\t<SwatchesPicker value={this.state.value} onChange={this.onChange} className={this.state.picker ? null : \"d-none\"} />\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport $ from \"jquery\";\n\nimport ReactSelect from \"react-select\";\n//import \"react-select/dist/react-select.css\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class Select extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\toptions: (props.options === undefined ? [] : props.options),\n\t\t\tvalue: (props.value === undefined ? \"\" : props.value)\n\t\t};\n\n\t\tthis.getDBOptions = this.getDBOptions.bind(this);\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.verifyComponentId = this.verifyComponentId.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.element = ReactDOM.findDOMNode(this);\n\t\tthis.verifyComponentId();\n\t\tthis.getDBOptions();\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.getDBOptions(nextProps);\n\n\t\tif(nextProps.value !== this.props.value){\n\t\t\tthis.setState({\n\t\t\t\tvalue: nextProps.value\n\t\t\t});\n\t\t}\n\t}\n\n\tgetDBOptions(props){\n\t\tprops = (props === undefined ? this.props : props);\n\n\t\tif(props.dbtable === undefined){\n\t\t\treturn true;\n\t\t}\n\n\t\tvar dbtable = props.dbtable;\n\t\tvar dbcolumn = props.dbcolumn;\n\t\tvar dbfilter = props.dbfilter;\n\t\tvar dbparent = props.dbparent;\n\n\t\tif(dbcolumn === undefined){\n\t\t\tdbcolumn = \"descricao\";\n\t\t}\n\t\tif(dbfilter === undefined && dbparent !== undefined){\n\t\t\tlet parent = document.getElementById(dbparent);\n\t\t\tdbfilter = \"id\" + $(parent).attr(\"dbtable\") + \"=\" + $(parent).val();\n\t\t}\n\n\t\tif(this.ajaxDBOptions !== null && this.ajaxDBOptions !== undefined){\n\t\t\tthis.ajaxDBOptions.abort();\n\t\t\tthis.ajaxDBOptions = null;\n\t\t}\n\n\t\tlet query = \"SELECT id\"+dbtable+\", \"+dbcolumn+\" FROM \"+dbtable+\" ORDER BY 2\";\n\n\t\tthis.props.Pool.query({text: query, rowMode: \"array\"}, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet options = [];\n\t\t\tfor(let i in res.rows){\n\t\t\t\tlet row = res.rows[i];\n\t\t\t\toptions.push({value: row[0], label: row[1]});\n\t\t\t}\n\t\t\tif(this.state.options !== options){\n\t\t\t\tthis.setState({\n\t\t\t\t\toptions: options\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tonChange(option){\n\t\tlet value = (option ? option.value : null);\n\t\tthis.setState({\n\t\t\tvalue: value\n\t\t});\n\t\t$(`#${this.props.id}`).val(value);\n\t\tif(this.props.onChange){\n\t\t\tlet event = { target: { id: this.props.id, value: value } };\n\t\t\tthis.props.onChange(event);\n\t\t}\n\t}\n\n\tverifyComponentId(){\n\t\tif(this.props.id){\n\t\t\tlet input = $(\"[name='\" + this.props.id + \"']\");\n\t\t\tif(input.length > 0){\n\t\t\t\tinput.attr(\"id\", $(input).attr(\"name\"));\n\t\t\t}\n\t\t}\n\t}\n\n\trender(){\n\t\t// Captura as opcoes enviadas\n\t\tvar options = this.state.options;\n\n\t\t// Verifica se as opcoes estao no formato JSON e converte para array de JSON\n\t\tif(!Array.isArray(options)){\n\t\t\tvar optionsAux = [];\n\t\t\tfor(var value in options){\n\t\t\t\t// Estrutura padrao das opcoes do Select\n\t\t\t\toptionsAux.push({\n\t\t\t\t\tvalue: value,\n\t\t\t\t\tlabel: options[value]\n\t\t\t\t});\n\t\t\t}\n\t\t\toptions = optionsAux;\n\t\t}\n\n\t\t// Se nao foi passado um array como opcao, criar um array em branco\n\t\tif(!Array.isArray(options)){\n\t\t\toptions = [];\n\t\t}\n\n\t\treturn (\n\t\t\t<ReactSelect\n\t\t\t\tclearable={false}\n\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\tid={this.props.id}\n\t\t\t\tname={this.props.id}\n\t\t\t\tclassName=\"Select\"\n\t\t\t\tclassNamePrefix=\"Select\"\n\t\t\t\tonChange={this.onChange}\n\t\t\t\tonInputChange={this.verifyComponentId}\n\t\t\t\toptions={options}\n\t\t\t\tplaceholder=\"\"\n\t\t\t\tsearchable={false}\n\t\t\t\thasValue={true}\n\t\t\t\tsetValue={(this.state.value ? this.state.value : this.props.defaultValue)}\n\t\t\t/>\n\t\t);\n\t}\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport $ from \"jquery\";\n\nimport ColorInput from \"./ColorInput.js\";\nimport Select from \"./Select.js\";\n\nimport \"../css/FormControl.css\";\n\nexport default class FormControl extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onFocus = this.onFocus.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.element = ReactDOM.findDOMNode(this);\n\t}\n\n\tonFocus(){\n\t\tif(this.props.InformarValor){\n\t\t\tlet settings = this.props.InformarValor;\n\t\t\tif(settings.success === undefined){\n\t\t\t\tsettings.success = (valor) => {\n\t\t\t\t\t$(this.element).val(valor);\n\t\t\t\t\tif(this.props.onChange){\n\t\t\t\t\t\tlet event = { target: { id: this.props.id, value: valor } };\n\t\t\t\t\t\tthis.props.onChange(event);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\twindow.InformarValor.show(settings);\n\t\t}\n\t}\n\n\trender(){\n\t\tlet props = Object.assign({}, this.props);\n\n\t\tdelete props.InformarValor;\n\n\t\tlet value = props.value;\n\t\tif(value === null){\n\t\t\tvalue = \"\";\n\t\t}\n\n\t\t// Tratamento feito para para os modais de cadastro de produto e categoria\n\t\tif(value === undefined && props.id && props.id.substr(0, 5) === \"modal\"){\n\t\t\tvalue = \"\";\n\t\t}\n\n\t\tlet className = (props.className ? props.className.split(\" \") : []);\n\t\tclassName.push(\"form-control\");\n\n\t\tif(props.size){\n\t\t\tclassName.push(\"form-control-\" + props.size);\n\t\t}\n\n\t\tif(props.type === \"date\"){\n\t\t\tclassName.push(\"text-center\");\n\t\t}\n\n\t\tprops.className = className.join(\" \");\n\t\tprops.value = value;\n\n\t\tif(this.props.onFocus === undefined){\n\t\t\tprops.onFocus = this.onFocus;\n\t\t}\n\n\t\tswitch(props.type){\n\t\t\t// Se o componente for do tipo Checkbox\n\t\t\tcase \"checkbox\":\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"form-check\">\n\t\t\t\t\t\t<input type=\"checkbox\" id={this.props.id} className=\"form-check-input\" checked={value === \"S\"} defaultValue={this.props.defaultValue} disabled={this.props.disabled} onChange={this.props.onChange} onClick={this.props.onClick} />\n\t\t\t\t\t\t<label className=\"form-check-label\" htmlFor={this.props.id}>{this.props.label}</label>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\n\t\t\t// Se o componente for do tipo Color\n\t\t\tcase \"color\":\n\t\t\t\treturn (\n\t\t\t\t\t<ColorInput {...props} />\n\t\t\t\t)\n\n\t\t\t// Se o componente for do tipo Select\n\t\t\tcase \"select\":\n\t\t\t\tdelete props.type;\n\t\t\t\treturn (\n\t\t\t\t\t<Select {...props} />\n\t\t\t\t)\n\n\t\t\t// Se o componente for do tipo Select\n\t\t\tcase \"textarea\":\n\t\t\t\tdelete props.type;\n\t\t\t\treturn (\n\t\t\t\t\t<textarea {...props}></textarea>\n\t\t\t\t)\n\n\t\t\t// Se o componente for algum input padrao que nao necessita ser personalizado\n\t\t\tdefault:\n\t\t\t\treturn (\n\t\t\t\t\t<input {...props} />\n\t\t\t\t)\n\t\t}\n\t}\n}\n","import React from \"react\";\nimport \"../css/Label.css\";\n\nexport default class Label extends React.Component {\n\n\trender(){\n\t\treturn (\n\t\t\t<label {...this.props}>\n\t\t\t\t{this.props.children}\n\t\t\t</label>\n\t\t);\n\t}\n\n}\n","import React from \"react\";\nimport FormControl from \"./FormControl.js\";\nimport Label from \"./Label.js\";\nimport \"../css/FormGroup.css\";\n\nexport default class FormGroup extends React.Component {\n\n\trender(){\n\t\tlet props = Object.assign({}, this.props);\n\n\t\tlet className = [\"form-group\"];\n\t\tif(props.className){\n\t\t\tclassName.push(props.className);\n\t\t}\n\t\tif(props.warning){\n\t\t\tclassName.push(\"form-group-warning\");\n\t\t\tdelete props.warning;\n\t\t}\n\n\t\tif(props.InformarValor){\n\t\t\tif(props.InformarValor.title === undefined){\n\t\t\t\tprops.InformarValor.title = this.props.label;\n\t\t\t}\n\t\t}\n\n\t\tprops.className = props.inputClassName;\n\t\tdelete props.inputClassName;\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{[\"checkbox\"].indexOf(this.props.type) > -1 ? null : <Label htmlFor={this.props.id}>{this.props.label}</Label>}\n\t\t\t\t<FormControl {...props} />\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nexport default class Hr extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<hr {...this.props} />\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport FormGroup from \"../com/FormGroup.js\";\nimport Hr from \"../com/Hr.js\";\nimport Modal from \"../com/Modal.js\";\nimport Row from \"../com/Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class ModalCategoria extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tshow: this.props.show,\n\t\t\tshowDiv: \"principal\",\n\t\t\ttitle: null\n\t\t};\n\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.changeDiv = this.changeDiv.bind(this);\n\t\tthis.changeTitle = this.changeTitle.bind(this);\n\t\tthis.excluir = this.excluir.bind(this);\n\t\tthis.gravar = this.gravar.bind(this);\n\t\tthis.limpar = this.limpar.bind(this);\n\t\tthis.onChangeNcm = this.onChangeNcm.bind(this);\n\t\tthis.onChangeInput = this.onChangeInput.bind(this);\n\t\tthis.onChangeSincTributacao = this.onChangeSincTributacao.bind(this);\n\t\tthis.sincronizarTributacao = this.sincronizarTributacao.bind(this);\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tcarregar(idcategoria, callback){\n\t\tlet query = [\n\t\t\t\"SELECT categoria.descricao, categoria.dthrcriacao, categoria.cor,\",\n\t\t\t\"  categoria.sinctributacao, ncm.codigoncm, categoria.origem,\",\n\t\t\t\"  categoria.cfop, categoria.csosn, categoria.aliqicms, \",\n\t\t\t\"  categoria.cstpis, categoria.aliqpis, categoria.cstcofins, \",\n\t\t\t\"  categoria.aliqcofins, categoria.codcontribsocial, categoria.cest\",\n\t\t\t\"FROM categoria\",\n\t\t\t\"LEFT JOIN ncm USING (idncm)\",\n\t\t\t\"WHERE categoria.idcategoria = $1\"\n\t\t].join(\" \");\n\n\t\tthis.props.Pool.query(query, [idcategoria], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(res.rows.length === 0){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Categoria não encontrada\",\n\t\t\t\t\ttext: \"A categoria selecionada não pôde ser encontrada.\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet state = {};\n\t\t\tlet row = res.rows[0];\n\n\t\t\tfor(let id in row){\n\t\t\t\tlet value = row[id];\n\t\t\t\tswitch(id){\n\t\t\t\t\tcase \"dthrcriacao\":\n\t\t\t\t\t\tvalue = value.toLocaleString();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tvalue = value.format(2, \",\", \".\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tstate[\"input_\" + id] = value;\n\t\t\t}\n\t\t\tthis.setState(state);\n\n\t\t\tif(typeof callback === \"function\"){\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t}\n\n\tchangeDiv(name){\n\t\tthis.setState({\n\t\t\tshowDiv: name\n\t\t});\n\t}\n\n\tchangeTitle(props){\n\t\tif(props.idcategoria){\n\t\t\tprops.Pool.query(\"SELECT descricao FROM categoria WHERE idcategoria = $1\", [props.idcategoria], (err, res) => {\n\t\t\t\tif(err){\n\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\ttitle: \"Alterando categoria: \" + res.rows[0].descricao\n\t\t\t\t});\n\t\t\t});\n\t\t}else{\n\t\t\tthis.setState({\n\t\t\t\ttitle: \"Criando nova categoria\"\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tif(!nextProps.show){\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.changeTitle(nextProps);\n\n\t\tlet updateShowState = () => {\n\t\t\tthis.setState({\n\t\t\t\tshow: nextProps.show\n\t\t\t});\n\t\t};\n\n\t\tif(nextProps.idcategoria){\n\t\t\tthis.carregar(nextProps.idcategoria, updateShowState);\n\t\t}else{\n\t\t\tthis.limpar();\n\t\t\tupdateShowState();\n\t\t}\n\t}\n\n\texcluir(){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Excluír categoria\",\n\t\t\ttext: \"Tem certeza que deseja excluír a categoria <b>\" + this.state.input_descricao + \"</b>?\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tthis.props.Pool.query(\"DELETE FROM categoria WHERE idcategoria = $1\", [this.props.idcategoria], (err, res) => {\n\t\t\t\t\t\t\tif(err){\n\t\t\t\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tshow: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\twindow.FastMessage.show(\"Categoria excluída com sucesso.\");\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Não\",\n\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t})\n\t}\n\n\tasync gravar(){\n\t\tlet query = null;\n\n\t\tlet columns = [];\n\t\tlet values = [];\n\t\tfor(let name in this.state){\n\t\t\tif(name.substr(0, 6) === \"input_\"){\n\t\t\t\tlet name2 = name.replace(\"input_\", \"\");\n\t\t\t\tlet value = this.state[name];\n\n\t\t\t\tif(name2 === \"codigoncm\" && value){\n\t\t\t\t\ttry{\n\t\t\t\t\t\tlet res = await this.props.Pool.query(\"SELECT idncm FROM ncm WHERE codigoncm = $1\", [value]);\n\t\t\t\t\t\tif(res.rows.length === 0){\n\t\t\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\t\t\ttitle: \"NCM inexistente\",\n\t\t\t\t\t\t\t\ttext: \"O código de NCM \" + value + \" não pôde ser encontrado.<br>Verifique se foi informado corretamente.\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tname2 = \"idncm\";\n\t\t\t\t\t\tvalue = res.rows[0].idncm;\n\t\t\t\t\t}catch(err) {\n\t\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif([\"idcategoria\", \"dthrcriacao\"].indexOf(name2) > -1){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tswitch(name2){\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tif(value){\n\t\t\t\t\t\t\tvalue = value.toFloat();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcolumns.push(name2);\n\t\t\t\tvalues.push(value);\n\t\t\t}\n\t\t}\n\n\t\tif(this.props.idcategoria){\n\t\t\tlet num = 1;\n\t\t\tlet sets = [];\n\t\t\tfor(let i in columns){\n\t\t\t\tsets.push(columns[i] + \" = $\" + num++);\n\t\t\t}\n\t\t\tquery = \"UPDATE categoria SET \" + sets.join(\", \") + \" WHERE idcategoria = \" + this.props.idcategoria;\n\t\t}else{\n\t\t\tlet sets = [];\n\t\t\tfor(let i = 0; i < columns.length; i++){\n\t\t\t\tsets.push(\"$\" + (i + 1));\n\t\t\t}\n\t\t\tquery = \"INSERT INTO categoria (\" + columns.join(\", \") + \") VALUES (\" + sets.join(\", \") + \")\";\n\t\t}\n\n\t\tthis.props.Pool.query(query, values, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.FastMessage.show(\"Categoria gravada com sucesso.\");\n\t\t});\n\t}\n\n\tlimpar(){\n\t\tlet state = {};\n\t\tfor(let name in this.state){\n\t\t\tif(name.substr(0, 6) === \"input_\"){\n\t\t\t\tstate[name] =  null;\n\t\t\t}\n\t\t}\n\t\tthis.setState(state);\n\t}\n\n\tonChangeInput(event, callback){\n\t\tlet element = event.target;\n\t\tlet id = element.id.replace(\"modalcategoria-\", \"\");\n\t\tlet value = element.value;\n\t\tif(element.type === \"checkbox\"){\n\t\t\tvalue = (element.checked ? \"S\" : \"N\");\n\t\t}\n\n\t\tthis.setState({\n\t\t\t[\"input_\" + id]: value\n\t    }, callback);\n\t}\n\n\tonChangeNcm(event){\n\t\tthis.onChangeInput(event, () => {\n\t\t\tthis.sincronizarTributacao();\n\t\t});\n\t}\n\n\tonChangeSincTributacao(event){\n\t\tthis.onChangeInput(event, () => {\n\t\t\tthis.sincronizarTributacao();\n\t\t});\n\t}\n\n\tsincronizarTributacao(){\n\t\tif(this.state.input_sinctributacao !== \"S\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tlet query = [\n\t\t\t\"SELECT origem, cfop, csosn, aliqicms, cstpis, aliqpis, \",\n\t\t\t\"  cstcofins, aliqcofins, codcontribsocial, cest\",\n\t\t\t\"FROM ncm\",\n\t\t\t\"WHERE codigoncm = $1\"\n\t\t].join(\" \");\n\n\t\tthis.props.Pool.query(query, [this.state.input_codigoncm], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(res.rows.length === 0){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"NCM não encontrado\",\n\t\t\t\t\ttext: \"O NCM informado na categoria não pôde ser encontrado.\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet state = {};\n\t\t\tlet row = res.rows[0];\n\t\t\tfor(let id in row){\n\t\t\t\tlet value = row[id];\n\t\t\t\tswitch(id){\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tvalue = value.format(2, \",\", \".\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tstate[\"input_\" + id] = value;\n\t\t\t}\n\t\t\tthis.setState(state);\n\t\t});\n\t}\n\n\tshouldComponentUpdate(nextProps){\n\t\treturn nextProps.show;\n\t}\n\n\trender(){\n\t\tlet origemOptions = {\n\t\t\t\"0\": \"0 - Nacional, exceto as indicadas nos códigos 3, 4, 5 e 8\",\n\t\t\t\"1\": \"1 - Estrangeira - Importação direta, exceto a indicada no código 6\",\n\t\t\t\"2\": \"2 - Estrangeira - Adquirida no mercado interno, exceto a indicada no código 7\",\n\t\t\t\"3\": \"3 - Nacional, mercadoria ou bem com Conteúdo de Importação superior a 40% e inferior ou igual a 70%\",\n\t\t\t\"4\": \"4 - Nacional, cuja produção tenha sido feita em conformidade com os processos produtivos básicos de que tratam o Decreto-Lei nº 288/67, e as Leis nºs 8.248/91, 8.387/91, 10.176/01 e 11.484/ 07\",\n\t\t\t\"5\": \"5 - Nacional, mercadoria ou bem com Conteúdo de Importação inferior ou igual a 40%\",\n\t\t\t\"6\": \"6 - Estrangeira - Importação direta, sem similar nacional, constante em lista da Resolução CAMEX nº 79/2012 e gás natural\",\n\t\t\t\"7\": \"7 - Estrangeira - Adquirida no mercado interno, sem similar nacional, constante em lista da Resolução CAMEX nº 79/2012 e gás natural\",\n\t\t\t\"8\": \"8 - Nacional, mercadoria ou bem com Conteúdo de Importação superior a 70%\"\n\t\t};\n\n\t\treturn (\n\t\t\t<Modal title={this.state.title} size=\"lg\" show={this.state.show} beforeClose={this.props.beforeClose} afterClose={this.props.afterClose} closeOnOutClick={false}>\n\t\t\t\t<Row>\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-descricao\" className=\"col-5\" label=\"Descrição\" value={this.state.input_descricao} onChange={this.onChangeInput} />\n\t\t\t\t\t<FormGroup type=\"color\" id=\"modalcategoria-cor\" className=\"col-3\" label=\"Cor representativa\" value={this.state.input_cor} onChange={this.onChangeInput} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-dthrcriacao\" className=\"col-4\" label=\"Criado em\" readOnly={true} value={this.state.input_dthrcriacao} onChange={this.onChangeInput} disabled={true} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-codigoncm\" label=\"NCM da categoria\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"9999.99.99\"}} value={this.state.input_codigoncm} onChange={this.onChangeNcm} />\n\t\t\t\t\t<FormGroup type=\"checkbox\" id=\"modalcategoria-sinctributacao\" label=\"Usar as mesmas tributações da categoria\" className=\"col-9\" value={this.state.input_sinctributacao} onChange={this.onChangeSincTributacao} />\n\t\t\t\t\t<FormGroup type=\"select\" id=\"modalcategoria-origem\" className=\"col-6\" label=\"Origem do categoria\" options={origemOptions} value={this.state.input_origem} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-cfop\" label=\"CFOP\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"9.999\"}} value={this.state.input_cfop} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"select\" id=\"modalcategoria-csosn\" className=\"col-3\" inputClassName=\"text-center\" label=\"CSOSN\" options={{\"102\": \"102\", \"300\": \"300\", \"400\": \"400\", \"500\": \"500\"}} value={this.state.input_csosn} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-aliqicms\" label=\"Alíquota de ICMS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqicms} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-cstpis\" label=\"CST do PIS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_cstpis} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-aliqpis\" label=\"Alíquota de PIS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqpis} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-cstcofins\" label=\"CST do Cofins\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_cstcofins} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-aliqcofins\" label=\"Alíquota de Cofins\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqcofins} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-codcontribsocial\" label=\"Contribuição social\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_codcontribsocial} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-cest\" label=\"CEST\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99.999.99\"}} value={this.state.input_cest} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t</Row>\n\t\t\t\t<Hr className=\"mt-0\" />\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Button text=\"Excluír\" icon=\"bin\" color=\"red\" onClick={this.excluir} className={this.props.idcategoria ? \"\" : \"d-none\"} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\" className=\"text-right\">\n\t\t\t\t\t\t<Button text=\"Cancelar\" icon=\"undo\" color=\"red\" onClick={this.cancelar} />\n\t\t\t\t\t\t<Button text=\"Gravar categoria\" icon=\"thumbs-up\" color=\"green\" className=\"ml-2\" onClick={this.gravar} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport \"../css/Title.css\";\n\nexport default class Title extends React.Component {\n\trender(){\n\t\tlet text = (this.props.text !== undefined ? this.props.text : this.props.children);\n\t\tlet model = (this.props.model !== undefined ? this.props.model : 1);\n\n\t\treturn (\n\t\t\t<h1 className={\"title-model-\" + model}>\n\t\t\t\t{text}\n\t\t\t</h1>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport {Redirect} from \"react-router\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport DataGrid from \"../com/DataGrid.js\";\nimport FormControl from \"../com/FormControl.js\";\nimport Icon from \"../com/Icon.js\";\nimport ModalCategoria from \"../com/ModalCategoria.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/Categoria.css\";\n\nexport default class Categoria extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdataGrid: [],\n\t\t\tpesquisa: \"\",\n\t\t\tidcategoria: null,\n\t\t\tshowModalCategoria: false,\n\t\t\tredirectToProduto: false\n\t\t};\n\n\t\tthis.beforeCloseModal = this.beforeCloseModal.bind(this);\n\t\tthis.loadDataGrid = this.loadDataGrid.bind(this);\n\t\tthis.novaCategoria = this.novaCategoria.bind(this);\n\t\tthis.onChangePesquisa = this.onChangePesquisa.bind(this);\n\t\tthis.onClickBtnProduto = this.onClickBtnProduto.bind(this);\n\t\tthis.onKeyUpPesquisa = this.onKeyUpPesquisa.bind(this);\n\t\tthis.pesquisaLimpar = this.pesquisaLimpar.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tbeforeCloseModal(){\n\t\tthis.setState({\n\t\t\tshowModalCategoria: false\n\t\t}, () => {\n\t\t\tthis.loadDataGrid();\n\t\t});\n\t}\n\n\tcarregarCategoria(idcategoria){\n\t\tthis.setState({\n\t\t\tshowModalCategoria: true,\n\t\t\tidcategoria: idcategoria\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.loadDataGrid();\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.Pool.end();\n\t}\n\n\tloadDataGrid(){\n\t\tlet query = [\n\t\t\t\"SELECT categoria.idcategoria, categoria.descricao, \",\n\t\t\t\"  ncm.codigoncm AS codigoncm, categoria.dthrcriacao,\",\n\t\t\t\"  (SELECT COUNT(idproduto) FROM produto WHERE idcategoria = categoria.idcategoria) AS produtos\",\n\t\t\t\"FROM categoria\",\n\t\t\t\"LEFT JOIN ncm USING (idncm)\",\n\t\t\t\"WHERE categoria.descricao ILIKE '%'||$1||'%'\",\n\t\t\t\"ORDER BY categoria.descricao\"\n\t\t].join(\" \");\n\n\t\tthis.Pool.query(query, [this.state.pesquisa], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tlet data = [];\n\t\t\t\tfor(let i in res.rows){\n\t\t\t\t\tlet row = res.rows[i];\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{text: row.descricao, align: \"left\"},\n\t\t\t\t\t\t\t{text: row.codigoncm, align: \"center\"},\n\t\t\t\t\t\t\t{text: row.produtos, align: \"center\"},\n\t\t\t\t\t\t\t{text: row.dthrcriacao.toLocaleString(), align: \"center\"}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\tthis.carregarCategoria(row.idcategoria);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tdataGrid: data\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tnovaCategoria(){\n\t\tthis.setState({\n\t\t\tshowModalCategoria: true,\n\t\t\tidcategoria: null\n\t\t});\n\t}\n\n\tonChangePesquisa(event){\n\t\tthis.setState({\n\t\t\tpesquisa: event.target.value\n\t\t});\n\t}\n\n\tonClickBtnProduto(){\n\t\tthis.setState({\n\t\t\tredirectToProduto: true\n\t\t});\n\t}\n\n\tonKeyUpPesquisa(event){\n\t\tif(event.keyCode === 13){\n\t\t\tthis.loadDataGrid();\n\t\t}\n\t}\n\n\tpesquisaLimpar(){\n\t\tthis.setState({\n\t\t\tpesquisa: \"\"\n\t\t}, () => {\n\t\t\tthis.loadDataGrid();\n\t\t});\n\t}\n\n\trender(){\n\t\tif(this.state.redirectToProduto){\n\t\t\treturn <Redirect to=\"/produto\" />\n\t\t}\n\n\t\tlet dataGridHeader = [\n\t\t\t{text: \"Descrição\", align: \"left\"},\n\t\t\t{text: \"NCM\", align: \"center\"},\n\t\t\t{text: \"Produtos\", align: \"center\"},\n\t\t\t{text: \"Criado em\", align: \"center\"}\n\t\t];\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title model=\"2\">Cadastro de <b>Categorias</b></Title>\n\t\t\t\t<Row className=\"mb-4\">\n\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t<FormControl type=\"search\" id=\"pesquisa\" value={this.state.pesquisa} placeholder=\"Pesquise uma categoria...\" onKeyUp={this.onKeyUpPesquisa} onChange={this.onChangePesquisa} />\n\t\t\t\t\t\t<Icon name=\"cross\" id=\"pesquisa-limpar\" onClick={this.pesquisaLimpar} className={this.state.pesquisa.length > 0 ? null : \"d-none\"} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"2\" className=\"pl-0\">\n\t\t\t\t\t\t<Button text=\"Buscar\" icon=\"search\" color=\"green\" onClick={this.loadDataGrid} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\" className=\"text-right\">\n\t\t\t\t\t\t<Button text=\"Produtos\" icon=\"layers\" color=\"blue\" className=\"mr-3\" onClick={this.onClickBtnProduto} />\n\t\t\t\t\t\t<Button text=\"Nova categoria\" icon=\"plus\" color=\"green\" onClick={this.novaCategoria} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<DataGrid header={dataGridHeader} data={this.state.dataGrid} />\n\t\t\t\t<ModalCategoria Pool={this.Pool} show={this.state.showModalCategoria} idcategoria={this.state.idcategoria} beforeClose={this.beforeCloseModal} />\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import ftp from \"ftp\";\nimport { applicationDirectory, defaultMessageBoxError, valorParametro } from \"../def/function.js\";\n\nconst fs = window.require(\"fs\");\nconst electron = window.require(\"electron\");\n\nexport default class Atualizacao {\n\n\tconstructor(Pool){\n\t\tthis.Pool = Pool;\n\n\t\tthis.atualizarAplicativoParcial = this.atualizarAplicativoParcial.bind(this);\n\t\tthis.atualizarBancoDeDados = this.atualizarBancoDeDados.bind(this);\n\t\tthis.baixarAplicativoParcial = this.baixarAplicativoParcial.bind(this);\n\t\tthis.verificarAtualizacao = this.verificarAtualizacao.bind(this);\n\n\t\tthis.fs = fs;\n\t}\n\n\tasync atualizarAplicativoParcial(callBack){\n\t\tthis.baixarAplicativoParcial(async (err) => {\n\t\t\tif(err) return callBack(err);\n\t\t\tawait this.atualizarBancoDeDados((err) => {\n\t\t\t\tif(err) return callBack(err);\n\n\t\t\t\t// Sucesso\n\t\t\t\tcallBack();\n\t\t\t});\n\t\t});\n\t}\n\n\tasync atualizarBancoDeDados(callBack){\n\t\tif(this.ftp === undefined){\n\t\t\tthis.ftp = ftp;\n\t\t}\n\n\t\t// Funcao usada para ler um arquivo no FTP sem necessitar de callback\n\t\tlet ftpReadSync = async (client, filename) => {\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tclient.get(filename, false, (err, stream) => {\n\t\t\t\t\tif(err) throw new Error(err);\n\n\t\t\t\t\tlet chunks = [];\n\t\t\t\t\tstream.on(\"data\", (chunk) => {\n\t\t\t\t\t\tchunks.push(chunk.toString());\n\t\t\t\t\t}).on(\"end\", () => {\n\t\t\t\t\t\tresolve(chunks.join(\"\"));\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\t// Verifica ultima instrucao executada\n\t\tlet paramAtualizacaoInstrucaoSQL = parseInt(await valorParametro(this.Pool, \"ATUALIZACAO\", \"INSTRUCAOSQL\"), 10);\n\n\t\ttry{\n\t\t\t// Conecta no servidor FTP\n\t\t\tlet client = new this.ftp();\n\t\t\tclient.on(\"ready\", () => {\n\t\t\t\tclient.list(\"/sql\", false, async (err, list) => {\n\t\t\t\t\tif(err) return callBack(err);\n\n\t\t\t\t\t// Verifica quais instrucoes devem ser executadas\n\t\t\t\t\tlet arrArquivoSQL = [];\n\t\t\t\t\tfor(let file of list){\n\t\t\t\t\t\tlet numeroInstrucaoSQL = parseInt(file.name.replace(\".sql\", \"\"), 10);\n\t\t\t\t\t\tif(numeroInstrucaoSQL > paramAtualizacaoInstrucaoSQL){\n\t\t\t\t\t\t\tarrArquivoSQL.push(file.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tarrArquivoSQL.sort();\n\n\t\t\t\t\t// Abre os arquivos e atualiza o banco de dados\n\t\t\t\t\ttry{\n\t\t\t\t\t\tfor(let i in arrArquivoSQL){\n\t\t\t\t\t\t\tlet arquivoSQL = arrArquivoSQL[i];\n\t\t\t\t\t\t\tlet instrucaoSQL = await ftpReadSync(client, \"/sql/\" + arquivoSQL);\n\t\t\t\t\t\t\tconsole.log(\"Executar SQL: \\n\"+instrucaoSQL);\n\t\t\t\t\t\t\tawait this.Pool.query(instrucaoSQL);\n\t\t\t\t\t\t\tconsole.log(\"SQL Finalizada\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcallBack();\n\t\t\t\t\t}catch(err){\n\t\t\t\t\t\tconsole.log(\"Erro ao atualizar BD: \" + err.message);\n\t\t\t\t\t\tcallBack(err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).connect({\n\t\t\t\thost: \"websac.net\",\n\t\t\t\tport: \"21\",\n\t\t\t\tuser: \"satflex-update\",\n\t\t\t\tpassword: \"automacao\"\n\t\t\t});\n\t\t}catch(err){\n\t\t\tcallBack(err);\n\t\t}\n\t}\n\n\tbaixarAplicativoParcial(callBack){\n\t\tif(window.__ignoreAppUpdate === true){\n\t\t\treturn callBack();\n\t\t}\n\n\t\tif(this.childProcess === undefined){\n\t\t\tthis.childProcess = window.require('childProcess');\n\t\t}\n\n\t\tthis.childProcess.exec(\"git --version\", [], (err) => {\n\t\t\tif(err) return callBack(new Error(\"git-not-found\"));\n\n\t\t\tlet gitDir = applicationDirectory() + \"/.git\";\n\t\t\tconsole.log(\"Diretório .git: \" + gitDir);\n\n\t\t\ttry{\n\t\t\t\tthis.childProcess.execSync(\"git config --global git.user \\\"satflex@controlware.com.br\\\"\");\n\t\t\t}catch(err){\n\t\t\t\treturn callBack(err);\n\t\t\t}\n\n\t\t\tlet spawn = this.childProcess.spawn(\"cd \\\"\" + applicationDirectory() + \"\\\" && git pull\", {shell: true});\n\t\t\tspawn.stdout.on(\"data\", (data) => {\n\t\t\t\tconsole.log(\"stdout: \" + data.toString());\n\t\t\t});\n\t\t\tspawn.stderr.on(\"data\", (data) => {\n\t\t\t\tconsole.log(\"stderr: \" + data.toString());\n\t\t\t});\n\t\t\tspawn.on(\"close\", (data) => {\n\t\t\t\tconsole.log(\"exit: \" + data.toString());\n\t\t\t\tcallBack();\n\t\t\t});\n\t\t\t/*\n\t\t\tthis.childProcess.exec(commands.join(\" && \"), [], (err) => {\n\t\t\t\tif(err){\n\t\t\t\t\tcallBack(err);\n\t\t\t\t}else{\n\t\t\t\t\tcallBack();\n\t\t\t\t}\n\t\t\t});\n\t\t\t*/\n\t\t});\n\t}\n\n\tbaixarGit(){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Git não está instalado\",\n\t\t\ttext: \"Para atualizar o SAT-Flex, é necessário que o Git esteja instalado.\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Baixar o Git\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\ticon: \"github\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tlet shell = electron.shell;\n\t\t\t\t\t\tshell.openExternal(\"ftp://instalacao:123@websac.net/SATFlex/Git-2.18.0-32-bit.exe\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Mais tarde...\",\n\t\t\t\t\tcolor: \"blue\",\n\t\t\t\t\ticon: \"undo\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tversaoAtual(){\n\t\tlet fileName = applicationDirectory() + \"/package.json\";\n\t\treturn window.require(fileName).version;\n\t}\n\n\tverificarAtualizacao(){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Atualização do SAT-Flex\",\n\t\t\ttext: \"Deseja iniciar a atualização do SAT-Flex agora?<br>Isso pode levar alguns minutos.\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\twindow.Loading.show();\n\t\t\t\t\t\tconsole.log(\"Inicio da atualização: \" + new Date().toLocaleString());\n\t\t\t\t\t\tthis.atualizarAplicativoParcial((err) => {\n\t\t\t\t\t\t\tconsole.log(\"Fim da atualização: \" + new Date().toLocaleString());\n\t\t\t\t\t\t\twindow.Loading.hide();\n\n\t\t\t\t\t\t\tif(err){\n\t\t\t\t\t\t\t\tif(err.message === \"git-not-found\"){\n\t\t\t\t\t\t\t\t\tthis.baixarGit();\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\t\t\ttitle: \"Atualizado com sucesso!\",\n\t\t\t\t\t\t\t\ttext: \"O seu SAT-Flex foi atualizado com sucesso!<br>A aplicação será reinciada.\",\n\t\t\t\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\t\t\t\ttext: \"Ok\",\n\t\t\t\t\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\twindow.require('electron').ipcRenderer.sendSync(\"restart\");\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Não\",\n\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n}\n","import React from \"react\";\nimport {Redirect} from \"react-router\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport Icon from \"../com/Icon.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport Atualizacao from \"../com/Atualizacao.js\";\n\nimport {serialNumber} from \"../def/function.js\";\n\nimport \"../css/Configuracoes.css\";\n\nexport default class Configuracoes extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tredirect: null,\n\t\t\tserialnumber: null,\n\t\t\tversaoAtual: null\n\t\t};\n\n\t\tthis.verificarAtualizacao = this.verificarAtualizacao.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t\tthis.Atualizacao = new Atualizacao(this.Pool);\n\t}\n\n\tcomponentDidMount(){\n\t\t(async () => {\n\t\t\tthis.setState({\n\t\t\t\tserialnumber: await serialNumber()\n\t\t\t});\n\t\t})();\n\t}\n\n\tverificarAtualizacao(){\n\t\tthis.Atualizacao.verificarAtualizacao();\n\t}\n\n\trender(){\n\t\tif(this.state.redirect){\n\t\t\treturn <Redirect to={this.state.redirect} />\n\t\t}\n\n\t\tlet versaoAtual = this.Atualizacao.versaoAtual();\n\n\t\tlet serialnumber = null;\n\t\tif(this.state.serialnumber){\n\t\t\tserialnumber = <b>{this.state.serialnumber}</b>;\n\t\t}else{\n\t\t\tserialnumber = <Icon name=\"spinner3\" className=\"ani-spin\" />\n\t\t}\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Configurações</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"8\" offset=\"2\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text={\"Verificar atualização<br><small>versão atual: \"+versaoAtual+\"</small>\"} icon=\"safari\" size=\"xxl\" block={true} onClick={this.verificarAtualizacao} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text=\"Parâmetros<br>do sistema\" icon=\"widgets\" size=\"xxl\" block={true} onClick={() => {this.setState({redirect: \"/parametro\"})}} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text=\"Ferramentas\" icon=\"tools\" size=\"xxl\" block={true} onClick={() => {this.setState({redirect: \"/ferramentas\"})}} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<div className=\"serialnumber\">\n\t\t\t\t\t<small>Número de série</small><br />\n\t\t\t\t\t{serialnumber}\n\t\t\t\t</div>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport \"../css/SubTitle.css\";\n\nexport default class SubTitle extends React.Component {\n\trender(){\n\t\tlet text = (this.props.text !== undefined ? this.props.text : this.props.children);\n\t\tlet model = (this.props.model !== undefined ? this.props.model : 1);\n\n\t\treturn (\n\t\t\t<h3 className={\"subtitle-model-\" + model}>\n\t\t\t\t{text}\n\t\t\t</h3>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport nodeZip from \"node-zip\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport Email from \"../com/Email.js\";\nimport FormGroup from \"../com/FormGroup.js\";\nimport Row from \"../com/Row.js\";\nimport SubTitle from \"../com/SubTitle.js\";\nimport Title from \"../com/Title.js\";\n\nimport {valorParametro, writeTemporary} from \"./../def/function.js\";\n\nexport default class Contador extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.atualizarEmailContador = this.atualizarEmailContador.bind(this);\n\t\tthis.carregarDocumentos = this.carregarDocumentos.bind(this);\n\t\tthis.enviarEmail = this.enviarEmail.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tasync atualizarEmailContador(){\n\t\tawait this.Pool.query(\"UPDATE parametro SET valor = $1 WHERE grupo = $2 AND nome = $3\", [$(\"#email\").val(), \"CONTADOR\", \"EMAIL\"]);\n\t}\n\n\tasync carregarDocumentos(){\n\t\tlet query = [\n\t\t\t\"SELECT chave, xml, chavecanc, xmlcanc\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE xml IS NOT NULL\",\n\t\t\t\"  AND chave IS NOT NULL\",\n\t\t\t\"  AND dthrcriacao::DATE BETWEEN $1 AND $2\",\n\t\t\t\"ORDER BY dthrcriacao\"\n\t\t].join(\" \");\n\t\tlet res = await this.Pool.query(query, [$(\"#dtinicial\").val(), $(\"#dtfinal\").val()]);\n\t\treturn res.rows;\n\t}\n\n\tcarregarEmailContador(){\n\t\tvalorParametro(this.Pool, \"CONTADOR\", \"EMAIL\", (valor) => {\n\t\t\t$(\"#email\").val(valor);\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarEmailContador();\n\t}\n\n\tasync enviarEmail(){\n\t\tlet destinatario = $(\"#email\").val();\n\t\tlet dtinicial = $(\"#dtinicial\").val();\n\t\tlet dtfinal = $(\"#dtfinal\").val();\n\n\t\t// Verifica se os campos foram preenchidos\n\t\tif(destinatario.length === 0){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Informe o e-mail do contador antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\tif(dtinicial.length === 0){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Informe a data inicial antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\tif(dtfinal.length === 0){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Informe a data final antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\t// Abre o loading\n\t\twindow.Loading.show();\n\n\t\t// Carrega o nome fantasia do cliente\n\t\tlet remetente = await valorParametro(this.Pool, \"EMITENTE\", \"NOMEFANTASIA\");\n\n\t\t// Reformata as datas de 'Y-m-d' para 'd/m/Y'\n\t\tdtinicial = dtinicial.split(\"-\").reverse().join(\"/\");\n\t\tdtfinal = dtfinal.split(\"-\").reverse().join(\"/\");\n\n\t\t// Atualiza o email do contador\n\t\tawait this.atualizarEmailContador();\n\n\t\t// Carrega os documentos\n\t\tlet documentos = await this.carregarDocumentos();\n\n\t\t// Verifica se existe algum documento para ser enviado\n\t\tif(documentos.length === 0){\n\t\t\twindow.Loading.hide();\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Nenhum documento fiscal foi encontrado no período especificado.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\t// Cria o arquivo ZIP\n\t\tlet zip = new nodeZip();\n\t\tdocumentos.forEach((documento) => {\n\t\t\tif(documento.xml){\n\t\t\t\tzip.file(documento.chave + \".xml\", documento.xml);\n\t\t\t}\n\t\t\tif(documento.xmlcanc){\n\t\t\t\tzip.file(documento.chavecanc + \".xml\", documento.xmlcanc);\n\t\t\t}\n\t\t});\n\t\tlet zippedData = zip.generate({\n\t\t\tbase64: false,\n\t\t\tcompression: \"DEFLATE\"\n\t\t});\n\t\tlet filename = new Date().toISOString().substr(0, 10) + \".zip\";\n\t\tlet zipfile = writeTemporary(filename, zippedData);\n\n\t\t// Envia o email\n\t\tlet email = new Email(this.Pool);\n\t\temail.remetente(remetente);\n\t\temail.destinatario(destinatario);\n\t\temail.titulo(\"SAT-Flex: XMLs de \" + dtinicial + \" até \" + dtfinal);\n\t\temail.anexo(zipfile);\n\t\temail.corpo(\"Seguem os XMLs do período de \" + dtinicial + \" até \" + dtfinal + \" anexados ao e-mail.\");\n\t\temail.enviar(() => {\n\t\t\t// Fecha o loading\n\t\t\twindow.Loading.hide();\n\n\t\t\t// Mensagem de sucesso\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Enviado com sucesso\",\n\t\t\t\ttext: \"O e-mail contendo os XMLs no período especificado foi enviado com sucesso para o e-mail do contador.\"\n\t\t\t});\n\t\t}, (err) => {\n\t\t\t// Fecha o loading\n\t\t\twindow.Loading.hide();\n\n\t\t\t// Mensagem de erro\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Houve uma falha\",\n\t\t\t\ttext: err.message\n\t\t\t});\n\t\t});\n\t}\n\n\trender(){\n\t\tlet date = new Date();\n\t\tlet dtinical = new Date(date.getFullYear(), date.getMonth() - 1, 1).toISOString().substr(0, 10);\n\t\tlet dtfinal = new Date(date.getFullYear(), date.getMonth(), 0).toISOString().substr(0, 10);\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Módulo do contador</Title>\n\t\t\t\t<SubTitle>Enviar arquivos fiscais por e-mail</SubTitle>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\" offset=\"3\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<FormGroup type=\"email\" id=\"email\" label=\"E-mail do contador\" className=\"col-12\" size=\"lg\" />\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtinicial\" label=\"Data inicial\" className=\"col-6\" size=\"lg\" defaultValue={dtinical} />\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtfinal\" label=\"Data final\" className=\"col-6\" size=\"lg\" defaultValue={dtfinal} />\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<div className=\"text-center mt-2\">\n\t\t\t\t\t\t\t<Button text=\"Enviar arquivos por e-mail\" icon=\"mail-read\" size=\"lg\" onClick={this.enviarEmail} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nexport default class ButtonGroup extends React.Component {\n\trender(){\n\n\t\tvar className = [\n\t\t\t\"btn-group\",\n\t\t\t\"btn-group-\" + this.props.size\n\t\t];\n\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nButtonGroup.defaultProps = {\n\tsize: \"md\"\n};\n","import React from \"react\";\n\nexport default class Center extends React.Component {\n\n\trender(){\n\t\tlet className = [this.props.className];\n\t\tclassName.push(\"text-center\");\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport { Line } from \"react-chartjs-2\";\n\nimport { Pool } from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport ButtonGroup from \"../com/ButtonGroup.js\";\nimport Center from \"../com/Center.js\";\nimport Content from \"../com/Content.js\";\nimport SubTitle from \"../com/SubTitle.js\";\nimport Title from \"../com/Title.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/Estatistica.css\";\n\nexport default class Estatistica extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.carregarDados = this.carregarDados.bind(this);\n\t\tthis.carregarDadosCategoria = this.carregarDadosCategoria.bind(this);\n\t\tthis.carregarDadosFormaPagamento = this.carregarDadosFormaPagamento.bind(this);\n\t\tthis.carregarDadosGeral = this.carregarDadosGeral.bind(this);\n\t\tthis.carregarDadosProduto = this.carregarDadosProduto.bind(this);\n\n\t\tthis.state = {\n\t\t\ttabela: null,\n\t\t\tdados: null\n\t\t};\n\n\t\tthis.LineChart = Line;\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tasync carregarDados(tabela){\n\t\ttry{\n\t\t\twindow.Loading.show();\n\n\t\t\tlet dados = null;\n\t\t\tswitch(tabela){\n\t\t\t\tcase \"categoria\":\n\t\t\t\t\tdados = await this.carregarDadosCategoria();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"formapagamento\":\n\t\t\t\t\tdados = await this.carregarDadosFormaPagamento();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"produto\":\n\t\t\t\t\tdados = await this.carregarDadosProduto();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tdados = await this.carregarDadosGeral();\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconsole.log({ tabela: tabela, dados: dados });\n\n\t\t\tthis.setState({\n\t\t\t\ttabela: tabela,\n\t\t\t\tdados: dados\n\t\t\t});\n\t\t}catch(err){\n\t\t\tdefaultMessageBoxError(err);\n\t\t}finally{\n\t\t\twindow.Loading.hide();\n\t\t}\n\t}\n\n\tasync carregarDadosCategoria(){\n\t\tlet queryDiario = [\n\t\t\t\"SELECT categoria.descricao AS a,\",\n\t\t\t\"  v_vendaprodutodiario.dtvenda AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"LEFT JOIN categoria USING (idcategoria)\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '30 days'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resDiario = await this.Pool.query(queryDiario);\n\t\tlet dadosDiario = this.prepararDados(resDiario.rows, \"D\");\n\n\t\tlet querySemanal = [\n\t\t\t\"SELECT categoria.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"LEFT JOIN categoria USING (idcategoria)\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '6 months'::INTERVAL\",\n\t\t\t\"  AND EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda) != 0\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resSemanal = await this.Pool.query(querySemanal);\n\t\tlet dadosSemanal = this.prepararDados(resSemanal.rows, \"S\");\n\n\t\tlet queryMensal = [\n\t\t\t\"SELECT categoria.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(MONTH FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"LEFT JOIN categoria USING (idcategoria)\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '2 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resMensal = await this.Pool.query(queryMensal);\n\t\tlet dadosMensal = this.prepararDados(resMensal.rows, \"M\");\n\n\t\tlet queryAnual = [\n\t\t\t\"SELECT categoria.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda)) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"LEFT JOIN categoria USING (idcategoria)\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '10 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resAnual = await this.Pool.query(queryAnual);\n\t\tlet dadosAnual = this.prepararDados(resAnual.rows, \"Y\");\n\n\t\treturn {\n\t\t\tdiario: dadosDiario,\n\t\t\tsemanal: dadosSemanal,\n\t\t\tmensal: dadosMensal,\n\t\t\tanual: dadosAnual\n\t\t};\n\t}\n\n\tasync carregarDadosFormaPagamento(){\n\t\tlet queryDiario = [\n\t\t\t\"SELECT formapagamento.descricao AS a,\",\n\t\t\t\"  v_vendapagamentodiario.dtvenda AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendapagamentodiario, formapagamento\",\n\t\t\t\"WHERE (v_vendapagamentodiario.idformapagamento IS NULL OR v_vendapagamentodiario.idformapagamento = formapagamento.idformapagamento)\",\n\t\t\t\"  AND (formapagamento.status IS NULL OR formapagamento.status = 'A')\",\n\t\t\t\"  AND v_vendapagamentodiario.dtvenda >= CURRENT_DATE - '30 days'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resDiario = await this.Pool.query(queryDiario);\n\t\tlet dadosDiario = this.prepararDados(resDiario.rows, \"D\");\n\n\t\tlet querySemanal = [\n\t\t\t\"SELECT formapagamento.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendapagamentodiario.dtvenda) || '-' || LPAD(EXTRACT(WEEK FROM v_vendapagamentodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendapagamentodiario, formapagamento\",\n\t\t\t\"WHERE (v_vendapagamentodiario.idformapagamento IS NULL OR v_vendapagamentodiario.idformapagamento = formapagamento.idformapagamento)\",\n\t\t\t\"  AND (formapagamento.status IS NULL OR formapagamento.status = 'A')\",\n\t\t\t\"  AND v_vendapagamentodiario.dtvenda >= CURRENT_DATE - '6 months'::INTERVAL\",\n\t\t\t\"  AND EXTRACT(WEEK FROM v_vendapagamentodiario.dtvenda) != 0\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resSemanal = await this.Pool.query(querySemanal);\n\t\tlet dadosSemanal = this.prepararDados(resSemanal.rows, \"S\");\n\n\t\tlet queryMensal = [\n\t\t\t\"SELECT formapagamento.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendapagamentodiario.dtvenda) || '-' || LPAD(EXTRACT(MONTH FROM v_vendapagamentodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendapagamentodiario, formapagamento\",\n\t\t\t\"WHERE (v_vendapagamentodiario.idformapagamento IS NULL OR v_vendapagamentodiario.idformapagamento = formapagamento.idformapagamento)\",\n\t\t\t\"  AND (formapagamento.status IS NULL OR formapagamento.status = 'A')\",\n\t\t\t\"  AND v_vendapagamentodiario.dtvenda >= CURRENT_DATE - '2 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resMensal = await this.Pool.query(queryMensal);\n\t\tlet dadosMensal = this.prepararDados(resMensal.rows, \"M\");\n\n\t\tlet queryAnual = [\n\t\t\t\"SELECT formapagamento.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendapagamentodiario.dtvenda)) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendapagamentodiario, formapagamento\",\n\t\t\t\"WHERE (v_vendapagamentodiario.idformapagamento IS NULL OR v_vendapagamentodiario.idformapagamento = formapagamento.idformapagamento)\",\n\t\t\t\"  AND (formapagamento.status IS NULL OR formapagamento.status = 'A')\",\n\t\t\t\"  AND v_vendapagamentodiario.dtvenda >= CURRENT_DATE - '10 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resAnual = await this.Pool.query(queryAnual);\n\t\tlet dadosAnual = this.prepararDados(resAnual.rows, \"Y\");\n\n\t\treturn {\n\t\t\tdiario: dadosDiario,\n\t\t\tsemanal: dadosSemanal,\n\t\t\tmensal: dadosMensal,\n\t\t\tanual: dadosAnual\n\t\t};\n\t}\n\n\tasync carregarDadosGeral(){\n\t\tlet queryDiario = [\n\t\t\t\"SELECT 'Venda' AS a,\",\n\t\t\t\"  v_vendaprodutodiario.dtvenda AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario\",\n\t\t\t\"WHERE v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '30 days'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resDiario = await this.Pool.query(queryDiario);\n\t\tlet dadosDiario = this.prepararDados(resDiario.rows, \"D\");\n\n\t\tlet querySemanal = [\n\t\t\t\"SELECT 'Venda' AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario\",\n\t\t\t\"WHERE v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '6 months'::INTERVAL\",\n\t\t\t\"  AND EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda) != 0\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resSemanal = await this.Pool.query(querySemanal);\n\t\tlet dadosSemanal = this.prepararDados(resSemanal.rows, \"S\");\n\n\t\tlet queryMensal = [\n\t\t\t\"SELECT 'Venda' AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(MONTH FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario\",\n\t\t\t\"WHERE v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '2 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resMensal = await this.Pool.query(queryMensal);\n\t\tlet dadosMensal = this.prepararDados(resMensal.rows, \"M\");\n\n\t\tlet queryAnual = [\n\t\t\t\"SELECT 'Venda' AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda)) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario\",\n\t\t\t\"WHERE v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '10 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resAnual = await this.Pool.query(queryAnual);\n\t\tlet dadosAnual = this.prepararDados(resAnual.rows, \"Y\");\n\n\t\treturn {\n\t\t\tdiario: dadosDiario,\n\t\t\tsemanal: dadosSemanal,\n\t\t\tmensal: dadosMensal,\n\t\t\tanual: dadosAnual\n\t\t};\n\t}\n\n\tasync carregarDadosProduto(){\n\t\tlet queryDiario = [\n\t\t\t\"SELECT produto.descricao AS a,\",\n\t\t\t\"  v_vendaprodutodiario.dtvenda AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '30 days'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resDiario = await this.Pool.query(queryDiario);\n\t\tlet dadosDiario = this.prepararDados(resDiario.rows, \"D\");\n\n\t\tlet querySemanal = [\n\t\t\t\"SELECT produto.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '6 months'::INTERVAL\",\n\t\t\t\"  AND EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda) != 0\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resSemanal = await this.Pool.query(querySemanal);\n\t\tlet dadosSemanal = this.prepararDados(resSemanal.rows, \"S\");\n\n\t\tlet queryMensal = [\n\t\t\t\"SELECT produto.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(MONTH FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '2 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resMensal = await this.Pool.query(queryMensal);\n\t\tlet dadosMensal = this.prepararDados(resMensal.rows, \"M\");\n\n\t\tlet queryAnual = [\n\t\t\t\"SELECT produto.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda)) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '10 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resAnual = await this.Pool.query(queryAnual);\n\t\tlet dadosAnual = this.prepararDados(resAnual.rows, \"Y\");\n\n\t\treturn {\n\t\t\tdiario: dadosDiario,\n\t\t\tsemanal: dadosSemanal,\n\t\t\tmensal: dadosMensal,\n\t\t\tanual: dadosAnual\n\t\t};\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarDados(\"categoria\");\n\t}\n\n\tprepararDados(rows, tipoData){\n\t\tlet groups = [];\n\t\tlet labels = [];\n\t\tfor(let i in rows){\n\t\t\tlet row = rows[i];\n\t\t\tswitch(tipoData){\n\t\t\t\tcase \"D\": // Diario (recebe 'Y-m-d')\n\t\t\t\t\trow.x = String(row.x.getDate()).lpad(2, \"0\") + \"/\" + String(row.x.getMonth() + 1).lpad(2, \"0\") + \"/\" + (row.x.getFullYear());\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"S\": // Mensal (recebe 'Y-w')\n\t\t\t\t\trow.x = row.x.split(\"-\").reverse().join(\"/\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"M\": // Mensal (recebe 'Y-m')\n\t\t\t\t\trow.x = row.x.split(\"-\").reverse().join(\"/\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Y\": // Anual (recebe 'Y')\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\trows[i].x = row.x;\n\t\t\tif(labels.indexOf(row.x) === -1){\n\t\t\t\tlabels.push(row.x);\n\t\t\t}\n\t\t\tif(groups.indexOf(row.a) === -1){\n\t\t\t\tgroups.push(row.a);\n\t\t\t}\n\t\t}\n\n\t\tlet dataGroup = {};\n\t\tfor(let label of labels){\n\t\t\tfor(let group of groups){\n\t\t\t\tif(dataGroup[group] === undefined) dataGroup[group] = [];\n\n\t\t\t\tlet found = false;\n\t\t\t\tfor(let row of rows){\n\t\t\t\t\tif(row.a === group && row.x === label){\n\t\t\t\t\t\tdataGroup[group].push(row.y);\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(!found) dataGroup[group].push(0);\n\t\t\t}\n\t\t}\n\n\t\tlet datasets = [];\n\t\tfor(let group in dataGroup){\n\t\t\t// Gera um RGB aleatorio caso seja do tipo Diario\n\t\t\t// O outros tipos de datas utilizam o mesmo gerado pelo Diario\n\t\t\tif(this.cor === undefined) this.cor = {};\n\t\t\tif(tipoData === \"D\") this.cor[group] = Math.round(Math.random() * 255) + \",\" + Math.round(Math.random() * 255) + \",\" + Math.round(Math.random() * 255);\n\t\t\tlet rgb = this.cor[group];\n\n\t\t\t// Cria o dataset\n\t\t\tdatasets.push({\n\t\t\t\tlabel: group,\n\t\t\t\tfillColor: \"rgba(\"+rgb+\",0.2)\",\n\t\t\t\tstrokeColor: \"rgba(\"+rgb+\",1)\",\n\t\t\t\tpointColor: \"rgba(\"+rgb+\",1)\",\n\t\t\t\tpointStrokeColor: \"#fff\",\n\t\t\t\tpointHighlightFill: \"#fff\",\n\t\t\t\tpointHighlightStroke: \"rgba(\"+rgb+\",1)\",\n\t\t\t\tdata: dataGroup[group]\n\t\t\t});\n\t\t}\n\n\t\treturn {\n\t\t\tlabels: labels,\n\t\t\tdatasets: datasets\n\t\t};\n\t}\n\n\trender(){\n\t\tlet options = {\n\t\t\tlegend: {\n\t\t\t\tdisplay: true\n\t\t\t}\n\t\t};\n\n\t\tlet chartHeight = \"300px\";\n\t\tlet chartWidth = \"900px\";\n\n\t\tlet chartDiario = null;\n\t\tif(this.state.dados !== null){\n\t\t\tchartDiario = <this.LineChart data={this.state.dados.diario} options={options} height={chartHeight} width={chartWidth} />\n\t\t}\n\n\t\tlet chartSemanal = null;\n\t\tif(this.state.dados !== null){\n\t\t\tchartSemanal = <this.LineChart data={this.state.dados.semanal} options={options} height={chartHeight} width={chartWidth} />\n\t\t}\n\n\t\tlet chartMensal = null;\n\t\tif(this.state.dados !== null){\n\t\t\tchartMensal = <this.LineChart data={this.state.dados.mensal} options={options} height={chartHeight} width={chartWidth} />\n\t\t}\n\n\t\tlet chartAnual = null;\n\t\tif(this.state.dados !== null){\n\t\t\tchartAnual = <this.LineChart data={this.state.dados.anual} options={options} height={chartHeight} width={chartWidth} />\n\t\t}\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Estatísticas</Title>\n\t\t\t\t<Center className=\"mb-5\">\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button text=\"Geral\" color=\"green\" size=\"lg\" active={this.state.tabela === null} onClick={() => {this.carregarDados(null)}} />\n\t\t\t\t\t\t<Button text=\"Finalizadora\" color=\"green\" size=\"lg\" active={this.state.tabela === \"formapagamento\"} onClick={() => {this.carregarDados(\"formapagamento\")}} />\n\t\t\t\t\t\t<Button text=\"Categoria\" color=\"green\" size=\"lg\" active={this.state.tabela === \"categoria\"} onClick={() => {this.carregarDados(\"categoria\")}} />\n\t\t\t\t\t\t<Button text=\"Produto\" color=\"green\" size=\"lg\" active={this.state.tabela === \"produto\"} onClick={() => {this.carregarDados(\"produto\")}} />\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t<SubTitle model=\"2\">Venda diária nos últimos 30 dias</SubTitle>\n\t\t\t\t\t{chartDiario}\n\t\t\t\t\t<SubTitle model=\"2\">Venda semanal nos últimos 6 meses</SubTitle>\n\t\t\t\t\t{chartSemanal}\n\t\t\t\t\t<SubTitle model=\"2\">Venda mensal nos últimos 2 anos</SubTitle>\n\t\t\t\t\t{chartMensal}\n\t\t\t\t\t<SubTitle model=\"2\">Venda anual nos últimos 10 anos</SubTitle>\n\t\t\t\t\t{chartAnual}\n\t\t\t\t</Center>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","const LF = \"\\x0a\";\nconst ESC = \"\\x1b\";\nconst GS = \"\\x1d\";\n\nexport default class EscPos {\n\n\t// Metodo construtor\n\t// O parametro \"font\" representa a fonte a ser utilizada (vem dos parametros do sistema)\n\tconstructor(font){\n\t\tthis.font = font;\n\t\tthis.content = [];\n\t}\n\n\t// Imprime um codigo de barras\n\tbarcode(barcode, height, width){\n\t\theight = (height === undefined ? 50 : height);\n\t\twidth = (width === undefined ? 1 : width);\n\n\t\t// Descobre o tipo de codigo de barras\n\t\tlet type = null;\n\t\tswitch(barcode.length){\n\t\t\tcase 7: // EAN7\n\t\t\tcase 8: // EAN8\n\t\t\t\ttype = 68;\n\t\t\t\tbreak;\n\t\t\tcase 12: // EAN12\n\t\t\tcase 13: // EAN13\n\t\t\t\ttype = 67;\n\t\t\t\tbreak;\n\t\t\tdefault: // ITF\n\t\t\t\ttype = 70;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Define a altura do codigo de barras\n\t\tthis.content.push(GS + \"h\" + String.fromCharCode(height));\n\n\t\t// Define a largura das barras do codigo de barras\n\t\tthis.content.push(GS + \"w\" + String.fromCharCode(width));\n\n\t\t// Centraliza a impressao\n\t\tthis.content.push(ESC + \"a\" + String.fromCharCode(1));\n\n\t\t// Imprime o codigo de barras\n\t\tthis.content.push(GS + \"k\" + String.fromCharCode(type) + String.fromCharCode(barcode.length) + barcode);\n\n\t\t// Alinha a impressao a esquerda\n\t\tthis.content.push(ESC + \"a\" + String.fromCharCode(0));\n\n\t}\n\n\t// Liga ou desliga o texto em negrito\n\tbold(bool){\n\t\tthis.content.push(ESC + \"G\" + String.fromCharCode(bool ? 1 : 0));\n\t}\n\n\t// Aciona a guilhotina\n\tcut(){\n\t\tthis.content.push(GS + \"V\" + String.fromCharCode(1));\n\t}\n\n\t// Abre gaveta\n\tdrawer(){\n\t\tthis.content.push(ESC + \"p\" + String.fromCharCode(0) + String.fromCharCode(13) + String.fromCharCode(10));\n\t}\n\n\t// Alimenta o papel (medida em linhas)\n\tfeed(lines){\n\t\tthis.content.push(ESC + \"d\" + String.fromCharCode(lines));\n\t}\n\n\t// Retorna o conteudo a ser impresso\n\tgetContent(){\n\t\treturn this.content.join(\"\");\n\t}\n\n\t// Reinicia as configuracoes para os valores padroes\n\treset(){\n\t\tthis.content = [];\n\t\tthis.content.push(ESC + String.fromCharCode(0)); // Espaco entre linhas no tamanho padrao\n\t\tthis.content.push(ESC + \" \" + String.fromCharCode(0)); // Espaco entre os caracteres\n\t\tthis.content.push(ESC + \"M\" + String.fromCharCode(this.font)); // Estilo da fonte\n\t\tthis.content.push(GS + \"!\" + String.fromCharCode(0)); // Tamanho da fonte\n\t\tthis.content.push(ESC + \"t\" + String.fromCharCode(3)); // Tabela de codigo de caracter (Portugues)\n\t\tthis.content.push(ESC + \"R\" + String.fromCharCode(12)); // Caracteres internacionais (America Latina)\n\t\tthis.content.push(GS + \"B\" + String.fromCharCode(0)); // Desliga o fundo pintado (cores invertidas)\n\t\tthis.content.push(ESC + \"G\" + String.fromCharCode(0)); // Desliga o negrito\n\t\tthis.content.push(ESC + \"a\" + String.fromCharCode(0)); // Alinha a impressao a esquerda\n\t}\n\n\t// Imprime um QR Code\n\tqrcode(qrcode){\n\t\tlet len = qrcode.length + 3;\n\t\tlet pl = len % 256;\n\t\tlet ph = len / 256;\n\n\t\t// Centraliza a impressao\n\t\tthis.content.push(ESC + \"a\" + String.fromCharCode(1));\n\n\t\t// Columns function (65)\n\t\tthis.content.push(GS + \"(k\" + String.fromCharCode(4) + String.fromCharCode(0) + String.fromCharCode(49) + String.fromCharCode(65) + String.fromCharCode(50) + String.fromCharCode(0))\n\n\t\t// Size function (67)\n\t\tthis.content.push(GS + \"(k\" + String.fromCharCode(3) + String.fromCharCode(0) + String.fromCharCode(49) + String.fromCharCode(67) + String.fromCharCode(3));\n\n\t\t// Error correction function (69)\n\t\tthis.content.push(GS + \"(k\" + String.fromCharCode(3) + String.fromCharCode(0) + String.fromCharCode(49) + String.fromCharCode(69) + String.fromCharCode(51));\n\n\t\t// Save data function (80)\n\t\tthis.content.push(GS + \"(k\" + String.fromCharCode(pl) + String.fromCharCode(ph) + String.fromCharCode(49) + String.fromCharCode(80) + String.fromCharCode(48) + qrcode);\n\n\t\t// Print function (81)\n\t\tthis.content.push(GS + \"(k\" + String.fromCharCode(3) + String.fromCharCode(0) + String.fromCharCode(49) + String.fromCharCode(81) + String.fromCharCode(48));\n\n\t\t// Alinha impressao a esquerda\n\t\tthis.content.push(ESC + \"a\" + String.fromCharCode(0));\n\t}\n\n\t// Imprime um texto\n\ttext(text, bold){\n\t\ttext = text.removeSpecial();\n\t\ttext = text.replaceAll(\"|\", String.fromCharCode(179));\n\t\tif(bold) this.bold(true);\n\t\tthis.content.push(text + LF);\n\t\tif(bold) this.bold(false);\n\t}\n\n}\n","//import RNFS from \"react-native-fs\";\nimport os from \"os\";\nimport xmlJS from \"xml-js\";\nimport child_process from \"child_process\";\nimport EscPos from \"./EscPos.js\";\nimport {valorParametro, writeTemporary} from \"../def/function.js\";\n\nexport default class Printer {\n\n\tconstructor(Pool){\n\t\tthis.Pool = Pool;\n\t\tthis.os = os;\n\t\tthis.childProcess = child_process;\n\n\t\t// Usar o metodo \"carregarEscPos\" para utilizar essa variavel\n\t\t// Nunca usar assim:   let escpos = this.escpos\n\t\t// Sempre usar assim:  let escpos = await this.carregarEscPos()\n\t\tthis.escpos = null;\n\n\t\tthis.colunas = null;\n\t\tthis.nome = null;\n\t\tthis.modelo = null;\n\n\t\tthis.documento = null;\n\t\tthis.documentoprodutos = null;\n\t\tthis.documentopagamentos = null;\n\n\t\tthis.parametroImpressoraGuilhotina = null;\n\t\tthis.parametroImpressoraModeloImpressao = null;\n\t}\n\n\t// Alimenta o papel (medida em linhas)\n\tasync alimentar(linhas){\n\t\tlinhas = (linhas === undefined ? 1 : linhas);\n\n\t\tlet escpos = await this.carregarEscPos();\n\t\tescpos.feed(linhas);\n\t}\n\n\t// Imprime um codigo de barras\n\tasync barcode(barcode){\n\t\tlet escpos = await this.carregarEscPos();\n\t\tescpos.barcode(barcode);\n\t}\n\n\tasync carregarEscPos(){\n\t\tif(this.escpos === null){\n\t\t\tlet fonte = (this.colunas > 48 ? \"1\" : \"0\");\n\t\t\tthis.escpos = new EscPos(fonte);\n\t\t}\n\t\treturn this.escpos;\n\t}\n\n\tasync carregarDadosDocumento(iddocumento){\n\t\tlet documento, documentoprodutos,documentopagamentos;\n\n\t\tconst client = await this.Pool.connect();\n\n\t\ttry{\n\t\t\tlet res = await client.query(\"SELECT * FROM documento WHERE iddocumento = $1\", [iddocumento]);\n\t\t\tif(res.rows.length === 0){\n\t\t\t\tthrow new Error(\"Nenhum documento foi encontrado.\");\n\t\t\t}\n\t\t\tdocumento = res.rows[0];\n\n\t\t\tlet queryDocumentoProduto = [\n\t\t\t\t\"SELECT documentoproduto.*, unidade.precisao, unidade.sigla\",\n\t\t\t\t\"FROM documentoproduto\",\n\t\t\t\t\"LEFT JOIN produto USING (idproduto)\",\n\t\t\t\t\"LEFT JOIN unidade USING (idunidade)\",\n\t\t\t\t\"WHERE documentoproduto.iddocumento = $1\",\n\t\t\t\t\"ORDER BY documentoproduto.sequencial\"\n\t\t\t].join(\" \");\n\t\t\tres = await client.query(queryDocumentoProduto, [iddocumento]);\n\t\t\tdocumentoprodutos = res.rows;\n\n\t\t\tlet queryDocumentoPagamento = [\n\t\t\t\t\"SELECT documentopagamento.*, formapagamento.descricao AS formapagamento\",\n\t\t\t\t\"FROM documentopagamento\",\n\t\t\t\t\"LEFT JOIN formapagamento USING (idformapagamento)\",\n\t\t\t\t\"WHERE documentopagamento.iddocumento = $1\"\n\t\t\t].join(\" \");\n\t\t\tres = await client.query(queryDocumentoPagamento, [iddocumento]);\n\t\t\tdocumentopagamentos = res.rows;\n\t\t}catch(e){\n\t\t\tthrow e;\n\t\t}finally{\n\t\t\tclient.release();\n\t\t}\n\n\t\tthis.documento = documento;\n\t\tthis.documentoprodutos = documentoprodutos;\n\t\tthis.documentopagamentos = documentopagamentos;\n\t}\n\n\t// Retorna o conteudo a ser enviado para a impressora\n\tasync conteudo(){\n\t\tlet escpos = await this.carregarEscPos();\n\t\treturn escpos.getContent();\n\t}\n\n\t// Abre gaveta\n\tasync gaveta(){\n\t\tlet escpos = await this.carregarEscPos();\n\t\tescpos.drawer();\n\t}\n\n\t// Aciona a guilhotina\n\tasync guilhotina(){\n\t\tif(this.parametroImpressoraGuilhotina === null){\n\t\t\tthis.parametroImpressoraGuilhotina = await valorParametro(this.Pool, \"IMPRESSORA\", \"GUILHOTINA\");\n\t\t}\n\t\tif(this.parametroImpressoraGuilhotina === \"S\"){\n\t\t\tlet escpos = await this.carregarEscPos();\n\t\t\tescpos.cut();\n\t\t}\n\t}\n\n\t// Imprime um texto em uma impressora\n\tasync imprimir(texto, nome, modelo){\n\t\tif(texto === undefined || texto === null){\n\t\t\ttexto = await this.conteudo();\n\t\t}\n\n\t\tif(modelo === undefined){\n\t\t\tif(this.modelo === null){\n\t\t\t\tmodelo = await valorParametro(this.Pool, \"IMPRESSORA\", \"MODELO\");\n\t\t\t}else{\n\t\t\t\tmodelo = this.modelo;\n\t\t\t}\n\t\t}\n\t\tif(modelo === \"nenhum\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tlet filename = writeTemporary(\"printer.txt\", texto);\n\t\tif(true || this.os.platform() === \"win32\"){\n\t\t\tnome = (nome === undefined ? this.nome : nome);\n\n\t\t\tconst execSync = (this.childProcess.execSync || window.require(\"child_process\").execSync);\n\t\t\t\n\t\t\tlet command = \"copy \\\"\" + filename + \"\\\" \" + nome.toUpperCase();\n\t\t\tcommand = command.replaceAll(\"/\", \"\\\\\");\n\t\t\texecSync(command);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t// Imprimir o cabecalho nos documentos\n\tasync imprimirCabecalho(){\n\t\t// Nome da loja\n\t\tlet nomefantasia = await valorParametro(this.Pool, \"EMITENTE\", \"NOMEFANTASIA\");\n\t\tawait this.texto(nomefantasia, \"center\", true);\n\n\t\t// Razao social\n\t\tlet razaosocial = await valorParametro(this.Pool, \"EMITENTE\", \"RAZAOSOCIAL\");\n\t\tif(razaosocial !== nomefantasia){\n\t\t\tawait this.texto(razaosocial, \"center\", true);\n\t\t}\n\n\t\t// Endereco\n\t\tlet paramEmitenteEndereco = await valorParametro(this.Pool, \"EMITENTE\", \"ENDERECO\");\n\t\tlet paramEmitenteNumero = await valorParametro(this.Pool, \"EMITENTE\", \"NUMERO\");\n\t\tawait this.texto(paramEmitenteEndereco + \", \" + paramEmitenteNumero, \"center\");\n\n\t\t// Bairro, cidade e estado\n\t\tlet paramEmitenteBairro = await valorParametro(this.Pool, \"EMITENTE\", \"BAIRRO\");\n\t\tlet paramEmitenteMunicipio = await valorParametro(this.Pool, \"EMITENTE\", \"MUNICIPIO\");\n\t\tlet paramEmitenteUF = await valorParametro(this.Pool, \"EMITENTE\", \"UF\");\n\t\tawait this.texto(paramEmitenteBairro + \" - \" + paramEmitenteMunicipio + \" - \" + paramEmitenteUF, \"center\");\n\n\t\t// CNPJ e IE\n\t\tlet paramEmitenteCNPJ = await valorParametro(this.Pool, \"EMITENTE\", \"CNPJ\");\n\t\tlet paramEmitenteIE = await valorParametro(this.Pool, \"EMITENTE\", \"IE\");\n\t\tawait this.texto(\"CNPJ \" + paramEmitenteCNPJ + \" IE \" + paramEmitenteIE, \"center\");\n\n\t\t// Linha\n\t\tawait this.linha();\n\t}\n\n\t// Imprime um documento\n\tasync imprimirDocumento(iddocumento, success, fail){\n\t\tawait this.reiniciar();\n\t\tawait this.carregarDadosDocumento(iddocumento);\n\n\t\tlet result = false;\n\n\t\tswitch(this.documento.status){\n\t\t\tcase \"A\":\n\t\t\t\tresult = await this.imprimirDocumentoAtivo();\n\t\t\t\tbreak;\n\t\t\tcase \"C\":\n\t\t\t\tresult = await this.imprimirDocumentoCancelado();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(result && typeof success === \"function\"){\n\t\t\tsuccess();\n\t\t}else if(!result && typeof fail === \"function\"){\n\t\t\tfail();\n\t\t}\n\t}\n\n\t// Imprime um documento ativo\n\tasync imprimirDocumentoAtivo(numerovias){\n\t\tnumerovias = (numerovias === undefined ? 1 : numerovias);\n\n\t\tlet informacoes  = null;\n\t\tlet qrcode = null;\n\n\t\t// Carrega o XML do documento\n\t\tif(this.documento.operacao === \"CU\" && this.documento.xml){\n\t\t\tlet xml = xmlJS.xml2json(this.documento.xml, {compact: true});\n\t\t\txml = JSON.parse(xml);\n\t\t\tinformacoes = xml.CFe.infCFe.infAdic.infCpl._text;\n\t\t\tif(xml.CFe.infCFe.ide.assinaturaQRCODE){\n\t\t\t\tqrcode = xml.CFe.infCFe.ide.assinaturaQRCODE._text;\n\t\t\t}\n\t\t}\n\n\t\t// Cria o cabecalho\n\t\tawait this.imprimirCabecalho();\n\n\t\t// Identificacao do documento\n\t\tlet numero = null;\n\t\tlet dthrcriacao = this.documento.dthrcriacao;\n\t\tlet dtcriacao = dthrcriacao.toLocaleString().split(\" \")[0];\n\t\tlet hrcriacao = String(dthrcriacao.getHours()).lpad(2, \"0\") + \":\" + String(dthrcriacao.getMinutes()).lpad(2, \"0\") + \":\" + String(dthrcriacao.getSeconds()).lpad(2, \"0\");\n\t\tswitch(this.documento.operacao){\n\t\t\tcase \"CU\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : this.documento.iddocumento).lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"CUPOM FISCAL ELETRÔNICO - SAT\", \"center\", true);\n\t\t\t\tawait this.texto(\"COO: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"NC\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"NOTA FISCAL A PARTIR DE CUPOM\", \"center\", true);\n\t\t\t\tawait this.texto(\"Núm: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"OR\":\n\t\t\t\tnumero = String(this.documento.iddocumento ? this.documento.iddocumento : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"ORÇAMENTO - SEM VALOR FISCAL\", \"center\", true);\n\t\t\t\tawait this.texto(\"Núm: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"RE\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"NOTA FISCAL DE REMESSA\", \"center\", true);\n\t\t\t\tawait this.texto(\"Núm: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Linha\n\t\tawait this.linha();\n\n\t\t// Identificacao do consumidor\n\t\tlet cpfcnpj = null;\n\t\tswitch(this.documento.operacao){\n\t\t\tcase \"CU\":\n\t\t\t\tcpfcnpj = (this.documento.cpfcnpj ? this.documento.cpfcnpj : \"não informado\");\n\t\t\t\tawait this.texto(\"CPF/CNPJ do consumidor: \" + cpfcnpj);\n\t\t\t\tbreak;\n\t\t\tcase \"OR\":\n\t\t\t\tcpfcnpj = (this.documento.cpfcnpj ? this.documento.cpfcnpj : \"não informado\");\n\t\t\t\tlet nomeorcamento = (this.documento.nomeorcamento ? this.documento.nomeorcamento : \"não informado\");\n\t\t\t\tawait this.texto(\"Nome do cliente: \" + nomeorcamento);\n\t\t\t\tawait this.texto(\"CPF/CNPJ do cliente: \" + cpfcnpj);\n\t\t\t\tbreak;\n\t\t\tcase \"NC\":\n\t\t\tcase \"RE\":\n\t\t\t\tlet query = [\n\t\t\t\t\t\"SELECT parceiro.nome, parceiro.tipopessoa, parceiro.cpfcnpj,\",\n\t\t\t\t\t\"  parceiro.inscricaoestadual, cidade.nome AS cidade, estado.sigla AS estado,\",\n\t\t\t\t\t\"  parceiro.cep, parceiro.bairro, parceiro.endereco, parceiro.numero,\",\n\t\t\t\t\t\"  parceiro.complemento\",\n\t\t\t\t\t\"FROM parceiro\",\n\t\t\t\t\t\"LEFT JOIN cidade USING (idcidade)\",\n\t\t\t\t\t\"LEFT JOIN estado USING (idestado)\",\n\t\t\t\t\t\"WHERE parceiro.idparceiro = $1\"\n\t\t\t\t].join(\" \");\n\n\t\t\t\tlet res = await this.Pool.query(query, [this.documento.idparceiro]);\n\t\t\t\tlet parceiro = res.rows[0];\n\n\t\t\t\tawait this.texto(\"DADOS DO DESTINATARIO\", \"center\", true);\n\t\t\t\tawait this.texto(\"Nome: \" + parceiro.nome);\n\t\t\t\tawait this.texto((parceiro.tipopessoa === \"F\" ? \"CPF\" : \"CNPJ\") + \": \" + parceiro.cpfcnpj);\n\t\t\t\tif(parceiro.inscricaoestadual){\n\t\t\t\t\tawait this.texto(\"Inscricao estadual: \" + parceiro.inscricaoestadual);\n\t\t\t\t}\n\t\t\t\tawait this.texto(\"Cidade: \" + parceiro.cidade  + \" - \" + parceiro.estado);\n\t\t\t\tawait this.texto(\"CEP: \" + parceiro.cep + \"   Bairro: \" + parceiro.bairro);\n\t\t\t\tawait this.texto(\"Endereço: \" + parceiro.endereco + \", \" + parceiro.numero);\n\t\t\t\tif(parceiro.complemento){\n\t\t\t\t\tawait this.texto(\"Complemento: \" + this.complemento);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Linha\n\t\tawait this.linha();\n\n\t\t// Imprime os produtos\n\t\tif(this.parametroImpressoraModeloImpressao === null){\n\t\t\tthis.parametroImpressoraModeloImpressao = await valorParametro(this.Pool, \"IMPRESSORA\", \"MODELOIMPRESSAO\");\n\t\t}\n\t\tswitch(this.parametroImpressoraModeloImpressao){\n\t\t\tcase '1': await this.imprimirListaProdutosModelo01(); break;\n\t\t\tcase '2': await this.imprimirListaProdutosModelo02(); break;\n\t\t\tdefault: await this.imprimirListaProdutosModelo01(); break;\n\t\t}\n\t\t\n\t\t// Total dos itens\n\t\tlet totaldocumento = this.documento.totaldocumento.format(2, \",\", \".\");\n\t\tawait this.texto(\"TOTAL\" + \" \".repeat(this.colunas - (5 + totaldocumento.length)) + totaldocumento, \"left\", true);\n\t\tawait this.alimentar(1);\n\n\t\t// Imprime os pagamentos\n\t\tawait this.documentopagamentos.forEach(async (documentopagamento, i) => {\n\t\t\tlet totalpagamento = 0;\n\n\t\t\t// Captura os valores\n\t\t\tlet descricao = documentopagamento.formapagamento.removeSpecial();\n\t\t\tif(i + 1 === this.documentopagamentos.length){\n\t\t\t\ttotalpagamento = parseFloat(documentopagamento.totalpagamento) + parseFloat(this.documento.totaltroco);\n\t\t\t}else{\n\t\t\t\ttotalpagamento = documentopagamento.totalpagamento;\n\t\t\t}\n\t\t\ttotalpagamento = totalpagamento.format(2, \",\", \".\");\n\n\t\t\t// Imprime o pagamento no cupom\n\t\t\tawait this.texto(descricao + \" \".repeat(this.colunas - descricao.length - totalpagamento.length) + totalpagamento);\n\t\t});\n\n\t\t// Imprime o troco\n\t\tif(this.documento.totaltroco > 0){\n\t\t\tlet descricao = \"Troco\";\n\t\t\tlet totaltroco = this.documento.totaltroco.format(2, \",\", \".\");\n\t\t\tawait this.texto(descricao + \" \".repeat(this.colunas - descricao.length - totaltroco.length) + totaltroco);\n\t\t}\n\n\t\t// Verifica se eh um documento fiscal\n\t\tif(this.documento.chave){\n\t\t\t// Linha\n\t\t\tawait this.linha();\n\n\t\t\t// Verifica se eh cupom\n\t\t\tif(this.documento.operacao === \"CU\"){\n\t\t\t\t// Observacoes do contribuinte\n\t\t\t\tawait this.texto(\"OBSERVAÇÕES DO CONTRIBUINTE\", \"center\");\n\t\t\t\tawait this.texto(\"ICMS recolhido conforme LC 123/2006 - Simples Nacional.\");\n\t\t\t\tawait this.texto(informacoes);\n\n\t\t\t\t// Linha\n\t\t\t\tawait this.linha();\n\n\t\t\t\t// Numero do SAT\n\t\t\t\tlet paramSatSerie = await valorParametro(this.Pool, \"SAT\", \"SERIE\");\n\t\t\t\tawait this.texto(\"SAT No. \" + paramSatSerie, \"center\");\n\t\t\t\tawait this.texto(dtcriacao + \" - \" + hrcriacao, \"center\");\n\t\t\t}\n\n\t\t\t// Imprime a chave CFe\n\t\t\tlet chave = this.documento.chave.substr(-44);\n\t\t\tawait this.alimentar(1);\n\t\t\tawait this.texto(chave, \"center\");\n\t\t\tawait this.barcode(chave.substr(0, 22));\n\t\t\tawait this.alimentar(1);\n\t\t\tawait this.barcode(chave.substr(22));\n\n\t\t\t// Imprime o QR Code\n\t\t\tif(qrcode){\n\t\t\t\tawait this.alimentar(1);\n\t\t\t\tawait this.qrcode(qrcode);\n\t\t\t}\n\t\t}\n\n\t\t// Cria uma margem no cupom\n\t\tawait this.alimentar(3);\n\n\t\t// Cria uma margem no cupom\n\t\tawait this.guilhotina();\n\n\t\t// Imprime o documento\n\t\tfor(let i = 0; i < numerovias; i++){\n\t\t\tif(!this.imprimir()){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t// Imprime um documento ativo\n\tasync imprimirDocumentoCancelado(numerovias){\n\t\tlet paramSATSerie = await valorParametro(this.Pool, \"SAT\", \"SERIE\");\n\n\t\tlet xml = null;\n\t\tlet qrcode = null;\n\t\tlet xmlcanc = null;\n\t\tlet qrcodecanc = null\n\n\t\t// Carrega o XML do documento\n\t\tif(this.documento.operacao === \"CU\" && this.documento.xml){\n\t\t\txml = xmlJS.xml2json(this.documento.xml, {compact: true});\n\t\t\txml = JSON.parse(xml);\n\t\t\tif(xml.CFe.infCFe.ide.assinaturaQRCODE){\n\t\t\t\tqrcode = xml.CFe.infCFe.ide.assinaturaQRCODE._text;\n\t\t\t}\n\n\t\t\txmlcanc = xmlJS.xml2json(this.documento.xml, {compact: true});\n\t\t\txmlcanc = JSON.parse(xmlcanc);\n\t\t\tif(xmlcanc.CFe.infCFe.ide.assinaturaQRCODE){\n\t\t\t\tqrcodecanc = xmlcanc.CFe.infCFe.ide.assinaturaQRCODE._text;\n\t\t\t}\n\t\t}\n\n\t\t// Cria o cabecalho\n\t\tawait this.imprimirCabecalho();\n\n\t\t// Identificacao do documento\n\t\tlet numero = null;\n\t\tlet dthrcriacao = this.documento.dthrcriacao;\n\t\tlet dtcriacao = dthrcriacao.toLocaleString().split(\" \")[0];\n\t\tlet hrcriacao = String(dthrcriacao.getHours()).lpad(2, \"0\") + \":\" + String(dthrcriacao.getMinutes()).lpad(2, \"0\") + \":\" + String(dthrcriacao.getSeconds()).lpad(2, \"0\");\n\t\tswitch(this.documento.operacao){\n\t\t\tcase \"CU\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : this.documento.iddocumento).lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"CUPOM FISCAL ELETRÔNICO - SAT\", \"center\", true);\n\t\t\t\tawait this.texto(\"COO: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"NC\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"NOTA FISCAL A PARTIR DE CUPOM\", \"center\", true);\n\t\t\t\tawait this.texto(\"Número: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"OR\":\n\t\t\t\tnumero = String(this.documento.iddocumento ? this.documento.iddocumento : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"ORÇAMENTO - SEM VALOR FISCAL\", \"center\", true);\n\t\t\t\tawait this.texto(\"Número: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"RE\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"NOTA FISCAL DE REMESSA\", \"center\", true);\n\t\t\t\tawait this.texto(\"Número: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tawait this.texto(\"CANCELAMENTO\", \"center\", true);\n\t\tawait this.linha();\n\n\t\t// Dados do documento de venda\n\t\tswitch(this.documento.operacao){\n\t\t\tcase \"CU\":\n\t\t\t\tawait this.texto(\"Dados do cupom fiscal eletronico cancelado\", \"center\", true);\n\t\t\t\tawait this.texto(\"SAT No. \" + paramSATSerie, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"OR\":\n\t\t\t\tlet orcamento = this.documento.iddocumento.lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"Dados do orçamento cancelado\", \"center\", true);\n\t\t\t\tawait this.texto(\"Orçamento No. \" + orcamento, \"center\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlet numero = this.documento.numero.lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"Dados do nota fiscal eletronica cancelada\", \"center\", true);\n\t\t\t\tawait this.texto(\"Nota Fiscal No. \" + numero, \"center\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\tawait this.texto(\"TOTAL R$ \" + this.documento.totaldocumento.format(2, \",\", \".\"), \"center\");\n\t\tawait this.texto(dtcriacao + \" \" + hrcriacao, \"center\");\n\n\t\t// Verifica se eh um documento fiscal\n\t\tif(this.documento.chave){\n\n\t\t\t// Chave CFe do documento de venda\n\t\t\tawait this.alimentar(1);\n\t\t\tlet chave = this.documento.chave.substr(-44);\n\t\t\tawait this.texto(chave, \"center\");\n\t\t\tawait this.barcode(chave.substr(0, 22));\n\t\t\tawait this.alimentar(1);\n\t\t\tawait this.barcode(chave.substr(22));\n\n\t\t\t// QR Code do documento de venda\n\t\t\tif(qrcode){\n\t\t\t\tawait this.alimentar(1);\n\t\t\t\tawait this.qrcode(qrcode);\n\t\t\t}\n\t\t}\n\n\t\t// Linha\n\t\tawait this.linha();\n\n\t\tif(this.documento.operacao === \"CU\"){\n\t\t\tlet dthrcancelamento = this.documento.dthrcancelamento;\n\t\t\tlet dtcancelamento = dthrcancelamento.toLocaleString().split(\" \")[0];\n\t\t\tlet hrcancelamento = String(dthrcancelamento.getHours()).lpad(2, \"0\") + \":\" + String(dthrcancelamento.getMinutes()).lpad(2, \"0\") + \":\" + String(dthrcancelamento.getSeconds()).lpad(2, \"0\");\n\n\t\t\t// Dados do documento de cancelamento\n\t\t\tawait this.texto(\"Dados do cupom fiscal eletronico de cancelamento\", \"center\", true);\n\t\t\tawait this.texto(\"SAT No. \" + paramSATSerie, \"center\");\n\t\t\tawait this.texto(dtcancelamento + \" \" + hrcancelamento, \"center\");\n\n\t\t\t// Verifica se eh um documento fiscal\n\t\t\tif(this.documento.chavecanc){\n\n\t\t\t\t// Chave CFe do documento de cancelamento\n\t\t\t\tawait this.alimentar(1);\n\t\t\t\tlet chave = this.documento.chavecanc.substr(-44);\n\t\t\t\tawait this.texto(chave, \"center\");\n\t\t\t\tawait this.barcode(chave.substr(0, 22));\n\t\t\t\tawait this.alimentar(1);\n\t\t\t\tawait this.barcode(chave.substr(22));\n\n\t\t\t\t// QR Code do documento de cancelamento\n\t\t\t\tif(qrcodecanc){\n\t\t\t\t\tawait this.alimentar(1);\n\t\t\t\t\tawait this.qrcode(qrcodecanc);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Cria uma margem no cupom\n\t\tawait this.alimentar(6);\n\n\t\t// Aciona a guilhotina\n\t\tawait this.guilhotina();\n\n\t\t// Imprime o documento\n\t\tif(!this.imprimir()){\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t// Imprime modelo 1 da lista de produtos (impressao em uma linha)\n\tasync imprimirListaProdutosModelo01() {\n\t\t// Cabecalho dos produtos\n\t\tawait this.texto(\"#   Descrição\" + \" \".repeat(this.colunas - 40) + \"   Qtde X Preço       Total\");\n\n\t\t// Linha\n\t\tawait this.linha();\n\n\t\t// Imprime os produtos\n\t\tawait this.documentoprodutos.forEach(async (documentoproduto) => {\n\t\t\t// Sequencial do produto\n\t\t\tlet sequencial = String(documentoproduto.sequencial).lpad(3, \"0\");\n\n\t\t\t// Total do item\n\t\t\tlet totalproduto = (documentoproduto.quantidade * documentoproduto.preco).format(2, \",\", \".\");\n\n\t\t\t// Calculo (preco x quantidade)\n\t\t\tlet quantidade = documentoproduto.quantidade.format(documentoproduto.precisao, \",\", \".\") + \" \" + documentoproduto.sigla;\n\t\t\tlet calculo = quantidade.lpad(10, \" \") + \" X \" + documentoproduto.preco.format(2, \",\", \".\").rpad(8, \" \") + \" \" + totalproduto.lpad(8, \" \");\n\n\t\t\t// Calcula o tamanho maximo da descricao do produto\n\t\t\tlet descricaoLength = this.colunas - (sequencial.length + calculo.length + 2);\n\n\t\t\t// Descricao do produto\n\t\t\tlet descricao = documentoproduto.descricao.removeSpecial().substr(0, descricaoLength).rpad(descricaoLength, \" \");\n\n\t\t\t// Monta o texto final e envia para impressora\n\t\t\tawait this.texto(sequencial + \" \" + descricao + \" \" + calculo);\n\n\t\t\t// Verifica se houve desconto no item\n\t\t\tif(documentoproduto.totaldesconto > 0){\n\t\t\t\tlet totaldesconto = \"-\" + documentoproduto.totaldesconto.format(2, \",\", \".\");\n\t\t\t\tlet texto = \"    Desconto\" + \" \".repeat(this.colunas - (12 + totaldesconto.length)) + totaldesconto;\n\t\t\t\tawait this.texto(texto);\n\t\t\t}\n\n\t\t\t// Verifica se houve acrescimo no item\n\t\t\tif(documentoproduto.totalacrescimo > 0){\n\t\t\t\tlet totalacrescimo = \"+\" + documentoproduto.totalacrescimo.format(2, \",\", \".\");\n\t\t\t\tlet texto = \"    Acrescimo\" + \" \".repeat(this.colunas - (13 + totalacrescimo.length)) + totalacrescimo;\n\t\t\t\tawait this.texto(texto);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Imprime modelo 2 da lista de produtos\n\tasync imprimirListaProdutosModelo02() {\n\t\t// Cabecalho dos produtos\n\t\tawait this.texto(\"Descrição do produto\");\n\t\tawait this.texto(\"Quantidade X Preço\" + \" \".repeat(this.colunas - 23) + \"Total\");\n\n\t\t// Linha\n\t\tawait this.linha();\n\n\t\t// Imprime os produtos\n\t\tfor(let i = 0; i < this.documentoprodutos.length; i++){\n\t\t\tlet documentoproduto = this.documentoprodutos[i];\n\t\t//}\n\t\t//await this.documentoprodutos.forEach(async (documentoproduto) => {\n\n\t\t\t// Descricao do produto\n\t\t\tlet descricao = documentoproduto.descricao.removeSpecial();\n\t\t\t\n\t\t\t// Sequencial do produto\n\t\t\tlet sequencial = String(documentoproduto.sequencial).lpad(3, \"0\");\n\n\t\t\t// Calculo\n\t\t\tlet quantidade = documentoproduto.quantidade.format(documentoproduto.precisao, \",\", \".\") + \" \" + documentoproduto.sigla;\n\t\t\tlet preco = documentoproduto.preco.format(2, \",\", \".\");\n\t\t\tlet totalproduto = (documentoproduto.quantidade * documentoproduto.preco).format(2, \",\", \".\");\n\n\t\t\t// Monta a primeira linha\n\t\t\tlet linha1 = sequencial + \" \" + descricao;\n\t\t\tawait this.texto(linha1);\n\n\t\t\t// Monta a segunda linha\n\t\t\tlet calculo = \"    \" + quantidade + \" X \" + preco;\n\t\t\tlet linha2 = calculo + \" \".repeat(this.colunas - calculo.length - totalproduto.length) + totalproduto;\n\t\t\tawait this.texto(linha2);\n\n\t\t\t// Verifica se houve desconto no item\n\t\t\tif(documentoproduto.totaldesconto > 0){\n\t\t\t\tlet totaldesconto = \"-\" + documentoproduto.totaldesconto.format(2, \",\", \".\");\n\t\t\t\tlet texto = \"    Desconto\" + \" \".repeat(this.colunas - (12 + totaldesconto.length)) + totaldesconto;\n\t\t\t\tawait this.texto(texto);\n\t\t\t}\n\n\t\t\t// Verifica se houve acrescimo no item\n\t\t\tif(documentoproduto.totalacrescimo > 0){\n\t\t\t\tlet totalacrescimo = \"+\" + documentoproduto.totalacrescimo.format(2, \",\", \".\");\n\t\t\t\tlet texto = \"    Acrescimo\" + \" \".repeat(this.colunas - (13 + totalacrescimo.length)) + totalacrescimo;\n\t\t\t\tawait this.texto(texto);\n\t\t\t}\n\t\t}\n\n\t\t// Linha\n\t\tawait this.linha();\n\t}\n\n\t// Imprime uma linha de separacao\n\tasync linha(){\n\t\tawait this.texto(\"-\".repeat(this.colunas));\n\t}\n\n\t// Imprime um QR Code\n\tasync qrcode(qrcode){\n\t\tlet escpos = await this.carregarEscPos();\n\t\tescpos.qrcode(qrcode);\n\t}\n\n\t// Reinicia as configuracoes da impressora para os valor padroes\n\tasync reiniciar(){\n\t\tif(this.colunas === null){\n\t\t\tthis.colunas = parseInt(await valorParametro(this.Pool, \"IMPRESSORA\", \"COLUNAS\"), 10);\n\t\t}\n\t\tif(this.nome === null){\n\t\t\tthis.nome = await valorParametro(this.Pool, \"IMPRESSORA\", \"NOME\");\n\t\t}\n\t\tif(this.modelo === null){\n\t\t\tthis.modelo = await valorParametro(this.Pool, \"IMPRESSORA\", \"MODELO\");\n\t\t}\n\n\t\tlet escpos = await this.carregarEscPos();\n\t\tescpos.reset();\n\t}\n\n\t// Imprime um texto com opcao de alinhamento e negrito\n\tasync texto(texto, align, bold){\n\t\talign = (align === undefined ? \"left\" : align);\n\t\tbold = (bold === undefined ? false : bold);\n\n\t\tif(texto === null){\n\t\t\ttexto = \"\";\n\t\t}\n\n\t\tlet escpos = await this.carregarEscPos();\n\n\t\tswitch(align){\n\t\t\tcase \"center\":\n\t\t\t\ttexto = texto.cpad(this.colunas, \" \");\n\t\t\t\tbreak;\n\t\t\tcase \"left\":\n\t\t\t\ttexto = texto.rpad(this.colunas, \" \");\n\t\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\ttexto = texto.lpad(this.colunas, \" \");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\ttexto = texto.substr(0, this.colunas);\n\n\t\tescpos.text(texto, bold);\n\t}\n\n}\n","import React from \"react\";\nimport $ from \"jquery\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport FormGroup from \"../com/FormGroup.js\";\nimport Row from \"../com/Row.js\";\nimport SubTitle from \"../com/SubTitle.js\";\nimport Title from \"../com/Title.js\";\n\nimport Printer from \"../com/Printer.js\";\n\nimport {currentDate, valorParametro} from \"../def/function.js\";\n\nexport default class Fechamento extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\ttipo: null,\n\t\t\tdtinicial: null,\n\t\t\tdtfinal: null,\n\t\t\tativarFechamentoRelatorio: false,\n\t\t\tativarFechamentoResumo: false\n\t\t};\n\n\t\tthis.gerar = this.gerar.bind(this);\n\t\tthis.imprimir = this.imprimir.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t\tthis.Printer = new Printer(this.Pool);\n\n\t\t// Tipo de documentos que deverao ser contabilizadas\n\t\tlet arrOperacao = [\"CU\"];\n\t\tfor(let i in arrOperacao){\n\t\t\tarrOperacao[i] = \"'\" + arrOperacao[i] + \"'\";\n\t\t}\n\t\tthis.operacaoQuery = \"(\" + arrOperacao.join(\", \") + \")\";\n\t}\n\n\tasync gerar(){\n\t\tif(!$(\"#tipo\").val()){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Por favor, informe o tipo de fechamento antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\tif(!$(\"#dtinicial\").val()){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Por favor, informe a data inicial do fechamento antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\tif(!$(\"#dtfinal\").val()){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Por favor, informe a data final do fechamento antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tawait this.prepararImpressao();\n\n\t\tthis.setState({\n\t\t\ttipo: $(\"#tipo\").val(),\n\t\t\tdtinicial: $(\"#dtinicial\").val(),\n\t\t\tdtfinal: $(\"#dtfinal\").val(),\n\t\t\tativarFechamentoRelatorio: false,\n\t\t\tativarFechamentoResumo: false\n\t\t}, () => {\n\t\t\tthis.setState({\n\t\t\t\tativarFechamentoRelatorio: true\n\t\t\t}, () => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tativarFechamentoResumo: true\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tasync imprimir(){\n\t\tawait this.Printer.alimentar(3);\n\t\tawait this.Printer.guilhotina();\n\t\tawait this.Printer.imprimir();\n\t\twindow.FastMessage.show(\"Fechamento impresso com sucesso!\");\n\t}\n\n\tasync prepararImpressao(){\n\t\tawait this.Printer.reiniciar();\n\n\t\t// Formata as datas\n\t\tlet dtinicial = $(\"#dtinicial\").val().split(\"-\").reverse().join(\"/\");\n\t\tlet dtfinal = $(\"#dtfinal\").val().split(\"-\").reverse().join(\"/\");\n\n\t\t// Cabecalho\n\t\tawait this.Printer.texto(await valorParametro(this.Pool, \"EMITENTE\", \"NOMEFANTASIA\"), \"center\", true);\n\t\tawait this.Printer.texto(\"FECHAMENTO: \" + dtinicial + \" a \" + dtfinal, \"center\", true);\n\t\tawait this.Printer.alimentar();\n\t}\n\n\trender(){\n\t\tlet disabledImprimir = (!this.state.tipo);\n\n\t\treturn (\n\t\t\t<Content className=\"Fechamento\">\n\t\t\t\t<Title>Fechamento</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\" offset=\"3\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<FormGroup type=\"select\" id=\"tipo\" label=\"Fechamento por\" className=\"col-12\" options={{\"data\": \"Data\", \"categoria\": \"Categoria\", \"formapagamento\": \"Forma de pagamento\", \"produto\": \"Produto\"}} defaultValue=\"data\" />\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtinicial\" label=\"Data inicial\" className=\"col-6\" defaultValue={currentDate()} />\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtfinal\" label=\"Data final\" className=\"col-6\" defaultValue={currentDate()} />\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"pr-0\">\n\t\t\t\t\t\t\t\t<Button text=\"Gerar\" block={true} color=\"green\" icon=\"file-play\" onClick={this.gerar} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"pl-0\">\n\t\t\t\t\t\t\t\t<Button text=\"Imprimir\" block={true} color=\"blue\" icon=\"printer\" onClick={this.imprimir} disabled={disabledImprimir} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<FechamentoRelatorio Pool={this.Pool} Printer={this.Printer} tipo={this.state.tipo} dtinicial={this.state.dtinicial} dtfinal={this.state.dtfinal} operacaoQuery={this.operacaoQuery} ativar={this.state.ativarFechamentoRelatorio} />\n\t\t\t\t<FechamentoResumo Pool={this.Pool} Printer={this.Printer} dtinicial={this.state.dtinicial} dtfinal={this.state.dtfinal} operacaoQuery={this.operacaoQuery} ativar={this.state.ativarFechamentoResumo} />\n\t\t\t</Content>\n\t\t)\n\t}\n}\n\nclass FechamentoRelatorio extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdados: []\n\t\t};\n\n\t\tthis.tipoDescritivo = this.tipoDescritivo.bind(this);\n\t}\n\n\tasync carregarDados(props){\n\t\tprops = (props === undefined ? this.props : props);\n\n\t\t// Verifica se deve executar a instrucao\n\t\tif(!props.ativar){\n\t\t\treturn;\n\t\t}\n\n\t\t// Monta a query de acordo com o tipo de fechamento\n\t\tlet query = null;\n\t\tswitch(props.tipo){\n\t\t\tcase \"categoria\":\n\t\t\t\tquery = [\n\t\t\t\t\t\"SELECT categoria.descricao,\",\n\t\t\t\t\t\"  SUM(documentoproduto.quantidade) AS quantidade,\",\n\t\t\t\t\t\"  SUM(documentoproduto.totalproduto) AS total\",\n\t\t\t\t\t\"FROM documentoproduto\",\n\t\t\t\t\t\"INNER JOIN documento USING (iddocumento)\",\n\t\t\t\t\t\"INNER JOIN produto USING (idproduto)\",\n\t\t\t\t\t\"INNER JOIN categoria USING (idcategoria)\",\n\t\t\t\t\t\"WHERE documento.dthrcriacao::DATE BETWEEN $1 AND $2\",\n\t\t\t\t\t\"  AND documento.status = 'A'\",\n\t\t\t\t\t\"  AND documento.operacao IN \" + props.operacaoQuery,\n\t\t\t\t\t\"GROUP BY 1\",\n\t\t\t\t\t\"ORDER BY 3 DESC\"\n\t\t\t\t].join(\" \");\n\t\t\t\tbreak;\n\t\t\tcase \"data\":\n\t\t\t\tquery = [\n\t\t\t\t\t\"SELECT TO_CHAR(documento.dthrcriacao, 'DD/MM/YYYY') AS descricao,\",\n\t\t\t\t\t\"  SUM(documentoproduto.quantidade) AS quantidade,\",\n\t\t\t\t\t\"  SUM(documentoproduto.totalproduto) AS total,\",\n\t\t\t\t\t\"  documento.dthrcriacao::DATE AS dtcriacao\",\n\t\t\t\t\t\"FROM documentoproduto\",\n\t\t\t\t\t\"INNER JOIN documento USING (iddocumento)\",\n\t\t\t\t\t\"WHERE documento.dthrcriacao::DATE BETWEEN $1 AND $2\",\n\t\t\t\t\t\"  AND documento.status = 'A'\",\n\t\t\t\t\t\"  AND documento.operacao IN \" + props.operacaoQuery,\n\t\t\t\t\t\"GROUP BY 1, 4\",\n\t\t\t\t\t\"ORDER BY 4\"\n\t\t\t\t].join(\" \");\n\t\t\t\tbreak;\n\t\t\tcase \"formapagamento\":\n\t\t\t\tquery = [\n\t\t\t\t\t\"SELECT formapagamento.descricao,\",\n\t\t\t\t\t\"  COUNT(documentopagamento.iddocumentopagamento) AS quantidade,\",\n\t\t\t\t\t\"  SUM(documentopagamento.totalpagamento) AS total\",\n\t\t\t\t\t\"FROM documentopagamento\",\n\t\t\t\t\t\"INNER JOIN documento USING (iddocumento)\",\n\t\t\t\t\t\"INNER JOIN formapagamento USING (idformapagamento)\",\n\t\t\t\t\t\"WHERE documento.dthrcriacao::DATE BETWEEN $1 AND $2\",\n\t\t\t\t\t\"  AND documento.status = 'A'\",\n\t\t\t\t\t\"  AND documento.operacao IN \" + props.operacaoQuery,\n\t\t\t\t\t\"GROUP BY 1\",\n\t\t\t\t\t\"ORDER BY 3 DESC\"\n\t\t\t\t].join(\" \");\n\t\t\t\tbreak;\n\t\t\tcase \"produto\":\n\t\t\t\tquery = [\n\t\t\t\t\t\"SELECT produto.descricao,\",\n\t\t\t\t\t\"  SUM(documentoproduto.quantidade) AS quantidade,\",\n\t\t\t\t\t\"  SUM(documentoproduto.totalproduto) AS total\",\n\t\t\t\t\t\"FROM documentoproduto\",\n\t\t\t\t\t\"INNER JOIN documento USING (iddocumento)\",\n\t\t\t\t\t\"INNER JOIN produto USING (idproduto)\",\n\t\t\t\t\t\"WHERE documento.dthrcriacao::DATE BETWEEN $1 AND $2\",\n\t\t\t\t\t\"  AND documento.status = 'A'\",\n\t\t\t\t\t\"  AND documento.operacao IN \" + props.operacaoQuery,\n\t\t\t\t\t\"GROUP BY 1\",\n\t\t\t\t\t\"ORDER BY 3 DESC\"\n\t\t\t\t].join(\" \");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Executa comando SQL\n\t\tlet res = await props.Pool.query(query, [props.dtinicial, props.dtfinal]);\n\n\t\t// Determina o tamanho de cada coluna\n\t\tlet colunas = this.props.Printer.colunas;\n\t\tlet colQuantidade = 6;\n\t\tlet colTotal = 10;\n\t\tlet colDescricao = colunas - colQuantidade - colTotal;\n\n\t\t// Cria o cabecalho da grade na impressao\n\t\tlet texto = this.tipoDescritivo().substr(0, colDescricao).rpad(colDescricao, \" \");\n\t\ttexto += \"Qtde\".substr(0, colQuantidade).cpad(colQuantidade, \" \");\n\t\ttexto += \"Total\".substr(0, colTotal).lpad(colTotal, \" \");\n\t\tawait this.props.Printer.texto(texto, \"left\", true);\n\n\t\t// Alimenta classe da impressora\n\t\tfor(let i in res.rows){\n\t\t\tlet row = res.rows[i];\n\t\t\tlet descricao = row.descricao.removeSpecial();\n\t\t\tlet quantidade = row.quantidade.format(0, \",\", \".\");\n\t\t\tlet total = row.total.format(2, \",\", \".\");\n\n\t\t\tlet texto = descricao.substr(0, colDescricao).rpad(colDescricao, \" \");\n\t\t\ttexto += quantidade.substr(0, colQuantidade).cpad(colQuantidade, \" \");\n\t\t\ttexto += total.substr(0, colTotal).lpad(colTotal, \" \");\n\t\t\tawait this.props.Printer.texto(texto);\n\t\t}\n\t\tawait this.props.Printer.alimentar(2);\n\n\t\t// Atualiza o State com os dados\n\t\tthis.setState({\n\t\t\tdados: res.rows\n\t\t});\n\t}\n\n\tcomponentWillUpdate(nextProps){\n\t\tif(nextProps !== this.props){\n\t\t\tthis.carregarDados(nextProps);\n\t\t}\n\t}\n\n\ttipoDescritivo(){\n\t\tswitch(this.props.tipo){\n\t\t\tcase \"categoria\":\n\t\t\t\treturn \"Categoria\";\n\t\t\tcase \"data\":\n\t\t\t\treturn \"Data\";\n\t\t\tcase \"formapagamento\":\n\t\t\t\treturn \"Forma de pagamento\";\n\t\t\tcase \"produto\":\n\t\t\t\treturn \"Produto\";\n\t\t\tdefault:\n\t\t\t\treturn this.props.tipo;\n\t\t}\n\t}\n\n\trender(){\n\t\tif(!this.props.ativar || this.props.tipo === null){\n\t\t\treturn null;\n\t\t}\n\n\t\tlet t_quantidade = 0;\n\t\tlet t_total = 0;\n\n\t\treturn (\n\t\t\t<Row className=\"mt-5\">\n\t\t\t\t<Col size=\"8\" offset=\"2\">\n\t\t\t\t\t<table className=\"table table-striped\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>{this.tipoDescritivo()}</th>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">Quantidade</th>\n\t\t\t\t\t\t\t\t<th className=\"text-right\">Total</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{this.state.dados.map((e, i) => {\n\t\t\t\t\t\t\t\tt_quantidade += parseFloat(e.quantidade);\n\t\t\t\t\t\t\t\tt_total += parseFloat(e.total);\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<tr key={i}>\n\t\t\t\t\t\t\t\t\t\t<td>{e.descricao}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-center\">{e.quantidade.format(0, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + e.total.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">{t_quantidade.format(0, \",\", \".\")}</th>\n\t\t\t\t\t\t\t\t<th className=\"text-right\">{\"R$ \" + t_total.format(2, \",\", \".\")}</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tfoot>\n\t\t\t\t\t</table>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t);\n\t}\n}\n\nclass FechamentoResumo extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\ttotalbruto: 0,\n\t\t\ttotalcancelado: 0,\n\t\t\tqtdecancelado: 0,\n\t\t\ttotalativo: 0,\n\t\t\tqtdeativo: 0,\n\t\t\ttotalorcamento: 0\n\t\t};\n\n\t\tthis.carregarDados = this.carregarDados.bind(this);\n\t}\n\n\tasync carregarDados(props){\n\t\tprops = (props === undefined ? this.props : props);\n\n\t\t// Verifica se deve executar a instrucao\n\t\tif(!props.ativar){\n\t\t\treturn;\n\t\t}\n\n\t\tlet query = [\n\t\t\t\"SELECT COALESCE((SELECT SUM(totaldocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND operacao IN (\" + props.operacaoQuery + \")), 0) AS totalbruto,\",\n\t\t\t\"  COALESCE((SELECT SUM(totaldocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND status = 'C' AND operacao IN (\" + props.operacaoQuery + \")), 0) AS totalcancelado,\",\n\t\t\t\"  COALESCE((SELECT COUNT(iddocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND status = 'C' AND operacao IN (\" + props.operacaoQuery + \")), 0) AS qtdecancelado,\",\n\t\t\t\"  COALESCE((SELECT SUM(totaldocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND status = 'A' AND operacao IN (\" + props.operacaoQuery + \")), 0) AS totalativo,\",\n\t\t\t\"  COALESCE((SELECT COUNT(iddocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND status = 'A' AND operacao IN (\" + props.operacaoQuery + \")), 0) AS qtdeativo,\",\n\t\t\t\"  COALESCE((SELECT SUM(totaldocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND status = 'A' AND operacao IN ('OR')), 0) AS totalorcamento\",\n\t\t].join(\" \");\n\n\t\t// Executa comando SQL\n\t\tlet res = await props.Pool.query(query, [props.dtinicial, props.dtfinal]);\n\t\tlet row = res.rows[0];\n\n\t\t// Monta impressao do resumo\n\t\tlet colResumo2 = 15;\n\t\tlet colResumo1 = this.props.Printer.colunas - colResumo2;\n\t\tawait this.props.Printer.texto(\"RESUMO\", \"center\", true);\n\t\tawait this.props.Printer.texto(\"Total bruto das vendas\".rpad(colResumo1, \" \") + row.totalbruto.format(2, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Total de vendas canceladas\".rpad(colResumo1, \" \") + row.totalcancelado.format(2, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Quantidade de vendas canceladas\".rpad(colResumo1, \" \") + row.qtdecancelado.format(0, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Total liquido das vendas\".rpad(colResumo1, \" \") + row.totalativo.format(2, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Quantidade de vendas\".rpad(colResumo1, \" \") + row.qtdeativo.format(0, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Total liquido das vendas\".rpad(colResumo1, \" \") + (row.totalativo / row.qtdeativo).format(2, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Total bruto dos orcamentos\".rpad(colResumo1, \" \") + row.totalorcamento.format(2, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.alimentar(2);\n\n\t\t// Atualiza o State com o dados\n\t\tthis.setState({\n\t\t\ttotalbruto: row.totalbruto,\n\t\t\ttotalcancelado: row.totalcancelado,\n\t\t\tqtdecancelado: row.qtdecancelado,\n\t\t\ttotalativo: row.totalativo,\n\t\t\tqtdeativo: row.qtdeativo,\n\t\t\ttotalorcamento: row.totalorcamento\n\t\t});\n\t}\n\n\tcomponentWillUpdate(nextProps){\n\t\tif(nextProps !== this.props){\n\t\t\tthis.carregarDados(nextProps);\n\t\t}\n\t}\n\n\trender(){\n\t\tif(!this.props.ativar || this.props.dtinicial === null || this.props.dtfinal === null){\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"mb-5\">\n\t\t\t\t<SubTitle text=\"Resumo\" />\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"8\" offset=\"2\">\n\t\t\t\t\t\t<table className=\"table table-striped\">\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Total bruto das vendas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + this.state.totalbruto.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Total de vendas canceladas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + this.state.totalcancelado.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Quantidade de vendas canceladas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{this.state.qtdecancelado}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Total liquido de vendas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + this.state.totalativo.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Quantidade de vendas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{this.state.qtdeativo}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Ticket médio das vendas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + (this.state.totalativo / this.state.qtdeativo).format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Total dos orçamentos</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + this.state.totalorcamento.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import { default as xlsx } from \"node-xlsx\";\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nconst electron = window.require(\"electron\");\nconst remote = window.require(\"@electron/remote\");\n\nexport default class Importacao {\n\n\tconstructor(Pool){\n\t\tthis.Pool = Pool;\n\t}\n\n\tcorAleatoria(){\n\t\tlet cores = [\n\t\t\t\"#b71c1c\", \"#d32f2f\", \"#f44336\", \"#e57373\", \"#ffcdd2\",\n\t\t\t\"#880e4f\", \"#c2185b\", \"#e91e63\", \"#f06292\", \"#f8bbd0\",\n\t\t\t\"#4a148c\", \"#7b1fa2\", \"#9c27b0\", \"#ba68c8\", \"#e1bee7\",\n\t\t\t\"#311b92\", \"#512da8\", \"#673ab7\", \"#9575cd\", \"#d1c4e9\",\n\t\t\t\"#1a237e\", \"#303f9f\", \"#3f51b5\", \"#7986cb\", \"#c5cae9\",\n\t\t\t\"#0d47a1\", \"#1976d2\", \"#2196f3\", \"#64b5f6\", \"#bbdefb\",\n\t\t\t\"#01579b\", \"#0288d1\", \"#03a9f4\", \"#4fc3f7\", \"#b3e5fc\",\n\t\t\t\"#006064\", \"#0097a7\", \"#00bcd4\", \"#4dd0e1\", \"#b2ebf2\",\n\t\t\t\"#004d40\", \"#00796b\", \"#009688\", \"#4db6ac\", \"#b2dfdb\",\n\t\t\t\"#194D33\", \"#388e3c\", \"#4caf50\", \"#81c784\", \"#c8e6c9\",\n\t\t\t\"#33691e\", \"#689f38\", \"#8bc34a\", \"#aed581\", \"#dcedc8\",\n\t\t\t\"#827717\", \"#afb42b\", \"#cddc39\", \"#dce775\", \"#f0f4c3\",\n\t\t\t\"#f57f17\", \"#fbc02d\", \"#ffeb3b\", \"#fff176\", \"#fff9c4\",\n\t\t\t\"#ff6f00\", \"#ffa000\", \"#ffc107\", \"#ffd54f\", \"#ffecb3\",\n\t\t\t\"#e65100\", \"#f57c00\", \"#ff9800\", \"#ffb74d\", \"#ffe0b2\",\n\t\t\t\"#bf360c\", \"#e64a19\", \"#ff5722\", \"#ff8a65\", \"#ffccbc\",\n\t\t\t\"#3e2723\", \"#5d4037\", \"#795548\", \"#a1887f\", \"#d7ccc8\",\n\t\t\t\"#263238\", \"#455a64\", \"#607d8b\", \"#90a4ae\", \"#cfd8dc\",\n\t\t\t\"#000000\", \"#525252\", \"#969696\", \"#D9D9D9\", \"#FFFFFF\"\n\t\t];\n\t\treturn cores[Math.floor(Math.random() * cores.length)];\n\t}\n\n\tasync incluirCategoria(client, categoria){\n\t\tlet cor = this.corAleatoria();\n\n\t\tlet sql = \"INSERT INTO categoria (descricao, idncm, sinctributacao, cor) VALUES ($1, $2, $3, $4) RETURNING idcategoria\";\n\t\tlet res = await client.query(sql, [categoria.descricao, categoria.idncm, 'S', cor]);\n\n\t\treturn res.rows[0].idcategoria;\n\t}\n\n\tasync incluirProduto(client, produto){\n\t\tconsole.log(produto);\n\n\t\t// Trata alguns valores recebidos\n\t\tif(produto.balanca)\tproduto.balanca = produto.balanca.substr(0, 1).toUpperCase();\n\t\tif(produto.precovariavel) produto.precovariavel = produto.precovariavel.substr(0, 1).toUpperCase();\n\t\tif(produto.preco) produto.preco = produto.preco.toFloat();\n\t\tif(produto.aliqicms) produto.aliqicms = produto.aliqicms.toFloat();\n\t\tif(produto.aliqpis) produto.aliqpis = produto.aliqpis.toFloat();\n\t\tif(produto.aliqcofins) produto.aliqcofins = produto.aliqcofins.toFloat();\n\n\t\t// Balanca para unidade de medida\n\t\tproduto.idunidade = (produto.balanca === \"S\" ? 2 : 1);\n\t\tdelete produto.balanca;\n\n\t\t// Preenche o preco com zero caso venha vazio\n\t\tif(!produto.preco){\n\t\t\tproduto.preco = 0;\n\t\t}\n\n\t\t// Reformata o NCM\n\t\tif(produto.codigoncm){\n\t\t\tproduto.codigoncm = String(produto.codigoncm).removeFormat();\n\t\t\tproduto.codigoncm = produto.codigoncm.substr(0, 4) + \".\" + produto.codigoncm.substr(4, 2) + \".\" + produto.codigoncm.substr(6, 2);\n\t\t}\n\n\t\t// Reformata o CEST\n\t\tif(produto.cest){\n\t\t\tproduto.cest = produto.cest.removeFormat();\n\t\t\tproduto.cest = produto.cest.substr(0, 2) + \".\" + produto.cest.substr(2, 4) + \".\" + produto.cest.substr(6, 2);\n\t\t}\n\n\t\t// Reformata o CFOP\n\t\tif(produto.cfop){\n\t\t\tproduto.cfop = produto.cfop.removeFormat();\n\t\t\tproduto.cfop = produto.cfop.substr(0, 1) + \".\" + produto.cfop.substr(1, 3);\n\t\t}\n\n\t\t// Verifica se deve sincronizar a tributacao\n\t\tconsole.log([produto.csosn, produto.cstpis, produto.cstcofins, (produto.csosn || produto.cstpis || produto.cstcofins)]);\n\t\tif(produto.csosn || produto.cstpis || produto.cstcofins){\n\t\t\tproduto.sinctributacao = \"N\";\n\t\t}else{\n\t\t\tproduto.sinctributacao = \"S\";\n\t\t}\n\n\t\t// Carrega o ID do NCM\n\t\tif(produto.codigoncm && !produto.idncm){\n\t\t\tlet res = await client.query(\"SELECT idncm FROM ncm WHERE codigoncm = $1\", [produto.codigoncm]);\n\t\t\tif(res.rows.length === 0){\n\t\t\t\tthrow new Error(\"O NCM \" + produto.codigoncm + \" não foi encontrado na base de NCMs do SAT-Flex.\");\n\t\t\t}\n\t\t\tproduto.idncm = res.rows[0].idncm;\n\t\t}\n\n\t\t// Verifica se deve consultar a categoria\n\t\tif(produto.categoria && !produto.idcateogria){\n\t\t\tlet res = await client.query(\"SELECT idcategoria FROM categoria WHERE descricao = $1\", [produto.categoria]);\n\t\t\tif(res.rows.length === 0){\n\t\t\t\t// Cria a categoria e retorna o ID\n\t\t\t\tproduto.idcategoria = await this.incluirCategoria(client, {\n\t\t\t\t\tdescricao: produto.categoria,\n\t\t\t\t\tidncm: produto.idncm\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tproduto.idcategoria = res.rows[0].idcategoria;\n\t\t\t}\n\t\t}\n\n\t\t// Remove as colunas que nao vao entrar no SQL\n\t\tdelete produto.codigoncm;\n\t\tdelete produto.categoria;\n\n\t\t// Caputura as colunas e os valores\n\t\tlet columns = Object.keys(produto);\n\t\tlet values = Object.values(produto);\n\t\tlet references = [];\n\t\tfor(let i = 1; i <= values.length; i++){\n\t\t\treferences.push(\"$\" + String(i));\n\t\t}\n\n\t\t// Cria SQL de inclusao do produto e executa\n\t\tlet sql = \"INSERT INTO produto (\" + columns.join(\", \") + \") VALUES (\" + references.join(\", \") + \")\";\n\t\tawait client.query(sql, values);\n\n\t\t// Incrementa o contador de produto importados\n\t\tthis.importados++;\n\t}\n\n\tasync processarPlanilha(fileName, callBack){\n\t\t// Abre um client com o banco de dados\n\t\tconst client = await this.Pool.connect();\n\n\t\ttry{\n\t\t\t// Inicia a transacao\n\t\t\tclient.query(\"BEGIN\");\n\n\t\t\t// Carrega a planilha\n\t\t\tlet planilha = xlsx.parse(fileName);\n\n\t\t\t// Captura os dados a serem lidos\n\t\t\tlet dados = planilha[0].data;\n\n\t\t\t// Remove a primeira linha (cabecalho)\n\t\t\tdados.shift();\n\n\t\t\t// Verifica se existe ao menos um produto\n\t\t\tif(typeof dados !== \"object\" || dados.length === 0 || dados[0].length === 0){\n\t\t\t\tthrow new Error(\"Nenhum produto foi encontrado na planilha.\");\n\t\t\t}\n\n\t\t\t// Percorre as linhas da planilha\n\t\t\tfor(let linha of dados){\n\t\t\t\tif(!linha[0]){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet produto = {\n\t\t\t\t\tdescricao: linha[0],\n\t\t\t\t\tcategoria: linha[1],\n\t\t\t\t\tcodigoean: linha[2],\n\t\t\t\t\tbalanca: linha[3],\n\t\t\t\t\tprecovariavel: linha[4],\n\t\t\t\t\tpreco: linha[5],\n\t\t\t\t\tcodigoncm: linha[6],\n\t\t\t\t\torigem: linha[7],\n\t\t\t\t\tcsosn: linha[8],\n\t\t\t\t\taliqicms: linha[9],\n\t\t\t\t\tcstpis: linha[10],\n\t\t\t\t\taliqpis: linha[11],\n\t\t\t\t\tcstcofins: linha[12],\n\t\t\t\t\taliqcofins: linha[13],\n\t\t\t\t\tcodcontribsocial: linha[14],\n\t\t\t\t\tcest: linha[15],\n\t\t\t\t\tcfop: linha[16]\n\t\t\t\t};\n\n\t\t\t\t// Tenta gravar o produto\n\t\t\t\tawait this.incluirProduto(client, produto);\n\t\t\t}\n\n\t\t\t// Confirma a transacao do banco de dados\n\t\t\tawait client.query(\"COMMIT\");\n\n\t\t\t// Sucesso\n\t\t\tcallBack();\n\t\t}catch(err){\n\t\t\t// Cancela a transacao no banco\n\t\t\tawait client.query(\"ROLLBACK\");\n\t\t\tcallBack(err);\n\t\t}finally{\n\t\t\t// Libera o client com o banco\n\t\t\tclient.release();\n\t\t}\n\t}\n\n\tselecionarPlanilha(){\n\t\tlet { dialog } = remote;\n\t\tdialog.showOpenDialog({\n\t\t\ttitle: \"Selecone a planilha de produtos\",\n\t\t\tfilters: [\n\t\t\t\t{name: \"MS-Excel\", extensions: [\"xls\", \"xlsx\"]}\n\t\t\t]\n\t\t}, (filePaths) => {\n\t\t\tif(filePaths && filePaths.length > 0){\n\t\t\t\tthis.importados = 0;\n\t\t\t\twindow.Loading.show();\n\t\t\t\tthis.processarPlanilha(filePaths[0], (err) => {\n\t\t\t\t\twindow.Loading.hide();\n\t\t\t\t\tif(err) return defaultMessageBoxError(err);\n\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\ttitle: \"Planilha importada com sucesso!\",\n\t\t\t\t\t\ttext: \"A planilha de produtos foi importada com sucesso.<br>Total de produtos: \" + String(this.importados)\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n}\n","import React from \"react\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport Importacao from \"../com/Importacao.js\";\nimport Printer from \"../com/Printer.js\";\n\nconst electron = window.require(\"electron\");\n\nexport default class Ferramentas extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tredirect: null\n\t\t};\n\n\t\tthis.descobrirPortaImpressora = this.descobrirPortaImpressora.bind(this);\n\t\tthis.importarPlanilha = this.importarPlanilha.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tconsoleDesenvolvedor(){\n\t\telectron.ipcRenderer.sendSync(\"open-dev-tools\");\n\t}\n\n\tdescobrirPortaImpressora(){\n\t\twindow.Loading.show();\n\t\tnew Promise(async (resolve) => {\n\t\t\tlet printer = new Printer(this.Pool);\n\t\t\tfor(let i = 1; i <= 20; i++){\n\t\t\t\tlet nome = \"COM\" + String(i);\n\t\t\t\tlet texto = \"Porta configurada para impressora: \" + nome + \" \".repeat(90);\n\t\t\t\ttry{\n\t\t\t\t\tawait printer.imprimir(nome, texto, \"escpos\");\n\t\t\t\t}catch(err){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tresolve();\n\t\t}).then(() => {\n\t\t\twindow.Loading.hide();\n\t\t\twindow.FastMessage.show(\"Texto enviado para as portas COM\");\n\t\t});\n\t}\n\n\timportarPlanilha(){\n\t\tlet importacao = new Importacao(this.Pool);\n\t\timportacao.selecionarPlanilha();\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Ferramentas</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"8\" offset=\"2\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text=\"Descobrir porta<br>COM da impressora\" icon=\"printer\" size=\"xxl\" block={true} onClick={this.descobrirPortaImpressora} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text=\"Importar planilha<br>de produtos\" icon=\"download\" size=\"xxl\" block={true} onClick={this.importarPlanilha} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text=\"Abrir console de<br>desenvolvedor\" icon=\"embed2\" size=\"xxl\" block={true} onClick={this.consoleDesenvolvedor} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport \"../css/ListGroup.css\";\n\nexport default class ListGroup extends React.Component {\n\trender(){\n\t\tlet className = [\"list-group\"];\n\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport \"../css/ListItem.css\";\n\nexport default class ListItem extends React.Component {\n\trender(){\n\t\tlet props = Object.assign({}, this.props);\n\n\t\tlet className = [\"list-group-item\"];\n\t\tif(props.className){\n\t\t\tclassName.push(props.className);\n\t\t}\n\t\tif(props.active){\n\t\t\tclassName.push(\"active\");\n\t\t}\n\t\tdelete props.active;\n\t\tdelete props.className;\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")} {...props}>\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport FormControl from \"../com/FormControl.js\";\nimport ListGroup from \"../com/ListGroup.js\";\nimport ListItem from \"../com/ListItem.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/Parametro.css\";\n\nexport default class Parametro extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tlistaGrupo: [],\n\t\t\tlistaParametro: [],\n\t\t\tgrupoAtivo: null,\n\t\t\tparametroAtivo: null,\n\n\t\t\tidparametro: null,\n\t\t\tvalor: null,\n\t\t\tobservacao: null\n\t\t};\n\n\t\tthis.ajustarAltura = this.ajustarAltura.bind(this);\n\t\tthis.carregarListaGrupo = this.carregarListaGrupo.bind(this);\n\t\tthis.carregarListaParametro = this.carregarListaParametro.bind(this);\n\t\tthis.carregarParametro = this.carregarParametro.bind(this);\n\t\tthis.gravar = this.gravar.bind(this);\n\t\tthis.onChangeValor = this.onChangeValor.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tajustarAltura(){\n\t\t$(\"#content .list-group\").each(function(){\n\t\t\tlet height = window.innerHeight - $(this).offset().top - 30;\n\t\t\t$(this).height(height);\n\t\t});\n\t}\n\n\tcarregarListaGrupo(){\n\t\tthis.Pool.query(\"SELECT DISTINCT grupo FROM parametro WHERE visivel = 'S' ORDER BY grupo\", [], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tlistaGrupo: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcarregarListaParametro(grupo){\n\t\tthis.Pool.query(\"SELECT idparametro, nome FROM parametro WHERE visivel = 'S' AND grupo = $1 ORDER BY ordem, nome\", [grupo], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tlistaParametro: res.rows,\n\t\t\t\tgrupoAtivo: grupo,\n\t\t\t\tparametroAtivo: null,\n\n\t\t\t\tidparametro: null,\n\t\t\t\tvalor: null,\n\t\t\t\tobservacao: null\n\t\t\t});\n\t\t});\n\t}\n\n\tcarregarParametro(idparametro){\n\t\tthis.Pool.query(\"SELECT idparametro, valor, observacao FROM parametro WHERE idparametro = $1\", [idparametro], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet row = res.rows.shift();\n\t\t\tthis.setState({\n\t\t\t\tparametroAtivo: idparametro,\n\t\t\t\tidparametro: row.idparametro,\n\t\t\t\tvalor: row.valor,\n\t\t\t\tobservacao: row.observacao\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\twindow.addEventListener(\"resize\", this.ajustarAltura);\n\n\t\tthis.ajustarAltura();\n\t\tthis.carregarListaGrupo();\n\t}\n\n\tcomponentWillUnmount(){\n\t\twindow.removeEventListener(\"resize\", this.ajustarAltura);\n\t}\n\n\tgravar(){\n\t\tlet query = \"UPDATE parametro SET valor = $1 WHERE idparametro = $2\";\n\t\tthis.Pool.query(query, [this.state.valor, this.state.idparametro], (err) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\twindow.FastMessage.show(\"Parâmetro atualizado com sucesso!\");\n\t\t})\n\t}\n\n\tonChangeValor(event){\n\t\tthis.setState({\n\t\t\tvalor: event.target.value\n\t\t});\n\t}\n\n\trender(){\n\t\tlet observacao = null;\n\t\tif(this.state.observacao){\n\t\t\tobservacao = this.state.observacao.replaceAll(\"\\\\n\", \"<br>\");\n\t\t}\n\n\t\treturn (\n\t\t\t<Content className=\"Parametro\">\n\t\t\t\t<Title>Parâmetros do sistema</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"3\" offset=\"1\">\n\t\t\t\t\t\t<ListGroup>\n\t\t\t\t\t\t\t{this.state.listaGrupo.map((row, i) => {\n\t\t\t\t\t\t\t\treturn <ListItem key={i} active={this.state.grupoAtivo === row.grupo} onClick={() => {this.carregarListaParametro(row.grupo)}}>{row.grupo}</ListItem>\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</ListGroup>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"3\">\n\t\t\t\t\t\t<ListGroup>\n\t\t\t\t\t\t\t{this.state.listaParametro.map((row, i) => {\n\t\t\t\t\t\t\t\treturn <ListItem key={i} active={this.state.parametroAtivo === row.idparametro} onClick={() => {this.carregarParametro(row.idparametro)}}>{row.nome}</ListItem>\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</ListGroup>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t<FormControl type=\"textarea\" rows=\"7\" value={this.state.valor} onChange={this.onChangeValor} disabled={!this.state.idparametro} />\n\t\t\t\t\t\t<Button text=\"Gravar alterações\" icon=\"floppy-disk\" color=\"green\" size=\"lg\" block={true} className=\"mt-2 mb-2\" disabled={!this.state.idparametro} onClick={this.gravar} />\n\t\t\t\t\t\t<div className={\"observacao\" + (observacao ? \"\" : \" d-none\")} dangerouslySetInnerHTML={{__html: observacao}}></div>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport FormControl from \"../com/FormControl.js\";\nimport FormGroup from \"../com/FormGroup.js\";\nimport Hr from \"../com/Hr.js\";\nimport Modal from \"../com/Modal.js\";\nimport Row from \"../com/Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class ModalProduto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tshow: this.props.show,\n\t\t\tshowDiv: null,\n\t\t\ttitle: null\n\t\t};\n\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.changeDiv = this.changeDiv.bind(this);\n\t\tthis.changeTitle = this.changeTitle.bind(this);\n\t\tthis.excluir = this.excluir.bind(this);\n\t\tthis.gravar = this.gravar.bind(this);\n\t\tthis.limpar = this.limpar.bind(this);\n\t\tthis.onChangeCategoria = this.onChangeCategoria.bind(this);\n\t\tthis.onChangeInput = this.onChangeInput.bind(this);\n\t\tthis.onChangeSincTributacao = this.onChangeSincTributacao.bind(this);\n\t\tthis.sincronizarTributacao = this.sincronizarTributacao.bind(this);\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false,\n\t\t\tshowDiv: null\n\t\t});\n\t}\n\n\tcarregar(idproduto, callback){\n\t\tlet query = [\n\t\t\t\"SELECT produto.descricao, produto.dthrcriacao,\",\n\t\t\t\"  produto.idcategoria, produto.codigoean, produto.idunidade,\",\n\t\t\t\"  produto.precovariavel, produto.preco, produto.status,\",\n\t\t\t\"  produto.sinctributacao, ncm.codigoncm, produto.origem,\",\n\t\t\t\"  produto.cfop, produto.csosn, produto.aliqicms, \",\n\t\t\t\"  produto.cstpis, produto.aliqpis, produto.cstcofins, \",\n\t\t\t\"  produto.aliqcofins, produto.codcontribsocial, produto.cest\",\n\t\t\t\"FROM produto\",\n\t\t\t\"LEFT JOIN ncm USING (idncm)\",\n\t\t\t\"WHERE produto.idproduto = $1\"\n\t\t].join(\" \");\n\n\t\tthis.props.Pool.query(query, [idproduto], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(res.rows.length === 0){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Produto não encontrado\",\n\t\t\t\t\ttext: \"O produto selecionado não pôde ser encontrado.\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet state = {};\n\t\t\tlet row = res.rows[0];\n\t\t\tfor(let id in row){\n\t\t\t\tlet value = row[id];\n\t\t\t\tswitch(id){\n\t\t\t\t\tcase \"dthrcriacao\":\n\t\t\t\t\t\tvalue = value.toLocaleString();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"preco\":\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tvalue = value.format(2, \",\", \".\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tstate[\"input_\" + id] = value;\n\t\t\t}\n\t\t\tthis.setState(state);\n\n\t\t\tif(typeof callback === \"function\"){\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t}\n\n\tchangeDiv(name){\n\t\tthis.setState({\n\t\t\tshowDiv: name\n\t\t});\n\t}\n\n\tchangeTitle(props){\n\t\tif(props.idproduto){\n\t\t\tprops.Pool.query(\"SELECT descricao FROM produto WHERE idproduto = $1\", [props.idproduto], (err, res) => {\n\t\t\t\tif(err){\n\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\ttitle: \"Alterando produto: \" + res.rows[0].descricao\n\t\t\t\t});\n\t\t\t});\n\t\t}else{\n\t\t\tthis.setState({\n\t\t\t\ttitle: \"Criando novo produto\"\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tif(!nextProps.show){\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.changeTitle(nextProps);\n\n\t\tlet updateShowState = () => {\n\t\t\tthis.setState({\n\t\t\t\tshow: nextProps.show\n\t\t\t}, () => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.changeDiv(\"principal\");\n\t\t\t\t}, 1000);\n\t\t\t});\n\t\t};\n\n\t\tif(nextProps.idproduto){\n\t\t\tthis.carregar(nextProps.idproduto, updateShowState);\n\t\t}else{\n\t\t\tthis.limpar();\n\t\t\tupdateShowState();\n\t\t}\n\t}\n\n\texcluir(){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Excluír produto\",\n\t\t\ttext: \"Tem certeza que deseja excluír o produto <b>\" + this.state.input_descricao + \"</b>?\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tthis.props.Pool.query(\"DELETE FROM produto WHERE idproduto = $1\", [this.props.idproduto], (err, res) => {\n\t\t\t\t\t\t\tif(err){\n\t\t\t\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tshow: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\twindow.FastMessage.show(\"Produto excluído com sucesso.\");\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Não\",\n\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t})\n\t}\n\n\tasync gravar(){\n\t\tlet query = null;\n\n\t\tlet columns = [];\n\t\tlet values = [];\n\t\tfor(let name in this.state){\n\t\t\tif(name.substr(0, 6) === \"input_\"){\n\t\t\t\tlet name2 = name.replace(\"input_\", \"\");\n\t\t\t\tlet value = this.state[name];\n\n\t\t\t\tif(name2 === \"codigoncm\" && value){\n\t\t\t\t\ttry{\n\t\t\t\t\t\tlet res = await this.props.Pool.query(\"SELECT idncm FROM ncm WHERE codigoncm = $1\", [value]);\n\t\t\t\t\t\tif(res.rows.length === 0){\n\t\t\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\t\t\ttitle: \"NCM inexistente\",\n\t\t\t\t\t\t\t\ttext: \"O código de NCM \" + value + \" não pôde ser encontrado.<br>Verifique se foi informado corretamente.\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tname2 = \"idncm\";\n\t\t\t\t\t\tvalue = res.rows[0].idncm;\n\t\t\t\t\t}catch(err){\n\t\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif([\"idproduto\", \"dthrcriacao\"].indexOf(name2) > -1){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tswitch(name2){\n\t\t\t\t\tcase \"preco\":\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tif(value){\n\t\t\t\t\t\t\tvalue = value.toFloat();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcolumns.push(name2);\n\t\t\t\tvalues.push(value);\n\t\t\t}\n\t\t}\n\n\t\tif(this.props.idproduto){\n\t\t\tlet num = 1;\n\t\t\tlet sets = [];\n\t\t\tfor(let i in columns){\n\t\t\t\tsets.push(columns[i] + \" = $\" + num++);\n\t\t\t}\n\t\t\tquery = \"UPDATE produto SET \" + sets.join(\", \") + \" WHERE idproduto = \" + this.props.idproduto;\n\t\t}else{\n\t\t\tlet sets = [];\n\t\t\tfor(let i = 0; i < columns.length; i++){\n\t\t\t\tsets.push(\"$\" + (i + 1));\n\t\t\t}\n\t\t\tquery = \"INSERT INTO produto (\" + columns.join(\", \") + \") VALUES (\" + sets.join(\", \") + \")\";\n\t\t}\n\n\t\tthis.props.Pool.query(query, values, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.FastMessage.show(\"Produto gravado com sucesso.\");\n\t\t});\n\t}\n\n\tlimpar(){\n\t\tlet state = {};\n\t\tfor(let name in this.state){\n\t\t\tif(name.substr(0, 6) === \"input_\"){\n\t\t\t\tstate[name] =  null;\n\t\t\t}\n\t\t}\n\t\tthis.setState(state);\n\t}\n\n\tonChangeCategoria(event){\n\t\tthis.onChangeInput(event, () => {\n\t\t\tthis.sincronizarTributacao();\n\t\t});\n\t}\n\n\tonChangeInput(event, callback){\n\t\tlet element = event.target;\n\t\tlet id = element.id.replace(\"modalproduto-\", \"\");\n\t\tlet value = element.value;\n\t\tif(element.type === \"checkbox\"){\n\t\t\tvalue = (element.checked ? \"S\" : \"N\");\n\t\t}\n\n\t\tthis.setState({\n\t\t\t[\"input_\" + id]: value\n\t    }, callback);\n\t}\n\n\tonChangeSincTributacao(event){\n\t\tthis.onChangeInput(event, () => {\n\t\t\tthis.sincronizarTributacao();\n\t\t});\n\t}\n\n\tsincronizarTributacao(){\n\t\tif(this.state.input_sinctributacao !== \"S\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tlet query = [\n\t\t\t\"SELECT ncm.codigoncm, categoria.origem,\",\n\t\t\t\"  categoria.cfop, categoria.csosn, categoria.aliqicms, \",\n\t\t\t\"  categoria.cstpis, categoria.aliqpis, categoria.cstcofins, \",\n\t\t\t\"  categoria.aliqcofins, categoria.codcontribsocial, categoria.cest\",\n\t\t\t\"FROM categoria\",\n\t\t\t\"LEFT JOIN ncm USING (idncm)\",\n\t\t\t\"WHERE categoria.idcategoria = $1\"\n\t\t].join(\" \");\n\n\t\tthis.props.Pool.query(query, [this.state.input_idcategoria], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(res.rows.length === 0){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Categoria não encontrada\",\n\t\t\t\t\ttext: \"A categoria informada no produto não pôde ser encontrada.\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet state = {};\n\t\t\tlet row = res.rows[0];\n\t\t\tfor(let id in row){\n\t\t\t\tlet value = row[id];\n\t\t\t\tswitch(id){\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tvalue = value.format(2, \",\", \".\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tstate[\"input_\" + id] = value;\n\t\t\t}\n\t\t\tthis.setState(state);\n\t\t});\n\t}\n\n\tshouldComponentUpdate(nextProps){\n\t\treturn nextProps.show;\n\t}\n\n\trender(){\n\t\tlet origemOptions = {\n\t\t\t\"0\": \"0 - Nacional, exceto as indicadas nos códigos 3, 4, 5 e 8\",\n\t\t\t\"1\": \"1 - Estrangeira - Importação direta, exceto a indicada no código 6\",\n\t\t\t\"2\": \"2 - Estrangeira - Adquirida no mercado interno, exceto a indicada no código 7\",\n\t\t\t\"3\": \"3 - Nacional, mercadoria ou bem com Conteúdo de Importação superior a 40% e inferior ou igual a 70%\",\n\t\t\t\"4\": \"4 - Nacional, cuja produção tenha sido feita em conformidade com os processos produtivos básicos de que tratam o Decreto-Lei nº 288/67, e as Leis nºs 8.248/91, 8.387/91, 10.176/01 e 11.484/ 07\",\n\t\t\t\"5\": \"5 - Nacional, mercadoria ou bem com Conteúdo de Importação inferior ou igual a 40%\",\n\t\t\t\"6\": \"6 - Estrangeira - Importação direta, sem similar nacional, constante em lista da Resolução CAMEX nº 79/2012 e gás natural\",\n\t\t\t\"7\": \"7 - Estrangeira - Adquirida no mercado interno, sem similar nacional, constante em lista da Resolução CAMEX nº 79/2012 e gás natural\",\n\t\t\t\"8\": \"8 - Nacional, mercadoria ou bem com Conteúdo de Importação superior a 70%\"\n\t\t};\n\n\t\treturn (\n\t\t\t<Modal title={this.state.title} size=\"lg\" show={this.state.show} beforeClose={this.props.beforeClose} afterClose={this.props.afterClose} closeOnOutClick={false}>\n\t\t\t\t<div className={this.state.showDiv !== \"principal\" ? \"d-none\" : \"\"}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-descricao\" className=\"col-8\" label=\"Descrição\" value={this.state.input_descricao} onChange={this.onChangeInput} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-dthrcriacao\" className=\"col-4\" label=\"Criado em\" readOnly={true} value={this.state.input_dthrcriacao} onChange={this.onChangeInput} disabled={true} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-idcategoria\" className=\"col-5\" label=\"Categoria\" dbtable=\"categoria\" dbcolumn=\"descricao\" Pool={this.props.Pool} value={this.state.input_idcategoria} onChange={this.onChangeCategoria} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-codigoean\" className=\"col-4\" label=\"Código EAN\" value={this.state.input_codigoean} onChange={this.onChangeInput} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-idunidade\" className=\"col-3\" label=\"Unidade de venda\" dbtable=\"unidade\" dbcolumn=\"descricao\" Pool={this.props.Pool} value={this.state.input_idunidade} onChange={this.onChangeInput} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-precovariavel\" className=\"col-3\" label=\"Preço variável\" options={{\"S\": \"Sim\", \"N\": \"Não\"}} value={this.state.input_precovariavel} onChange={this.onChangeInput} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-preco\" className=\"col-3\" inputClassName=\"text-center\" label=\"Preço de venda\" InformarValor={{money: true, decimal: 2}} value={this.state.input_preco} onChange={this.onChangeInput} disabled={this.state.input_precovariavel === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-status\" className=\"col-3\" label=\"Status\" options={{\"A\": \"Ativo\", \"I\": \"Inativo\"}} value={this.state.input_status} onChange={this.onChangeInput} />\n\t\t\t\t\t\t<Col size=\"3\" labelMargin={true}>\n\t\t\t\t\t\t\t<Button text=\"Tributações...\" icon=\"file-text\" color=\"blue\" block={true} onClick={() => {this.changeDiv(\"tributacao\")}} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Hr className=\"mt-0\" />\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t\t<Button text=\"Excluír\" icon=\"bin\" color=\"red\" onClick={this.excluir} className={this.props.idproduto ? \"\" : \"d-none\"} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col size=\"6\" className=\"text-right\">\n\t\t\t\t\t\t\t<Button text=\"Cancelar\" icon=\"undo\" color=\"red\" onClick={this.cancelar} />\n\t\t\t\t\t\t\t<Button text=\"Gravar produto\" icon=\"thumbs-up\" color=\"green\" className=\"ml-2\" onClick={this.gravar} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t\t<div className={this.state.showDiv !== \"tributacao\" ? \"d-none\" : \"\"}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col size=\"12\">\n\t\t\t\t\t\t\t<FormControl type=\"checkbox\" id=\"modalproduto-sinctributacao\" label=\"Usar as mesmas tributações da categoria\" className=\"col-12\" value={this.state.input_sinctributacao} onChange={this.onChangeSincTributacao} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-codigoncm\" label=\"NCM do produto\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"9999.99.99\"}} value={this.state.input_codigoncm} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-origem\" className=\"col-6\" label=\"Origem do produto\" options={origemOptions} value={this.state.input_origem} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-cfop\" label=\"CFOP\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"9.999\"}} value={this.state.input_cfop} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-csosn\" className=\"col-3\" inputClassName=\"text-center\" label=\"CSOSN\" options={{\"102\": \"102\", \"300\": \"300\", \"400\": \"400\", \"500\": \"500\"}} value={this.state.input_csosn} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-aliqicms\" label=\"Alíquota de ICMS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqicms} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-cstpis\" label=\"CST do PIS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_cstpis} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-aliqpis\" label=\"Alíquota de PIS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqpis} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-cstcofins\" label=\"CST do Cofins\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_cstcofins} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-aliqcofins\" label=\"Alíquota de Cofins\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqcofins} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-codcontribsocial\" label=\"Contribuição social\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_codcontribsocial} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-cest\" label=\"CEST\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99.999.99\"}} value={this.state.input_cest} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<Col size=\"12\" className=\"text-right\">\n\t\t\t\t\t\t\t<Button text=\"Voltar para o produto...\" icon=\"file-text\" color=\"blue\" onClick={() => {this.changeDiv(\"principal\")}} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport {Redirect} from \"react-router\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport DataGrid from \"../com/DataGrid.js\";\nimport FormControl from \"../com/FormControl.js\";\nimport Icon from \"../com/Icon.js\";\nimport ModalProduto from \"../com/ModalProduto.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/Produto.css\";\n\nexport default class Produto extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdataGrid: [],\n\t\t\tpesquisa: \"\",\n\t\t\tidproduto: null,\n\t\t\tshowModalProduto: false,\n\t\t\tredirectToCategoria: false\n\t\t};\n\n\t\tthis.beforeCloseModal = this.beforeCloseModal.bind(this);\n\t\tthis.loadDataGrid = this.loadDataGrid.bind(this);\n\t\tthis.novoProduto = this.novoProduto.bind(this);\n\t\tthis.onChangePesquisa = this.onChangePesquisa.bind(this);\n\t\tthis.onClickBtnCategoria = this.onClickBtnCategoria.bind(this);\n\t\tthis.onKeyUpPesquisa = this.onKeyUpPesquisa.bind(this);\n\t\tthis.pesquisaLimpar = this.pesquisaLimpar.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tbeforeCloseModal(){\n\t\tthis.setState({\n\t\t\tshowModalProduto: false\n\t\t}, () => {\n\t\t\tthis.loadDataGrid();\n\t\t});\n\t}\n\n\tcarregarProduto(idproduto){\n\t\tthis.setState({\n\t\t\tshowModalProduto: true,\n\t\t\tidproduto: idproduto\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.loadDataGrid();\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.Pool.end();\n\t}\n\n\tloadDataGrid(){\n\t\tlet query = [\n\t\t\t\"SELECT produto.idproduto, produto.descricao, categoria.descricao AS categoria,\",\n\t\t\t\"  produto.preco, produto.codigoean, produto.dthrcriacao\",\n\t\t\t\"FROM produto\",\n\t\t\t\"LEFT JOIN categoria USING (idcategoria)\",\n\t\t\t\"WHERE produto.descricao ILIKE '%'||$1||'%'\",\n\t\t\t\"  OR produto.codigoean ILIKE '%'||$1||'%'\",\n\t\t\t\"ORDER BY produto.descricao\"\n\t\t].join(\" \");\n\n\t\tthis.Pool.query(query, [this.state.pesquisa], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tlet data = [];\n\n\t\t\t\tfor(let i in res.rows){\n\t\t\t\t\tlet row = res.rows[i];\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{text: row.descricao, align: \"left\"},\n\t\t\t\t\t\t\t{text: row.categoria, align: \"left\"},\n\t\t\t\t\t\t\t{text: row.preco.format(2, \",\", \".\"), align: \"center\"},\n\t\t\t\t\t\t\t{text: row.codigoean, align: \"center\"},\n\t\t\t\t\t\t\t{text: row.dthrcriacao.toLocaleString(), align: \"center\"}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\tthis.carregarProduto(row.idproduto);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tdataGrid: data\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tnovoProduto(){\n\t\tthis.setState({\n\t\t\tshowModalProduto: true,\n\t\t\tidproduto: null\n\t\t});\n\t}\n\n\tonChangePesquisa(event){\n\t\tthis.setState({\n\t\t\tpesquisa: event.target.value\n\t\t});\n\t}\n\n\tonClickBtnCategoria(){\n\t\tthis.setState({\n\t\t\tredirectToCategoria: true\n\t\t});\n\t}\n\n\tonKeyUpPesquisa(event){\n\t\tif(event.keyCode === 13){\n\t\t\tthis.loadDataGrid();\n\t\t}\n\t}\n\n\tpesquisaLimpar(){\n\t\tthis.setState({\n\t\t\tpesquisa: \"\"\n\t\t}, () => {\n\t\t\tthis.loadDataGrid();\n\t\t});\n\t}\n\n\trender(){\n\t\tif(this.state.redirectToCategoria){\n\t\t\treturn <Redirect to=\"/categoria\" />\n\t\t}\n\n\t\tlet dataGridHeader = [\n\t\t\t{text: \"Descrição\", align: \"left\"},\n\t\t\t{text: \"Categoria\", align: \"left\"},\n\t\t\t{text: \"Preço\", align: \"center\"},\n\t\t\t{text: \"EAN\", align: \"left\"},\n\t\t\t{text: \"Criado em\", align: \"center\"}\n\t\t];\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title model=\"2\">Cadastro de <b>Produtos</b></Title>\n\t\t\t\t<Row className=\"mb-4\">\n\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t<FormControl type=\"search\" id=\"pesquisa\" value={this.state.pesquisa} placeholder=\"Pesquise um produto...\" onKeyUp={this.onKeyUpPesquisa} onChange={this.onChangePesquisa} />\n\t\t\t\t\t\t<Icon name=\"cross\" id=\"pesquisa-limpar\" onClick={this.pesquisaLimpar} className={this.state.pesquisa.length > 0 ? null : \"d-none\"} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"2\" className=\"pl-0\">\n\t\t\t\t\t\t<Button text=\"Buscar\" icon=\"search\" color=\"green\" onClick={this.loadDataGrid} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\" className=\"text-right\">\n\t\t\t\t\t\t<Button text=\"Categorias\" icon=\"layers\" color=\"blue\" className=\"mr-3\" onClick={this.onClickBtnCategoria} />\n\t\t\t\t\t\t<Button text=\"Novo produto\" icon=\"plus\" color=\"green\" onClick={this.novoProduto} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<DataGrid header={dataGridHeader} data={this.state.dataGrid} />\n\t\t\t\t<ModalProduto Pool={this.Pool} show={this.state.showModalProduto} idproduto={this.state.idproduto} beforeClose={this.beforeCloseModal} />\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport {Redirect} from \"react-router\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nexport default class Relatorios extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tredirect: null\n\t\t};\n\t}\n\n\trender(){\n\t\tif(this.state.redirect){\n\t\t\treturn <Redirect to={this.state.redirect} />\n\t\t}\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Relatórios</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"3\" offset=\"3\">\n\t\t\t\t\t\t<Button text=\"Fechamento\" icon=\"calendar\" size=\"xxl\" block={true} onClick={() => {this.setState({redirect: \"/fechamento\"})}} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"3\">\n\t\t\t\t\t\t<Button text=\"Estatísticas\" icon=\"chart-dots\" size=\"xxl\" block={true} onClick={() => {this.setState({redirect: \"/estatistica\"})}} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row className=\"mt-4\">\n\t\t\t\t\t<Col size=\"3\" offset=\"3\">\n\t\t\t\t\t\t<Button text=\"Orçamentos\" icon=\"files-empty\" size=\"xxl\" block={true} onClick={() => {this.setState({redirect: \"/relorcamento\"})}} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport {Redirect} from \"react-router\";\nimport $ from \"jquery\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport FormGroup from \"../com/FormGroup.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport Printer from \"../com/Printer.js\";\n\nimport {currentDate, decimaisQuantidade, defaultMessageBoxError, valorParametro} from \"../def/function.js\";\n\nexport default class RelOrcamento extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdtinicial: null,\n\t\t\tdtfinal: null,\n\t\t\tredirect: null\n\t\t};\n\n\t\tthis.acaoOrcamento = this.acaoOrcamento.bind(this);\n\t\tthis.gerar = this.gerar.bind(this);\n\t\tthis.imprimir = this.imprimir.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t\tthis.Printer = new Printer(this.Pool);\n\t}\n\n\tacaoOrcamento(documento){\n\t\tlet info = [\n\t\t\t\"Número: \" + String(documento.iddocumento).lpad(6, \"0\"),\n\t\t\t\"Cliente: \" + (documento.nomeorcamento ? documento.nomeorcamento : \"\"),\n\t\t\t\"Quantidade: \" + documento.totalquantidade.format(decimaisQuantidade(documento.totalquantidade), \",\", \".\"),\n\t\t\t\"Total: R$ \" + documento.totaldocumento.format(2, \",\", \".\")\n\t\t].join(\"<br>\");\n\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"O que você deseja fazer com o orçamento?\",\n\t\t\ttext: info,\n\t\t\tsize: \"lg\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Efetivar orçamento\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tredirect: \"venda/\" + documento.iddocumento\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Excluir\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\ticon: \"bin\",\n\t\t\t\t\tclassName: \"btn-sm\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\t\ttitle: \"Exclusão de orçamento\",\n\t\t\t\t\t\t\ttext: \"Tem certeza que deseja excluír o orçamento?<br>Essa ação não poderá ser desfeita.\",\n\t\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t\t\t\twindow.Loading.show();\n\t\t\t\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\t\t\t\tawait this.Pool.query(\"DELETE FROM documento WHERE iddocumento = $1\", [documento.iddocumento]);\n\t\t\t\t\t\t\t\t\t\t\tawait this.gerar();\n\t\t\t\t\t\t\t\t\t\t}catch(error){\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessageBoxError(error);\n\t\t\t\t\t\t\t\t\t\t}finally{\n\t\t\t\t\t\t\t\t\t\t\twindow.Loading.hide();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext: \"Não\",\n\t\t\t\t\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Voltar\",\n\t\t\t\t\tcolor: \"blue\",\n\t\t\t\t\ticon: \"undo\",\n\t\t\t\t\tonClick: function(){\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tasync gerar(){\n\t\tif(!$(\"#dtinicial\").val()){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Por favor, informe a data inicial do fechamento antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\tif(!$(\"#dtfinal\").val()){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Por favor, informe a data final do fechamento antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tawait this.prepararImpressao();\n\n\t\tthis.setState({\n\t\t\tdtinicial: $(\"#dtinicial\").val(),\n\t\t\tdtfinal: $(\"#dtfinal\").val()\n\t\t});\n\t}\n\n\tasync imprimir(){\n\t\ttry{\n\t\t\tawait this.Printer.alimentar(3);\n\t\t\tawait this.Printer.guilhotina();\n\t\t\tawait this.Printer.imprimir();\n\t\t\twindow.FastMessage.show(\"Relatório impresso com sucesso!\");\n\t\t}catch(err){\n\t\t\tdefaultMessageBoxError(err);\n\t\t}\n\t}\n\n\tasync prepararImpressao(){\n\t\tawait this.Printer.reiniciar();\n\n\t\t// Formata as datas\n\t\tlet dtinicial = $(\"#dtinicial\").val().split(\"-\").reverse().join(\"/\");\n\t\tlet dtfinal = $(\"#dtfinal\").val().split(\"-\").reverse().join(\"/\");\n\n\t\t// Cabecalho\n\t\tawait this.Printer.texto(await valorParametro(this.Pool, \"EMITENTE\", \"NOMEFANTASIA\"), \"center\", true);\n\t\tawait this.Printer.texto(\"ORÇAMENTOS: \" + (dtinicial === dtfinal ? dtinicial : dtinicial + \" à \" + dtfinal), \"center\", true);\n\t\tawait this.Printer.alimentar();\n\t}\n\n\trender(){\n\t\tif(this.state.redirect){\n\t\t\treturn <Redirect to={this.state.redirect} />\n\t\t}\n\n\t\tlet disabledImprimir = (!this.state.dtinicial || !this.state.dtfinal);\n\n\t\treturn (\n\t\t\t<Content className=\"RelOrcamento\">\n\t\t\t\t<Title>Relatório de Orçamento</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\" offset=\"3\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtinicial\" label=\"Data inicial\" className=\"col-6\" defaultValue={currentDate()} />\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtfinal\" label=\"Data final\" className=\"col-6\" defaultValue={currentDate()} />\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"pr-0\">\n\t\t\t\t\t\t\t\t<Button text=\"Gerar\" block={true} color=\"green\" icon=\"file-play\" onClick={this.gerar} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"pl-0\">\n\t\t\t\t\t\t\t\t<Button text=\"Imprimir\" block={true} color=\"blue\" icon=\"printer\" onClick={this.imprimir} disabled={disabledImprimir} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<RelOrcamentoRelatorio Pool={this.Pool} Printer={this.Printer} dtinicial={this.state.dtinicial} dtfinal={this.state.dtfinal} acaoOrcamento={this.acaoOrcamento} />\n\t\t\t</Content>\n\t\t)\n\t}\n}\n\nclass RelOrcamentoRelatorio extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdados: []\n\t\t};\n\t}\n\n\tasync carregarDados(props){\n\t\tprops = (props === undefined ? this.props : props);\n\n\t\t// Monta a query\n\t\tlet query = [\n\t\t\t\"SELECT iddocumento, totalquantidade, totaldocumento, nomeorcamento,\",\n\t\t\t\"  dthrcriacao::DATE as dtcriacao, dthrcriacao::TIME as hrcriacao\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE operacao = $1\",\n\t\t\t\"  AND dthrcriacao::DATE BETWEEN $2 AND $3\",\n\t\t\t\"ORDER BY dthrcriacao\"\n\t\t].join(\" \");\n\n\t\t// Executa comando SQL\n\t\tlet res = await props.Pool.query(query, [\"OR\", props.dtinicial, props.dtfinal]);\n\n\t\t// Determina o tamanho de cada coluna\n\t\tlet colunas = this.props.Printer.colunas;\n\t\tlet colIdDocumento = 7;\n\t\tlet colTotalQuantidade = 6;\n\t\tlet colTotalDocumento = 10;\n\t\tlet colNomeOrcamento = colunas - colIdDocumento - colTotalQuantidade - colTotalDocumento;\n\n\t\t// Cria o cabecalho da grade na impressao\n\t\tlet texto = \"Número\".substr(0, colIdDocumento).rpad(colIdDocumento, \" \");\n\t\ttexto += \"Cliente\".substr(0, colNomeOrcamento).cpad(colNomeOrcamento, \" \");\n\t\ttexto += \"Qtde\".substr(0, colTotalQuantidade).cpad(colTotalQuantidade, \" \");\n\t\ttexto += \"Total\".substr(0, colTotalDocumento).lpad(colTotalDocumento, \" \");\n\t\tawait this.props.Printer.texto(texto, \"left\", true);\n\n\t\t// Alimenta classe da impressora\n\t\tlet t_totalquantidade = 0;\n\t\tlet t_totaldocumento = 0;\n\t\tfor(let i in res.rows){\n\t\t\tlet row = res.rows[i];\n\n\t\t\tlet iddocumento = String(row.iddocumento).lpad(6, \"0\");\n\t\t\tlet nomeorcamento = (row.nomeorcamento === null ? \"\" : String(row.nomeorcamento));\n\t\t\tlet totalquantidade = row.totalquantidade.format(decimaisQuantidade(row.totalquantidade), \",\", \".\");\n\t\t\tlet totaldocumento = row.totaldocumento.format(2, \",\", \".\");\n\n\t\t\ttexto = iddocumento.substr(0, colIdDocumento).rpad(colIdDocumento, \" \");\n\t\t\ttexto += nomeorcamento.substr(0, colNomeOrcamento).rpad(colNomeOrcamento, \" \");\n\t\t\ttexto += totalquantidade.substr(0, colTotalQuantidade).cpad(colTotalQuantidade, \" \");\n\t\t\ttexto += totaldocumento.substr(0, colTotalDocumento).lpad(colTotalDocumento, \" \");\n\t\t\tawait this.props.Printer.texto(texto);\n\n\t\t\tt_totalquantidade += parseFloat(row.totalquantidade);\n\t\t\tt_totaldocumento += parseFloat(row.totaldocumento);\n\t\t}\n\n\t\t// Calcula as casas decimais\n\t\tt_totalquantidade = t_totalquantidade.format(decimaisQuantidade(t_totalquantidade), \",\", \".\");\n\t\tt_totaldocumento = t_totaldocumento.format(2, \",\", \".\");\n\n\t\t// Totalizacao\n\t\ttexto = \"Total\".substr(0, (colIdDocumento + colNomeOrcamento)).rpad((colIdDocumento + colNomeOrcamento), \" \");\n\t\ttexto += String(t_totalquantidade).substr(0, colTotalQuantidade).cpad(colTotalQuantidade, \" \");\n\t\ttexto += String(t_totaldocumento).substr(0, colTotalDocumento).lpad(colTotalDocumento, \" \");\n\t\tawait this.props.Printer.texto(texto, \"left\", true);\n\t\tawait this.props.Printer.alimentar(2);\n\n\t\t// Atualiza o State com os dados\n\t\tthis.setState({\n\t\t\tdados: res.rows\n\t\t});\n\t}\n\n\tcomponentWillUpdate(nextProps){\n\t\tif(nextProps !== this.props){\n\t\t\tthis.carregarDados(nextProps);\n\t\t}\n\t}\n\n\trender(){\n\t\tif(!this.props.dtinicial || !this.props.dtfinal){\n\t\t\treturn null;\n\t\t}\n\n\t\tlet t_totalquantidade = 0;\n\t\tlet t_totaldocumento = 0;\n\n\t\treturn (\n\t\t\t<Row className=\"mt-5\">\n\t\t\t\t<Col size=\"8\" offset=\"2\">\n\t\t\t\t\t<table className=\"table table-striped mb-5\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">Número</th>\n\t\t\t\t\t\t\t\t<th className=\"text-left\">Cliente</th>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">Quantidade</th>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">Total</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{this.state.dados.map((e, i) => {\n\t\t\t\t\t\t\t\tt_totalquantidade += parseFloat(e.totalquantidade);\n\t\t\t\t\t\t\t\tt_totaldocumento += parseFloat(e.totaldocumento);\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<tr key={i} onClick={() => {this.props.acaoOrcamento(e)}}>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-center\">{String(e.iddocumento).lpad(6, \"0\")}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-left\">{e.nomeorcamento}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-center\">{e.totalquantidade.format(decimaisQuantidade(e.totalquantidade), \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + e.totaldocumento.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">{t_totalquantidade.format(decimaisQuantidade(t_totalquantidade), \",\", \".\")}</th>\n\t\t\t\t\t\t\t\t<th className=\"text-right\">{\"R$ \" + t_totaldocumento.format(2, \",\", \".\")}</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tfoot>\n\t\t\t\t\t</table>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nconst fs = window.require(\"fs\");\n\nexport default class Image extends React.Component {\n\trender(){\n\t\tlet props = Object.assign({}, this.props);\n\n\t\tif(props.src){\n\t\t\tif(fs.existsSync(props.src)){\n\t\t\t\tlet ext = props.src.split(\".\").reverse()[0];\n\t\t\t\tlet data = fs.readFileSync(props.src, \"base64\");\n\t\t\t\tprops.src = \"data:image/\" + ext + \";base64,\" + data;\n\t\t\t}else{\n\t\t\t\tprops.src = null;\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<img {...props} alt=\"\" />\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport Hr from \"../com/Hr.js\";\nimport Icon from \"../com/Icon.js\";\nimport Image from \"../com/Image.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport {defaultMessageBoxError} from \"./../def/function.js\";\n\nimport \"../css/Suporte.css\";\n\nexport default class Suporte extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tlogotipo: null,\n\t\t\tinformativo: null,\n\t\t\ttelefone: null,\n\t\t\temail: null,\n\t\t\tendereco: null\n\t\t};\n\n\t\tthis.carregarDados = this.carregarDados.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tcarregarDados(){\n\t\tthis.Pool.query(\"SELECT nome, valor FROM parametro WHERE grupo = $1\", [\"REVENDA\"], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet state = {};\n\t\t\tfor(let row of res.rows){\n\t\t\t\tstate[row.nome.toLowerCase()] = row.valor.replaceAll(\"\\n\", \"</br>\");\n\t\t\t}\n\t\t\tthis.setState(state);\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarDados();\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Suporte</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"5\" offset=\"1\">\n\t\t\t\t\t\t<Image className=\"logotipo\" src={this.state.logotipo} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"5\" offset=\"1\">\n\t\t\t\t\t\t<p className=\"informativo\" dangerouslySetInnerHTML={{__html: this.state.informativo}}></p>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col className=\"contatos\" size=\"4\" offset=\"1\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"1\"><Icon name=\"phone\" /></Col>\n\t\t\t\t\t\t\t<Col size=\"11\"><p dangerouslySetInnerHTML={{__html: this.state.telefone}}></p></Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Hr />\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"1\"><Icon name=\"mail\" /></Col>\n\t\t\t\t\t\t\t<Col size=\"11\"><p dangerouslySetInnerHTML={{__html: this.state.email}}></p></Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Hr />\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"1\"><Icon name=\"location\" /></Col>\n\t\t\t\t\t\t\t<Col size=\"11\"><p dangerouslySetInnerHTML={{__html: this.state.endereco}}></p></Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Col from \"./Col.js\";\nimport Row from \"./Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class PainelRapidoPesquisa extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpesquisa: props.pesquisa, // Atual pesquisa\n\t\t\tprodutos: [], // Lista de produtos visiveis\n\t\t\ttotalproduto: null // Total do produto caso seja um produto de balanca\n\t\t};\n\n\t\tthis.carregarProdutos = this.carregarProdutos.bind(this);\n\t}\n\n\tcarregarProdutos(pesquisa){\n\t\tpesquisa = (pesquisa ? pesquisa : this.props.pesquisa);\n\t\tif(typeof pesquisa !== \"string\" || pesquisa.length === 0){\n\t\t\tthis.setState({\n\t\t\t\tprodutos: []\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tlet codigoean = null;\n\t\tlet totalproduto = null;\n\n\t\tlet where = [];\n\t\tif(pesquisa.length === 13 && pesquisa.substr(0, 1) === \"2\"){\n\t\t\tcodigoean = parseInt(pesquisa.substr(1, 6), 10);\n\t\t\ttotalproduto = parseInt(pesquisa.substr(7, 5), 10) / 100;\n\t\t\tpesquisa = codigoean;\n\t\t\twhere.push(\"produto.codigoean = $1\");\n\t\t}else{\n\t\t\twhere.push(\"produto.descricao ILIKE '%'||$1||'%'\");\n\t\t\twhere.push(\"produto.codigoean = $1\");\n\t\t}\n\n\t\tthis.totalproduto = totalproduto;\n\n\t\tlet query = [\n\t\t\t\"SELECT produto.idproduto, produto.descricao, produto.precovariavel,\",\n\t\t\t\"  produto.preco, categoria.cor, unidade.precisao, unidade.descricao AS unidade\",\n\t\t\t\"FROM produto\",\n\t\t\t\"INNER JOIN categoria USING (idcategoria)\",\n\t\t\t\"INNER JOIN unidade USING (idunidade)\",\n\t\t\t\"WHERE \" + where.join(\" OR \"),\n\t\t\t\"ORDER BY descricao\"\n\t\t].join(\" \");\n\n\t\tthis.props.Pool.query(query, [pesquisa], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tprodutos: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarProdutos();\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.carregarProdutos(nextProps.pesquisa);\n\t}\n\n\trender(){\n\t\tlet className = [\"painelrapido\", \"painelrapido-pesquisa\"];\n\n\t\tif(this.props.layoutVendas === \"0\"){\n\t\t\tclassName.push(\"painelrapido-poucosprodutos\");\n\t\t}\n\n\t\t// Define se deve selecionar o produto ao desenhar\n\t\t// Criado para situacao em que o usuario leu um codigo de barras e ja deve carregar o produto\n\t\tlet selecionarProduto = (!isNaN(this.props.pesquisa) && this.state.produtos.length === 1);\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t<Row className=\"painelrapido-produto\">\n\t\t\t\t\t{this.state.produtos.map((produto, i) => {\n\t\t\t\t\t\treturn <Produto key={i} {...produto} onSelectProduto={this.props.onSelectProduto} layoutVendas={this.props.layoutVendas} selecionarProduto={selecionarProduto} totalproduto={this.totalproduto} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nclass Produto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\t//console.log(this.props.selecionarProduto);\n\t\tif(this.props.selecionarProduto){\n\t\t\tthis.props.onSelectProduto(this.props, null, this.props.totalproduto);\n\t\t}\n\t}\n\n\tonClick(event){\n\t\tif(this.props.onSelectProduto){\n\t\t\tthis.props.onSelectProduto(this.props, event, this.props.totalproduto);\n\t\t}\n\t}\n\n\trender(){\n\t\tlet size = (this.props.layoutVendas === \"0\" ? 3 : 2);\n\n\t\treturn (\n\t\t\t<Col size={size}>\n\t\t\t\t<div className=\"painelrapido-produto-item\" style={{borderColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport Col from \"./Col.js\";\nimport Row from \"./Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/PainelRapidoPoucosProdutos.css\";\n\nexport default class PainelRapidoPoucosProdutos extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcategorias: [], // Lista de categorias visiveis\n\t\t\tprodutos: [], // Lista de produtos visiveis\n\t\t\tcategoria: null // Dados da categoria ativa\n\t\t};\n\n\t\tthis.carregarCategorias = this.carregarCategorias.bind(this);\n\t\tthis.carregarProdutos = this.carregarProdutos.bind(this);\n\t\tthis.trocarCategoria = this.trocarCategoria.bind(this);\n\t}\n\n\tcarregarCategorias(){\n\t\tlet query = \"SELECT idcategoria, descricao, cor FROM categoria ORDER BY descricao\";\n\t\tthis.props.Pool.query(query, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tcategorias: res.rows,\n\t\t\t\tcategoria: (res.rows.length > 0 ? res.rows[0] : null)\n\t\t\t}, () => {\n\t\t\t\tthis.carregarProdutos();\n\t\t\t});\n\t\t});\n\t}\n\n\tcarregarProdutos(){\n\t\tif(this.state.categoria === null){\n\t\t\treturn false;\n\t\t}\n\t\tlet query = [\n\t\t\t\"SELECT produto.idproduto, produto.descricao, produto.precovariavel,\",\n\t\t\t\"  produto.preco, unidade.precisao, unidade.descricao AS unidade\",\n\t\t\t\"FROM produto\",\n\t\t\t\"INNER JOIN unidade USING (idunidade)\",\n\t\t\t\"WHERE produto.status = $1\",\n\t\t\t\"  AND produto.idcategoria = $2\",\n\t\t\t\"ORDER BY produto.descricao\"\n\t\t].join(\" \");\n\t\tthis.props.Pool.query(query, [\"A\", this.state.categoria.idcategoria], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tprodutos: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarCategorias();\n\t}\n\n\ttrocarCategoria(categoria){\n\t\tthis.setState({\n\t\t\tcategoria: categoria\n\t\t}, () => {\n\t\t\tthis.carregarProdutos();\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className=\"painelrapido painelrapido-poucosprodutos\">\n\t\t\t\t<Row className=\"painelrapido-categoria\">\n\t\t\t\t\t{this.state.categorias.map((categoria, i) => {\n\t\t\t\t\t\treturn <Categoria key={i} {...categoria} trocarCategoria={this.trocarCategoria} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t\t<Row className=\"painelrapido-produto\">\n\t\t\t\t\t{this.state.produtos.map((produto, i) => {\n\t\t\t\t\t\treturn <Produto key={i} {...produto} cor={this.state.categoria.cor} onSelectProduto={this.props.onSelectProduto} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nclass Categoria extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(){\n\t\tthis.props.trocarCategoria(this.props);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"3\">\n\t\t\t\t<div className=\"painelrapido-categoria-item\" style={{backgroundColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n\nclass Produto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(event){\n\t\tif(this.props.onSelectProduto){\n\t\t\tthis.props.onSelectProduto(this.props, event);\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"3\">\n\t\t\t\t<div className=\"painelrapido-produto-item\" style={{borderColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport Col from \"./Col.js\";\nimport Row from \"./Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class PainelRapidoMediosProdutos extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcategorias: [], // Lista de categorias visiveis\n\t\t\tprodutos: [], // Lista de produtos visiveis\n\t\t\tcategoria: null // Dados da categoria ativa\n\t\t};\n\n\t\tthis.carregarCategorias = this.carregarCategorias.bind(this);\n\t\tthis.carregarProdutos = this.carregarProdutos.bind(this);\n\t\tthis.trocarCategoria = this.trocarCategoria.bind(this);\n\t}\n\n\tcarregarCategorias(){\n\t\tlet query = \"SELECT idcategoria, descricao, cor FROM categoria ORDER BY descricao\";\n\t\tthis.props.Pool.query(query, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tcategorias: res.rows,\n\t\t\t\tcategoria: (res.rows.length > 0 ? res.rows[0] : null)\n\t\t\t}, () => {\n\t\t\t\tthis.carregarProdutos();\n\t\t\t});\n\t\t});\n\t}\n\n\tcarregarProdutos(){\n\t\tif(this.state.categoria === null){\n\t\t\treturn;\n\t\t}\n\t\tlet query = [\n\t\t\t\"SELECT produto.idproduto, produto.descricao, produto.precovariavel,\",\n\t\t\t\"  produto.preco, unidade.precisao, unidade.descricao AS unidade\",\n\t\t\t\"FROM produto\",\n\t\t\t\"INNER JOIN unidade USING (idunidade)\",\n\t\t\t\"WHERE produto.status = $1\",\n\t\t\t\"  AND produto.idcategoria = $2\",\n\t\t\t\"ORDER BY produto.descricao\"\n\t\t].join(\" \");\n\t\tthis.props.Pool.query(query, [\"A\", this.state.categoria.idcategoria], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tprodutos: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarCategorias();\n\t}\n\n\ttrocarCategoria(categoria){\n\t\tthis.setState({\n\t\t\tcategoria: categoria\n\t\t}, () => {\n\t\t\tthis.carregarProdutos();\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className=\"painelrapido painelrapido-mediosprodutos\">\n\t\t\t\t<Row className=\"painelrapido-categoria\">\n\t\t\t\t\t{this.state.categorias.map((categoria, i) => {\n\t\t\t\t\t\treturn <Categoria key={i} {...categoria} trocarCategoria={this.trocarCategoria} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t\t<Row className=\"painelrapido-produto\">\n\t\t\t\t\t{this.state.produtos.map((produto, i) => {\n\t\t\t\t\t\treturn <Produto key={i} {...produto} cor={this.state.categoria.cor} onSelectProduto={this.props.onSelectProduto} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nclass Categoria extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(){\n\t\tthis.props.trocarCategoria(this.props);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"2\">\n\t\t\t\t<div className=\"painelrapido-categoria-item\" style={{backgroundColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n\nclass Produto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(event){\n\t\tif(this.props.onSelectProduto){\n\t\t\tthis.props.onSelectProduto(this.props, event);\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"2\">\n\t\t\t\t<div className=\"painelrapido-produto-item\" style={{borderColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport Col from \"./Col.js\";\nimport Icon from \"./Icon.js\";\nimport Row from \"./Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class PainelRapidoMuitosProdutos extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcategorias: [], // Lista de categorias visiveis\n\t\t\tprodutos: [], // Lista de produtos visiveis\n\t\t\tcategoria: null // Dados da categoria ativa\n\t\t};\n\n\t\tthis.carregarCategorias = this.carregarCategorias.bind(this);\n\t\tthis.carregarProdutos = this.carregarProdutos.bind(this);\n\t\tthis.trocarCategoria = this.trocarCategoria.bind(this);\n\t\tthis.voltarCategoria = this.voltarCategoria.bind(this);\n\t}\n\n\tcarregarCategorias(){\n\t\tlet query = \"SELECT idcategoria, descricao, cor FROM categoria ORDER BY descricao\";\n\t\tthis.props.Pool.query(query, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tcategorias: res.rows,\n\t\t\t\tcategoria: null\n\t\t\t}, () => {\n\t\t\t\tthis.carregarProdutos();\n\t\t\t});\n\t\t});\n\t}\n\n\tcarregarProdutos(){\n\t\tif(this.state.categoria === null){\n\t\t\treturn;\n\t\t}\n\t\tlet query = [\n\t\t\t\"SELECT produto.idproduto, produto.descricao, produto.precovariavel,\",\n\t\t\t\"  produto.preco, unidade.precisao, unidade.descricao AS unidade\",\n\t\t\t\"FROM produto\",\n\t\t\t\"INNER JOIN unidade USING (idunidade)\",\n\t\t\t\"WHERE produto.status = $1\",\n\t\t\t\"  AND produto.idcategoria = $2\",\n\t\t\t\"ORDER BY produto.descricao\"\n\t\t].join(\" \");\n\t\tthis.props.Pool.query(query, [\"A\", this.state.categoria.idcategoria], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tprodutos: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarCategorias();\n\t}\n\n\ttrocarCategoria(categoria){\n\t\tthis.setState({\n\t\t\tcategoria: categoria\n\t\t}, () => {\n\t\t\tthis.carregarProdutos();\n\t\t});\n\t}\n\n\tvoltarCategoria(){\n\t\tthis.setState({\n\t\t\tcategoria: null,\n\t\t\tprodutos: []\n\t\t});\n\t}\n\n\trender(){\n\t\tlet painelRapidoCategoria = null;\n\t\tif(this.state.categoria === null){\n\t\t\tpainelRapidoCategoria = (\n\t\t\t\t<Row className=\"painelrapido-categoria\">\n\t\t\t\t\t{this.state.categorias.map((categoria, i) => {\n\t\t\t\t\t\treturn <Categoria key={i} idcategoria={categoria.idcategoria} descricao={categoria.descricao} cor={categoria.cor} trocarCategoria={this.trocarCategoria} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t);\n\t\t}\n\n\t\tlet painelRapidoProduto = null;\n\t\tif(this.state.categoria !== null){\n\t\t\tpainelRapidoProduto = (\n\t\t\t\t<Row className=\"painelrapido-produto\">\n\t\t\t\t\t<Col size=\"2\">\n\t\t\t\t\t\t<div className=\"painelrapido-categoria-item\" style={{backgroundColor: this.state.categoria.cor}} onClick={this.voltarCategoria}>\n\t\t\t\t\t\t\t<Icon name=\"chevron-left\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t\t{this.state.produtos.map((produto, i) => {\n\t\t\t\t\t\treturn <Produto key={i} {...produto} cor={this.state.categoria.cor} onSelectProduto={this.props.onSelectProduto} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"painelrapido painelrapido-muitosprodutos\">\n\t\t\t\t{painelRapidoCategoria}\n\t\t\t\t{painelRapidoProduto}\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nclass Categoria extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(){\n\t\tthis.props.trocarCategoria(this.props);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"2\">\n\t\t\t\t<div className=\"painelrapido-categoria-item\" style={{backgroundColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n\nclass Produto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(event){\n\t\tif(this.props.onSelectProduto){\n\t\t\tthis.props.onSelectProduto(this.props, event);\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"2\">\n\t\t\t\t<div className=\"painelrapido-produto-item\" style={{borderColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\n\nimport \"./../css/PainelRapido.css\";\n\nimport PainelRapidoPesquisa from  \"./PainelRapidoPesquisa.js\";\nimport PainelRapidoPoucosProdutos from  \"./PainelRapidoPoucosProdutos.js\";\nimport PainelRapidoMediosProdutos from  \"./PainelRapidoMediosProdutos.js\";\nimport PainelRapidoMuitosProdutos from  \"./PainelRapidoMuitosProdutos.js\";\n\nimport {defaultMessageBoxError, valorParametro} from \"./../def/function.js\";\n\nexport default class PainelRapido extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tlayoutVendas: null\n\t\t};\n\t}\n\n\tajustarAltura(){\n\t\tif($(\".painelrapido\").length > 0){\n\t\t\tlet height = window.innerHeight - $(\".painelrapido\").offset().top;\n\t\t\t$(\".painelrapido\").height(height);\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\t\twindow.addEventListener(\"resize\", this.ajustarAltura);\n\n\t\tvalorParametro(this.props.Pool, \"DIVERSOS\", \"LAYOUTVENDAS\", (valor) => {\n\t\t\tthis.setState({\n\t\t\t\tlayoutVendas: valor\n\t\t\t});\n\t\t}, (err) => {\n\t\t\tdefaultMessageBoxError(err);\n\t\t});\n\n\t\tthis.ajustarAltura();\n\t}\n\n\tcomponentDidUpdate(){\n\t\tthis.ajustarAltura();\n\t}\n\n\tcomponentWillUnmount(){\n\t\twindow.removeEventListener(\"resize\", this.ajustarAltura);\n\t}\n\n\trender(){\n\t\tif(this.props.pesquisa.length > 0){\n\t\t\treturn <PainelRapidoPesquisa {...this.props} layoutVendas={this.state.layoutVendas} />\n\t\t}\n\n\t\tswitch(this.state.layoutVendas){\n\t\t\tcase \"0\": return <PainelRapidoPoucosProdutos {...this.props} />;\n\t\t\tcase \"1\": return <PainelRapidoMediosProdutos {...this.props} />;\n\t\t\tcase \"2\": return <PainelRapidoMuitosProdutos {...this.props} />;\n\t\t\tdefault: return null;\n\t\t}\n\t}\n\n}\n","import React from \"react\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport FormControl from \"./FormControl.js\";\nimport Label from \"./Label.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport \"../css/VendaAplicarAcrescimo.css\";\n\nexport default class VendaEditarProduto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tacrescimovalor: 0,\n\t\t\tacrescimopercentual: 0,\n\t\t\ttotaldocumento: props.totalbruto,\n\t\t\tshow: props.show\n\t\t};\n\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.onChangeAcrescimoPercentual = this.onChangeAcrescimoPercentual.bind(this);\n\t\tthis.onChangeAcrescimoValor = this.onChangeAcrescimoValor.bind(this);\n\t\tthis.onChangeTotalLiquido = this.onChangeTotalLiquido.bind(this);\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tacrescimovalor: 0,\n\t\t\tacrescimopercentual: 0,\n\t\t\ttotaldocumento: nextProps.totalbruto,\n\t\t\tshow: nextProps.show\n\t\t});\n\t}\n\n\tconfirmar(){\n\t\tthis.props.aplicarAcrescimo(this.props.totalbruto, this.state.acrescimovalor);\n\t}\n\n\tonChangeAcrescimoPercentual(event){\n\t\tlet acrescimopercentual = event.target.value.toFloat();\n\t\tlet acrescimovalor = this.props.totalbruto * acrescimopercentual / 100;\n\t\tlet totaldocumento = this.props.totalbruto - this.props.totaldesconto + acrescimovalor;\n\n\t\tthis.setState({\n\t\t\tacrescimopercentual: acrescimopercentual,\n\t\t\tacrescimovalor: acrescimovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\tonChangeAcrescimoValor(event){\n\t\tlet acrescimovalor = event.target.value.toFloat();\n\t\tlet acrescimopercentual = acrescimovalor / this.props.totalbruto * 100;\n\t\tlet totaldocumento = this.props.totalbruto - this.props.totaldesconto + acrescimovalor;\n\n\t\tthis.setState({\n\t\t\tacrescimopercentual: acrescimopercentual,\n\t\t\tacrescimovalor: acrescimovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\tonChangeTotalLiquido(event){\n\t\tlet totaldocumento = event.target.value.toFloat();\n\t\tif(totaldocumento < this.props.totalbruto){\n\t\t\ttotaldocumento = this.props.totalbruto;\n\t\t}\n\t\tlet acrescimovalor =  totaldocumento - this.props.totalbruto + this.props.totaldesconto;\n\t\tlet acrescimopercentual = acrescimovalor / this.props.totalbruto * 100;\n\n\t\tthis.setState({\n\t\t\tacrescimopercentual: acrescimopercentual,\n\t\t\tacrescimovalor: acrescimovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal id=\"VendaAplicarAcrescimo\" title=\"Aplicando acréscimo...\" show={this.state.show} size=\"md\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Total dos itens</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" disabled={true} value={this.props.totalbruto.format(2, \",\", \".\")} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Total de desconto</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" disabled={true} value={this.props.totaldesconto.format(2, \",\", \".\")} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Acréscimo em percentual</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.acrescimopercentual.format(0, \",\", \".\")} InformarValor={{decimal: 0}} onChange={this.onChangeAcrescimoPercentual} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Acréscimo em valor</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.acrescimovalor.format(2, \",\", \".\")} InformarValor={{decimal: 2, money: true}} onChange={this.onChangeAcrescimoValor} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Total final</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.totaldocumento.format(2, \",\", \".\")} InformarValor={{decimal: 2, money: true}} onChange={this.onChangeTotalLiquido} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<div className=\"text-right mt-2\">\n\t\t\t\t\t<Button icon=\"undo\" color=\"red\" className=\"float-left\" onClick={this.cancelar} />\n\t\t\t\t\t<Button text=\"Confirmar\" icon=\"thumbs-up\" color=\"green\" onClick={this.confirmar} />\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport FormControl from \"./FormControl.js\";\nimport Label from \"./Label.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport \"../css/VendaAplicarDesconto.css\";\n\nexport default class VendaEditarProduto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdescontovalor: 0,\n\t\t\tdescontopercentual: 0,\n\t\t\ttotaldocumento: props.totalbruto,\n\t\t\tshow: props.show\n\t\t};\n\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.onChangeDescontoPercentual = this.onChangeDescontoPercentual.bind(this);\n\t\tthis.onChangeDescontoValor = this.onChangeDescontoValor.bind(this);\n\t\tthis.onChangeTotalLiquido = this.onChangeTotalLiquido.bind(this);\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tdescontovalor: 0,\n\t\t\tdescontopercentual: 0,\n\t\t\ttotaldocumento: nextProps.totalbruto,\n\t\t\tshow: nextProps.show\n\t\t});\n\t}\n\n\tconfirmar(){\n\t\tthis.props.aplicarDesconto(this.props.totalbruto, this.state.descontovalor);\n\t}\n\n\tonChangeDescontoPercentual(event){\n\t\tlet descontopercentual = event.target.value.toFloat();\n\t\tlet descontovalor = this.props.totalbruto * descontopercentual / 100;\n\t\tlet totaldocumento = this.props.totalbruto - descontovalor;\n\n\t\tthis.setState({\n\t\t\tdescontopercentual: descontopercentual,\n\t\t\tdescontovalor: descontovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\tonChangeDescontoValor(event){\n\t\tlet descontovalor = event.target.value.toFloat();\n\t\tlet descontopercentual = descontovalor / this.props.totalbruto * 100;\n\t\tlet totaldocumento = this.props.totalbruto - descontovalor;\n\n\t\tthis.setState({\n\t\t\tdescontopercentual: descontopercentual,\n\t\t\tdescontovalor: descontovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\tonChangeTotalLiquido(event){\n\t\tlet totaldocumento = event.target.value.toFloat();\n\t\tif(totaldocumento > this.props.totalbruto){\n\t\t\ttotaldocumento = this.props.totalbruto;\n\t\t}\n\t\tlet descontovalor = this.props.totalbruto - totaldocumento;\n\t\tlet descontopercentual = descontovalor / this.props.totalbruto * 100;\n\n\t\tthis.setState({\n\t\t\tdescontopercentual: descontopercentual,\n\t\t\tdescontovalor: descontovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal id=\"VendaAplicarDesconto\" title=\"Aplicando desconto...\" show={this.state.show} size=\"md\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Total dos itens</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" disabled={true} value={this.props.totalbruto.format(2, \",\", \".\")} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Desconto em percentual</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.descontopercentual.format(0, \",\", \".\")} InformarValor={{decimal: 0}} onChange={this.onChangeDescontoPercentual} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Desconto em valor</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.descontovalor.format(2, \",\", \".\")} InformarValor={{decimal: 2, money: true}} onChange={this.onChangeDescontoValor} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Total final</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.totaldocumento.format(2, \",\", \".\")} InformarValor={{decimal: 2, money: true}} onChange={this.onChangeTotalLiquido} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<div className=\"text-right mt-2\">\n\t\t\t\t\t<Button icon=\"undo\" color=\"red\" className=\"float-left\" onClick={this.cancelar} />\n\t\t\t\t\t<Button text=\"Confirmar\" icon=\"thumbs-up\" color=\"green\" onClick={this.confirmar} />\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t)\n\t}\n}\n","import {applicationDirectory} from  \"../def/function.js\";\n\nconst fs = window.require(\"fs\");\nconst childProcess = window.require(\"child_process\");\n\nexport default class ComDLL {\n\n\tconstructor(){\n\t\tthis.appPath = applicationDirectory();\n\t\tthis.childProcess = childProcess;\n\t\tthis.fs = fs;\n\n\t\tthis.srcPath = this.appPath + \"/src\";\n\t\tthis.comDLLPath = this.srcPath + \"/lib/comdll-1.0.0\";\n\t}\n\n\texecute(dllPath, method, args, xml){\n\t\ttry{\n\t\t\tlet commandExec = this.comDLLPath + \"/ComDLL.exe\";\n\t\t\tlet commandArgs = [\n\t\t\t\tthis.srcPath + \"/\" + dllPath,\n\t\t\t\tmethod\n\t\t\t].concat(args);\n\n\t\t\tlet xmlFile = this.comDLLPath + \"/entrada.xml\";\n\t\t\tlet returnFile = this.comDLLPath + \"/retorno.txt\";\n\n\t\t\tif(this.fs.existsSync(xmlFile)){\n\t\t\t\tthis.fs.unlinkSync(xmlFile);\n\t\t\t}\n\t\t\tif(this.fs.existsSync(returnFile)){\n\t\t\t\tthis.fs.unlinkSync(returnFile);\n\t\t\t}\n\n\t\t\tif(xml !== undefined){\n\t\t\t\tthis.fs.writeFileSync(xmlFile, xml, \"utf8\");\n\t\t\t}\n\t\t\tthis.childProcess.execFileSync(commandExec, commandArgs, {\n\t\t\t\ttimeout: 60000\n\t\t\t});\n\t\t\tlet result = this.fs.readFileSync(returnFile);\n\n\t\t\treturn result.toString().trim();\n\t\t}catch(err){\n\t\t\tswitch(err.code){\n\t\t\t\tcase \"ETIMEDOUT\":\n\t\t\t\t\tthrow new Error(\"O tempo máximo de comunicação com o equipamento fiscal SAT foi excedido.<br>Desconecte todos os cabos conectados ao SAT, espere 5 segundos, conecte-os de volta e tente efetuar a operação novamente.<br><br>Caso o problema persista, entre em contato com o suporte.\");\n\t\t\t\tdefault:\n\t\t\t\t\tthrow err;\n\t\t\t}\n\t\t}\n\t}\n\n}\n","import jsontoxml from \"jsontoxml\";\n\nimport ComDLL from \"../com/ComDLL.js\";\nimport {\n\tsleep, valorParametro, writeTemporary\n} from \"../def/function.js\";\n\nconst fs = window.require(\"fs\");\nconst os = window.require(\"os\");\n\nexport default class SAT {\n\n\tconstructor(Pool){\n\t\tthis.Pool = Pool;\n\t\tthis.ComDLL = new ComDLL();\n\t\tthis.jsontoxml = jsontoxml;\n\t\tthis.os = os;\n\t\tthis.fs = fs;\n\n\t\tthis.error = null;\n\t}\n\n\t// Cancela um documento ativo\n\tasync cancelarDocumento(iddocumento){\n\t\t// Carrega os parametros\n\t\tlet paramSATModelo = await valorParametro(this.Pool, \"SAT\", \"MODELO\");\n\t\tlet paramSATAtivacao = await valorParametro(this.Pool, \"SAT\", \"ATIVACAO\");\n\t\t// Carrega o documento\n\t\tlet {documento} = await this.carregarDadosDocumento(iddocumento);\n\n\t\t// Cria o XML do documento fiscal a ser enviado para o SAT\n\t\tlet xmlEntrada = null;\n\t\tif(paramSATModelo === \"sweda\"){\n\t\t\txmlEntrada = await this.gerarXMLCancelamento(iddocumento);\n\t\t}else{\n\t\t\txmlEntrada = documento.xml;\n\t\t}\n\t\twriteTemporary(\"cancelamento.xml\", xmlEntrada);\n\n\t\t// Verifica se deve enviar para o SAT\n\t\tif(paramSATModelo === \"nenhum\"){\n\t\t\treturn {xmlcanc: null, chavecanc: null};\n\t\t}\n\n\t\t// Define a DLL a ser utilizada\n\t\tlet dllPath = \"lib/comdll-1.0.0/SAT-\" + paramSATModelo + \".dll\";\n\n\t\t// Executa o comando na DLL\n\t\tlet retorno = null;\n\t\tlet arrRetorno = null;\n\t\twhile(retorno === null || arrRetorno[1] === \"06098\"){\n\t\t\tif(retorno !== null){\n\t\t\t\tawait sleep(500);\n\t\t\t}\n\t\t\tretorno = this.ComDLL.execute(dllPath, \"CancelarUltimaVenda\", [paramSATAtivacao, documento.chave], xmlEntrada);\n\t\t\tif(retorno === false){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tarrRetorno = retorno.split(\"|\");\n\t\t}\n\n\t\tif(!this.validarRetorno(retorno)){\n\t\t\treturn false;\n\t\t}\n\n\t\tlet xmlSaida = atob(arrRetorno[6]);\n\t\tlet chave = arrRetorno[8].trim();\n\n\t\tif(typeof xmlSaida === \"string\" && xmlSaida.length === 0 && paramSATModelo === \"sweda\"){\n\t\t\tarrRetorno = this.fs.readFileSync(\"C:/Sweda/Retorno.txt\").toString();\n\t\t\txmlSaida = atob(arrRetorno[6]);\n\t\t}\n\n\t\treturn {\n\t\t\txmlcanc: xmlSaida,\n\t\t\tchavecanc: chave\n\t\t};\n\t}\n\n\tasync carregarDadosDocumento(iddocumento){\n\t\tlet documento, documentoprodutos,documentopagamentos;\n\n\t\tlet objectName = this.Pool.constructor.name;\n\n\t\tlet client = null;\n\t\tif(objectName === \"Pool\"){\n\t\t\tclient = await this.Pool.connect();\n\t\t}else{\n\t\t\tclient = this.Pool;\n\t\t}\n\n\t\ttry{\n\t\t\tlet res = await client.query(\"SELECT * FROM documento WHERE iddocumento = $1\", [iddocumento]);\n\t\t\tif(res.rows.length === 0){\n\t\t\t\tthrow new Error(\"Nenhum documento foi encontrado.\");\n\t\t\t}\n\t\t\tdocumento = res.rows[0];\n\n\t\t\tlet queryDocumentoProduto = [\n\t\t\t\t\"SELECT documentoproduto.*, unidade.sigla\",\n\t\t\t\t\"FROM documentoproduto\",\n\t\t\t\t\"LEFT JOIN produto USING (idproduto)\",\n\t\t\t\t\"LEFT JOIN unidade USING (idunidade)\",\n\t\t\t\t\"WHERE documentoproduto.iddocumento = $1\",\n\t\t\t\t\"ORDER BY documentoproduto.sequencial\"\n\t\t\t].join(\" \");\n\t\t\tres = await client.query(queryDocumentoProduto, [iddocumento]);\n\t\t\tdocumentoprodutos = res.rows;\n\n\t\t\tlet queryDocumentoPagamento = [\n\t\t\t\t\"SELECT documentopagamento.*, formapagamento.especie\",\n\t\t\t\t\"FROM documentopagamento\",\n\t\t\t\t\"LEFT JOIN formapagamento USING (idformapagamento)\",\n\t\t\t\t\"WHERE documentopagamento.iddocumento = $1\"\n\t\t\t].join(\" \");\n\t\t\tres = await client.query(queryDocumentoPagamento, [iddocumento]);\n\t\t\tdocumentopagamentos = res.rows;\n\t\t}catch(e){\n\t\t\tthrow e;\n\t\t}finally{\n\t\t\tif(objectName === \"Pool\"){\n\t\t\t\tclient.release();\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tdocumento: documento,\n\t\t\tdocumentoprodutos: documentoprodutos,\n\t\t\tdocumentopagamentos: documentopagamentos\n\t\t};\n\t}\n\n\tasync consultarUltimaSessaoFiscal(){\n\t\t/*\n\t\tlet paramSATAtivacao = await valorParametro(this.Pool, \"SAT\", \"ATIVACAO\");\n\t\t\n\t\tconst retorno = this.ComDLL.execute(dllPath, \"ConsultarUltimaSessaoFiscal\", [paramSATAtivacao]);\n\t\tif(retorno === false){\n\t\t\treturn false;\n\t\t}\n\t\tif(!this.validarRetorno(retorno)){\n\t\t\treturn false;\n\t\t}\n\n\t\tlet arrRetorno = retorno.split(\"|\");\n\n\t\tlet xmlSaida = atob(arrRetorno[6]);\n\t\tlet chave = arrRetorno[8].trim();\n\t\tlet numero = chave.substr(-13, 6);\n\n\t\tif(typeof xmlSaida === \"string\" && xmlSaida.length === 0 && paramSATModelo === \"sweda\"){\n\t\t\tarrRetorno = this.fs.readFileSync(\"C:/Sweda/Retorno.txt\").toString();\n\t\t\txmlSaida = atob(arrRetorno[6]);\n\t\t}\n\n\t\tlet tipo = arrRetorno[1];\n\t\tswitch(arrRetorno[1]){\n\t\t\tcase \"06000\":\n\t\t\t\ttipo = \"venda\";\n\t\t\t\tbreak;\n\t\t\tcase \"07000\":\n\t\t\t\ttipo = \"cancelamento\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn {\n\t\t\ttipo: tipo,\n\t\t\txml: xmlSaida,\n\t\t\tchave: chave,\n\t\t\tnumero: numero\n\t\t};\n\t\t*/\n\t}\n\n\tasync gerarXMLCancelamento(iddocumento, success, fail){\n\t\tlet {documento} = await this.carregarDadosDocumento(iddocumento);\n\n\t\tlet paramDesenvolvedoraCNPJ = await valorParametro(this.Pool, \"DESENVOLVEDORA\", \"CNPJ\");\n\t\tlet paramDesenvolvedoraAssinatura = await valorParametro(this.Pool, \"DESENVOLVEDORA\", \"ASSINATURA\");\n\t\tlet paramSATCaixa = await valorParametro(this.Pool, \"SAT\", \"CAIXA\");\n\n\t\tlet infCFe = [{\n\t\t\tname: \"infCFe\",\n\t\t\tattrs: {\"chCanc\": documento.chave},\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tname: \"ide\",\n\t\t\t\t\tchildren: {\n\t\t\t\t\t\t\"CNPJ\": paramDesenvolvedoraCNPJ.removeFormat(),\n\t\t\t\t\t\t\"signAC\": paramDesenvolvedoraAssinatura,\n\t\t\t\t\t\t\"numeroCaixa\": paramSATCaixa.lpad(3, \"0\")\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"emit\",\n\t\t\t\t\tchildren: []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"dest\",\n\t\t\t\t\tchildren: []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"total\",\n\t\t\t\t\tchildren: []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"infAdic\",\n\t\t\t\t\tchildren: []\n\t\t\t\t}\n\t\t\t]\n\t\t}];\n\n\t\tlet xml = [{\n\t\t\tname: \"CFeCanc\",\n\t\t\tchildren: [infCFe]\n\t\t}];\n\n\t\tlet finalXML = this.jsontoxml(xml);\n\n\t\tif(typeof success === \"function\"){\n\t\t\tsuccess(finalXML);\n\t\t}\n\n\t\treturn finalXML;\n\t}\n\n\tasync gerarXMLDocumento(iddocumento, success, fail){\n\t\tlet {documento, documentoprodutos, documentopagamentos} = await this.carregarDadosDocumento(iddocumento);\n\n\t\tlet paramDesenvolvedoraCNPJ = await valorParametro(this.Pool, \"DESENVOLVEDORA\", \"CNPJ\");\n\t\tlet paramDesenvolvedoraAssinatura = await valorParametro(this.Pool, \"DESENVOLVEDORA\", \"ASSINATURA\");\n\t\t//let paramSATAmbiente = await valorParametro(this.Pool, \"SAT\", \"AMBIENTE\");\n\t\tlet paramSATCaixa = await valorParametro(this.Pool, \"SAT\", \"CAIXA\");\n\t\tlet paramEmitenteCNPJ = await valorParametro(this.Pool, \"EMITENTE\", \"CNPJ\");\n\t\tlet paramEmitenteIE = await valorParametro(this.Pool, \"EMITENTE\", \"IE\");\n\t\tlet paramEmitenteImpostoFederal = await valorParametro(this.Pool, \"EMITENTE\", \"IMPOSTOFEDERAL\");\n\t\tlet paramEmitenteImpostoEstadual = await valorParametro(this.Pool, \"EMITENTE\", \"IMPOSTOESTADUAL\");\n\n\t\tif(!paramEmitenteImpostoFederal) paramEmitenteImpostoFederal = 0;\n\t\tif(!paramEmitenteImpostoEstadual) paramEmitenteImpostoEstadual = 0;\n\n\t\tlet ide = {\n\t\t\tname: \"ide\",\n\t\t\tchildren: {\n\t\t\t\t\"CNPJ\": paramDesenvolvedoraCNPJ.removeFormat(),\n\t\t\t\t\"signAC\": paramDesenvolvedoraAssinatura,\n\t\t\t\t\"numeroCaixa\": paramSATCaixa.lpad(3, \"0\")\n\t\t\t\t//\"tpAmb\": paramSATAmbiente\n\t\t\t}\n\t\t};\n\n\t\tlet emit = {\n\t\t\tname: \"emit\",\n\t\t\tchildren: {\n\t\t\t\t\"CNPJ\": paramEmitenteCNPJ.removeFormat(),\n\t\t\t\t\"IE\": paramEmitenteIE.removeFormat(),\n\t\t\t\t\"cRegTribISSQN\": 1,\n\t\t\t\t\"indRatISSQN\": \"N\"\n\t\t\t}\n\t\t};\n\n\t\tlet destChildren = {};\n\t\tlet destCPFCNPJ = (documento.cpfcnpj ? documento.cpfcnpj.removeFormat() : \"\");\n\t\tif(destCPFCNPJ.length > 11){\n\t\t\tdestChildren = {\"CNPJ\": destCPFCNPJ};\n\t\t}else if(destCPFCNPJ.length > 9){\n\t\t\tdestChildren = {\"CPF\": destCPFCNPJ};\n\t\t}\n\t\tlet dest = {\n\t\t\tname: \"dest\",\n\t\t\tchildren: destChildren\n\t\t};\n\n\t\tlet dets = documentoprodutos.map((documentoproduto) => {\n\t\t\tlet prod = [\n\t\t\t\t{name: \"cProd\", text: documentoproduto.idproduto},\n\t\t\t\t{name: \"xProd\", text: documentoproduto.descricao.replaceAll(\"&\", \"&amp;\")},\n\t\t\t\t{name: \"NCM\", text: documentoproduto.codigoncm.removeFormat()},\n\t\t\t\t{name: \"CFOP\", text: documentoproduto.cfop.removeFormat()},\n\t\t\t\t{name: \"uCom\", text: documentoproduto.sigla},\n\t\t\t\t{name: \"qCom\", text: documentoproduto.quantidade.format(4, \".\", \"\")},\n\t\t\t\t{name: \"vUnCom\", text: documentoproduto.preco},\n\t\t\t\t{name: \"indRegra\", text: \"T\"},\n\t\t\t\t{name: \"vDesc\", text: documentoproduto.totaldesconto},\n\t\t\t\t{name: \"vOutro\", text: documentoproduto.totalacrescimo}\n\t\t\t];\n\t\t\tif(documentoproduto.cest !== null && documentoproduto.cest.length > 0){\n\t\t\t\tprod.push({\n\t\t\t\t\tname: \"obsFiscoDet\",\n\t\t\t\t\tattrs: {\"xCampoDet\": \"Cod. CEST\"},\n\t\t\t\t\tchildren: {\n\t\t\t\t\t\t\"xTextoDet\": documentoproduto.cest.removeFormat()\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet ICMS = {};\n\t\t\tif([\"102\", \"300\", \"400\", \"500\"].indexOf(documentoproduto.csosn) > -1){\n\t\t\t\tICMS = {\"ICMSSN102\": {\"Orig\": documentoproduto.origem, \"CSOSN\": documentoproduto.csosn}};\n\t\t\t}\n\n\t\t\tlet PIS = {};\n\t\t\tif([\"01\", \"02\"].indexOf(documentoproduto.cstpis) > -1){\n\t\t\t\tPIS = {\"PISAliq\": {\"CST\": documentoproduto.cstpis, \"vBC\": documentoproduto.basepis, \"pPIS\": documentoproduto.aliqpis.format(4, \".\", \"\")}};\n\t\t\t}else if([\"03\"].indexOf(documentoproduto.cstpis) > -1){\n\t\t\t\tPIS = {\"PISQtde\": {\"CST\": documentoproduto.cstpis, \"qBCProd\": documentoproduto.quantidade, \"vAliqProd\": documentoproduto.aliqpis.format(4, \".\", \"\")}};\n\t\t\t}else if([\"04\", \"06\", \"07\", \"08\", \"09\"].indexOf(documentoproduto.cstpis) > -1){\n\t\t\t\tPIS = {\"PISNT\": {\"CST\": documentoproduto.cstpis}};\n\t\t\t}else if([\"49\"].indexOf(documentoproduto.cstpis) > -1){\n\t\t\t\tPIS = {\"PISSN\": {\"CST\": documentoproduto.cstpis}};\n\t\t\t}else if([\"99\"].indexOf(documentoproduto.cstpis) > -1){\n\t\t\t\tPIS = {\"PISOutr\": {\"CST\": documentoproduto.cstpis, \"vBC\": documentoproduto.basepis, \"pPIS\": documentoproduto.aliqpis.format(4, \".\", \"\")}};\n\t\t\t}\n\n\t\t\tlet COFINS = {};\n\t\t\tif([\"01\", \"02\"].indexOf(documentoproduto.cstcofins) > -1){\n\t\t\t\tCOFINS = {\"COFINSAliq\": {\"CST\": documentoproduto.cstcofins, \"vBC\": documentoproduto.basecofins, \"pCOFINS\": documentoproduto.aliqcofins.format(4, \".\", \"\")}};\n\t\t\t}else if([\"03\"].indexOf(documentoproduto.cstcofins) > -1){\n\t\t\t\tCOFINS = {\"COFINSQtde\": {\"CST\": documentoproduto.cstcofins, \"qBCProd\": documentoproduto.quantidade, \"vAliqProd\": documentoproduto.aliqcofins.format(4, \".\", \"\")}};\n\t\t\t}else if([\"04\", \"06\", \"07\", \"08\", \"09\"].indexOf(documentoproduto.cstcofins) > -1){\n\t\t\t\tCOFINS = {\"COFINSNT\": {\"CST\": documentoproduto.cstcofins}};\n\t\t\t}else if([\"49\"].indexOf(documentoproduto.cstcofins) > -1){\n\t\t\t\tCOFINS = {\"COFINSSN\": {\"CST\": documentoproduto.cstcofins}};\n\t\t\t}else if([\"99\"].indexOf(documentoproduto.cstcofins) > -1){\n\t\t\t\tCOFINS = {\"COFINSOutr\": {\"CST\": documentoproduto.cstcofins, \"vBC\": documentoproduto.basecofins, \"pCOFINS\": documentoproduto.aliqcofins.format(4, \".\", \"\")}};\n\t\t\t}\n\n\t\t\tlet det = {\n\t\t\t\tname: \"det\",\n\t\t\t\tattrs: {\"nItem\": documentoproduto.sequencial},\n\t\t\t\tchildren: {\n\t\t\t\t\t\"prod\": prod,\n\t\t\t\t\t\"imposto\": {\n\t\t\t\t\t\t\"ICMS\": ICMS,\n\t\t\t\t\t\t\"PIS\": PIS,\n\t\t\t\t\t\t\"COFINS\": COFINS\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn det;\n\t\t});\n\n\t\tlet total = {\n\t\t\tname: \"total\"\n\t\t};\n\n\t\tlet pgtoChildren = documentopagamentos.map((documentopagamento) => {\n\t\t\treturn {\n\t\t\t\tname: \"MP\",\n\t\t\t\tchildren: {\n\t\t\t\t\t\"cMP\": documentopagamento.especie,\n\t\t\t\t\t\"vMP\": documentopagamento.totalpagamento\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tlet pgto = {\n\t\t\tname: \"pgto\",\n\t\t\tchildren: pgtoChildren\n\t\t};\n\n\t\tlet impostoFederal = (documento.totaldocumento * paramEmitenteImpostoFederal.toFloat() / 100).format(2, \",\" , \".\");\n\t\tlet impostoEstadual = (documento.totaldocumento * paramEmitenteImpostoEstadual.toFloat() / 100).format(2, \",\" , \".\");\n\t\tlet impostoAproximado = \"Valor aprox. imposto: R$ \" + impostoFederal + \" Fed / R$ \" + impostoEstadual + \" Est / Fonte SEBRAE\";\n\n\t\tlet infAdic = {\n\t\t\tname: \"infAdic\",\n\t\t\tchildren: {\n\t\t\t\t\"infCpl\": impostoAproximado\n\t\t\t}\n\t\t}\n\n\t\tlet infCFeChildren = [ide, emit, dest].concat(dets).concat([total, pgto, infAdic]);\n\n\t\tlet infCFe = [{\n\t\t\tname: \"infCFe\",\n\t\t\tattrs: {\"versaoDadosEnt\": \"0.07\"},\n\t\t\tchildren: infCFeChildren\n\t\t}];\n\n\t\tlet xml = [{\n\t\t\tname: \"CFe\",\n\t\t\tchildren: [infCFe]\n\t\t}];\n\n\t\tlet finalXML = this.jsontoxml(xml);\n\n\t\tif(typeof success === \"function\"){\n\t\t\tsuccess(finalXML);\n\t\t}\n\n\t\treturn finalXML;\n\t}\n\n\tnovoNumSessao(){\n\t\treturn String(Math.round(Math.random() * Math.pow(10, 6))).lpad(6, \"0\");\n\t}\n\n\t// Transmite o documento fiscal\n\tasync transmitirDocumento(iddocumento){\n\t\t/*\n\t\t// Verifica se a venda ja nao foi processada\n\t\tlet ultimaSessao = await this.consultarUltimaSessaoFiscal();\n\t\tif(ultimaSessao[\"tipo\"] === \"venda\" && ultimaSessao[\"chave\"]){\n\t\t\tconst resDocumento = await this.Pool.query(\"SELECT count(iddocumento) FROM documento WHERE chave = $1\", [ultimaSessao[\"chave\"]]);\n\t\t\tif(resDocumento.rows[0].iddocumento === 0){\n\t\t\t\treturn ultimaSessao;\n\t\t\t}\n\t\t}\n\t\t*/\n\t\t// Carrega os parametros\n\t\tlet paramSATModelo = await valorParametro(this.Pool, \"SAT\", \"MODELO\");\n\t\tlet paramSATAtivacao = await valorParametro(this.Pool, \"SAT\", \"ATIVACAO\");\n\n\t\t// Cria o XML do documento fiscal a ser enviado para o SAT\n\t\tlet xmlEntrada = await this.gerarXMLDocumento(iddocumento);\n\t\twriteTemporary(\"venda.xml\", xmlEntrada);\n\n\t\t// Verifica se deve enviar para o SAT\n\t\tif(paramSATModelo === \"nenhum\"){\n\t\t\treturn {xml: null, chave: null, numero: null};\n\t\t}\n\n\t\t// Define a DLL a ser utilizada\n\t\tlet dllPath = \"lib/comdll-1.0.0/SAT-\" + paramSATModelo + \".dll\";\n\n\t\tlet retorno = null;\n\t\tlet arrRetorno = null;\n\t\twhile(retorno === null || arrRetorno[1] === \"06098\"){\n\t\t\tif(retorno !== null){\n\t\t\t\tawait sleep(500);\n\t\t\t}\n\t\t\tretorno = this.ComDLL.execute(dllPath, \"EnviarDadosVenda\", [paramSATAtivacao], xmlEntrada);\n\t\t\tif(retorno === false){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tarrRetorno = retorno.split(\"|\");\n\t\t}\n\n\t\tif(!this.validarRetorno(retorno)){\n\t\t\treturn false;\n\t\t}\n\n\t\tlet xmlSaida = atob(arrRetorno[6]);\n\t\tlet chave = arrRetorno[8].trim();\n\t\tlet numero = chave.substr(-13, 6);\n\n\t\tif(typeof xmlSaida === \"string\" && xmlSaida.length === 0 && paramSATModelo === \"sweda\"){\n\t\t\tarrRetorno = this.fs.readFileSync(\"C:/Sweda/Retorno.txt\").toString();\n\t\t\txmlSaida = atob(arrRetorno[6]);\n\t\t}\n\n\t\treturn {\n\t\t\txml: xmlSaida,\n\t\t\tchave: chave,\n\t\t\tnumero: numero\n\t\t};\n\t}\n\n\tvalidarRetorno(retorno){\n\t\tlet arrRetorno = retorno.split(\"|\");\n\n\t\tthis.error = null;\n\t\tlet sucesso = false;\n\n\t\tswitch(arrRetorno[1]){\n\t\t\t/*\n\t\t\t * Metodo: AtivarSAT\n\t\t\t */\n\t\t\tcase \"04000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\tcase \"04006\": // CSR ICP-BRASIL criado com sucesso\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\t/*\n\t\t\t * Metodo: EnviarDadosVenda\n\t\t\t */\n\t\t\tcase \"06000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\t/*\n\t\t\t * Metodo: CancelarUltimaVenda\n\t\t\t */\n\t\t\tcase \"07000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\t/*\n\t\t\t * Metodo: ConsultarSAT\n\t\t\t */\n\t\t\tcase \"08000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\t/*\n\t\t\t * Metodo: TesteFimAFim\n\t\t\t */\n\t\t\tcase \"09000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\t/*\n\t\t\t * Metodo: ConsultarStatusOperacional\n\t\t\t */\n\t\t\tcase \"10000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.error = arrRetorno[3];\n\t\t\t\tif(this.error === undefined || this.error === null || this.error.length === 0){\n\t\t\t\t\tthis.error = \"Erro desconhecido. (Código \" + arrRetorno[1] + \")\";\n\t\t\t\t}else if([\"98\", \"99\"].indexOf(arrRetorno[1].substr(-2)) > -1){\n\t\t\t\t\tthis.error = \"Não foi possível comunicar com o equipamento fiscal SAT.<br><br>Reinicie o equipamento da seguinte maneira:<br>1. Desconecte todos os cabos ligados ao SAT.<br>2. Aguarde 5 segundos.<br>3. Conecte os cabos de volta ao SAT.<br>4. Tente efetuar a venda novamente.<br><br>Caso o problema persista, entre em contato com nosso suporte.\";\n\t\t\t\t}\n\t\t\t\tsucesso = false;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn sucesso;\n\t}\n\n}\n","import React from \"react\";\nimport ini from \"ini\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport Hr from \"./Hr.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport Printer from \"../com/Printer.js\";\nimport SAT from \"../com/SAT.js\";\n\nimport {currentTimestamp, defaultMessageBoxError, valorParametro} from \"../def/function.js\";\n\nexport default class VendaCancelarCupom extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tiddocumento: null,\n\t\t\tnumero: null,\n\t\t\ttotaldocumento: null,\n\t\t\tcpfcnpj: null,\n\t\t\tshow: false\n\t\t};\n\n\t\tthis.atualizarState = this.atualizarState.bind(this);\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.carregarUltimoDocumento = this.carregarUltimoDocumento.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.outroCupom = this.outroCupom.bind(this);\n\n\t\tthis.Printer = new Printer(this.props.Pool);\n\t\tthis.SAT = new SAT(this.props.Pool);\n\t}\n\n\tatualizarState(data){\n\t\tlet numero = (data.numero ? data.numero : \"\");\n\t\tlet cpfcnpj = (data.cpfcnpj ? data.cpfcnpj : \"não informado\");\n\n\t\tthis.setState({\n\t\t\tiddocumento: data.iddocumento,\n\t\t\tnumero: String(numero).lpad(6, \"0\"),\n\t\t\ttotaldocumento: \"R$ \" + data.totaldocumento.format(2, \",\", \".\"),\n\t\t\tcpfcnpj: cpfcnpj\n\t\t});\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tasync carregarDocumento(localizarNumero){\n\t\tlet query = [\n\t\t\t\"SELECT iddocumento, numero, totaldocumento, cpfcnpj\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE operacao = $1\",\n\t\t\t\"  AND numero = $2\",\n\t\t\t\"ORDER BY iddocumento DESC\",\n\t\t\t\"LIMIT 1\"\n\t\t].join(\" \");\n\n\t\tlet res = await this.props.Pool.query(query, [\"CU\", localizarNumero]);\n\n\t\tif(res.rowCount === 0){\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Houve uma falha\",\n\t\t\t\ttext: \"Nenhum documento foi encontrado com o número \" + localizarNumero + \".\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tlet data = res.rows[0];\n\t\tthis.atualizarState(data);\n\t}\n\n\tasync carregarUltimoDocumento(){\n\t\tlet query = [\n\t\t\t\"SELECT iddocumento, numero, totaldocumento, cpfcnpj\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE operacao = $1\",\n\t\t\t\"ORDER BY iddocumento DESC\",\n\t\t\t\"LIMIT 1\"\n\t\t].join(\" \");\n\n\t\tlet res = await this.props.Pool.query(query, [\"CU\"]);\n\n\t\tif(res.rowCount === 0){\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Houve uma falha\",\n\t\t\t\ttext: \"Nenhum documento foi encontrado.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tlet data = res.rows[0];\n\t\tthis.atualizarState(data);\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tshow: nextProps.show\n\t\t});\n\n\t\tif(!this.state.show && nextProps.show){\n\t\t\tthis.carregarUltimoDocumento();\n\t\t}\n\t}\n\n\tasync confirmar(){\n\t\ttry {\n\t\t\twindow.Loading.show();\n\n\t\t\t// Carrega os parametros\n\t\t\tlet paramSATModelo = await valorParametro(this.props.Pool, \"SAT\", \"MODELO\");\n\n\t\t\t// Cancela venda no SAT\n\t\t\tlet retorno = {xmlcanc: null, chavecanc: null};\n\t\t\tif(paramSATModelo !== \"nenhum\"){\n\t\t\t\tretorno = await this.SAT.cancelarDocumento(this.state.iddocumento);\n\t\t\t\tif(retorno === false){\n\t\t\t\t\tthrow new Error(this.SAT.error);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Atualiza tabela no banco de dados\n\t\t\tlet query = [\n\t\t\t\t\"UPDATE documento SET\",\n\t\t\t\t\"  status = $2, dthrcancelamento = $3,\",\n\t\t\t\t\"  xmlcanc = $4, chavecanc = $5\",\n\t\t\t\t\"WHERE iddocumento = $1\"\n\t\t\t].join(\" \");\n\t\t\tlet values = [\n\t\t\t\tthis.state.iddocumento,\n\t\t\t\t\"C\", currentTimestamp(),\n\t\t\t\tretorno.xmlcanc, retorno.chavecanc\n\t\t\t];\n\t\t\tawait this.props.Pool.query(query, values);\n\n\t\t\t// Imprime o cupom do cancelamento\n\t\t\tlet numeroVias = ini.parse(await valorParametro(this.props.Pool, \"IMPRESSORA\", \"NUMEROVIAS\"));\n\t\t\tfor(let i = 1; i <= numeroVias.cancelamento; i++){\n\t\t\t\tthis.Printer.imprimirDocumento(this.state.iddocumento);\n\t\t\t}\n\n\t\t\t// Mensagem de sucesso\n\t\t\twindow.FastMessage.show(\"Venda cancelada com sucesso!\");\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t}catch(err){\n\t\t\tconsole.error(err.stack);\n\t\t\tdefaultMessageBoxError(err.message);\n\t\t}finally{\n\t\t\twindow.Loading.hide();\n\t\t}\n\t}\n\n\toutroCupom(){\n\t\twindow.InformarValor.show({\n\t\t\ttitle: \"Informe o número do cupom\",\n\t\t\tmask: \"999999\",\n\t\t\tsuccess: (value) => {\n\t\t\t\tthis.carregarDocumento(value);\n\t\t\t}\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal id=\"VendaCancelarCupom\" title=\"Cancelamento de venda\" show={this.state.show} size=\"md\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"12\" className=\"text-left\">\n\t\t\t\t\t\tTem certeza que deseja cancelar a venda?<br />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\tCupom: {this.state.numero}<br />\n\t\t\t\t\t\tTotal: {this.state.totaldocumento}<br />\n\t\t\t\t\t\tCPF: {this.state.cpfcnpj}\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Hr />\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"5\">\n\t\t\t\t\t\t<Button text=\"Outro cupom\" color=\"blue\" onClick={this.outroCupom} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"7\" className=\"text-right\">\n\t\t\t\t\t\t<Button text=\"Sim\" icon=\"thumbs-up\" color=\"green\" className=\"mr-2\" onClick={this.confirmar} />\n\t\t\t\t\t\t<Button text=\"Não\" icon=\"thumbs-down\" color=\"red\" onClick={this.cancelar} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport $ from \"jquery\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport Hr from \"./Hr.js\";\nimport Icon from \"./Icon.js\";\nimport ListGroup from \"./ListGroup.js\";\nimport ListItem from \"./ListItem.js\";\nimport Row from \"./Row.js\";\n\nimport \"../css/VendaDetalhe.css\";\n\nexport default class VendaDetalhe extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\theight: \"0px\"\n\t\t}\n\n\t\tthis.ajustarAltura = this.ajustarAltura.bind(this);\n\t}\n\n\tajustarAltura(){\n\t\tthis.setState({\n\t\t\theight: window.innerHeight\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\twindow.addEventListener(\"resize\", this.ajustarAltura);\n\t\tthis.ajustarAltura();\n\t}\n\n\tcomponentWillUnmount(){\n\t\twindow.removeEventListener(\"resize\", this.ajustarAltura);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className=\"vendadetalhe\" style={{height: this.state.height}}>\n\t\t\t\t<VendaDetalheCabecalho\n\t\t\t\t\tcancelarUltimaVenda={this.props.cancelarUltimaVenda}\n\t\t\t\t\tcancelarVendaAtual={this.props.cancelarVendaAtual}\n\t\t\t\t\tcarregarOrcamento={this.props.carregarOrcamento}\n\t\t\t\t\tlistaDocumentoProduto={this.props.listaDocumentoProduto}\n\t\t\t\t\toperacao={this.props.operacao}\n\t\t\t\t\treimprimirCupom={this.props.reimprimirCupom}\n\t\t\t\t\ttrocarOperacao={this.props.trocarOperacao}\n\t\t\t\t/>\n\t\t\t\t<VendaDetalheCorpo\n\t\t\t\t\taumentarQuantidade={this.props.aumentarQuantidade}\n\t\t\t\t\tdiminuirQuantidade={this.props.diminuirQuantidade}\n\t\t\t\t\teditarProduto={this.props.editarProduto}\n\t\t\t\t\tlistaDocumentoProduto={this.props.listaDocumentoProduto}\n\t\t\t\t\tremoverProduto={this.props.removerProduto}\n\t\t\t\t/>\n\t\t\t\t<VendaDetalheRodape\n\t\t\t\t\tabrirFinalizacao={this.props.abrirFinalizacao}\n\t\t\t\t\tcpfcnpj={this.props.cpfcnpj}\n\t\t\t\t\tinformarCPF={this.props.informarCPF}\n\t\t\t\t\tlistaDocumentoProduto={this.props.listaDocumentoProduto}\n\t\t\t\t\toperacao={this.props.operacao}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass VendaDetalheCabecalho extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.alternarOrcamento = this.alternarOrcamento.bind(this);\n\t\tthis.alternarVenda = this.alternarVenda.bind(this);\n\t\tthis.efetivarOrcamento = this.efetivarOrcamento.bind(this);\n\t\tthis.onClickDocument = this.onClickDocument.bind(this);\n\t\tthis.onClickIcon = this.onClickIcon.bind(this);\n\n\t\tthis.exibindoOpcoes = false;\n\t}\n\n\tabrirOpcoes(){\n\t\tlet opcoes = ReactDOM.findDOMNode(this.opcoes);\n\t\t$(opcoes).stop().animate({\n\t\t\theight: \"show\"\n\t\t}, 350);\n\t\tthis.exibindoOpcoes = true;\n\t}\n\n\talternarOrcamento(){\n\t\tthis.props.trocarOperacao(\"OR\");\n\t}\n\n\talternarVenda(){\n\t\tthis.props.trocarOperacao(\"CU\");\n\t}\n\n\tcomponentDidMount(){\n\t\tdocument.addEventListener(\"click\", this.onClickDocument);\n\t}\n\n\tcomponentWillUnmount(){\n\t\tdocument.removeEventListener(\"click\", this.onClickDocument);\n\t}\n\n\tefetivarOrcamento(){\n\t\twindow.InformarValor.show({\n\t\t\ttitle: \"Número do orçamento\",\n\t\t\tmask: \"999999\",\n\t\t\tsuccess: (value) => {\n\t\t\t\tif(value.length > 0){\n\t\t\t\t\tthis.props.carregarOrcamento(value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tfecharOpcoes(){\n\t\tlet opcoes = ReactDOM.findDOMNode(this.opcoes);\n\t\t$(opcoes).stop().animate({\n\t\t\theight: \"hide\"\n\t\t}, 350);\n\t\tthis.exibindoOpcoes = false;\n\t}\n\n\tonClickDocument(event){\n\t\tlet icon = ReactDOM.findDOMNode(this.icon);\n\t\tif(!this.iconClicked && icon.contains(event.target)){\n\t\t\tthis.iconClicked = true;\n\t\t}else if(this.exibindoOpcoes){\n\t\t\tthis.iconClicked = false;\n\t\t\tthis.fecharOpcoes();\n\t\t}\n\t}\n\n\tonClickIcon(){\n\t\tthis.abrirOpcoes();\n\t}\n\n\trender(){\n\t\tlet countLista = this.props.listaDocumentoProduto.length;\n\t\tlet operacao = this.props.operacao;\n\n\t\tlet titulo = null;\n\t\tswitch(operacao){\n\t\t\tcase \"OR\":\n\t\t\t\ttitulo = \"Orçamento\";\n\t\t\t\tbreak;\n\t\t\tcase \"CU\":\n\t\t\tdefault:\n\t\t\t\ttitulo = \"Detalhe da venda\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"vendadetalhe-cabecalho\">\n\t\t\t\t<div>\n\t\t\t\t\t<h4>{titulo}</h4>\n\t\t\t\t\t<Icon name=\"menu\" onClick={this.onClickIcon} ref={(icon) => { this.icon = icon }} />\n\t\t\t\t\t<div className={\"vendadetalhe-cabecalho-opcoes\"} ref={(opcoes) => { this.opcoes = opcoes }}>\n\t\t\t\t\t\t<ListGroup>\n\t\t\t\t\t\t\t<ListItem className={countLista === 0 ? \" d-none\" : \"\"} onClick={this.props.cancelarVendaAtual}>Cancelar venda atual</ListItem>\n\t\t\t\t\t\t\t<ListItem className={countLista === 0 ? \"\" : \" d-none\"} onClick={this.props.cancelarUltimaVenda}>Cancelar última venda</ListItem>\n\t\t\t\t\t\t\t<ListItem onClick={this.props.reimprimirCupom}>Reimprimir cupom</ListItem>\n\t\t\t\t\t\t\t<ListItem className={operacao !== \"CU\" ? \"\" : \" d-none\"} onClick={this.alternarVenda}>Alternar para venda</ListItem>\n\t\t\t\t\t\t\t<ListItem className={operacao !== \"OR\" ? \"\" : \" d-none\"} onClick={this.alternarOrcamento}>Alternar para orçamento</ListItem>\n\t\t\t\t\t\t\t<ListItem onClick={this.efetivarOrcamento}>Efetivar um orçamento</ListItem>\n\t\t\t\t\t\t</ListGroup>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass VendaDetalheCorpo extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.countLista = props.listaDocumentoProduto.length;\n\t}\n\n\tcomponentDidUpdate(){\n\t\tif(this.props.listaDocumentoProduto.length > this.countLista){\n\t\t\tthis.scrollToBottom();\n\t\t}\n\t\tthis.countLista = this.props.listaDocumentoProduto.length;\n\t}\n\n\tscrollToBottom(){\n\t\t$(\"#vendadetalhe-corpo-conteudo\").stop().animate({\n\t\t\t\"scrollTop\": $(\"#vendadetalhe-corpo-conteudo\").get(0).scrollHeight\n\t\t}, 1000);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className=\"vendadetalhe-corpo\">\n\t\t\t\t<div>\n\t\t\t\t\t<div id=\"vendadetalhe-corpo-conteudo\">\n\t\t\t\t\t\t{this.props.listaDocumentoProduto.map((documentoproduto, i) => {\n\t\t\t\t\t\t\tdocumentoproduto.i = i;\n\t\t\t\t\t\t\treturn <VendaDetalheCorpoItem key={i} documentoproduto={documentoproduto} aumentarQuantidade={this.props.aumentarQuantidade} diminuirQuantidade={this.props.diminuirQuantidade} editarProduto={this.props.editarProduto} removerProduto={this.props.removerProduto} />\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass VendaDetalheCorpoItem extends React.Component {\n\n\trender(documentoproduto){\n\t\tlet espaco = \"   \";\n\t\tlet preco = \"R$ \" + this.props.documentoproduto.preco.format(2, \",\", \".\");\n\t\tlet quantidade  = this.props.documentoproduto.quantidade.format(this.props.documentoproduto.precisao, \",\", \".\");\n\t\tlet totaldesconto = \"R$ \" + this.props.documentoproduto.totaldesconto.format(2, \",\", \".\");\n\t\tlet totalacrescimo = \"R$ \" + this.props.documentoproduto.totalacrescimo.format(2, \",\", \".\");\n\t\tlet totalproduto = \"R$ \" + this.props.documentoproduto.totalproduto.format(2, \",\", \".\");\n\n\t\tlet calculo = null;\n\t\tif(this.props.documentoproduto.descontounitario > 0 && this.props.documentoproduto.acrescimounitario > 0){\n\t\t\tcalculo = preco + espaco + \"x\" + espaco + quantidade + espaco + \"-\" + espaco + totaldesconto + espaco + \"+\" + espaco + totalacrescimo + espaco + \"=\" + espaco + \"<b>\" + totalproduto + \"</b>\";\n\t\t}else if(this.props.documentoproduto.descontounitario > 0){\n\t\t\tcalculo = preco + espaco + \"x\" + espaco + quantidade + espaco + \"-\" + espaco + totaldesconto + espaco + \"=\" + espaco + \"<b>\" + totalproduto + \"</b>\";\n\t\t}else if(this.props.documentoproduto.acrescimounitario > 0){\n\t\t\tcalculo = preco + espaco + \"x\" + espaco + quantidade + espaco + \"+\" + espaco + totalacrescimo + espaco + \"=\" + espaco + \"<b>\" + totalproduto + \"</b>\";\n\t\t}else{\n\t\t\tcalculo = preco + espaco + \"x\" + espaco + quantidade + espaco + \"=\" + espaco + \"<b>\" + totalproduto + \"</b>\";\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Row className=\"vendadetalhe-produto\" onClick={() => { this.props.editarProduto(this.props.documentoproduto); }}>\n\t\t\t\t\t<Col size=\"8\">\n\t\t\t\t\t\t<div className=\"vendadetalhe-produto-descricao\">{this.props.documentoproduto.descricao}</div>\n\t\t   \t\t\t\t<div className=\"vendadetalhe-produto-calculo\" dangerouslySetInnerHTML={{__html: calculo}}></div>\n\t\t \t\t\t</Col>\n\t\t \t\t\t<Col size=\"4\" className=\"vendadetalhe-produto-botao text-right\">\n\t\t   \t\t\t\t<div>\n\t\t\t\t\t\t\t<Button icon=\"plus\" color=\"green\" onClick={(event) => { this.props.aumentarQuantidade(this.props.documentoproduto); event.stopPropagation(); }} />\n\t\t\t\t\t\t\t<Button icon=\"minus\" color=\"red\" onClick={(event) => { this.props.diminuirQuantidade(this.props.documentoproduto); event.stopPropagation(); }} />\n\t\t   \t\t\t\t</div>\n\t\t\t\t\t\t<Button icon=\"bin\" color=\"red\" onClick={(event) => { this.props.removerProduto(this.props.documentoproduto); event.stopPropagation(); }} />\n\t\t \t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Hr />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass VendaDetalheRodape extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcpfcnpj: props.cpfcnpj\n\t\t};\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tcpfcnpj: nextProps.cpfcnpj\n\t\t});\n\t}\n\n\trender(){\n\t\tlet totalquantidade = 0;\n\t\tlet totalbruto = 0;\n\t\tlet totaldesconto = 0;\n\t\tlet totaldocumento = 0;\n\n\t\tthis.props.listaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\ttotalquantidade += parseFloat(documentoproduto.quantidade);\n\t\t\ttotalbruto += parseFloat(documentoproduto.preco * documentoproduto.quantidade);\n\t\t\ttotaldesconto += parseFloat(documentoproduto.totaldesconto);\n\t\t\ttotaldocumento += parseFloat(documentoproduto.totalproduto);\n\t\t});\n\n\t\treturn (\n\t\t\t<div className=\"vendadetalhe-rodape\">\n\t\t\t\t<div>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t\t<div className=\"vendadetalhe-rodape-informacao mb-3 mt-1\">\n\t\t\t\t\t\t\t\t<div>Quantidade de itens <strong>{totalquantidade}</strong></div>\n\t\t\t\t\t\t\t\t<div>Total dos itens <strong><small>R$</small>{totalbruto.format(2, \",\", \".\")}</strong></div>\n\t\t\t\t\t\t\t\t<div>Total de desconto <strong><small>R$</small>{totaldesconto.format(2, \",\", \".\")}</strong></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={this.props.operacao === \"CU\" ? \"\" : \"d-none\"}>\n\t\t\t\t\t\t\t\t<div className={\"vendadetalhe-rodape-cpfcnpj\" + (this.state.cpfcnpj ? \"\" : \" d-none\")} style={{position: \"absolute\", bottom: \"0px\"}}>\n\t\t\t\t\t\t\t\t\t<span>CPF: <strong>{this.state.cpfcnpj}</strong></span>\n\t\t\t\t\t\t\t\t\t<Button text=\"alterar\" color=\"green\" size=\"xs\" className=\"ml-2\" onClick={this.props.informarCPF} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={this.state.cpfcnpj ? \" d-none\" : \"\"} style={{position: \"absolute\", bottom: \"0px\"}}>\n\t\t\t\t\t\t\t\t\t<Button text=\"Informar CPF\" color=\"green\" size=\"sm\" onClick={this.props.informarCPF} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t\t<div className=\"vendadetalhe-rodape-totaldocumento\">{totaldocumento.format(2, \",\", \".\")}</div>\n\t\t\t\t\t\t\t<Button text=\"F I N A L I Z A R\" icon=\"dollar2\" size=\"lg\" block=\"true\" color=\"green\" disabled={totaldocumento === 0} onClick={this.props.abrirFinalizacao} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"./Button.js\";\nimport FormGroup from \"./FormGroup.js\";\nimport Hr from \"./Hr.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport \"../css/VendaEditarProduto.css\";\n\nexport default class VendaEditarProduto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tquantidade: this.props.documentoproduto.quantidade,\n\t\t\tpreco: this.props.documentoproduto.preco,\n\t\t\tdescontounitario: this.props.documentoproduto.descontounitario,\n\t\t\tacrescimounitario: this.props.documentoproduto.acrescimounitario,\n\t\t\ttotaldesconto: this.props.documentoproduto.totaldesconto,\n\t\t\ttotalacrescimo: this.props.documentoproduto.totalacrescimo,\n\t\t\ttotalproduto: this.props.documentoproduto.totalproduto,\n\t\t\tshow: this.props.show\n\t\t};\n\n\t\tthis.calcularTotais = this.calcularTotais.bind(this);\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.onChangeAcrescimoPercentual = this.onChangeAcrescimoPercentual.bind(this);\n\t\tthis.onChangeAcrescimoUnitario = this.onChangeAcrescimoUnitario.bind(this);\n\t\tthis.onChangeDescontoPercentual = this.onChangeDescontoPercentual.bind(this);\n\t\tthis.onChangeDescontoUnitario = this.onChangeDescontoUnitario.bind(this);\n\t\tthis.onChangePreco = this.onChangePreco.bind(this);\n\t\tthis.onChangeQuantidade = this.onChangeQuantidade.bind(this);\n\t\tthis.onChangeTotalAcrescimo = this.onChangeTotalAcrescimo.bind(this);\n\t\tthis.onChangeTotalDesconto = this.onChangeTotalDesconto.bind(this);\n\t}\n\n\tcalcularTotais(){\n\t\tlet totalbruto = this.state.preco * this.state.quantidade;\n\t\tlet totalacrescimo = this.state.acrescimounitario * this.state.quantidade;\n\t\tlet totaldesconto = this.state.descontounitario * this.state.quantidade;\n\t\tlet totalproduto = totalbruto - totaldesconto + totalacrescimo;\n\n\t\tthis.setState({\n\t\t\ttotalbruto: totalbruto,\n\t\t\ttotalacrescimo: totalacrescimo,\n\t\t\ttotaldesconto: totaldesconto,\n\t\t\ttotalproduto: totalproduto\n\t\t});\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tquantidade: nextProps.documentoproduto.quantidade,\n\t\t\tpreco: nextProps.documentoproduto.preco,\n\t\t\tdescontounitario: nextProps.documentoproduto.descontounitario,\n\t\t\tacrescimounitario: nextProps.documentoproduto.acrescimounitario,\n\t\t\tshow: nextProps.show\n\t\t}, this.calcularTotais);\n\t}\n\n\tconfirmar(){\n\t\tlet documentoproduto = Object.assign({}, this.props.documentoproduto);\n\n\t\tdocumentoproduto.quantidade = this.state.quantidade;\n\t\tdocumentoproduto.preco = this.state.preco;\n\t\tdocumentoproduto.descontounitario = this.state.descontounitario;\n\t\tdocumentoproduto.acrescimounitario = this.state.acrescimounitario;\n\t\tdocumentoproduto.totaldesconto = this.state.totaldesconto;\n\t\tdocumentoproduto.totalacrescimo = this.state.totalacrescimo;\n\t\tdocumentoproduto.totalproduto = this.state.totalproduto;\n\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t}, () => {\n\t\t\tthis.props.atualizarDocumentoProduto(documentoproduto)\n\t\t});\n\t}\n\n\tonChangeAcrescimoPercentual(event){\n\t\tlet acrescimopercentual = event.target.value.toFloat();\n\t\tlet acrescimounitario  = this.state.preco * acrescimopercentual / 100;\n\n\t\tthis.setState({\n\t\t\tacrescimounitario: acrescimounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeAcrescimoUnitario(event){\n\t\tlet acrescimounitario  = event.target.value.toFloat();\n\n\t\tthis.setState({\n\t\t\tacrescimounitario: acrescimounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeDescontoPercentual(event){\n\t\tlet descontopercentual = event.target.value.toFloat();\n\t\tlet descontounitario  = this.state.preco * descontopercentual / 100;\n\n\t\tthis.setState({\n\t\t\tdescontounitario: descontounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeDescontoUnitario(event){\n\t\tlet descontounitario  = event.target.value.toFloat();\n\n\t\tthis.setState({\n\t\t\tdescontounitario: descontounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangePreco(event){\n\t\tlet preco  = event.target.value.toFloat();\n\n\t\tthis.setState({\n\t\t\tpreco: preco\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeQuantidade(event){\n\t\tlet quantidade  = event.target.value.toFloat();\n\n\t\tthis.setState({\n\t\t\tquantidade: quantidade\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeTotalAcrescimo(event){\n\t\tlet acrescimounitario = event.target.value.toFloat() / this.state.quantidade;\n\n\t\tthis.setState({\n\t\t\tacrescimounitario: acrescimounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeTotalDesconto(event){\n\t\tlet descontounitario = event.target.value.toFloat() / this.state.quantidade;\n\n\t\tthis.setState({\n\t\t\tdescontounitario: descontounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\trender(){\n\t\tlet totalbruto = this.state.preco * this.state.quantidade;\n\t\tlet acrescimopercentual = (totalbruto > 0 ? this.state.totalacrescimo / totalbruto * 100 : 0);\n\t\tlet descontopercentual = (totalbruto > 0 ? this.state.totaldesconto / totalbruto * 100 : 0);\n\n\t\tlet decimalQuantidade = this.props.documentoproduto.precisao;\n\n\t\treturn (\n\t\t\t<Modal id=\"VendaEditarProduto\" title={this.props.documentoproduto.descricao} show={this.state.show} size=\"md\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<Row>\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Quantidade\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.quantidade.format(decimalQuantidade, \",\", \".\")} onChange={this.onChangeQuantidade} InformarValor={{decimal: decimalQuantidade}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Preço unitário\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.preco.format(2, \",\", \".\")} onChange={this.onChangePreco} InformarValor={{decimal: 2, money: true}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Valor do item\" className=\"col-4\" inputClassName=\"text-center\" value={totalbruto.format(2, \",\", \".\")} disabled={true} readOnly={true} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Desconto unitário\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.descontounitario.format(2, \",\", \".\")} onChange={this.onChangeDescontoUnitario} InformarValor={{decimal: 2, money: true}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Desconto percentual\" className=\"col-4\" inputClassName=\"text-center\" value={descontopercentual.format(2, \",\", \".\")} onChange={this.onChangeDescontoPercentual} InformarValor={{decimal: 0}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Total de desconto\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.totaldesconto.format(2, \",\", \".\")} onChange={this.onChangeTotalDesconto} InformarValor={{decimal: 2, money: true}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Acréscimo unitário\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.acrescimounitario.format(2, \",\", \".\")} onChange={this.onChangeAcrescimoUnitario} InformarValor={{decimal: 2, money: true}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Acrésc percentual\" className=\"col-4\" inputClassName=\"text-center\" value={acrescimopercentual.format(2, \",\", \".\")} onChange={this.onChangeAcrescimoPercentual} InformarValor={{decimal: 0}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Total de acréscimo\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.totalacrescimo.format(2, \",\", \".\")} onChange={this.onChangeTotalAcrescimo} InformarValor={{decimal: 2, money: true}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Total final\" className=\"col-4 offset-8\" inputClassName=\"text-center\" value={this.state.totalproduto.format(2, \",\", \".\")} disabled={true} readOnly={true} />\n\t\t\t\t</Row>\n\t\t\t\t<Hr />\n\t\t\t\t<div className=\"text-right\">\n\t\t\t\t\t<Button text=\"Confirmar\" icon=\"thumbs-up\" color=\"green\" className=\"mr-2\" onClick={this.confirmar} />\n\t\t\t\t\t<Button text=\"Voltar\" icon=\"thumbs-down\" color=\"red\" onClick={this.cancelar} />\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nexport default class Card extends React.Component {\n\n\trender(){\n\t\tlet className = [this.props.className];\n\t\tclassName.push(\"card\");\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"./Button.js\";\nimport Card from \"./Card.js\";\nimport Col from \"./Col.js\";\nimport FormGroup from \"./FormGroup.js\";\nimport Hr from \"./Hr.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/VendaFinalizacao.css\";\n\nexport default class VendaFinalizacao extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdocumentopagamentos: props.listaDocumentoPagamento,\n\t\t\tformaspagamento: [],\n\t\t\tshow: false\n\t\t};\n\n\t\tthis.finalizarVenda = this.finalizarVenda.bind(this);\n\t\tthis.removerPagamento = this.removerPagamento.bind(this);\n\n\t\tthis.totalpago = 0;\n\t\tthis.totalrestante = 0;\n\t\tthis.totaltroco = 0;\n\t}\n\n\tcarregarFormasPagamento(){\n\t\tlet query = \"SELECT idformapagamento, descricao, especie FROM formapagamento WHERE status = $1 ORDER BY especie\";\n\t\tthis.props.Pool.query(query, [\"A\"], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tformaspagamento: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarFormasPagamento();\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tdocumentopagamentos: nextProps.listaDocumentoPagamento,\n\t\t\tshow: nextProps.show\n\t\t});\n\t}\n\n\tfinalizarVenda(){\n\t\tthis.props.finalizarVenda(this.state.documentopagamentos, this.totaltroco);\n\t}\n\n\ticonEspecie(especie){\n\t\tswitch(especie){\n\t\t\tcase \"01\": return \"dollar\";\n\t\t\tcase \"02\": return \"keyboard\";\n\t\t\tcase \"03\":\n\t\t\tcase \"04\": return \"credit-card\";\n\t\t\tcase \"10\":\n\t\t\tcase \"11\":\n\t\t\tcase \"12\":\n\t\t\tcase \"13\": return \"discout\";\n\t\t\tcase \"99\": return \"money\";\n\t\t\tdefault: return \"money\";\n\t\t}\n\t}\n\n\tincluirPagamento(formapagamento){\n\t\twindow.InformarValor.show({\n\t\t\ttitle: formapagamento.descricao,\n\t\t\tdecimal: 2,\n\t\t\tmoney: true,\n\t\t\tvalue: this.totalrestante.format(2, \",\", \".\"),\n\t\t\tsuccess: (valor) => {\n\t\t\t\tvalor = valor.toFloat();\n\t\t\t\tif(!(valor > 0)){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet documentopagamentos = this.state.documentopagamentos;\n\t\t\t\tdocumentopagamentos.push({\n\t\t\t\t\tidformapagamento: formapagamento.idformapagamento,\n\t\t\t\t\tdescricao: formapagamento.descricao,\n\t\t\t\t\ttotalpagamento: valor\n\t\t\t\t});\n\t\t\t\tthis.setState({\n\t\t\t\t\tdocumentopagamentos: documentopagamentos\n\t\t\t\t}, () => {\n\t\t\t\t\tif(formapagamento.especie === \"01\" && this.totalrestante === 0){\n\t\t\t\t\t\tthis.finalizarVenda();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t}\n\n\tremoverPagamento(i){\n\t\tlet documentopagamentos = this.state.documentopagamentos;\n\t\tdocumentopagamentos.splice(i, 1);\n\t\tthis.setState({\n\t\t\tdocumentopagamentos: documentopagamentos\n\t\t});\n\t}\n\n\trender(){\n\t\tthis.totalpago = 0;\n\t\tfor(let documentopagamento of this.state.documentopagamentos){\n\t\t\tthis.totalpago += documentopagamento.totalpagamento;\n\t\t}\n\t\tif(this.totalpago > this.props.totaldocumento){\n\t\t\tthis.totalrestante = 0;\n\t\t\tthis.totaltroco = Math.round((this.totalpago - this.props.totaldocumento) * 100) / 100;\n\t\t}else{\n\t\t\tthis.totalrestante = Math.round((this.props.totaldocumento - this.totalpago) * 100) / 100;\n\t\t\tthis.totaltroco = 0;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={\"vendafinalizacao\" + (this.state.show ? \"\" : \" d-none\")}>\n\t\t\t\t<Modal title=\"Finalização da venda\" size=\"lg\" show={this.state.show} beforeClose={this.props.beforeClose}>\n\t\t\t\t\t<div className=\"vendafinalizacao-totaldocumento\">\n\t\t\t\t\t\t{this.props.totaldocumento.format(2, \",\", \".\")}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Row className=\"vendafinalizacao-formapagamento\">\n\t\t\t\t\t\t{this.state.formaspagamento.map((formapagamento, i) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Col size=\"4\" key={i}>\n\t\t\t\t\t\t\t\t\t<Button text={formapagamento.descricao} block={true} size=\"lg\" icon={this.iconEspecie(formapagamento.especie)} disabled={this.totalrestante === 0} onClick={() => { this.incluirPagamento(formapagamento) }} />\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Hr />\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<FormGroup label=\"Total pago\" className=\"col-3\" inputClassName=\"text-center\" size=\"lg\" value={this.totalpago.format(2, \",\", \".\")} disabled={true} />\n\t\t\t\t\t\t<FormGroup label=\"Total restante\" className=\"col-3\" inputClassName=\"text-center\" size=\"lg\" value={this.totalrestante.format(2, \",\", \".\")} disabled={true} warning={this.totalrestante} />\n\t\t\t\t\t\t<FormGroup label=\"Total de troco\" className=\"col-3\" inputClassName=\"text-center\" size=\"lg\" value={this.totaltroco.format(2, \",\", \".\")} disabled={true} warning={this.totaltroco} />\n\t\t\t\t\t\t<Col size=\"3\" labelMargin={true}>\n\t\t\t\t\t\t\t<Button text=\"Finalizar!\" icon=\"thumbs-up\" block={true} size=\"lg\" color=\"green\" disabled={this.totalrestante > 0} onClick={this.finalizarVenda} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<VendaFinalizacaoListaPagamentos documentopagamentos={this.state.documentopagamentos} removerPagamento={this.removerPagamento} />\n\t\t\t\t</Modal>\n\t\t\t\t<div className=\"vendafinalizacao-botoesextras\">\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t\t<Button text=\"Desconto\" icon=\"folder-minus\" size=\"sm\" block={true} disabled={this.totalpago > 0} onClick={this.props.aplicarDesconto} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t\t<Button text=\"Acréscimo\" icon=\"folder-plus\" size=\"sm\" block={true} disabled={this.totalpago > 0} onClick={this.props.aplicarAcrescimo} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t\t<Button text=\"Incluir 10%\" icon=\"user-plus\" size=\"sm\" block={true} onClick={this.props.incluirDezPorcento} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass VendaFinalizacaoListaPagamentos extends React.Component {\n\trender(){\n\t\tif(this.props.documentopagamentos.length === 0){\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Hr className=\"mt-0\" />\n\t\t\t\t<Row className=\"justify-content-center\">\n\t\t\t\t\t{this.props.documentopagamentos.map((documentopagamento, i) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Col size=\"6\" key={i}>\n\t\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t<Col size=\"5\">\n\t\t\t\t\t\t\t\t\t\t\t<span>{documentopagamento.descricao}</span>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<span>{documentopagamento.totalpagamento.format(2, \",\", \".\")}</span>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col size=\"3\">\n\t\t\t\t\t\t\t\t\t\t\t<Button icon=\"bin\" color=\"red\" size=\"sm\" block={true} onClick={() => {this.props.removerPagamento(i)}} />\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport FormGroup from \"./FormGroup.js\";\nimport Hr from \"./Hr.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport {validarCPF, validarCNPJ} from \"../def/function.js\";\n\nexport default class VendaFinalizacaoOrcamento extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tnomeorcamento: this.props.nomeorcamento,\n\t\t\tcpfcnpj: this.props.cpfcnpj,\n\t\t\tshow: this.props.show\n\t\t};\n\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.onChangeCpfCnpj = this.onChangeCpfCnpj.bind(this);\n\t\tthis.onChangeNomeOrcamento = this.onChangeNomeOrcamento.bind(this);\n\t\tthis.onFocusCpfCnpj = this.onFocusCpfCnpj.bind(this);\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tnomeorcamento: nextProps.nomeorcamento,\n\t\t\tcpfcnpj: nextProps.cpfcnpj,\n\t\t\tshow: nextProps.show\n\t\t});\n\t}\n\n\tconfirmar(){\n\t\tthis.props.finalizarOrcamento(this.state.nomeorcamento, this.state.cpfcnpj);\n\t}\n\n\tonChangeCpfCnpj(event){\n\t\tthis.setState({\n\t\t\tcpfcnpj: event.target.value\n\t\t});\n\t}\n\n\tonChangeNomeOrcamento(event){\n\t\tthis.setState({\n\t\t\tnomeorcamento: event.target.value\n\t\t});\n\t}\n\n\tonFocusCpfCnpj(event){\n\t\twindow.InformarValor.show({\n\t\t\ttitle: \"Informe o CPF ou CNPJ\",\n\t\t\tmask: \"99999999999999\",\n\t\t\tsuccess: (valor) => {\n\t\t\t\tlet cpfcnpj = null;\n\t\t\t\tif(valor.length === 11 && validarCPF(valor)){\n\t\t\t\t\tcpfcnpj = valor.substr(0, 3) + \".\" + valor.substr(3, 3) + \".\" + valor.substr(6, 3) + \"-\" + valor.substr(9, 2);\n\t\t\t\t}else if(valor.length === 14 && validarCNPJ(valor)){\n\t\t\t\t\tcpfcnpj = valor.substr(0, 2) + \".\" + valor.substr(2, 3) + \".\" + valor.substr(5, 3) + \"/\" + valor.substr(8, 4) + \"-\" + valor.substr(12, 2);\n\t\t\t\t}else if(valor.length > 0){\n\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\ttitle: \"CPF ou CNPJ inválido\",\n\t\t\t\t\t\ttext: \"O CPF ou CNPJ informado é inválido.\"\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tcpfcnpj: cpfcnpj\n\t\t\t\t});\n\t\t\t},\n\t\t\tfail: () => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcpfcnpj: null\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal id=\"VendaFinalizacaoOrcamento\" show={this.state.show} size=\"sm\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<Row>\n\t\t\t\t\t<FormGroup type=\"text\" className=\"col-12\" label=\"Nome do cliente\" value={this.state.nomeorcamento} onChange={this.onChangeNomeOrcamento} />\n\t\t\t\t\t<FormGroup type=\"text\" className=\"col-12\" label=\"CPF/CNPJ\" value={this.state.cpfcnpj} onChange={this.onChangeCpfCnpj} onFocus={this.onFocusCpfCnpj} />\n\t\t\t\t</Row>\n\t\t\t\t<Hr className=\"mt-0\" />\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Button text=\"Cancelar\" color=\"red\" block={true} onClick={this.cancelar} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\" className=\"pl-0\">\n\t\t\t\t\t\t<Button text=\"Confirmar\" color=\"green\" block={true} onClick={this.confirmar} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport Col from \"./Col.js\";\nimport ListGroup from \"./ListGroup.js\";\nimport ListItem from \"./ListItem.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\nimport Printer from \"./Printer.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/VendaReimprimirCupom.css\";\n\nexport default class VendaReimprimirCupom extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tlistaUltimosDocumentos: [],\n\t\t\tshow: false\n\t\t};\n\n\t\tthis.carregarUltimosDocumentos = this.carregarUltimosDocumentos.bind(this);\n\t\tthis.imprimir = this.imprimir.bind(this);\n\t}\n\n\tatualizarState(data){\n\t\tlet numero = (data.numero ? data.numero : \"\");\n\t\tlet cpfcnpj = (data.cpfcnpj ? data.cpfcnpj : \"não informado\");\n\n\t\tthis.setState({\n\t\t\tiddocumento: data.iddocumento,\n\t\t\tnumero: String(numero).lpad(6, \"0\"),\n\t\t\ttotaldocumento: \"R$ \" + data.totaldocumento.format(2, \",\", \".\"),\n\t\t\tcpfcnpj: cpfcnpj\n\t\t});\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tasync carregarDocumento(localizarNumero){\n\t\tlet query = [\n\t\t\t\"SELECT iddocumento, numero, totaldocumento, cpfcnpj\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE operacao = $1\",\n\t\t\t\"  AND numero = $2\",\n\t\t\t\"ORDER BY iddocumento DESC\",\n\t\t\t\"LIMIT 1\"\n\t\t].join(\" \");\n\n\t\tlet res = await this.props.Pool.query(query, [\"CU\", localizarNumero]);\n\n\t\tif(res.rowCount === 0){\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Houve uma falha\",\n\t\t\t\ttext: \"Nenhum documento foi encontrado com o número \" + localizarNumero + \".\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tlet data = res.rows[0];\n\t\tthis.atualizarState(data);\n\t}\n\n\tasync carregarUltimosDocumentos(){\n\t\tlet query = [\n\t\t\t\"SELECT iddocumento, dthrcriacao, totaldocumento, totalquantidade, cpfcnpj\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE operacao = $1\",\n\t\t\t\"ORDER BY dthrcriacao DESC\",\n\t\t\t\"LIMIT 3\"\n\t\t].join(\" \");\n\n\t\tlet res = await this.props.Pool.query(query, [\"CU\"]);\n\n\t\tlet data = [];\n\t\tfor(let row of res.rows){\n\t\t\tdata.push(row);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tlistaUltimosDocumentos: data\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tshow: nextProps.show\n\t\t});\n\n\t\tif(!this.state.show && nextProps.show){\n\t\t\tthis.carregarUltimosDocumentos();\n\t\t}\n\t}\n\n\tasync imprimir(iddocumento){\n\t\tlet printer = new Printer(this.props.Pool);\n\t\tawait printer.imprimirDocumento(iddocumento, () => {\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.FastMessage.show(\"Cupom enviado para impressora com sucesso!\");\n\t\t}, (err) => {\n\t\t\tif(err) defaultMessageBoxError(err);\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal id=\"VendaReimprimirCupom\" title=\"Reimpressão de cupom\" show={this.state.show} size=\"md\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<ListGroup>\n\t\t\t\t\t{this.state.listaUltimosDocumentos.map((documento, i) => {\n\t\t\t\t\t\tlet dthrcriacao = documento.dthrcriacao.toLocaleString();\n\t\t\t\t\t\tlet totaldocumento = \"R$ \" + documento.totaldocumento.format(2, \",\", \".\");\n\t\t\t\t\t\tlet totalquantidade = Math.round(documento.totalquantidade);\n\t\t\t\t\t\tlet cpfcnpj = documento.cpfcnpj;\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<ListItem key={i} onClick={() => {this.imprimir(documento.iddocumento)}}>\n\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t<Col size=\"12\">\n\t\t\t\t\t\t\t\t\t\t<h3 className=\"text-center\">{dthrcriacao}</h3>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t<Col size=\"4\" className=\"text-center\">\n\t\t\t\t\t\t\t\t\t\t<span>Total documento</span>\n\t\t\t\t\t\t\t\t\t\t<h4>{totaldocumento}</h4>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t<Col size=\"4\" className=\"text-center\">\n\t\t\t\t\t\t\t\t\t\t<span>Qtde de itens</span>\n\t\t\t\t\t\t\t\t\t\t<h4>{totalquantidade}</h4>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t<Col size=\"4\" className=\"text-center\">\n\t\t\t\t\t\t\t\t\t\t<span>CPF/CNPJ</span>\n\t\t\t\t\t\t\t\t\t\t<h4>{cpfcnpj}</h4>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</ListGroup>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport ini from \"ini\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport FormControl from \"../com/FormControl.js\";\nimport Icon from \"../com/Icon.js\";\nimport PainelRapido from \"../com/PainelRapido.js\";\nimport Row from \"../com/Row.js\";\nimport VendaAplicarAcrescimo from \"../com/VendaAplicarAcrescimo.js\";\nimport VendaAplicarDesconto from \"../com/VendaAplicarDesconto.js\";\nimport VendaCancelarCupom from  \"../com/VendaCancelarCupom.js\";\nimport VendaDetalhe from \"../com/VendaDetalhe.js\";\nimport VendaEditarProduto from \"../com/VendaEditarProduto.js\";\nimport VendaFinalizacao from \"../com/VendaFinalizacao.js\";\nimport VendaFinalizacaoOrcamento from \"../com/VendaFinalizacaoOrcamento.js\";\nimport VendaReimprimirCupom from \"../com/VendaReimprimirCupom.js\";\n\nimport Printer from \"../com/Printer.js\";\nimport SAT from \"../com/SAT.js\";\n\nimport \"../def/prototype.js\";\nimport {\n\tdefaultMessageBoxError, temporaryDirectory, validarCPF,\n\tvalidarCNPJ, valorParametro, writeTemporary\n} from \"../def/function.js\";\n\nimport \"../css/Venda.css\";\n\nconst fs = window.require(\"fs\");\n\nexport default class Venda extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tlet documentoproduto = this.criarObjetoDocumentoProduto();\n\n\t\tthis.state = {\n\t\t\tdocumentoproduto: documentoproduto, // Produto atual que esta sendo editado\n\t\t\tlistaDocumentoProduto: [], // Lista de produtos que compoe a venda\n\t\t\tlistaDocumentoPagamento: [], // Lista de pagamentos que compoe a venda\n\t\t\toperacao: \"CU\", // Operacao (CU: Cupom, OR: Orcamento)\n\t\t\tcpfcnpj: null, // CPF/CNPJ do cliente\n\t\t\tnomeorcamento: null, // Nome do cliente\n\t\t\tiddocumentoorcamento: null, // ID do orcamento de origem\n\t\t\tpesquisa: \"\", // Conteudo da pesquisa\n\t\t\tpesquisaEfetiva: \"\", // O real termo sendo pesquisado\n\t\t\tshowEditarProduto: false, // Se deve exibir o modal da edicao de produtos\n\t\t\tshowVendaAplicarDesconto: false, // Se deve exibir o modal da aplicacao de desconto\n\t\t\tshowVendaAplicarAcrescimo: false, // Se deve exibir o modal da aplicacao de acrescimo\n\t\t\tshowVendaCancelarCupom: false, // Se deve exibir o modal de cancelamento de cupom\n\t\t\tshowVendaFinalizacao: false, // Se deve exibir o modal da finalizacao de venda\n\t\t\tshowVendaFinalizacaoOrcamento: false, // Se deve exibir o modal da finalizacao de orcamento\n\t\t\tshowVendaReimprimirCupom: false // Se deve exibir o modal de reimpressao de cupom\n\t\t};\n\n\t\tthis.abrirFinalizacao = this.abrirFinalizacao.bind(this);\n\t\tthis.aplicarAcrescimo = this.aplicarAcrescimo.bind(this);\n\t\tthis.aplicarDesconto = this.aplicarDesconto.bind(this);\n\t\tthis.atualizarDocumentoProduto = this.atualizarDocumentoProduto.bind(this);\n\t\tthis.aumentarQuantidade = this.aumentarQuantidade.bind(this);\n\t\tthis.cancelarUltimaVenda = this.cancelarUltimaVenda.bind(this);\n\t\tthis.cancelarVendaAtual = this.cancelarVendaAtual.bind(this);\n\t\tthis.carregarOrcamento = this.carregarOrcamento.bind(this);\n\t\tthis.carregarTemporario = this.carregarTemporario.bind(this);\n\t\tthis.diminuirQuantidade = this.diminuirQuantidade.bind(this);\n\t\tthis.editarProduto = this.editarProduto.bind(this);\n\t\tthis.finalizarDocumento = this.finalizarDocumento.bind(this);\n\t\tthis.finalizarOrcamento = this.finalizarOrcamento.bind(this);\n\t\tthis.finalizarVenda = this.finalizarVenda.bind(this);\n\t\tthis.gravarTemporario = this.gravarTemporario.bind(this);\n\t\tthis.incluirDezPorcento = this.incluirDezPorcento.bind(this);\n\t\tthis.incluirProduto = this.incluirProduto.bind(this);\n\t\tthis.informarCPF = this.informarCPF.bind(this);\n\t\tthis.onChangePesquisa = this.onChangePesquisa.bind(this);\n\t\tthis.onClickBuscar = this.onClickBuscar.bind(this);\n\t\tthis.onKeyUpPesquisa = this.onKeyUpPesquisa.bind(this);\n\t\tthis.pesquisaLimpar = this.pesquisaLimpar.bind(this);\n\t\tthis.reimprimirCupom = this.reimprimirCupom.bind(this);\n\t\tthis.reiniciar = this.reiniciar.bind(this);\n\t\tthis.removerProduto = this.removerProduto.bind(this);\n\t\tthis.trocarOperacao = this.trocarOperacao.bind(this);\n\n\t\tthis.Pool = new Pool();\n\n\t\tthis.temporaryFileName = \"venda.tmp\";\n\t}\n\n\tabrirFinalizacao(){\n\t\tswitch(this.state.operacao){\n\t\t\tcase \"CU\":\n\t\t\t\tthis.setState({\n\t\t\t\t\tshowVendaFinalizacao: true\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"OR\":\n\t\t\t\tthis.setState({\n\t\t\t\t\tshowVendaFinalizacaoOrcamento: true\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\taplicarAcrescimo(totalbruto, totalacrescimo){\n\t\tif(isNaN(totalbruto) || isNaN(totalacrescimo)){\n\t\t\tthis.setState({\n\t\t\t\tshowVendaAplicarAcrescimo: true\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\n\t\tlistaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\tlet totalproduto = documentoproduto.preco * documentoproduto.quantidade;\n\t\t\tlet acrescimoproduto  = totalacrescimo * (totalproduto / totalbruto);\n\t\t\tlet acrescimounitario = acrescimoproduto / documentoproduto.quantidade;\n\t\t\tdocumentoproduto.acrescimounitario = acrescimounitario;\n\t\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\t});\n\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto,\n\t\t\tshowVendaAplicarAcrescimo: false\n\t\t});\n\t}\n\n\taplicarDesconto(totalbruto, totaldesconto){\n\t\tif(isNaN(totalbruto) || isNaN(totaldesconto)){\n\t\t\tthis.setState({\n\t\t\t\tshowVendaAplicarDesconto: true\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\n\t\tlistaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\tlet totalproduto = documentoproduto.preco * documentoproduto.quantidade;\n\t\t\tlet descontoproduto = Math.round(totaldesconto * (totalproduto / totalbruto) * 100) / 100;\n\t\t\tlet descontounitario = Math.round(descontoproduto / documentoproduto.quantidade * 100) / 100;\n\t\t\tdocumentoproduto.descontounitario = descontounitario;\n\t\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\t});\n\n\t\tlet calcularDiferenca = () => {\n\t\t\tlet t_descontoproduto = 0;\n\t\t\tlistaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\t\tt_descontoproduto += documentoproduto.descontounitario * documentoproduto.quantidade;\n\t\t\t});\n\t\t\tlet diferenca = totaldesconto - t_descontoproduto;\n\t\t\tdiferenca = Math.round(diferenca * 100) / 100;\n\t\t\treturn diferenca;\n\t\t};\n\n\t\tlet i = 0;\n\t\tlet diferenca = calcularDiferenca();\n\t\twhile(diferenca !== 0 && i++ < 20){\n\t\t\tlet index = Math.round(Math.random() * (listaDocumentoProduto.length - 1));\n\t\t\tlet documentoproduto = listaDocumentoProduto[index];\n\t\t\tlet descontounitario = documentoproduto.descontounitario;\n\t\t\tlet descontoproduto = (descontounitario * documentoproduto.quantidade) + diferenca;\n\t\t\tdescontounitario = Math.round(descontoproduto / documentoproduto.quantidade * 100) / 100;\n\t\t\tdocumentoproduto.descontounitario = descontounitario;\n\t\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\t\tdiferenca = calcularDiferenca();\n\t\t}\n\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto,\n\t\t\tshowVendaAplicarDesconto: false\n\t\t});\n\t}\n\n\tatualizarDocumentoProduto(documentoproduto){\n\t\tlet i = documentoproduto.i;\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\t\tlistaDocumentoProduto[i] = documentoproduto;\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto\n\t\t});\n\t}\n\n\taumentarQuantidade(documentoproduto){\n\t\tlet i = documentoproduto.i;\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\t\tdocumentoproduto = listaDocumentoProduto[i];\n\t\tdocumentoproduto.quantidade++;\n\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\tlistaDocumentoProduto[i] = documentoproduto;\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto\n\t\t});\n\t}\n\n\tcalcularDocumentoProduto(documentoproduto){\n\t\tdocumentoproduto.totaldesconto = documentoproduto.descontounitario * documentoproduto.quantidade;\n\t\tdocumentoproduto.totalacrescimo = documentoproduto.acrescimounitario * documentoproduto.quantidade;\n\t\tdocumentoproduto.totalproduto = (documentoproduto.preco * documentoproduto.quantidade) - documentoproduto.totaldesconto + documentoproduto.totalacrescimo;\n\t}\n\n\tcancelarUltimaVenda(){\n\t\tthis.setState({\n\t\t\tshowVendaCancelarCupom: true\n\t\t});\n\t}\n\n\tcancelarVendaAtual(){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Cancelamento de venda\",\n\t\t\ttext: \"Tem certeza que deseja cancelar a venda atual?\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tcpfcnpj: null,\n\t\t\t\t\t\t\tlistaDocumentoProduto: [],\n\t\t\t\t\t\t\tlistaDocumentoPagamento: []\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Não\",\n\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tasync carregarOrcamento(iddocumento){\n\t\ttry{\n\t\t\twindow.Loading.show();\n\n\t\t\tlet queryDocumento = \"SELECT iddocumento, cpfcnpj, nomeorcamento FROM documento WHERE operacao = $1 AND iddocumento = $2\";\n\t\t\tlet resDocumento = await this.Pool.query(queryDocumento, [\"OR\", iddocumento]);\n\t\t\tif(resDocumento.rows.length === 0){\n\t\t\t\tthrow new Error(\"Orçamento de número <b>\" + iddocumento + \"</b> não pôde ser encontrado.\");\n\t\t\t}\n\t\t\tlet documento = resDocumento.rows[0];\n\n\t\t\tlet listaDocumentoProduto = [];\n\t\t\tlet queryDocumentoProduto = \"SELECT * FROM documentoproduto WHERE iddocumento = $1\";\n\t\t\tlet resDocumentoProduto = await this.Pool.query(queryDocumentoProduto, [documento.iddocumento]);\n\t\t\tfor(let row of resDocumentoProduto.rows){\n\t\t\t\tlistaDocumentoProduto.push(this.criarObjetoDocumentoProduto({\n\t\t\t\t\tidproduto: row.idproduto,\n\t\t\t\t\tdescricao: row.descricao,\n\t\t\t\t\tunidade: row.unidade,\n\t\t\t\t\tprecisao: row.precisao,\n\t\t\t\t\tprecovariavel: row.precovariavel,\n\t\t\t\t\tquantidade: row.quantidade,\n\t\t\t\t\tpreco: row.preco,\n\t\t\t\t\tdescontounitario: row.descontounitario,\n\t\t\t\t\ttotaldesconto: row.totaldesconto,\n\t\t\t\t\tacrescimounitario: row.acrescimounitario,\n\t\t\t\t\ttotalacrescimo: row.totalacrescimo,\n\t\t\t\t\ttotalproduto: row.totalproduto\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\toperacao: \"CU\",\n\t\t\t\tcpfcnpj: documento.cpfcnpj,\n\t\t\t\tnomeorcamento: documento.nomeorcamento,\n\t\t\t\tlistaDocumentoProduto: listaDocumentoProduto,\n\t\t\t\tiddocumentoorcamento: iddocumento\n\t\t\t});\n\t\t}catch(err){\n\t\t\tdefaultMessageBoxError(err);\n\t\t}finally{\n\t\t\twindow.Loading.hide();\n\t\t}\n\t}\n\n\tasync carregarTemporario(){\n\t\tlet filename = temporaryDirectory() + \"/\" + this.temporaryFileName;\n\t\tif(fs.existsSync(filename)){\n\t\t\tlet content = fs.readFileSync(filename);\n\t\t\tlet state = JSON.parse(content);\n\t\t\tif(typeof state === \"object\"){\n\t\t\t\tthis.setState(state);\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\t\tif(this.props.match.params.id){\n\t\t\tthis.carregarOrcamento(this.props.match.params.id);\n\t\t}else{\n\t\t\tthis.carregarTemporario();\n\t\t}\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.Pool.end();\n\t}\n\n\tcomponentWillUpdate(nextProps, nextState){\n\t\tthis.gravarTemporario(nextState);\n\t}\n\n\tcriarObjetoDocumentoProduto(documentoproduto){\n\t\treturn $.extend({\n\t\t\t\"idproduto\": null,\n\t\t\t\"descricao\": null,\n\t\t\t\"unidade\": \"Unidade\",\n\t\t\t\"precisao\": 0,\n\t\t\t\"precovariavel\": \"N\",\n\t\t\t\"quantidade\": 0,\n\t\t\t\"preco\": 0,\n\t\t\t\"descontounitario\": 0,\n\t\t\t\"totaldesconto\": 0,\n\t\t\t\"acrescimounitario\": 0,\n\t\t\t\"totalacrescimo\": 0,\n\t\t\t\"totalproduto\": 0\n\t\t}, documentoproduto);\n\t}\n\n\tdiminuirQuantidade(documentoproduto){\n\t\tlet i = documentoproduto.i;\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\t\tdocumentoproduto = listaDocumentoProduto[i];\n\t\tif(documentoproduto.quantidade - 1 <= 0){\n\t\t\treturn true;\n\t\t}\n\t\tdocumentoproduto.quantidade--;\n\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\tlistaDocumentoProduto[i] = documentoproduto;\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto\n\t\t});\n\t}\n\n\teditarProduto(documentoproduto){\n\t\tthis.setState({\n\t\t\tdocumentoproduto: documentoproduto,\n\t\t\tshowEditarProduto: true\n\t\t});\n\t}\n\n\tasync finalizarDocumento(){\n\t\twindow.Loading.show();\n\n\t\t// Abre um client com o banco para fazer transacao\n\t\tconst client = await this.Pool.connect();\n\t\ttry{\n\t\t\t// Inicia a transacao\n\t\t\tawait client.query(\"BEGIN\");\n\n\t\t\t// Ajusta o TimeZone no banco dados\n\t\t\t//await client.query(\"SET timezone = 'America/Sao_Paulo'\");\n\n\t\t\t// Cria o documento\n\t\t\tlet sqlInsertDocumento = [\n\t\t\t\t\"INSERT INTO documento (operacao, modelo, cpfcnpj, nomeorcamento, totaltroco)\",\n\t\t\t\t\"VALUES ($1, $2, $3, $4, $5)\",\n\t\t\t\t\"RETURNING iddocumento\"\n\t\t\t].join(\" \");\n\t\t\tlet resDocumento = await client.query(sqlInsertDocumento, [\n\t\t\t\tthis.state.operacao, \"65\", this.state.cpfcnpj,\n\t\t\t\tthis.state.nomeorcamento, this.state.totaltroco\n\t\t\t]);\n\n\t\t\t// Captura o id do documento gravado\n\t\t\tlet iddocumento = resDocumento.rows[0].iddocumento;\n\n\t\t\t// Captura todos os codigos de produtos\n\t\t\tlet listaIdProduto = [];\n\t\t\tfor(let documentoproduto of this.state.listaDocumentoProduto){\n\t\t\t\tlistaIdProduto.push(documentoproduto.idproduto);\n\t\t\t}\n\n\t\t\t// Carrega as informacoes necessarias para incluir o produto\n\t\t\tlet queryProduto = [\n\t\t\t\t\"SELECT produto.idproduto, ncm.codigoncm, produto.origem,\",\n\t\t\t\t\"  produto.csosn, produto.aliqicms, produto.cstpis, produto.aliqpis,\",\n\t\t\t\t\"  produto.cstcofins, produto.aliqcofins, produto.codcontribsocial,\",\n\t\t\t\t\"  produto.cest, produto.cfop\",\n\t\t\t\t\"FROM produto\",\n\t\t\t\t\"LEFT JOIN ncm USING (idncm)\",\n\t\t\t\t\"WHERE idproduto IN (\" + listaIdProduto.join(\", \") + \")\"\n\t\t\t].join(\" \");\n\n\t\t\tlet resProduto = await client.query(queryProduto);\n\n\t\t\t// Organiza os produtos carregados\n\t\t\tlet listaProdutos = {};\n\t\t\tfor(let row of resProduto.rows){\n\t\t\t\tlet idproduto = row.idproduto;\n\t\t\t\tdelete row.idproduto;\n\t\t\t\tlistaProdutos[idproduto] = row;\n\t\t\t}\n\n\t\t\t// Percorre os itens da venda\n\t\t\tlet sequencial = 1;\n\t\t\tfor(let documentoproduto of this.state.listaDocumentoProduto){\n\t\t\t\tlet produto = listaProdutos[documentoproduto.idproduto];\n\n\t\t\t\tlet sqlInsertDocumentoProduto = [\n\t\t\t\t\t\"INSERT INTO documentoproduto (\",\n\t\t\t\t\t\"  iddocumento, sequencial, idproduto,\",\n\t\t\t\t\t\"  descricao, preco, quantidade,\",\n\t\t\t\t\t\"  descontounitario, acrescimounitario, codigoncm,\",\n\t\t\t\t\t\"  origem, csosn, aliqicms,\",\n\t\t\t\t\t\"  cstpis, aliqpis, cstcofins,\",\n\t\t\t\t\t\"  aliqcofins, codcontribsocial, cest,\",\n\t\t\t\t\t\"  cfop\",\n\t\t\t\t\t\") VALUES (\",\n\t\t\t\t\t\"  $1, $2, $3,\",\n\t\t\t\t\t\"  $4, $5, $6,\",\n\t\t\t\t\t\"  $7, $8, $9,\",\n\t\t\t\t\t\"  $10, $11, $12,\",\n\t\t\t\t\t\"  $13, $14, $15,\",\n\t\t\t\t\t\"  $16, $17, $18,\",\n\t\t\t\t\t\"  $19\",\n\t\t\t\t\t\")\"\n\t\t\t\t].join(\" \");\n\n\t\t\t\tawait client.query(sqlInsertDocumentoProduto, [\n\t\t\t\t\tiddocumento, sequencial++, documentoproduto.idproduto,\n\t\t\t\t\tdocumentoproduto.descricao, documentoproduto.preco, documentoproduto.quantidade,\n\t\t\t\t\tdocumentoproduto.descontounitario, documentoproduto.acrescimounitario, produto.codigoncm,\n\t\t\t\t\tproduto.origem, produto.csosn, produto.aliqicms,\n\t\t\t\t\tproduto.cstpis, produto.aliqpis, produto.cstcofins,\n\t\t\t\t\tproduto.aliqcofins, produto.codcontribsocial, produto.cest,\n\t\t\t\t\tproduto.cfop\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\t// Verifica se eh cupom\n\t\t\tif(this.state.operacao === \"CU\"){\n\t\t\t\tlet listaDocumentoPagamento = this.state.listaDocumentoPagamento;\n\n\t\t\t\t// Verifica se existe troco, e se caso sim, abate o valor da ultima finalizadora informada\n\t\t\t\tif(this.state.totaltroco > 0){\n\t\t\t\t\tlet i = listaDocumentoPagamento.length - 1;\n\t\t\t\t\tlistaDocumentoPagamento[i].totalpagamento -= this.state.totaltroco;\n\t\t\t\t}\n\n\t\t\t\t// Grava os pagamentos\n\t\t\t\tfor(let documentopagamento of listaDocumentoPagamento){\n\t\t\t\t\tlet sqlInsertDocumentoPagamento = [\n\t\t\t\t\t\t\"INSERT INTO documentopagamento (iddocumento, idformapagamento, totalpagamento)\",\n\t\t\t\t\t\t\"VALUES ($1, $2, $3)\"\n\t\t\t\t\t].join(\" \");\n\n\t\t\t\t\tawait client.query(sqlInsertDocumentoPagamento, [\n\t\t\t\t\t\tiddocumento, documentopagamento.idformapagamento, documentopagamento.totalpagamento\n\t\t\t\t\t]);\n\t\t\t\t}\n\n\t\t\t\t// Transmite o documento atraves do SAT\n\t\t\t\tlet sat = new SAT(client);\n\t\t\t\tlet retorno = await sat.transmitirDocumento(iddocumento);\n\t\t\t\tif(retorno === false){\n\t\t\t\t\tthrow new Error(sat.error);\n\t\t\t\t}\n\n\t\t\t\t// Atualiza os dados do documento fiscal\n\t\t\t\tawait client.query(\"UPDATE documento SET xml = $1, chave = $2, numero = $3 WHERE iddocumento = $4\", [retorno.xml, retorno.chave, retorno.numero, iddocumento]);\n\t\t\t}\n\n\t\t\t// Apaga o orcamento origem se houver\n\t\t\tif(this.state.iddocumentoorcamento){\n\t\t\t\tawait client.query(\"DELETE FROM documento WHERE iddocumento = $1\", [this.state.iddocumentoorcamento]);\n\t\t\t}\n\n\t\t\t// Confirma a transacao do banco de dados\n\t\t\tawait client.query(\"COMMIT\");\n\n\t\t\t// Mensagem de sucesso\n\t\t\tif(this.state.totaltroco > 0){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttext: \"<div class='text-center'><h5>Venda finalizada com sucesso!</h5><h3>Total de troco</h3><h1><small>R$</small>\" + this.state.totaltroco.format(2, \",\", \".\") + \"</h1></div>\"\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tswitch(this.state.operacao){\n\t\t\t\t\tcase \"CU\":\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twindow.FastMessage.show(\"Venda finalizada com sucesso!\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"OR\":\n\t\t\t\t\t\twindow.FastMessage.show(\"Orçamento finalizado com sucesso!\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Imprime o documento\n\t\t\tlet numeroVias = ini.parse(await valorParametro(this.Pool, \"IMPRESSORA\", \"NUMEROVIAS\"));\n\t\t\tnumeroVias = (this.state.operacao === \"OR\" ? numeroVias.orcamento : numeroVias.venda);\n\n\t\t\tif(await valorParametro(this.Pool, \"IMPRESSORA\", \"CONFIRMACAO\") === \"S\"){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Imprimir cupom\",\n\t\t\t\t\ttext: \"Deseja imprimir o cupom da venda realizada?\",\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t\tfor(let i = 1; i <= numeroVias; i++){\n\t\t\t\t\t\t\t\t\tlet printer = new Printer(this.Pool);\n\t\t\t\t\t\t\t\t\tawait printer.imprimirDocumento(iddocumento);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: \"Não\",\n\t\t\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tfor(let i = 1; i <= numeroVias; i++){\n\t\t\t\t\tlet printer = new Printer(this.Pool);\n\t\t\t\t\tawait printer.imprimirDocumento(iddocumento);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Prepara a tela para uma nova venda\n\t\t\tthis.reiniciar();\n\t\t}catch(err){\n\t\t\tawait client.query(\"ROLLBACK\");\n\t\t\tdefaultMessageBoxError(err);\n\t\t}finally{\n\t\t\tclient.release();\n\t\t\twindow.Loading.hide();\n\t\t}\n\t}\n\n\tfinalizarOrcamento(nomeorcamento, cpfcnpj){\n\t\tthis.setState({\n\t\t\tnomeorcamento: nomeorcamento,\n\t\t\tcpfcnpj: cpfcnpj,\n\t\t\tlistaDocumentoPagamento: [],\n\t\t\ttotaltroco: 0,\n\t\t\tshowVendaFinalizacaoOrcamento: false\n\t\t}, () => {\n\t\t\tthis.finalizarDocumento();\n\t\t});\n\t}\n\n\tfinalizarVenda(documentopagamentos, totaltroco){\n\t\tthis.setState({\n\t\t\tlistaDocumentoPagamento: documentopagamentos,\n\t\t\ttotaltroco: totaltroco,\n\t\t}, () => {\n\t\t\tthis.finalizarDocumento();\n\t\t});\n\t}\n\n\tasync gravarTemporario(state){\n\t\tstate = (state === undefined ? this.state : state);\n\t\twriteTemporary(this.temporaryFileName, JSON.stringify(state));\n\t}\n\n\tincluirDezPorcento(){\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\n\t\tlistaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\tdocumentoproduto.acrescimounitario = documentoproduto.preco * 0.1;\n\t\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\t});\n\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto\n\t\t});\n\t}\n\n\tincluirProduto(produto, event, totalproduto){\n\t\tproduto = Object.assign({}, produto);\n\n\t\tlet informarPeso = (produto) => {\n\t\t\twindow.InformarValor.show({\n\t\t\t\ttitle: \"Quantidade em \" + produto.unidade.toLowerCase() + \"s\",\n\t\t\t\tdecimal: produto.precisao,\n\t\t\t\tsuccess: (valor) => {\n\t\t\t\t\tproduto.quantidade = valor.toFloat();\n\t\t\t\t\tthis.incluirProdutoDefinitivo(produto);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tif(produto.precovariavel === \"S\"){\n\t\t\twindow.InformarValor.show({\n\t\t\t\ttitle: \"Preço do produto\",\n\t\t\t\tmoney: true,\n\t\t\t\tdecimal: 2,\n\t\t\t\tsuccess: (valor) => {\n\t\t\t\t\tproduto.preco = valor.toFloat();\n\t\t\t\t\tif(produto.precisao > 0 && !totalproduto){\n\t\t\t\t\t\tinformarPeso(produto);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.incluirProdutoDefinitivo(produto, totalproduto);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}else if(produto.precisao > 0 && !totalproduto){\n\t\t\tinformarPeso(produto);\n\t\t}else{\n\t\t\tthis.incluirProdutoDefinitivo(produto, totalproduto);\n\t\t}\n\t}\n\n\tincluirProdutoDefinitivo(produto, totalproduto){\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\n\t\tif(totalproduto){\n\t\t\tproduto.quantidade = totalproduto / produto.preco;\n\t\t}else if(!produto.quantidade){\n\t\t\tproduto.quantidade = 1;\n\t\t}\n\n\t\tlet documentoproduto = this.criarObjetoDocumentoProduto({\n\t\t\tidproduto: produto.idproduto,\n\t\t\tdescricao: produto.descricao,\n\t\t\tunidade: produto.unidade,\n\t\t\tprecisao: produto.precisao,\n\t\t\tprecovariavel: produto.precovariavel,\n\t\t\tquantidade: produto.quantidade,\n\t\t\tpreco: produto.preco\n\t\t});\n\n\t\tthis.calcularDocumentoProduto(documentoproduto);\n\n\t\tlet found = false;\n\t\tlistaDocumentoProduto.forEach((documentoproduto2) => {\n\t\t\tif(found){\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet documentoprodutoComp1 = Object.assign({}, documentoproduto);\n\t\t\tlet documentoprodutoComp2 = Object.assign({}, documentoproduto2);\n\n\t\t\tdelete documentoprodutoComp1.quantidade;\n\t\t\tdelete documentoprodutoComp2.quantidade;\n\t\t\tdelete documentoprodutoComp1.totalproduto;\n\t\t\tdelete documentoprodutoComp2.totalproduto;\n\t\t\tdelete documentoprodutoComp2.i;\n\n\t\t\tif(JSON.stringify(documentoprodutoComp1) === JSON.stringify(documentoprodutoComp2)){\n\t\t\t\tdocumentoproduto2.quantidade += documentoproduto.quantidade;\n\t\t\t\tthis.calcularDocumentoProduto(documentoproduto2);\n\t\t\t\tfound = true;\n\t\t\t}\n\t\t});\n\n\t\tif(parseFloat(documentoproduto.preco) === 0){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Produto sem preço\",\n\t\t\t\ttext: \"O preço do produto precisa ser maior que zero.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif(!found){\n\t\t\tlistaDocumentoProduto.push(documentoproduto);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto,\n\t\t\tpesquisa: \"\",\n\t\t\tpesquisaEfetiva: \"\"\n\t\t});\n\t}\n\n\tinformarCPF(){\n\t\twindow.InformarValor.show({\n\t\t\ttitle: \"Informe o CPF ou CNPJ\",\n\t\t\tmask: \"99999999999999\",\n\t\t\tsuccess: (valor) => {\n\t\t\t\tlet cpfcnpj = null;\n\t\t\t\tif(valor.length === 11 && validarCPF(valor)){\n\t\t\t\t\tcpfcnpj = valor.substr(0, 3) + \".\" + valor.substr(3, 3) + \".\" + valor.substr(6, 3) + \"-\" + valor.substr(9, 2);\n\t\t\t\t}else if(valor.length === 14 && validarCNPJ(valor)){\n\t\t\t\t\tcpfcnpj = valor.substr(0, 2) + \".\" + valor.substr(2, 3) + \".\" + valor.substr(5, 3) + \"/\" + valor.substr(8, 4) + \"-\" + valor.substr(12, 2);\n\t\t\t\t}else if(valor.length > 0){\n\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\ttitle: \"CPF ou CNPJ inválido\",\n\t\t\t\t\t\ttext: \"O CPF ou CNPJ informado é inválido.<br>Por favor, digite novamente.\",\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: \"Ok\",\n\t\t\t\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\t\t\t\tcolor: \"blue\",\n\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t\t\tthis.informarCPF();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tcpfcnpj: cpfcnpj\n\t\t\t\t});\n\t\t\t},\n\t\t\tfail: () => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcpfcnpj: null\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tonChangePesquisa(event){\n\t\tthis.setState({\n\t\t\tpesquisa: event.target.value\n\t\t});\n\t}\n\n\tonClickBuscar(){\n\t\tthis.setState({\n\t\t\tpesquisaEfetiva: this.state.pesquisa\n\t\t});\n\t}\n\n\tonKeyUpPesquisa(event){\n\t\tif(event.keyCode === 13){\n\t\t\tthis.onClickBuscar();\n\t\t}\n\t}\n\n\tpesquisaLimpar(){\n\t\tthis.setState({\n\t\t\tpesquisa: \"\",\n\t\t\tpesquisaEfetiva: \"\"\n\t\t});\n\t}\n\n\treimprimirCupom(){\n\t\tthis.setState({\n\t\t\tshowVendaReimprimirCupom: true\n\t\t});\n\t}\n\n\treiniciar(){\n\t\tlet documentoproduto = this.criarObjetoDocumentoProduto();\n\n\t\tthis.setState({\n\t\t\tdocumentoproduto: documentoproduto,\n\t\t\tlistaDocumentoProduto: [],\n\t\t\tlistaDocumentoPagamento: [],\n\t\t\t//operacao: \"CU\",\n\t\t\tcpfcnpj: null,\n\t\t\tnomeorcamento: null,\n\t\t\tiddocumentoorcamento: null,\n\t\t\tpesquisa: \"\",\n\t\t\tpesquisaEfetiva: \"\",\n\t\t\tshowEditarProduto: false,\n\t\t\tshowVendaFinalizacao: false,\n\t\t\tshowVendaFinalizacaoOrcamento: false,\n\t\t\tshowVendaAplicarDesconto: false,\n\t\t\tshowVendaAplicarAcrescimo: false\n\t\t});\n\t}\n\n\tremoverProduto(documentoproduto){\n\t\tlet totalproduto = \"R$ \" + documentoproduto.totalproduto.format(2, \",\", \".\");\n\n\t\twindow.MessageBox.show({\n\t\t\ttext: \"Tem certeza que deseja remover o produto?<br><br>\" + documentoproduto.descricao + \"<span class='float-right'>\" + totalproduto + \"</span>\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\t\t\t\t\t\tlistaDocumentoProduto.splice(documentoproduto.i, 1);\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tlistaDocumentoProduto: listaDocumentoProduto\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Não\",\n\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\ttrocarOperacao(operacao){\n\t\tthis.setState({\n\t\t\toperacao: operacao\n\t\t});\n\t}\n\n\trender(){\n\t\tlet totalbruto = 0;\n\t\tlet totaldesconto = 0;\n\t\tlet totaldocumento = 0;\n\t\tthis.state.listaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\ttotalbruto += parseFloat(documentoproduto.preco * documentoproduto.quantidade);\n\t\t\ttotaldesconto += parseFloat(documentoproduto.totaldesconto);\n\t\t\ttotaldocumento += parseFloat(documentoproduto.totalproduto);\n\t\t});\n\n\t\tlet contentClassName = \"operacao-\" + this.state.operacao;\n\n\t\treturn (\n\t\t\t<Content className={contentClassName}>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"7\">\n\t\t\t\t\t\t<Row className=\"mb-4 mt-4\">\n\t\t\t\t\t\t\t<Col size=\"9\">\n\t\t\t\t\t\t\t\t<FormControl type=\"search\" id=\"pesquisa\" value={this.state.pesquisa} placeholder=\"Pesquise um produto...\" onKeyUp={this.onKeyUpPesquisa} onChange={this.onChangePesquisa} />\n\t\t\t\t\t\t\t\t<Icon name=\"cross\" id=\"pesquisa-limpar\" onClick={this.pesquisaLimpar} className={this.state.pesquisa.length > 0 ? null : \"d-none\"} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"3\" className=\"pl-0\">\n\t\t\t\t\t\t\t\t<Button text=\"Buscar\" icon=\"search\" color=\"green\" block={true} onClick={this.onClickBuscar} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<PainelRapido\n\t\t\t\t\t\t\tPool={this.Pool}\n\t\t\t\t\t\t\tpesquisa={this.state.pesquisaEfetiva}\n\t\t\t\t\t\t\tonSelectProduto={this.incluirProduto}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"5\" className=\"pr-0\">\n\t\t\t\t\t\t<VendaDetalhe\n\t\t\t\t\t\t\tabrirFinalizacao={this.abrirFinalizacao}\n\t\t\t\t\t\t\taumentarQuantidade={this.aumentarQuantidade}\n\t\t\t\t\t\t\tcancelarUltimaVenda={this.cancelarUltimaVenda}\n\t\t\t\t\t\t\tcancelarVendaAtual={this.cancelarVendaAtual}\n\t\t\t\t\t\t\tcarregarOrcamento={this.carregarOrcamento}\n\t\t\t\t\t\t\treimprimirCupom={this.reimprimirCupom}\n\t\t\t\t\t\t\tcpfcnpj={this.state.cpfcnpj}\n\t\t\t\t\t\t\tdiminuirQuantidade={this.diminuirQuantidade}\n\t\t\t\t\t\t\teditarProduto={this.editarProduto}\n\t\t\t\t\t\t\tinformarCPF={this.informarCPF}\n\t\t\t\t\t\t\tlistaDocumentoProduto={this.state.listaDocumentoProduto}\n\t\t\t\t\t\t\toperacao={this.state.operacao}\n\t\t\t\t\t\t\tremoverProduto={this.removerProduto}\n\t\t\t\t\t\t\ttrocarOperacao={this.trocarOperacao}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<VendaEditarProduto\n\t\t\t\t\tshow={this.state.showEditarProduto}\n\t\t\t\t\tdocumentoproduto={this.state.documentoproduto}\n\t\t\t\t\tatualizarDocumentoProduto={this.atualizarDocumentoProduto}\n\t\t\t\t\tbeforeClose={() => {this.setState({showEditarProduto: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaFinalizacao\n\t\t\t\t\tPool={this.Pool}\n\t\t\t\t\tshow={this.state.showVendaFinalizacao}\n\t\t\t\t\ttotaldocumento={totaldocumento}\n\t\t\t\t\taplicarAcrescimo={this.aplicarAcrescimo}\n\t\t\t\t\taplicarDesconto={this.aplicarDesconto}\n\t\t\t\t\tincluirDezPorcento={this.incluirDezPorcento}\n\t\t\t\t\tfinalizarVenda={this.finalizarVenda}\n\t\t\t\t\tlistaDocumentoPagamento={this.state.listaDocumentoPagamento}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaFinalizacao: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaFinalizacaoOrcamento\n\t\t\t\t\tnomeorcamento={this.state.nomeorcamento}\n\t\t\t\t\tcpfcnpj={this.state.cpfcnpj}\n\t\t\t\t\tfinalizarOrcamento={this.finalizarOrcamento}\n\t\t\t\t\tshow={this.state.showVendaFinalizacaoOrcamento}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaFinalizacaoOrcamento: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaAplicarDesconto\n\t\t\t\t\ttotalbruto={totalbruto}\n\t\t\t\t\tshow={this.state.showVendaAplicarDesconto}\n\t\t\t\t\taplicarDesconto={this.aplicarDesconto}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaAplicarDesconto: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaAplicarAcrescimo\n\t\t\t\t\ttotalbruto={totalbruto}\n\t\t\t\t\ttotaldesconto={totaldesconto}\n\t\t\t\t\tshow={this.state.showVendaAplicarAcrescimo}\n\t\t\t\t\taplicarAcrescimo={this.aplicarAcrescimo}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaAplicarAcrescimo: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaCancelarCupom\n\t\t\t\t\tPool={this.Pool}\n\t\t\t\t\tshow={this.state.showVendaCancelarCupom}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaCancelarCupom: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaReimprimirCupom\n\t\t\t\t\tPool={this.Pool}\n\t\t\t\t\tshow={this.state.showVendaReimprimirCupom}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaReimprimirCupom: false})}}\n\t\t\t\t/>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import {currentTimestamp} from \"../def/function.js\";\n\nexport default class Processo {\n\tconstructor(Pool, referencia){\n\t\tthis.Pool = Pool;\n\t\tthis.referencia = referencia;\n\t\tthis.dthrinicial = currentTimestamp();\n\t}\n\n\tasync atualizarProcesso(){\n\t\tlet sql = \"UPDATE processo SET dthrinicial = $2, dthrfinal = $3 WHERE referencia = $1\";\n\t\tlet values = [this.referencia, this.dthrinicial, currentTimestamp()];\n\t\tawait this.Pool.query(sql, values);\n\t}\n\n\tasync verificarIntervalo(){\n\t\tthis.dthrinicial = currentTimestamp();\n\n\t\tlet res = await this.Pool.query(\"SELECT status, dthrinicial, intervalo FROM processo WHERE referencia = $1\", [this.referencia]);\n\t\tlet row = res.rows[0];\n\n\t\tif(row.status !== \"A\"){\n\t\t\treturn false;\n\t\t}\n\t\tif(row.dthrinicial === null){\n\t\t\treturn true;\n\t\t}\n\t\tif(Date.now() >= row.dthrinicial.getTime() + row.intervalo * 60000){\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n}\n","import Processo from \"./Processo.js\";\nimport Servidor from \"./Servidor.js\";\n\nimport { isDev, serialNumber, temporaryDirectory, valorParametro } from \"../def/function.js\";\n\nconst fs = window.require(\"fs\");\nconst os = window.require(\"os\");\nconst ftp = window.require(\"ftp\");\nconst childProcess = window.require(\"child_process\");\n\nexport default class ProcessoAutomatico {\n\n\tconstructor(Pool){\n\t\tthis.Pool = Pool;\n\t\tthis.interval = null;\n\t\tthis.running = false;\n\n\t\twindow.ProcessoAutomatico = this;\n\n\t\tthis.executandoBackup = false;\n\t}\n\n\tasync iniciar(){\n\t\tthis.interval = setInterval(async () => { this.executar() }, 1000 * 60); // Cria o intervalo para executar a cada 1 minuto\n\t\tsetTimeout(async () => { this.executar() }, 1000 * 10); // Executa uma primeira vez 10s depois de iniciar\n\t}\n\n\tpausar(){\n\t\tclearInterval(this.interval);\n\t}\n\n\tasync executar(){\n\t\tif(this.running){\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tthis.running = true;\n\t\t\tawait this.executarRefreshView();\n\t\t\tawait this.executarVerificarDtVerificacao();\n\t\t\tawait this.executarVerificarTerminal();\n\t\t\tif(!isDev()){\n\t\t\t\tawait this.executarBackup();\n\t\t\t}\n\t\t}catch(err){\n\t\t\tthrow err;\n\t\t}finally{\n\t\t\tthis.running = false;\n\t\t}\n\t}\n\n\tasync executarBackup(){\n\t\t// Verifica se ja nao tem backup em execucao\n\t\tif(this.executandoBackup){\n\t\t\treturn;\n\t\t}\n\n\t\t// Carrega e verifica o processo\n\t\tlet processo = new Processo(this.Pool, \"BACKUP\");\n\t\tif(!await processo.verificarIntervalo()){\n\t\t\treturn;\n\t\t}\n\n\t\t// Carrega os modulos\n\t\tif(this.fs === undefined) this.fs = fs;\n\t\tif(this.os === undefined) this.os = os;\n\t\tif(this.ftp === undefined) this.ftp = ftp;\n\t\tif(this.childProcess === undefined) this.childProcess = childProcess;\n\n\t\t// Se macos, nao efetua backup\n\t\tif(this.os.platform() === \"darwin\"){\n\t\t\treturn;\n\t\t}\n\n\t\t// Captura os dados de conexao as FTP\n\t\tlet dadosFTP = null;\n\t\ttry{\n\t\t\tdadosFTP = {\n\t\t\t\thost: await valorParametro(this.Pool, \"BACKUP\", \"HOST\"),\n\t\t\t\tport: await valorParametro(this.Pool, \"BACKUP\", \"PORTA\"),\n\t\t\t\tuser: await valorParametro(this.Pool, \"BACKUP\", \"USUARIO\"),\n\t\t\t\tpassword: await valorParametro(this.Pool, \"BACKUP\", \"SENHA\")\n\t\t\t};\n\t\t}catch(err){\n\t\t\tconsole.log(\"Erro ao efetuar backup: não foi possível carregar os parâmetros do FTP.\");\n\t\t\treturn false;\n\t\t}\n\n\t\t// Define que esta executando backup\n\t\tthis.executandoBackup = true;\n\n\t\t// Define a localizacao do pg_dump\n\t\tlet pgDump = null;\n\t\tswitch(this.os.platform()){\n\t\t\tcase \"win32\":\n\t\t\t\tpgDump = \"C:/Program Files/PostgreSQL/14/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/13/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/12/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/11/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/10/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/9.6/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/9.3/bin/pg_dump.exe\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Define o diretorio de trabalho\n\t\tlet tempDir = temporaryDirectory();\n\n\t\t// Verifica se o diretorio existe\n\t\tif(!this.fs.existsSync(tempDir)){\n\t\t\tthis.fs.mkdirSync(tempDir);\n\t\t}\n\n\t\t// Limpa os backups do diretorio temporario\n\t\tlet files = this.fs.readdirSync(tempDir);\n\t\tfor(let file of files){\n\t\t\tif(file.substr(-7) === \".backup\"){\n\t\t\t\tthis.fs.unlinkSync(tempDir + \"/\" + file);\n\t\t\t}\n\t\t}\n\n\t\t// Executa o backup via pg_dump\n\t\tlet date = new Date();\n\t\tlet currTimeStr = date.getFullYear() + \"-\" + String(date.getMonth() + 1).lpad(2, \"0\") + \"-\" + String(date.getDate()).lpad(2, \"0\") + \"-\" + String(date.getHours()).lpad(2, \"0\") + \"-\" + String(date.getMinutes()).lpad(2, \"0\") + \"-\" + String(date.getSeconds()).lpad(2, \"0\");\n\t\tlet fileName = tempDir + \"/\" + currTimeStr + \".backup\";\n\t\tlet command = \"\\\"\" + pgDump + \"\\\" -F c -b -w -U postgres -f \\\"\" + fileName + \"\\\" satflex\";\n\t\tthis.childProcess.execSync(command);\n\n\t\t// Caputura o numero de serie do terminal\n\t\tif(this.serialNumber === undefined){\n\t\t\tthis.serialNumber = await serialNumber();\n\t\t}\n\n\t\t// Define o arquivo local e remoto\n\t\tlet localFile = fileName;\n\t\tlet remoteFile = \"/\" + this.serialNumber + \"/\" + currTimeStr + \".backup\";\n\n\t\t// Copia o arquivo para o servidor de backup\n\t\tlet client = new this.ftp();\n\t\tclient.on(\"ready\", () => {\n\t\t\tclient.cwd(\"/\", () => {\n\t\t\t\tclient.mkdir(this.serialNumber, true, (err) => {\n\t\t\t\t\tif(err){\n\t\t\t\t\t\tthis.executandoBackup = false;\n\t\t\t\t\t\tthrow err;\n\t\t\t\t\t}\n\t\t\t\t\tclient.put(localFile, remoteFile, false, (err) => {\n\t\t\t\t\t\tif(err) throw err;\n\t\t\t\t\t\tclient.end();\n\t\t\t\t\t\tprocesso.atualizarProcesso();\n\t\t\t\t\t\tthis.executandoBackup = false;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}).connect(dadosFTP);\n\t}\n\n\tasync executarRefreshView(){\n\t\t// Carrega e verifica o processo\n\t\tlet processo = new Processo(this.Pool, \"REFRESH_VIEW\");\n\t\tif(!await processo.verificarIntervalo()){\n\t\t\treturn;\n\t\t}\n\n\t\t// Atualiza as views materializadas\n\t\tlet views = [\"v_vendaprodutodiario\", \"v_vendapagamentodiario\"];\n\t\tfor(let view of views){\n\t\t\tawait this.Pool.query(\"REFRESH MATERIALIZED VIEW \" + view);\n\t\t}\n\n\t\t// Atualiza o processo no banco de dados\n\t\tawait processo.atualizarProcesso();\n\t}\n\n\tasync executarVerificarDtVerificacao(){\n\t\t// Carrega e verifica o processo\n\t\tlet processo = new Processo(this.Pool, \"VERIFICAR_DTVERIFICACAO\");\n\t\tif(!await processo.verificarIntervalo()){\n\t\t\treturn;\n\t\t}\n\n\t\t// Captura as datas para comparacao\n\t\tlet dtverificacao = await valorParametro(this.Pool, \"SISTEMA\", \"DTVERIFICACAO\");\n\t\tlet dtatual = new Date();\n\n\t\t// Verifica se ja passou mais de 10 dias sem comunicar com o servidor\n\t\tif(dtverificacao !== null && dtverificacao.length > 0){\n\t\t\tdtverificacao = new Date(dtverificacao);\n\t\t}else{\n\t\t\tdtverificacao = null;\n\t\t}\n\t\tif(dtverificacao === null || ((dtatual.getTime() - dtverificacao.getTime()) / (1000 * 3600 * 24)) > 10){\n\t\t\t// Atualiza status do sistema para: Bloqueado por falta de comunicacao\n\t\t\tlet sql = \"UPDATE parametro SET valor = $3 WHERE grupo = $1 AND nome = $2\";\n\t\t\tthis.Pool.query(sql, [\"SISTEMA\", \"STATUS\", \"0002\"]);\n\t\t}\n\n\t\t// Atualiza o processo no banco de dados\n\t\tawait processo.atualizarProcesso();\n\t}\n\n\tasync executarVerificarTerminal(){\n\t\t// Carrega e verifica o processo\n\t\tlet processo = new Processo(this.Pool, \"VERIFICAR_TERMINAL\");\n\t\tif(!await processo.verificarIntervalo()){\n\t\t\treturn;\n\t\t}\n\n\t\t// Verifica o terminal no servidor\n\t\tif(!this.servidor) this.servidor = new Servidor(this.Pool);\n\t\tlet status = await this.servidor.verificarTerminal();\n\t\tif(status === false){\n\t\t\tconsole.log(\"Houve uma falha ao verificar o terminal no servidor.\");\n\t\t}else{\n\t\t\t// Atualiza o status do terminal\n\t\t\tthis.Pool.query(\"UPDATE parametro SET valor = $3 WHERE grupo = $1 AND nome = $2\", [\"SISTEMA\", \"STATUS\", status]);\n\n\t\t\t// Atualiza a data de verificacao\n\t\t\tlet dtatual = new Date().toISOString().substr(0, 10);\n\t\t\tthis.Pool.query(\"UPDATE parametro SET valor = $3 WHERE grupo = $1 AND nome = $2\", [\"SISTEMA\", \"DTVERIFICACAO\", dtatual]);\n\t\t}\n\n\t\t// Atualiza o processo no banco de dados\n\t\tawait processo.atualizarProcesso();\n\t}\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { HashRouter, Route } from \"react-router-dom\";\n\nimport \"./lib/bootstrap-4.0.0/bootstrap.js\";\n\nimport Menu from \"./com/Menu.js\";\nimport { FastMessageEmitter, FastMessageModal } from \"./com/FastMessage.js\";\nimport { InformarValorEmitter, InformarValorModal } from \"./com/InformarValor.js\";\nimport { LoadingEmitter, LoadingElement } from \"./com/Loading.js\";\nimport { MessageBoxEmitter, MessageBoxModal } from \"./com/MessageBox.js\";\nimport Servidor from \"./com/Servidor.js\";\n\nimport Categoria from \"./view/Categoria.js\";\nimport Configuracoes from \"./view/Configuracoes.js\";\nimport Contador from \"./view/Contador.js\";\nimport Estatistica from \"./view/Estatistica.js\";\nimport Fechamento from \"./view/Fechamento.js\";\nimport Ferramentas from \"./view/Ferramentas.js\";\nimport Parametro from \"./view/Parametro.js\";\nimport Produto from \"./view/Produto.js\";\nimport Relatorios from \"./view/Relatorios.js\";\nimport RelOrcamento from \"./view/RelOrcamento.js\";\nimport Suporte from \"./view/Suporte.js\";\nimport Venda from \"./view/Venda.js\";\n\nimport { valorParametro } from \"./def/function.js\";\n\nimport ProcessoAutomatico from \"./com/ProcessoAutomatico.js\";\n\nimport \"./css/index.css\";\nimport \"./font/gotham/gotham.css\";\n\nimport { Pool } from \"./def/postgresql.js\";\n\nclass App extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\twindow.FastMessage = new FastMessageEmitter();\n\t\twindow.InformarValor = new InformarValorEmitter();\n\t\twindow.Loading = new LoadingEmitter();\n\t\twindow.MessageBox = new MessageBoxEmitter();\n\n\t\tthis.state = {\n\t\t\tFastMessage: window.FastMessage,\n\t\t\tInformarValor: window.InformarValor,\n\t\t\tLoading: window.Loading,\n\t\t\tMessageBox: window.MessageBox\n\t\t};\n\n\t\tthis.Pool = new Pool();\n\t\tthis.processoAutomatico = new ProcessoAutomatico(this.Pool);\n\t\twindow.processoAutomatico = this.processoAutomatico;\n\t\t\n\t\t// Utilizado apenas para debug\n\t\twindow.servidor = new Servidor(this.Pool);\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.processoAutomatico.iniciar();\n\t\twindow.addEventListener(\"keydown\", this.onKeyDown);\n\n\t\tthis.verificarTerminal();\n\t}\n\n\tcomponentWillUnmount(){\n        window.removeEventListener(\"keydown\", this.onKeyDown);\n    }\n\n\tonKeyDown(e){\n\t\tif(e.ctrlKey && e.keyCode === 73){\n\t\t\twindow.require('electron').ipcRenderer.sendSync(\"open-dev-tools\");\n\t\t}\n\t}\n\n\tasync verificarTerminal(){\n\t\tlet status = await valorParametro(this.Pool, \"SISTEMA\", \"STATUS\");\n\t\tlet telefone = await valorParametro(this.Pool, \"REVENDA\", \"TELEFONE\");\n\t\tswitch(status){\n\t\t\tcase \"0000\": // Ativo\n\t\t\t\tbreak;\n\t\t\tcase \"0001\": // Bloqueado\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Terminal bloqueado\",\n\t\t\t\t\ttext: \"Seu terminal foi bloqueado, para mais informações, entre em contato com o suporte pelo número <b>\" + telefone + \"</b>.\",\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: \"Sair do SAT-Flex\",\n\t\t\t\t\t\t\tcolor: \"primary\",\n\t\t\t\t\t\t\tonClick: function(){\n\t\t\t\t\t\t\t\twindow.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"0002\": // Falta de comunicacao\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Terminal bloqueado\",\n\t\t\t\t\ttext: \"Seu terminal foi bloqueado por falta de comunicação com a Internet. Verifique sua conexão com a Internet e tente novamente.<br> Caso o problema persista, entre em contato com o suporte pelo número <b>\" + telefone + \"</b>.\",\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: \"Sair do SAT-Flex\",\n\t\t\t\t\t\t\tcolor: \"primary\",\n\t\t\t\t\t\t\tonClick: function(){\n\t\t\t\t\t\t\t\twindow.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<HashRouter>\n\t\t\t\t\t<Route path=\"/\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Menu />\n\t\t\t\t\t\t\t<div id=\"viewContainer\">\n\t\t\t\t\t\t\t\t<Route exact path=\"/\" component={Venda} />\n\t\t\t\t\t\t\t\t<Route exact path=\"/venda\" component={Venda} />\n\t\t\t\t\t\t\t\t<Route exact path=\"/venda/:id\" component={Venda} />\n\t\t\t\t\t\t\t\t<Route path=\"/categoria\" component={Categoria} />\n\t\t\t\t\t\t\t\t<Route path=\"/configuracao\" component={Configuracoes} />\n\t\t\t\t\t\t\t\t<Route path=\"/contador\" component={Contador} />\n\t\t\t\t\t\t\t\t<Route path=\"/estatistica\" component={Estatistica} />\n\t\t\t\t\t\t\t\t<Route path=\"/fechamento\" component={Fechamento} />\n\t\t\t\t\t\t\t\t<Route path=\"/ferramentas\" component={Ferramentas} />\n\t\t\t\t\t\t\t\t<Route path=\"/parametro\" component={Parametro} />\n\t\t\t\t\t\t\t\t<Route path=\"/produto\" component={Produto} />\n\t\t\t\t\t\t\t\t<Route path=\"/relatorio\" component={Relatorios} />\n\t\t\t\t\t\t\t\t<Route path=\"/relorcamento\" component={RelOrcamento} />\n\t\t\t\t\t\t\t\t<Route path=\"/suporte\" component={Suporte} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Route>\n\t\t\t\t</HashRouter>\n\t\t\t\t<FastMessageModal FastMessageEmitter={this.state.FastMessage} />\n\t\t\t\t<InformarValorModal InformarValorEmitter={this.state.InformarValor} />\n\t\t\t\t<LoadingElement LoadingEmitter={this.state.Loading} />\n\t\t\t\t<MessageBoxModal MessageBoxEmitter={this.state.MessageBox} />\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","const fs = window.require(\"fs\");\nconst os = window.require(\"os\");\nconst path = window.require(\"path\");\nconst childProcess = window.require(\"child_process\");\nconst serialNumberFunc = window.require(\"serial-number\");\n\nexport function applicationDirectory(){\n\tif(isDev()){\n\t\treturn path.resolve();\n\t}else{\n\t\treturn \"C:/SAT-Flex/resources/app/\";\n\t}\n}\n\nexport function currentDate(){\n\treturn currentTimestamp().split(\"T\")[0];\n}\n\nexport function currentTimestamp(){\n\tlet timezoneOffset = (new Date()).getTimezoneOffset() * 60000;\n\tlet localISOTimestamp = (new Date(Date.now() - timezoneOffset)).toISOString();\n\treturn localISOTimestamp;\n};\n\n// Calcula quantas casas deve usar para formatar um valor referente a quantidade\nexport function decimaisQuantidade(quantidade){\n\tlet decimal = String(quantidade).split(\".\")[1];\n\tif(decimal === undefined || decimal.length === 0 || parseInt(decimal, 10) === 0){\n\t\treturn 0;\n\t}else{\n\t\treturn 3;\n\t}\n}\n\nexport function defaultMessageBoxError(err){\n\tlet text = null;\n\tif(err === undefined || err === null){\n\t\ttext = \"Erro não identificado.\";\n\t}else if(typeof err === \"string\"){\n\t\ttext = err;\n\t}else{\n\t\ttext = err.message;\n\t\tconsole.log(err.stack);\n\t}\n\twindow.MessageBox.show({\n\t\ttitle: \"Houve uma falha\",\n\t\ttext: text\n\t});\n}\n\nexport function isDev(){\n\treturn (process.env.NODE_ENV === 'development');\n}\n\nexport async function serialNumber(){\n\tif(os.platform() === \"win32\"){\n\t\tlet command = \"wmic diskdrive get SerialNumber\";\n\t\tlet stdout = childProcess.execSync(command).toString();\n\t\tstdout = stdout.trim().split(\" \").splice(-1)[0].trim();\n\t\treturn stdout;\n\t}else{\n\t\treturn new Promise((resolve) => {\n\t\t\tserialNumberFunc((err, value) => {\n\t\t\t\tresolve(value);\n\t\t\t});\n\t\t});\n\t}\n}\n\nexport function sleep(ms){\n\treturn new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport function temporaryDirectory(){\n\tlet dirname = os.homedir() + \"/SAT-Flex/\";\n\treturn dirname;\n}\n\nexport function validarCNPJ(cnpj){\n\tcnpj = cnpj.replace(/[^\\d]+/g, \"\");\n\tif(cnpj === \"\"){\n\t\treturn false;\n\t}\n\tif(cnpj.length !== 14){\n\t\treturn false;\n\t}\n\tif(cnpj === \"00000000000000\" || cnpj === \"11111111111111\" || cnpj === \"22222222222222\" || cnpj === \"33333333333333\" || cnpj === \"44444444444444\" || cnpj === \"55555555555555\" || cnpj === \"66666666666666\" || cnpj === \"77777777777777\" || cnpj === \"88888888888888\" || cnpj === \"99999999999999\"){\n\t\treturn false;\n\t}\n\tvar tamanho = cnpj.length - 2;\n\tvar numeros = cnpj.substring(0, tamanho);\n\tvar digitos = cnpj.substring(tamanho);\n\tvar soma = 0;\n\tvar pos = tamanho - 7;\n\tfor(let i = tamanho; i >= 1; i--){\n\t\tsoma += numeros.charAt(tamanho - i) * pos--;\n\t\tif(pos < 2){\n\t\t\tpos = 9;\n\t\t}\n\t}\n\tvar resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\n\tif(parseInt(resultado, 10) !== parseInt(digitos.charAt(0), 10)){\n\t\treturn false;\n\t}\n\ttamanho = tamanho + 1;\n\tnumeros = cnpj.substring(0, tamanho);\n\tsoma = 0;\n\tpos = tamanho - 7;\n\tfor(let i = tamanho; i >= 1; i--){\n\t\tsoma += numeros.charAt(tamanho - i) * pos--;\n\t\tif(pos < 2){\n\t\t\tpos = 9;\n\t\t}\n\t}\n\tresultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\n\tif(parseInt(resultado, 10) !== parseInt(digitos.charAt(1), 10)){\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nexport function validarCPF(cpf){\n\tcpf = cpf.replace(/[^\\d]+/g, \"\");\n\tif(cpf === \"\"){\n\t\treturn false;\n\t}\n\tif(cpf.length !== 11 || cpf === \"00000000000\" || cpf === \"11111111111\" || cpf === \"22222222222\" || cpf === \"33333333333\" || cpf === \"44444444444\" || cpf === \"55555555555\" || cpf === \"66666666666\" || cpf === \"77777777777\" || cpf === \"88888888888\" || cpf === \"99999999999\"){\n\t\treturn false;\n\t}\n\tvar add = 0;\n\tfor(let i = 0; i < 9; i++){\n\t\tadd += parseInt(cpf.charAt(i), 10) * (10 - i);\n\t}\n\tvar rev = 11 - (add % 11);\n\tif(rev === 10 || rev === 11){\n\t\trev = 0;\n\t}\n\tif(parseInt(rev, 10) !== parseInt(cpf.charAt(9), 10)){\n\t\treturn false;\n\t}\n\tadd = 0;\n\tfor(let i = 0; i < 10; i++){\n\t\tadd += parseInt(cpf.charAt(i), 10) * (11 - i);\n\t}\n\trev = 11 - (add % 11);\n\tif(rev === 10 || rev === 11){\n\t\trev = 0;\n\t}\n\tif(parseInt(rev, 10) !== parseInt(cpf.charAt(10), 10)){\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nexport async function valorParametro(Pool, grupo, nome, callback){\n\tlet {rows} = await Pool.query(\"SELECT valor FROM parametro WHERE grupo = $1 AND nome = $2\", [grupo, nome]);\n\tif(rows.length === 0){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Banco de dados desatualizado\",\n\t\t\ttext: `Seu banco de dados está desatualizado para trabalhar com o aplicativo atual.<br>Atualize o banco de dados para continuar.<br>(Parâmetro não encontrado: ${grupo}, ${nome})`\n\t\t});\n\t\treturn false;\n\t}\n\tlet valor = rows[0].valor;\n\tif(typeof callback === \"function\"){\n\t\tcallback(valor);\n\t}\n\treturn valor;\n}\n\nexport function writeTemporary(filename, content){\n\tlet dirname = temporaryDirectory();\n\tif(!fs.existsSync(dirname)){\n\t\tfs.mkdirSync(dirname);\n\t}\n\n\tlet finalName = dirname + filename;\n\n\tlet encode = undefined;\n\tif(filename.substr(-4) === \".zip\"){\n\t\tencode = \"binary\";\n\t}\n\n\tfs.writeFileSync(finalName, content, encode);\n\treturn finalName;\n}\n"],"sourceRoot":""}