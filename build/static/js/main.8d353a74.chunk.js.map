{"version":3,"sources":["def/prototype.js","lib/bootstrap-4.0.0/lib/jquery.js","lib/bootstrap-4.0.0/lib/tether.js","lib/bootstrap-4.0.0/lib/popper.js","com/Icon.js","com/Menu.js","com/FastMessage.js","com/Button.js","com/Col.js","com/Modal.js","com/Row.js","com/InformarValor.js","com/Progress.js","com/Loading.js","com/MessageBox.js","def/function.js","com/Servidor.js","def/postgresql.js","com/Content.js","com/DataGrid.js","com/ColorInput.js","com/Select.js","com/FormControl.js","com/Label.js","com/FormGroup.js","com/Hr.js","com/ModalCategoria.js","com/Title.js","view/Categoria.js","com/Atualizacao.js","view/Configuracoes.js","com/Email.js","com/SubTitle.js","view/Contador.js","com/ButtonGroup.js","com/Center.js","view/Estatistica.js","com/EscPos.js","com/Printer.js","view/Fechamento.js","com/Importacao.js","view/Ferramentas.js","com/ListGroup.js","com/ListItem.js","view/Parametro.js","com/ModalProduto.js","view/Produto.js","view/Relatorios.js","view/RelOrcamento.js","com/Image.js","view/Suporte.js","com/PainelRapidoPesquisa.js","com/PainelRapidoPoucosProdutos.js","com/PainelRapidoMediosProdutos.js","com/PainelRapidoMuitosProdutos.js","com/PainelRapido.js","com/VendaAplicarAcrescimo.js","com/VendaAplicarDesconto.js","com/ComDLL.js","com/SAT.js","com/VendaCancelarCupom.js","com/VendaDetalhe.js","com/VendaEditarProduto.js","com/Card.js","com/VendaFinalizacao.js","com/VendaFinalizacaoOrcamento.js","com/VendaReimprimirCupom.js","view/Venda.js","com/Processo.js","com/ProcessoAutomatico.js","index.js"],"names":["Number","prototype","format","c","d","t","n","this","isNaN","Math","abs","undefined","s","i","String","parseInt","toFixed","j","length","substr","replace","slice","toFloat","byteList","text","split","map","charCodeAt","cpad","char","value","lpad","removeFormat","forEach","symbol","replaceAll","removeSpecial","oldChars","newChars","find","join","rpad","indexOf","parseFloat","window","jQuery","$","Tether","Popper","Icon","className","props","name","push","style","onClick","cursor","React","Component","Menu","id","MenuList","state","activeItem","changeActiveItem","bind","setState","icon","link","active","action","MessageBox","show","title","buttons","color","close","hide","listItem","item","pKey","MenuListItem","to","FastMessageEmitter","data","visible","callback","on","emit","Object","assign","element","get","removeListener","commitChange","settings","extend","EventEmitter","FastMessageModal","animateHide","animateShow","onChangeData","onDocumentClick","getData","stop","animate","opacity","top","innerHeight","currentTime","stages","progress","animateStages","stage","shift","animationTime","getElement","addChangeListener","document","addEventListener","removeChangeListener","removeEventListener","Button","innerButton","mlSize","size","iconPosition","dangerouslySetInnerHTML","__html","block","disabled","defaultProps","Col","offset","label","labelMargin","children","Modal","ReactDOM","findDOMNode","beforeOpen","afterOpen","beforeClose","afterClose","zIndex","css","setTimeout","not","addClass","nextProps","modal","closeOnOutClick","Row","InformarValorEmitter","decimal","mask","money","success","fail","lastHide","Date","getTime","time","dif","InformarValorModal","backspace","cancelar","confirmar","drawButton","pressNumber","valorKeyDown","valorKeyUp","pristine","StringMask","focus","valor","val","InformarValor","maskedValue","pow","e","keyCode","number","apply","html","verificarTamanho","removeClass","displayClass","type","readOnly","onKeyDown","onKeyUp","Progress","round","background","width","LoadingEmitter","a","LoadingElement","MessageBoxEmitter","focusOnClose","MessageBoxModal","first","button","fs","require","os","childProcess","serialNumberFunc","currentDate","currentTimestamp","timezoneOffset","getTimezoneOffset","now","toISOString","decimaisQuantidade","quantidade","defaultMessageBoxError","err","message","console","log","stack","serialNumber","platform","stdout","execSync","toString","trim","splice","Promise","resolve","sleep","ms","temporaryDirectory","homedir","validarCNPJ","cnpj","tamanho","numeros","substring","digitos","soma","pos","charAt","resultado","validarCPF","cpf","add","rev","valorParametro","Pool","grupo","nome","query","rows","writeTemporary","filename","content","dirname","existsSync","mkdirSync","finalName","encode","writeFileSync","Servidor","dados","error","url","ajax","JSON","stringify","result","parse","requisicao","carregarDados","status","api","numeroserie","idrequisicao","referencia","resposta","serialnumber","terminal","pg","user","host","database","password","port","Content","DataGrid","calcBlankSpace","elementScroll","onClickHeadCell","onScroll","updateBlankSpace","updateReceivedProps","header","limit","blankSpace","bottom","scrollActive","longScroll","grid","referenceElement","eScroll","eRefTop","position","scrollTop","scrollHeight","firstUpdateBlankSpace","floatThead","table","tr","tr50","eq","floor","elem","parent","is","parentTop","parentBottom","height","elemTop","elemBottom","key","target","attr","cell","hIndex","hOrder","order","sort","b","currentScroll","datagrid","thead","bsFirst","bsLast","last","trFirst","next","trLast","prev","tr20","tr80","hTop","count","elementIsVisibleByScroll","currScroll","initialBlankSpace","trHeight","rowsHeight","reduce","align","row","isArray","DataGridBody","DataGridBodyCell","DataGridBodyRow","DataGridHead","DataGridHeadCell","cellkey","DataGridBlankSpace","border","padding","ColorInput","picker","onChange","event","persist","hex","parents","preventDefault","found","each","Select","options","getDBOptions","verifyComponentId","dbtable","dbcolumn","dbfilter","dbparent","getElementById","ajaxDBOptions","abort","rowMode","res","option","input","Array","optionsAux","clearable","onInputChange","placeholder","searchable","defaultValue","FormControl","onFocus","checked","htmlFor","Label","FormGroup","warning","inputClassName","Hr","ModalCategoria","showDiv","changeDiv","changeTitle","excluir","gravar","limpar","onChangeNcm","onChangeInput","onChangeSincTributacao","sincronizarTributacao","idcategoria","toLocaleString","descricao","updateShowState","carregar","input_descricao","FastMessage","columns","values","name2","idncm","num","sets","input_sinctributacao","input_codigoncm","input_cor","input_dthrcriacao","input_origem","input_cfop","input_csosn","input_aliqicms","input_cstpis","input_aliqpis","input_cstcofins","input_aliqcofins","input_codcontribsocial","input_cest","Title","model","Categoria","dataGrid","pesquisa","showModalCategoria","redirectToProduto","beforeCloseModal","loadDataGrid","novaCategoria","onChangePesquisa","onClickBtnProduto","onKeyUpPesquisa","pesquisaLimpar","end","codigoncm","produtos","dthrcriacao","carregarCategoria","electron","Atualizacao","atualizarAplicativoParcial","atualizarBancoDeDados","baixarAplicativoParcial","verificarAtualizacao","callBack","ftp","ftpReadSync","client","stream","Error","chunks","chunk","paramAtualizacaoInstrucaoSQL","list","arrArquivoSQL","file","arquivoSQL","instrucaoSQL","connect","__ignoreAppUpdate","exec","spawn","shell","stderr","openExternal","applicationDirectory","version","Loading","baixarGit","ipcRenderer","sendSync","Configuracoes","redirect","versaoAtual","nodemailer","Email","_anexos","_destinatario","_titulo","_remetente","reverse","path","cid","random","corpo","_corpo","destinatario","transport","createTransport","secure","auth","pass","tls","rejectUnauthorized","from","subject","attachments","sendMail","info","remetente","titulo","SubTitle","Contador","atualizarEmailContador","carregarDocumentos","enviarEmail","carregarEmailContador","dtinicial","dtfinal","documentos","zip","nodeZip","documento","xml","chave","xmlcanc","chavecanc","zippedData","generate","base64","compression","zipfile","email","anexo","enviar","date","dtinical","getFullYear","getMonth","ButtonGroup","Center","Estatistica","carregarDadosCategoria","carregarDadosFormaPagamento","carregarDadosGeral","carregarDadosProduto","tabela","LineChart","chartJS","Line","queryDiario","resDiario","dadosDiario","prepararDados","querySemanal","resSemanal","dadosSemanal","queryMensal","resMensal","dadosMensal","queryAnual","resAnual","dadosAnual","diario","semanal","mensal","anual","tipoData","groups","labels","x","getDate","dataGroup","group","y","datasets","cor","rgb","fillColor","strokeColor","pointColor","pointStrokeColor","pointHighlightFill","pointHighlightStroke","legend","display","chartHeight","chartWidth","chartDiario","redraw","chartSemanal","chartMensal","chartAnual","ESC","EscPos","font","barcode","GS","fromCharCode","bool","lines","qrcode","len","pl","ph","bold","Printer","child_process","escpos","colunas","modelo","documentoprodutos","documentopagamentos","parametroImpressoraGuilhotina","parametroImpressoraModeloImpressao","linhas","carregarEscPos","feed","fonte","iddocumento","queryDocumentoProduto","queryDocumentoPagamento","release","getContent","drawer","cut","texto","conteudo","command","toUpperCase","nomefantasia","razaosocial","paramEmitenteEndereco","paramEmitenteNumero","paramEmitenteBairro","paramEmitenteMunicipio","paramEmitenteUF","paramEmitenteCNPJ","paramEmitenteIE","linha","reiniciar","carregarDadosDocumento","imprimirDocumentoAtivo","imprimirDocumentoCancelado","numerovias","informacoes","operacao","xmlJS","xml2json","compact","CFe","infCFe","infAdic","infCpl","_text","ide","assinaturaQRCODE","imprimirCabecalho","numero","dtcriacao","hrcriacao","getHours","getMinutes","getSeconds","cpfcnpj","nomeorcamento","idparceiro","parceiro","tipopessoa","inscricaoestadual","cidade","estado","cep","bairro","endereco","complemento","imprimirListaProdutosModelo01","imprimirListaProdutosModelo02","totaldocumento","repeat","alimentar","documentopagamento","totalpagamento","formapagamento","totaltroco","paramSatSerie","guilhotina","imprimir","paramSATSerie","qrcodecanc","orcamento","dthrcancelamento","dtcancelamento","hrcancelamento","documentoproduto","sequencial","totalproduto","preco","precisao","sigla","calculo","descricaoLength","totaldesconto","totalacrescimo","linha1","linha2","reset","Fechamento","tipo","ativarFechamentoRelatorio","ativarFechamentoResumo","gerar","arrOperacao","operacaoQuery","prepararImpressao","disabledImprimir","ativar","FechamentoRelatorio","tipoDescritivo","colDescricao","colQuantidade","colTotal","total","t_quantidade","t_total","FechamentoResumo","totalbruto","totalcancelado","qtdecancelado","totalativo","qtdeativo","totalorcamento","colResumo2","colResumo1","remote","Importacao","cores","categoria","corAleatoria","produto","balanca","precovariavel","aliqicms","aliqpis","aliqcofins","idunidade","cest","cfop","csosn","cstpis","cstcofins","sinctributacao","idcateogria","incluirCategoria","keys","references","sql","importados","fileName","planilha","xlsx","codigoean","origem","codcontribsocial","incluirProduto","dialog","showOpenDialog","filters","extensions","filePaths","processarPlanilha","Ferramentas","descobrirPortaImpressora","importarPlanilha","printer","then","selecionarPlanilha","consoleDesenvolvedor","ListGroup","ListItem","Parametro","listaGrupo","listaParametro","grupoAtivo","parametroAtivo","idparametro","observacao","ajustarAltura","carregarListaGrupo","carregarListaParametro","carregarParametro","onChangeValor","ModalProduto","onChangeCategoria","idproduto","input_idcategoria","input_codigoean","input_idunidade","input_precovariavel","input_preco","input_status","Produto","showModalProduto","redirectToCategoria","novoProduto","onClickBtnCategoria","carregarProduto","Relatorios","RelOrcamento","acaoOrcamento","totalquantidade","RelOrcamentoRelatorio","colNomeOrcamento","colIdDocumento","colTotalQuantidade","colTotalDocumento","t_totalquantidade","t_totaldocumento","Image","src","ext","readFileSync","alt","Suporte","logotipo","informativo","telefone","toLowerCase","PainelRapidoPesquisa","carregarProdutos","where","layoutVendas","selecionarProduto","onSelectProduto","borderColor","PainelRapidoPoucosProdutos","categorias","carregarCategorias","trocarCategoria","backgroundColor","PainelRapidoMediosProdutos","PainelRapidoMuitosProdutos","voltarCategoria","painelRapidoCategoria","painelRapidoProduto","PainelRapido","VendaEditarProduto","acrescimovalor","acrescimopercentual","onChangeAcrescimoPercentual","onChangeAcrescimoValor","onChangeTotalLiquido","aplicarAcrescimo","descontovalor","descontopercentual","onChangeDescontoPercentual","onChangeDescontoValor","aplicarDesconto","ComDLL","appPath","srcPath","comDLLPath","dllPath","method","args","commandExec","commandArgs","concat","xmlFile","returnFile","unlinkSync","execFileSync","timeout","code","SAT","jsontoxml","paramSATModelo","paramSATAtivacao","xmlEntrada","gerarXMLCancelamento","retorno","arrRetorno","execute","validarRetorno","xmlSaida","atob","objectName","constructor","paramDesenvolvedoraCNPJ","paramDesenvolvedoraAssinatura","paramSATCaixa","attrs","finalXML","paramEmitenteImpostoFederal","paramEmitenteImpostoEstadual","destChildren","destCPFCNPJ","dest","dets","prod","ICMS","PIS","basepis","COFINS","basecofins","pgtoChildren","especie","pgto","impostoFederal","impostoEstadual","infCFeChildren","gerarXMLDocumento","sucesso","VendaCancelarCupom","atualizarState","carregarUltimoDocumento","outroCupom","localizarNumero","rowCount","cancelarDocumento","ini","numeroVias","cancelamento","imprimirDocumento","carregarDocumento","VendaDetalhe","cancelarUltimaVenda","cancelarVendaAtual","carregarOrcamento","listaDocumentoProduto","reimprimirCupom","trocarOperacao","aumentarQuantidade","diminuirQuantidade","editarProduto","removerProduto","abrirFinalizacao","informarCPF","VendaDetalheCabecalho","alternarOrcamento","alternarVenda","efetivarOrcamento","onClickDocument","onClickIcon","exibindoOpcoes","opcoes","iconClicked","contains","fecharOpcoes","abrirOpcoes","countLista","ref","VendaDetalheCorpo","scrollToBottom","VendaDetalheCorpoItem","espaco","descontounitario","acrescimounitario","stopPropagation","VendaDetalheRodape","calcularTotais","onChangeAcrescimoUnitario","onChangeDescontoUnitario","onChangePreco","onChangeQuantidade","onChangeTotalAcrescimo","onChangeTotalDesconto","atualizarDocumentoProduto","decimalQuantidade","Card","VendaFinalizacao","listaDocumentoPagamento","formaspagamento","finalizarVenda","removerPagamento","totalpago","totalrestante","carregarFormasPagamento","idformapagamento","iconEspecie","incluirPagamento","incluirDezPorcento","VendaFinalizacaoListaPagamentos","VendaFinalizacaoOrcamento","onChangeCpfCnpj","onChangeNomeOrcamento","onFocusCpfCnpj","finalizarOrcamento","VendaReimprimirCupom","listaUltimosDocumentos","carregarUltimosDocumentos","Venda","criarObjetoDocumentoProduto","iddocumentoorcamento","pesquisaEfetiva","showEditarProduto","showVendaAplicarDesconto","showVendaAplicarAcrescimo","showVendaCancelarCupom","showVendaFinalizacao","showVendaFinalizacaoOrcamento","showVendaReimprimirCupom","carregarTemporario","finalizarDocumento","gravarTemporario","onClickBuscar","temporaryFileName","calcularDocumentoProduto","descontoproduto","calcularDiferenca","t_descontoproduto","diferenca","index","resDocumento","resDocumentoProduto","unidade","match","params","nextState","sqlInsertDocumento","listaIdProduto","queryProduto","resProduto","listaProdutos","sqlInsertDocumentoProduto","sqlInsertDocumentoPagamento","sat","transmitirDocumento","venda","informarPeso","incluirProdutoDefinitivo","documentoproduto2","documentoprodutoComp1","documentoprodutoComp2","contentClassName","Processo","dthrinicial","intervalo","ProcessoAutomatico","interval","running","executandoBackup","setInterval","executar","clearInterval","executarRefreshView","executarVerificarDtVerificacao","executarVerificarTerminal","executarBackup","processo","verificarIntervalo","dadosFTP","pgDump","tempDir","files","readdirSync","currTimeStr","localFile","remoteFile","cwd","mkdir","put","atualizarProcesso","view","dtverificacao","dtatual","servidor","verificarTerminal","App","processoAutomatico","iniciar","ctrlKey","exact","component","render"],"mappings":"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","file":"static/js/main.8d353a74.chunk.js","sourcesContent":["// Metodo para formatar um numero\n// Ex: (999999.9999).format(2,\",\",\".\")  =>  \"1.000.000,00\"\nNumber.prototype.format = function(c, d, t){\n\tlet n = this;\n\n\tc = (isNaN(c = Math.abs(c)) ? 2 : c);\n\td = (d === undefined ? \",\" : d);\n\tt = (t === undefined ? \".\" : t);\n\n\tlet s = (n < 0 ? \"-\" : \"\");\n\tlet i = String(parseInt(n = Math.abs(+n || 0).toFixed(c), 10));\n\tlet j = (i.length > 3 ? i.length % 3 : 0);\n\n\treturn s + (j ? i.substr(0, j) + t : \"\") + i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : \"\");\n};\n\n// Tranforma uma string em um numero\n// (nessa caso eh apenas para evitar erro quando a variavel ja for float)\nNumber.prototype.toFloat = function(){\n\treturn this;\n}\n\n// Retorna um array com o codigo de cada caracter do texto\nString.prototype.byteList = function(text){\n\treturn text.split(\"\").map(function(c){\n\t\treturn c.charCodeAt(0);\n\t});\n};\n\n\n// Preenche com o caracter desejado centralizando o texto\nString.prototype.cpad = function(length, char){\n    let value = this;\n\tlet i = 0;\n    while(value.length < length){\n\t\tif(i++ % 2 === 0){\n\t\t\tvalue = value + char;\n\t\t}else{\n\t\t\tvalue = char + value;\n\t\t}\n\t}\n    return String(value);\n}\n\n// Executa o \"format\" do tipo Number, porem esse metodo ja identifica a formatacao do numero\nString.prototype.format = function(c, d, t){\n\treturn this.toFloat().format(c, d, t);\n};\n\n// Preenche com o caracter desejado a esquerda do texto\nString.prototype.lpad = function(length, char){\n    let value = this;\n    while(value.length < length){\n\t\tvalue = char + value;\n\t}\n    return String(value);\n}\n\n// Remove a formatacao de textos\n// Ex: (\"(11) 99565-3470\").removeFormat() => \"11995653470\"\nString.prototype.removeFormat = function(){\n\tlet value = this;\n\tlet symbols = [\" \", \".\", \",\", \"-\", \"/\", \"\\\\\", \"(\", \")\"];\n\tsymbols.forEach((symbol) => {\n\t\tvalue = value.replaceAll(symbol, \"\");\n\t});\n\treturn value;\n};\n\n// Remove caracteres especiais\nString.prototype.removeSpecial = function(){\n\tlet oldChars = [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"];\n\tlet newChars = [\"a\", \"a\", \"a\", \"a\", \"e\", \"e\", \"e\", \"i\", \"i\", \"i\", \"o\", \"o\", \"o\", \"o\", \"u\", \"u\", \"u\", \"u\", \"c\", \"A\", \"A\", \"A\", \"A\", \"E\", \"E\", \"E\", \"I\", \"I\", \"I\", \"O\", \"O\", \"O\", \"O\", \"U\", \"U\", \"U\", \"U\", \"C\", \"a\", \"o\"];\n\tlet value = this;\n\tfor(let i = 0; i < oldChars.length; i++){\n\t\tvalue = value.replaceAll(oldChars[i], newChars[i]);\n\t}\n\treturn value;\n};\n\n// Metodo para substituir todas as ocorrencias em uma string\nString.prototype.replaceAll = function(find, replace){\n\treturn this.split(find).join(replace);\n};\n\n// Preenche com o caracter desejado a direita do texto\nString.prototype.rpad = function(length, char){\n    let value = this;\n    while(value.length < length){\n\t\tvalue = value + char;\n\t}\n    return String(value);\n}\n\n// Tranforma uma string em um numero\n// Exemplo: 1.200,85 => 1200.85\nString.prototype.toFloat = function(){\n\tvar value = this;\n\tif(value.indexOf(\".\") === -1 && value.indexOf(\",\") > -1){ // 1200,85\n\t\tvalue = value.replace(\",\", \".\");\n\t}else if(value.indexOf(\".\") > -1 && value.indexOf(\",\") > -1){ // 1.200,85 ou 1,200.85\n\t\tif(value.indexOf(\".\") < value.indexOf(\",\")){ // 1.200,85\n\t\t\tvalue = value.replace(\".\", \"\").replace(\",\", \".\");\n\t\t}else if(value.indexOf(\".\") > value.indexOf(\",\")){ // 1,200.85\n\t\t\tvalue = value.replace(\",\", \"\");\n\t\t}\n\t}\n\treturn parseFloat(value);\n};\n","import * as $ from \"jquery\"\nwindow.jQuery = window.$ = $","import Tether from 'tether'\nwindow.Tether = Tether","import Popper from 'popper.js'\nwindow.Popper = Popper","import React from \"react\";\nimport \"./../lib/metro-icons-3.0.15/css/metro-icons.min.css\";\n\nexport default class Icon extends React.Component {\n\trender(){\n\t\tvar className = [\n\t\t\t\"icon\",\n\t\t\t\"mif-\" + this.props.name\n\t\t];\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\n\t\tvar style = {};\n\t\tif(this.props.onClick){\n\t\t\tstyle.cursor = \"pointer\";\n\t\t}\n\n\t\treturn (\n\t\t\t<span {...this.props} className={className.join(\" \")} style={style}></span>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Icon from \"./Icon.js\";\n\nimport \"../css/Menu.css\";\n\nexport default class Menu extends React.Component {\n\trender(){\n\t\treturn(\n\t\t\t<div id=\"menu\">\n\t\t\t\t<MenuList />\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass MenuList extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tactiveItem: \"Vender\"\n\t\t};\n\n\t\tthis.changeActiveItem = this.changeActiveItem.bind(this);\n\t}\n\n\tchangeActiveItem(text){\n\t\tthis.setState({\n\t\t\tactiveItem: text\n\t\t});\n\t}\n\n\tlistItem(){\n\t\treturn [\n\t\t\t{\n\t\t\t\ttext: \"Vender\",\n\t\t\t\ticon: \"shop\",\n\t\t\t\tlink: \"/\"\n\t\t\t},/*\n\t\t\t{\n\t\t\t\ttext: \"Notas fiscais\",\n\t\t\t\ticon: \"clipboard\",\n\t\t\t\tlink: \"/notafiscal\",\n\t\t\t\tactive: false\n\t\t\t},*/\n\t\t\t{\n\t\t\t\ttext: \"Cadastros\",\n\t\t\t\ticon: \"stack\",\n\t\t\t\tlink: \"/produto\",\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"Relatrios\",\n\t\t\t\ticon: \"chart-line\",\n\t\t\t\tlink: \"/relatorio\",\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"Contador\",\n\t\t\t\ticon: \"suitcase\",\n\t\t\t\tlink: \"/contador\",\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"Configuraes\",\n\t\t\t\ticon: \"cogs\",\n\t\t\t\tlink: \"/configuracao\",\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"Suporte\",\n\t\t\t\ticon: \"help\",\n\t\t\t\tlink: \"/suporte\",\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"Sair\",\n\t\t\t\ticon: \"exit\",\n\t\t\t\tactive: false,\n\t\t\t\taction: () => {\n\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\ttitle: \"Sair do SAT-Flex\",\n\t\t\t\t\t\ttext: \"Voc tem certeza que deseja encerrar o SAT-Flex agora?\",\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\twindow.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: \"No\",\n\t\t\t\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t]\n\t}\n\n\trender(){\n\t\treturn <div className=\"menu-list\">\n\t\t\t<ul>\n\t\t\t\t{this.listItem().map((item, i) => {\n\t\t\t\t\treturn <MenuListItem key={i} pKey={i} item={item} activeItem={this.state.activeItem} changeActiveItem={this.changeActiveItem} />\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t</div>\n\t}\n}\n\nclass MenuListItem extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(){\n\t\tif(this.props.item.link){\n\t\t\tthis.props.changeActiveItem(this.props.item.text);\n\t\t}\n\t\tif(this.props.item.action){\n\t\t\tthis.props.item.action();\n\t\t}\n\t}\n\n\trender(){\n\t\tlet className = null;\n\t\tif(this.props.activeItem === this.props.item.text){\n\t\t\tclassName = \"active\";\n\t\t}\n\n\t\tif(this.props.item.link){\n\t\t\treturn (\n\t\t\t\t<Link to={this.props.item.link} onClick={this.onClick} className={className}>\n\t\t\t\t\t<Icon name={this.props.item.icon} />\n\t\t\t\t\t<span>{this.props.item.text}</span>\n\t\t\t\t</Link>\n\t\t\t);\n\t\t}else{\n\t\t\treturn (\n\t\t\t\t<a onClick={this.onClick} className={className}>\n\t\t\t\t\t<Icon name={this.props.item.icon} />\n\t\t\t\t\t<span>{this.props.item.text}</span>\n\t\t\t\t</a>\n\t\t\t);\n\t\t}\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport {EventEmitter} from \"events\";\n\nimport Icon from \"./Icon.js\";\n\nimport \"../css/FastMessage.css\";\n\nexport class FastMessageEmitter extends EventEmitter  {\n\tconstructor(){\n\t\tsuper();\n\n\t\tthis.data = {\n\t\t\ticon: null,\n\t\t\ttext: null,\n\t\t\tvisible: false\n\t\t}\n\t}\n\n\t// Adiciona um metodo a ser executado quando houver uma mudanca\n\taddChangeListener(callback){\n\t\tthis.on(\"change\", callback);\n\t}\n\n\t// Metodo responsavel em propagar as mudancas dos dados\n\tcommitChange(){\n\t\tthis.emit(\"change\");\n\t}\n\n\t// Captura os dados atuais da classe\n\tgetData(){\n\t\treturn Object.assign({}, this.data);\n\t}\n\n\t// Retorna o elemento modal da caixa de mensagem\n\tgetElement(){\n\t\tif(this.element === undefined){\n\t\t\tthis.element = $(\"#FastMessage\").get(0);\n\t\t}\n\t\treturn this.element;\n\t}\n\n\t// Remove um metodo a ser executado quando houver uma mudanca\n\tremoveChangeListener(callback){\n\t\tthis.removeListener(\"change\", callback);\n\t}\n\n\t// Esconde a caixa de mensagem\n\thide(){\n\t\tthis.data.visible = false;\n\t\tthis.commitChange();\n\t}\n\n\t// Exibe a caixa de mensagem\n\tshow(settings){\n\t\tif(typeof settings === \"string\"){\n\t\t\tsettings = {text: settings};\n\t\t}\n\n\t\tsettings = $.extend({\n\t\t\ticon: null,\n\t\t\ttext: null,\n\t\t\tvisible: true\n\t\t}, settings);\n\n\t\tthis.data = $.extend(this.data, settings);\n\t\tthis.commitChange();\n\t}\n}\n\nexport class FastMessageModal extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.animateHide = this.animateHide.bind(this);\n\t\tthis.animateShow = this.animateShow.bind(this);\n\t\tthis.onChangeData = this.onChangeData.bind(this);\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\n\n\t\tthis.state = props.FastMessageEmitter.getData();\n\t}\n\n\tanimateHide(){\n\t\tif(!this.state.visible){\n\t\t\treturn true;\n\t\t}\n\t\t$(this.element).stop().animate({\n\t\t\topacity: 0,\n\t\t\ttop: window.innerHeight\n\t\t}, 180, () => {\n\t\t\tthis.setState({\n\t\t\t\tvisible: false\n\t\t\t});\n\t\t});\n\t}\n\n\tanimateShow(){\n\t\t$(this.element).show();\n\n\t\tlet totalTime = 3000;\n\t\tlet currentTime = 0;\n\n\t\tlet stages = [\n\t\t\t{progress: 0,    opacity: 0, top: 0},\n\t\t\t{progress: 0.05, opacity: 1, top: 0.3},\n\t\t\t{progress: 0.95, opacity: 1, top: 0.35},\n\t\t\t{progress: 1,    opacity: 0, top: 1}\n\t\t];\n\n\t\tlet animateStages = () => {\n\t\t\tlet stage = stages.shift();\n\n\t\t\tlet animationTime = (totalTime * stage.progress) - currentTime;\n\t\t\tcurrentTime += animationTime;\n\n\t\t\t$(this.element).stop().animate({\n\t\t\t\topacity: stage.opacity,\n\t\t\t\ttop: (window.innerHeight * stage.top)\n\t\t\t}, animationTime, () => {\n\t\t\t\tif(stages.length > 0){\n\t\t\t\t\tanimateStages();\n\t\t\t\t}else{\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tvisible: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tanimateStages();\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.element = this.props.FastMessageEmitter.getElement();\n\t\tthis.props.FastMessageEmitter.addChangeListener(this.onChangeData);\n\t\tdocument.addEventListener(\"click\", this.onDocumentClick);\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.props.FastMessageEmitter.removeChangeListener(this.onChangeData);\n\t\tdocument.removeEventListener(\"click\", this.onDocumentClick);\n\t}\n\n\tonChangeData(){\n\t\tlet data = this.props.FastMessageEmitter.getData();\n\t\tif(data.visible !== this.state.visible){\n\t\t\tif(data.visible){\n\t\t\t\tthis.animateShow();\n\t\t\t}else{\n\t\t\t\tthis.animateHide();\n\t\t\t}\n\t\t}\n\t\tthis.setState(data);\n\t}\n\n\tonDocumentClick(){\n\t\tif(this.state.visible){\n\t\t\tthis.animateHide();\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div id=\"FastMessage\">\n\t\t\t\t{this.state.icon ? <Icon name={this.state.icon} /> : null}\n\t\t\t\t<span>{this.state.text}</span>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport Icon from \"./Icon.js\";\nimport \"../css/Button.css\";\n\nexport default class Button extends React.Component {\n\tstatic defaultProps = {\n\t\tactive: false,\n\t\tblock: false,\n\t\tdisabled: false,\n\t\ticonPosition: \"left\",\n\t\tsize: \"md\",\n\t\tcolor: \"blue\"\n\t}\n\n\trender(){\n\t\tvar innerButton = null;\n\t\tif(this.props.icon){\n\t\t\tif(this.props.text){\n\t\t\t\tlet mlSize = (this.props.size === \"lg\" ? \"3\" : \"2\");\n\n\t\t\t\tswitch(this.props.iconPosition){\n\t\t\t\t\tdefault:\n\t\t\t\t\tcase \"left\":\n\t\t\t\t\t\tinnerButton = [\n\t\t\t\t\t\t\t<Icon name={this.props.icon} key=\"0\" />,\n\t\t\t\t\t\t\t<span className={\"ml-\" + mlSize} key=\"1\" dangerouslySetInnerHTML={{__html: this.props.text}}></span>\n\t\t\t\t\t\t];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\tinnerButton = [\n\t\t\t\t\t\t\t<span className=\"mr-2\" key=\"0\" dangerouslySetInnerHTML={{__html: this.props.text}}></span>,\n\t\t\t\t\t\t\t<Icon name={this.props.icon} key=\"1\" />\n\t\t\t\t\t\t];\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tinnerButton = <Icon name={this.props.icon} />;\n\t\t\t}\n\t\t}else{\n\t\t\tinnerButton = <span dangerouslySetInnerHTML={{__html: this.props.text}}></span>;\n\t\t}\n\n\t\tvar className = [\n\t\t\t\"btn\",\n\t\t\t\"btn-primary\",\n\t\t\t\"btn-\" + this.props.size,\n\t\t\t\"btn-color-\" + this.props.color,\n\t\t];\n\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\t\tif(this.props.active){\n\t\t\tclassName.push(\"active\");\n\t\t}\n\t\tif(this.props.block){\n\t\t\tclassName.push(\"btn-block\");\n\t\t}\n\n\t\treturn (\n\t\t\t<button className={className.join(\" \")} onClick={this.props.onClick} disabled={this.props.disabled}>\n\t\t\t\t{innerButton}\n\t\t\t</button>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nexport default class Col extends React.Component {\n\trender(){\n\t\tlet size = (this.props.size === undefined ? 1 : this.props.size);\n\t\tlet className = [\"col-\" + size];\n\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\n\t\tif(this.props.offset){\n\t\t\tclassName.push(\"offset-\" + this.props.offset);\n\t\t}\n\n\t\tlet label = null;\n\t\tif(this.props.labelMargin){\n\t\t\tlabel = <label>&nbsp;</label>;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{label}\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport $ from \"jquery\";\n\nimport \"../css/Modal.css\";\n\nclass Modal extends React.Component {\n\n\tcomponentDidMount(){\n\t\tthis.element = ReactDOM.findDOMNode(this);\n\n\t\t$(this.element).on(\"show.bs.modal\", this.props.beforeOpen);\n\t\t$(this.element).on(\"shown.bs.modal\", this.props.afterOpen);\n\t\t$(this.element).on(\"hide.bs.modal\", this.props.beforeClose);\n\t\t$(this.element).on(\"hidden.bs.modal\", this.props.afterClose);\n\n\t\t$(this.element).on(\"show.bs.modal\", () => {\n\t\t\tlet zIndex = 1040 + (10 * $(\".modal:visible\").length);\n\t\t\t$(this.element).css(\"z-index\", zIndex);\n\t\t\tsetTimeout(() => {\n\t\t\t\t$(\".modal-backdrop\").not(\".modal-stack\").css(\"z-index\", zIndex - 1).addClass(\"modal-stack\");\n\t\t\t}, 0);\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tif(nextProps.show !== this.props.show){\n\t\t\tif(nextProps.show){\n\t\t\t\t$(this.element).modal(\"show\");\n\t\t\t}else{\n\t\t\t\t$(this.element).modal(\"hide\");\n\t\t\t}\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps){\n\t\treturn (\n\t\t\tnextProps.size !== this.props.size ||\n\t\t\tnextProps.title !== this.props.title ||\n\t\t\tnextProps.children !== this.props.children\n\t\t);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div id={this.props.id} className=\"modal fade\" data-backdrop={this.props.closeOnOutClick ? true : \"static\"}>\n\t\t\t\t<div className={\"modal-dialog modal-\" + this.props.size}>\n\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t{this.props.title}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"modal-body\">\n\t\t\t\t\t\t\t{this.props.children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nModal.defaultProps = {\n\tcloseOnOutClick: true,\n\tid: null,\n\tsize: \"md\",\n\ttitle: null\n};\n\nexport default Modal;\n","import React from \"react\";\n\nexport default class Row extends React.Component {\n\trender(){\n\t\tlet className = [\"row\"];\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\n\t\tlet props = Object.assign({}, this.props);\n\t\tdelete props.className;\n\n\t\treturn (\n\t\t\t<div {...props} className={className.join(\" \")}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport {EventEmitter} from \"events\";\nimport StringMask from \"string-mask\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport Icon from \"./Icon.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport \"../css/InformarValor.css\";\n\nexport class InformarValorEmitter extends EventEmitter {\n\tconstructor(){\n\t\tsuper();\n\n\t\tthis.data = {\n\t\t\tdecimal: 0, // Quantidade de casas decimais\n\t\t\tmask: null, // Mascara de entrada\n\t\t\tmoney: false, // Simbolo monetario a frente do valor\n\t\t\ttitle: null, // Titulo da janela\n\t\t\tvalue: \"\", // Valor pre-informado\n\t\t\tvisible: false, // Define se o modal esta visivel\n\t\t\tsuccess: () => {}, // Metodo executado ao confirmar valor\n\t\t\tfail: () => {} // Metodo executado ao cancelar\n\t\t};\n\n\t\tthis.lastHide = new Date().getTime();\n\t}\n\n\t// Adiciona um metodo a ser executado quando houver uma mudanca\n\taddChangeListener(callback){\n\t\tthis.on(\"change\", callback);\n\t}\n\n\t// Metodo responsavel em propagar as mudancas dos dados\n\tcommitChange(){\n\t\tthis.emit(\"change\");\n\t}\n\n\t// Captura os dados atuais da classe\n\tgetData(){\n\t\treturn Object.assign({}, this.data);\n\t}\n\n\t// Retorna o elemento modal da caixa de mensagem\n\tgetElement(){\n\t\tif(this.element === undefined){\n\t\t\tthis.element = $(\"#informarvalor\").get(0);\n\t\t}\n\t\treturn this.element;\n\t}\n\n\t// Remove um metodo a ser executado quando houver uma mudanca\n\tremoveChangeListener(callback){\n\t\tthis.removeListener(\"change\", callback);\n\t}\n\n\t// Escone a caixa de mensagem\n\thide(){\n\t\tthis.lastHide = new Date().getTime();\n\t\tthis.data.visible = false;\n\t\tthis.commitChange();\n\t}\n\n\t// Exibe a caixa de mensagem\n\tshow(settings){\n\t\tsettings = $.extend({\n\t\t\tdecimal: 0, // Quantidade de casas decimais\n\t\t\tmask: null, // Mascara de entrada\n\t\t\tmoney: false, // Simbolo monetario a frente do valor\n\t\t\ttitle: \"Informe o valor\", // Titulo da janela\n\t\t\tvalue: \"\", // Valor pre-informado\n\t\t\tvisible: true, // Define se o modal esta visivel\n\t\t\tsuccess: () => {}, // Metodo executado ao confirmar valor\n\t\t\tfail: () => {} // Metodo executado ao cancelar\n\t\t}, settings);\n\n\t\tlet time = 0;\n\t\tlet minTime = 750;\n\t\tlet dif = new Date().getTime() - this.lastHide;\n\t\tif(dif < minTime){\n\t\t\ttime = minTime - dif;\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tthis.data = $.extend(this.data, settings);\n\t\t\tthis.commitChange();\n\t\t}, time);\n\t}\n}\n\nexport class InformarValorModal extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdecimal: 0, // Quantidade de casas decimais\n\t\t\tmask: null, // Mascara de entrada\n\t\t\tmoney: false, // Simbolo monetario a frente do valor\n\t\t\ttitle: null, // Titulo da janela\n\t\t\tvalue: \"\", // Valor pre-informado\n\t\t\tvisible: false, // Define se o modal esta visivel\n\t\t\tsuccess: () => {}, // Metodo executado ao confirmar valor\n\t\t\tfail: () => {} // Metodo executado ao cancelar\n\t\t};\n\n\t\tthis.backspace = this.backspace.bind(this);\n\t\tthis.beforeClose = this.beforeClose.bind(this);\n\t\tthis.beforeOpen = this.beforeOpen.bind(this);\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.drawButton = this.drawButton.bind(this);\n\t\tthis.onChangeData = this.onChangeData.bind(this);\n\t\tthis.pressNumber = this.pressNumber.bind(this);\n\t\tthis.valorKeyDown = this.valorKeyDown.bind(this);\n\t\tthis.valorKeyUp = this.valorKeyUp.bind(this);\n\n\t\tthis.pristine = true;\n\t\tthis.visible = false;\n\n\t\tthis.StringMask = StringMask;\n\t}\n\n\tafterOpen(){\n\t\t$(\"#informarvalor-valor\").focus();\n\t}\n\n\tbackspace(){\n\t\tlet valor = $(\"#informarvalor-valor\").val();\n\t\t$(\"#informarvalor-valor\").val(valor.substr(0, valor.length - 1));\n\t\tthis.valorKeyUp();\n\t}\n\n\tbeforeClose(){\n\t\tthis.visible = false;\n\t}\n\n\tbeforeOpen(){\n\t\tthis.visible = true;\n\t}\n\n\tcancelar(){\n\t\twindow.InformarValor.hide();\n\t\tthis.state.fail();\n\t}\n\n\tconfirmar(){\n\t\twindow.InformarValor.hide();\n\n\t\tlet valor = $(\"#informarvalor-valor\").val();\n\t\tif(typeof this.state.mask === \"string\"){\n\t\t\tvalor = this.maskedValue(valor);\n\t\t}else{\n\t\t\tvalor = valor / Math.pow(10, this.state.decimal);\n\t\t\tvalor = valor.format(this.state.decimal, \",\", \".\");\n\t\t}\n\n\t\tthis.state.success(valor);\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.props.InformarValorEmitter.addChangeListener(this.onChangeData);\n\t\tthis.element = this.props.InformarValorEmitter.getElement();\n\n\t\tdocument.addEventListener(\"keyup\", (e) => {\n\t\t\tif(this.visible){\n\t\t\t\tswitch(e.keyCode){\n\t\t\t\t\tcase 8: this.backspace(); return;\n\t\t\t\t\tcase 48: this.pressNumber(0); return;\n\t\t\t\t\tcase 49: this.pressNumber(1); return;\n\t\t\t\t\tcase 50: this.pressNumber(2); return;\n\t\t\t\t\tcase 51: this.pressNumber(3); return;\n\t\t\t\t\tcase 52: this.pressNumber(4); return;\n\t\t\t\t\tcase 53: this.pressNumber(5); return;\n\t\t\t\t\tcase 54: this.pressNumber(6); return;\n\t\t\t\t\tcase 55: this.pressNumber(7); return;\n\t\t\t\t\tcase 56: this.pressNumber(8); return;\n\t\t\t\t\tcase 57: this.pressNumber(9); return;\n\t\t\t\t\tcase 96: this.pressNumber(0); return;\n\t\t\t\t\tcase 97: this.pressNumber(1); return;\n\t\t\t\t\tcase 98: this.pressNumber(2); return;\n\t\t\t\t\tcase 99: this.pressNumber(3); return;\n\t\t\t\t\tcase 100: this.pressNumber(4); return;\n\t\t\t\t\tcase 101: this.pressNumber(5); return;\n\t\t\t\t\tcase 102: this.pressNumber(6); return;\n\t\t\t\t\tcase 103: this.pressNumber(7); return;\n\t\t\t\t\tcase 104: this.pressNumber(8); return;\n\t\t\t\t\tcase 105: this.pressNumber(9); return;\n\t\t\t\t\tdefault: return;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.props.InformarValorEmitter.removeChangeListener(this.onChangeData);\n\t}\n\n\tdrawButton(number, i){\n\t\treturn (\n\t\t\t<Col size=\"4\" key={i}>\n\t\t\t\t<Button text={number} block={true} color=\"blue\" onClick={() => {this.pressNumber(number)}} />\n\t\t\t</Col>\n\t\t);\n\t}\n\n\tmaskedValue(value){\n\t\tlet mask = new this.StringMask(this.state.mask);\n\t\treturn mask.apply(value);\n\t}\n\n\tonChangeData(){\n\t\tlet data = this.props.InformarValorEmitter.getData();\n\n\t\tif(data.visible){\n\t\t\t$(this.element).modal(\"show\");\n\t\t}else{\n\t\t\t$(this.element).modal(\"hide\");\n\t\t}\n\n\t\tif(data.value !== undefined && data.value.length > 0){\n\t\t\tdata.value = data.value.toFloat().format(data.decimal, \"\", \"\");\n\t\t}\n\n\t\tthis.setState(data, () => {\n\t\t\tthis.pristine = false;\n\t\t\t$(\"#informarvalor-valor\").val(data.value);\n\t\t\tthis.valorKeyUp();\n\t\t\tthis.pristine = true;\n\t\t});\n\t}\n\n\tpressNumber(number){\n\t\t$(\"#informarvalor-valor\").val($(\"#informarvalor-valor\").val() + number);\n\t\tthis.valorKeyUp();\n\t}\n\n\tvalorKeyDown(e){\n\t\tif([8, 13, 27, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57].indexOf(e.keyCode) === -1){\n\t\t\treturn false;\n\t\t}\n\t\tif(e.keyCode === 13){\n\t\t\tthis.confirmar();\n\t\t}\n\t}\n\n\tvalorKeyUp(){\n\t\tif(this.pristine){\n\t\t\tthis.pristine = false;\n\t\t\t$(\"#informarvalor-valor\").val($(\"#informarvalor-valor\").val().substr(-1));\n\t\t}\n\n\t\tlet valor = $(\"#informarvalor-valor\").val();\n\t\tif(typeof this.state.mask === \"string\"){\n\t\t\tvalor = this.maskedValue(valor);\n\t\t}else{\n\t\t\tif(valor.length === 0){\n\t\t\t\t$(\"#informarvalor-valor\").val(0);\n\t\t\t}\n\t\t\tvalor = valor / Math.pow(10, this.state.decimal);\n\t\t\tvalor = valor.format(this.state.decimal, \",\", \".\");\n\t\t}\n\t\t$(\"#informarvalor-display\").html(valor);\n\t\tthis.verificarTamanho();\n\n\t\tif(valor.length > 0){\n\t\t\t$(\"#informarvalor-backspace\").show();\n\t\t}else{\n\t\t\t$(\"#informarvalor-backspace\").hide();\n\t\t}\n\n\t\t$(\"#informarvalor-valor\").focus();\n\t}\n\n\tverificarTamanho(){\n\t\tif($(\"#informarvalor-display\").text().length < 10){\n\t\t\t$(\"#informarvalor-display\").removeClass(\"informarvalor-display-sm\");\n\t\t}else{\n\t\t\t$(\"#informarvalor-display\").addClass(\"informarvalor-display-sm\");\n\t\t}\n\t}\n\n\trender(){\n\t\tlet numbers = [7, 8, 9, 4, 5, 6, 1, 2, 3];\n\t\tlet displayClass = (this.state.money ? \"informarvalor-display-money\" : \"\");\n\n\t\treturn (\n\t\t\t<Modal id=\"informarvalor\" size=\"sm\" title={this.state.title} afterOpen={this.afterOpen} beforeOpen={this.beforeOpen} beforeClose={this.beforeClose}>\n\t\t\t\t<input type=\"text\" id=\"informarvalor-valor\" readOnly={true} onKeyDown={this.valorKeyDown} onKeyUp={this.valorKeyUp} />\n\t\t\t\t<div id=\"informarvalor-display-parent\">\n\t\t\t\t\t<div id=\"informarvalor-display\" className={displayClass}></div>\n\t\t\t\t\t<Icon id=\"informarvalor-backspace\" name=\"chevron-left\" onClick={this.backspace} />\n\t\t\t\t</div>\n\t\t\t\t<Row id=\"informarvalor-keyboard\">\n\t\t\t\t\t{numbers.map(this.drawButton)}\n\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t<Button icon=\"cross\" block={true} color=\"red\" onClick={this.cancelar} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t{this.drawButton(0)}\n\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t<Button icon=\"checkmark\" block={true} color=\"green\" onClick={this.confirmar} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nexport default class Progress extends React.Component {\n\trender(){\n\t\tlet value = Math.round(this.props.value) + \"%\";\n\t\tlet background = null;\n\t\tswitch(this.props.color){\n\t\t\tcase \"green\":\n\t\t\t\tbackground = \"bg-success\";\n\t\t\t\tbreak;\n\t\t\tcase \"yellow\":\n\t\t\t\tbackground = \"bg-warning\";\n\t\t\t\tbreak;\n\t\t\tcase \"red\":\n\t\t\t\tbackground = \"bg-danger\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbackground = \"bg-primary\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\tlet className = \"progress\";\n\t\tif(this.props.className){\n\t\t\tclassName += \" \" + this.props.className;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={className}>\n\t\t\t\t<div className={\"progress-bar progress-bar-striped progress-bar-animated \" + background} style={{width: value}}>\n\t\t\t\t\t{value}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport {EventEmitter} from \"events\";\n\nimport Progress from \"./Progress.js\";\n\nimport \"../css/Loading.css\";\n\nexport class LoadingEmitter extends EventEmitter  {\n\tconstructor(){\n\t\tsuper();\n\n\t\tthis.data = {\n\t\t\tvisible: false,\n\t\t\tprogress: null\n\t\t}\n\t}\n\n\t// Adiciona um metodo a ser executado quando houver uma mudanca\n\taddChangeListener(callback){\n\t\tthis.on(\"change\", callback);\n\t}\n\n\t// Metodo responsavel em propagar as mudancas dos dados\n\tcommitChange(){\n\t\tthis.emit(\"change\");\n\t}\n\n\t// Captura os dados atuais da classe\n\tgetData(){\n\t\treturn Object.assign({}, this.data);\n\t}\n\n\t// Retorna o elemento modal da caixa de mensagem\n\tgetElement(){\n\t\tif(this.element === undefined){\n\t\t\tthis.element = $(\"#Loading\").get(0);\n\t\t}\n\t\treturn this.element;\n\t}\n\n\t// Remove um metodo a ser executado quando houver uma mudanca\n\tremoveChangeListener(callback){\n\t\tthis.removeListener(\"change\", callback);\n\t}\n\n\t// Esconde a caixa de mensagem\n\tasync hide(){\n\t\tthis.data.visible = false;\n\t\tthis.commitChange();\n\t}\n\n\t// Exibe a caixa de mensagem\n\tasync show(){\n\t\tthis.data.visible = true;\n\t\tthis.data.progress = null;\n\t\tthis.commitChange();\n\t}\n\n\t// Exibe a barra de progresso\n\tasync progress(value){\n\t\tthis.data.progress = value;\n\t\tthis.commitChange();\n\t}\n}\n\nexport class LoadingElement extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onChangeData = this.onChangeData.bind(this);\n\n\t\tthis.state = props.LoadingEmitter.getData();\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.element = this.props.LoadingEmitter.getElement();\n\t\tthis.props.LoadingEmitter.addChangeListener(this.onChangeData);\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.props.LoadingEmitter.removeChangeListener(this.onChangeData);\n\t}\n\n\tonChangeData(){\n\t\tlet data = this.props.LoadingEmitter.getData();\n\t\tthis.setState(data);\n\t}\n\n\trender(){\n\t\tif(!this.state.visible){\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"Loading\">\n\t\t\t\t<div className=\"Loading-Spinner\"></div>\n\t\t\t\t<Progress value={this.state.progress} color=\"green\" className={this.state.progress === null ? \"d-none\" : null} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport {EventEmitter} from \"events\";\n\nimport Button from \"./Button.js\";\n\nexport class MessageBoxEmitter extends EventEmitter {\n\n\tconstructor(){\n\t\tsuper();\n\n\t\tthis.data = {\n\t\t\tbuttons: [],\n\t\t\tfocusOnClose: null,\n\t\t\tsize: \"md\",\n\t\t\ttext: null,\n\t\t\ttitle: null,\n\t\t\tvisible: false\n\t\t}\n\n\t\tthis.lastHide = new Date().getTime();\n\t}\n\n\t// Adiciona um metodo a ser executado quando houver uma mudanca\n\taddChangeListener(callback){\n\t\tthis.on(\"change\", callback);\n\t}\n\n\t// Metodo responsavel em propagar as mudancas dos dados\n\tcommitChange(){\n\t\tthis.emit(\"change\");\n\t}\n\n\t// Captura os dados atuais da classe\n\tgetData(){\n\t\treturn Object.assign({}, this.data);\n\t}\n\n\t// Retorna o elemento modal da caixa de mensagem\n\tgetElement(){\n\t\tif(this.element === undefined){\n\t\t\tthis.element = $(\"#__messagebox\").get(0);\n\t\t}\n\t\treturn this.element;\n\t}\n\n\t// Remove um metodo a ser executado quando houver uma mudanca\n\tremoveChangeListener(callback){\n\t\tthis.removeListener(\"change\", callback);\n\t}\n\n\t// Esconde a caixa de mensagem\n\thide(){\n\t\tthis.lastHide = new Date().getTime();\n\t\tthis.data.visible = false;\n\t\tthis.commitChange();\n\t}\n\n\t// Exibe a caixa de mensagem\n\tshow(settings){\n\t\tsettings = $.extend({\n\t\t\ttitle: null,\n\t\t\ttext: null,\n\t\t\tfocusOnClose: null,\n\t\t\tsize: \"md\",\n\t\t\tvisible: true,\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Ok\",\n\t\t\t\t\tcolor: \"blue\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t}, settings);\n\n\t\tlet time = 0;\n\t\tlet minTime = 750;\n\t\tlet dif = new Date().getTime() - this.lastHide;\n\t\tif(dif < minTime){\n\t\t\ttime = minTime - dif;\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tthis.data = $.extend(this.data, settings);\n\t\t\tthis.commitChange();\n\t\t}, time);\n\t}\n}\n\nexport class MessageBoxModal extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onChangeData = this.onChangeData.bind(this);\n\n\t\tthis.state = props.MessageBoxEmitter.getData();\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.props.MessageBoxEmitter.addChangeListener(this.onChangeData);\n\n\t\tlet element = this.props.MessageBoxEmitter.getElement();\n\t\t$(element).on(\"shown.bs.modal\", () => {\n\t\t\t$(element).find(\".btn\").first().focus();\n\t\t});\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.props.MessageBoxEmitter.removeChangeListener(this.onChangeData);\n\t}\n\n\tonChangeData(){\n\t\tlet data = this.props.MessageBoxEmitter.getData();\n\t\tif(data.visible !== this.state.visible){\n\t\t\tlet element = this.props.MessageBoxEmitter.getElement();\n\t\t\tif(data.visible){\n\t\t\t\t$(element).modal(\"show\");\n\t\t\t}else{\n\t\t\t\t$(element).modal(\"hide\");\n\t\t\t}\n\t\t}\n\t\tthis.setState(data);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div id=\"__messagebox\" className=\"messagebox modal fade\" data-backdrop=\"static\">\n\t\t\t\t<div className={\"modal-dialog modal-\" + this.state.size}>\n\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t<h4 className=\"modal-title\">{this.state.title}</h4>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"modal-body\" dangerouslySetInnerHTML={{__html: this.state.text}}></div>\n\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t{this.state.buttons.map(function(button, i){\n\t\t\t\t\t\t\t\treturn <Button key={i} color={button.color} text={button.text} icon={button.icon} onClick={button.onClick} />\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\n\n/*\nwindow.MessageBox.show({\n\t\ttext: \"Texto 1\",\n\t\tbuttons: [\n\t\t\t{\n\t\t\t\ttext: \"Ok\",\n\t\t\t\tonClick: () => {\n\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\ttext: \"Texto 2\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t]\n});\n*/\n","const fs = window.require(\"fs\");\nconst os = window.require(\"os\");\nconst path = window.require(\"path\");\nconst childProcess = window.require(\"child_process\");\nconst serialNumberFunc = window.require(\"serial-number\");\n\nexport function applicationDirectory(){\n\tif(isDev()){\n\t\treturn path.resolve();\n\t}else{\n\t\treturn \"C:/SAT-Flex/resources/app/\";\n\t}\n}\n\nexport function currentDate(){\n\treturn currentTimestamp().split(\"T\")[0];\n}\n\nexport function currentTimestamp(){\n\tlet timezoneOffset = (new Date()).getTimezoneOffset() * 60000;\n\tlet localISOTimestamp = (new Date(Date.now() - timezoneOffset)).toISOString();\n\treturn localISOTimestamp;\n};\n\n// Calcula quantas casas deve usar para formatar um valor referente a quantidade\nexport function decimaisQuantidade(quantidade){\n\tlet decimal = String(quantidade).split(\".\")[1];\n\tif(decimal === undefined || decimal.length === 0 || parseInt(decimal, 10) === 0){\n\t\treturn 0;\n\t}else{\n\t\treturn 3;\n\t}\n}\n\nexport function defaultMessageBoxError(err){\n\tlet text = null;\n\tif(err === undefined || err === null){\n\t\ttext = \"Erro no identificado.\";\n\t}else if(typeof err === \"string\"){\n\t\ttext = err;\n\t}else{\n\t\ttext = err.message;\n\t\tconsole.log(err.stack);\n\t}\n\twindow.MessageBox.show({\n\t\ttitle: \"Houve uma falha\",\n\t\ttext: text\n\t});\n}\n\nexport function isDev(){\n\treturn (process.env.NODE_ENV === 'development');\n}\n\nexport async function serialNumber(){\n\tif(os.platform() === \"win32\"){\n\t\tlet command = \"wmic diskdrive get SerialNumber\";\n\t\tlet stdout = childProcess.execSync(command).toString();\n\t\tstdout = stdout.trim().split(\" \").splice(-1)[0].trim();\n\t\treturn stdout;\n\t}else{\n\t\treturn new Promise((resolve) => {\n\t\t\tserialNumberFunc((err, value) => {\n\t\t\t\tresolve(value);\n\t\t\t});\n\t\t});\n\t}\n}\n\nexport function sleep(ms){\n\treturn new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport function temporaryDirectory(){\n\tlet dirname = os.homedir() + \"/SAT-Flex/\";\n\treturn dirname;\n}\n\nexport function validarCNPJ(cnpj){\n\tcnpj = cnpj.replace(/[^\\d]+/g, \"\");\n\tif(cnpj === \"\"){\n\t\treturn false;\n\t}\n\tif(cnpj.length !== 14){\n\t\treturn false;\n\t}\n\tif(cnpj === \"00000000000000\" || cnpj === \"11111111111111\" || cnpj === \"22222222222222\" || cnpj === \"33333333333333\" || cnpj === \"44444444444444\" || cnpj === \"55555555555555\" || cnpj === \"66666666666666\" || cnpj === \"77777777777777\" || cnpj === \"88888888888888\" || cnpj === \"99999999999999\"){\n\t\treturn false;\n\t}\n\tvar tamanho = cnpj.length - 2;\n\tvar numeros = cnpj.substring(0, tamanho);\n\tvar digitos = cnpj.substring(tamanho);\n\tvar soma = 0;\n\tvar pos = tamanho - 7;\n\tfor(let i = tamanho; i >= 1; i--){\n\t\tsoma += numeros.charAt(tamanho - i) * pos--;\n\t\tif(pos < 2){\n\t\t\tpos = 9;\n\t\t}\n\t}\n\tvar resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\n\tif(parseInt(resultado, 10) !== parseInt(digitos.charAt(0), 10)){\n\t\treturn false;\n\t}\n\ttamanho = tamanho + 1;\n\tnumeros = cnpj.substring(0, tamanho);\n\tsoma = 0;\n\tpos = tamanho - 7;\n\tfor(let i = tamanho; i >= 1; i--){\n\t\tsoma += numeros.charAt(tamanho - i) * pos--;\n\t\tif(pos < 2){\n\t\t\tpos = 9;\n\t\t}\n\t}\n\tresultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\n\tif(parseInt(resultado, 10) !== parseInt(digitos.charAt(1), 10)){\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nexport function validarCPF(cpf){\n\tcpf = cpf.replace(/[^\\d]+/g, \"\");\n\tif(cpf === \"\"){\n\t\treturn false;\n\t}\n\tif(cpf.length !== 11 || cpf === \"00000000000\" || cpf === \"11111111111\" || cpf === \"22222222222\" || cpf === \"33333333333\" || cpf === \"44444444444\" || cpf === \"55555555555\" || cpf === \"66666666666\" || cpf === \"77777777777\" || cpf === \"88888888888\" || cpf === \"99999999999\"){\n\t\treturn false;\n\t}\n\tvar add = 0;\n\tfor(let i = 0; i < 9; i++){\n\t\tadd += parseInt(cpf.charAt(i), 10) * (10 - i);\n\t}\n\tvar rev = 11 - (add % 11);\n\tif(rev === 10 || rev === 11){\n\t\trev = 0;\n\t}\n\tif(parseInt(rev, 10) !== parseInt(cpf.charAt(9), 10)){\n\t\treturn false;\n\t}\n\tadd = 0;\n\tfor(let i = 0; i < 10; i++){\n\t\tadd += parseInt(cpf.charAt(i), 10) * (11 - i);\n\t}\n\trev = 11 - (add % 11);\n\tif(rev === 10 || rev === 11){\n\t\trev = 0;\n\t}\n\tif(parseInt(rev, 10) !== parseInt(cpf.charAt(10), 10)){\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nexport async function valorParametro(Pool, grupo, nome, callback){\n\tlet {rows} = await Pool.query(\"SELECT valor FROM parametro WHERE grupo = $1 AND nome = $2\", [grupo, nome]);\n\tif(rows.length === 0){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Banco de dados desatualizado\",\n\t\t\ttext: `Seu banco de dados est desatualizado para trabalhar com o aplicativo atual.<br>Atualize o banco de dados para continuar.<br>(Parmetro no encontrado: ${grupo}, ${nome})`\n\t\t});\n\t\treturn false;\n\t}\n\tlet valor = rows[0].valor;\n\tif(typeof callback === \"function\"){\n\t\tcallback(valor);\n\t}\n\treturn valor;\n}\n\nexport function writeTemporary(filename, content){\n\tlet dirname = temporaryDirectory();\n\tif(!fs.existsSync(dirname)){\n\t\tfs.mkdirSync(dirname);\n\t}\n\n\tlet finalName = dirname + filename;\n\n\tlet encode = undefined;\n\tif(filename.substr(-4) === \".zip\"){\n\t\tencode = \"binary\";\n\t}\n\n\tfs.writeFileSync(finalName, content, encode);\n\treturn finalName;\n}\n","import $ from \"jquery\";\nimport {serialNumber, valorParametro} from \"../def/function\";\n\nexport default class Servidor {\n\n   constructor(Pool){\n      this.Pool = Pool;\n\n      this.cnpj = null;\n      this.serialNumber = null;\n   }\n\n   async api(nome, dados = {}, success = ()=>{}, error = ()=>{}){\n      let url = \"http://server.satflex.com.br/serv/terminal/\" + nome + \".php\";\n\n      $.ajax({\n         url: url,\n         type: \"POST\",\n         data: JSON.stringify(dados),\n         success: (result) => {\n            success(JSON.parse(result))\n         },\n         error: error\n      });\n   }\n\n   async atualizarRequisicao(requisicao, success, fail){\n      await this.carregarDados();\n\n      let status = null;\n      switch(requisicao.status){\n         case \"0\":\n\t\t\t\tstatus = \"1\";\n\t\t\t\tbreak;\n\t\t\tcase \"1\":\n\t\t\tcase \"2\":\n\t\t\t\tstatus = \"2\";\n\t\t\t\tbreak;\n         default:\n            break;\n      }\n\n      this.api(\"atualizar_requisicao\", {\n         numeroserie: this.serialNumber,\n         cnpj: this.cnpj,\n         requisicao: {\n\t\t\t\tidrequisicao: requisicao.referencia,\n\t\t\t\tstatus: status,\n\t\t\t\tresposta: requisicao.resposta\n         }\n      }, (result) => {\n         switch(result.status){\n            case \"0\":\n               success();\n               break;\n            case \"2\":\n               fail(result.message);\n               break;\n            default:\n               break;\n         }\n      }, () => {\n         fail(\"Houve uma falha na conexo com o servidor.\");\n      });\n\t}\n\n   async carregarDados(){\n      if(!this.cnpj || !this.serialnumber){\n         this.cnpj = await valorParametro(this.Pool, \"EMITENTE\", \"CNPJ\");\n         this.serialNumber = await serialNumber();\n      }\n   }\n\n   async verificarRequisicao(success, fail){\n      await this.carregarDados();\n\n      this.api(\"verificar_requisicao\", {\n         numeroserie: this.serialNumber,\n         cnpj: this.cnpj\n      }, (result) => {\n         switch(result.status){\n            case \"0\":\n               success(result.requisicao);\n               break;\n            case \"2\":\n               fail(result.message);\n               break;\n            default:\n               break;\n         }\n      }, () => {\n         fail(\"Houve uma falha na conexo com o servidor.\");\n      });\n\t}\n\n\tasync verificarTerminal(){\n      return await new Promise(async (resolve) => {\n         await this.carregarDados();\n\n         this.api(\"verificar_terminal\", {\n            numeroserie: this.serialNumber,\n            cnpj: this.cnpj\n         }, (result) => {\n            switch(result.status){\n               case \"0\":\n                  resolve(result.terminal.status);\n                  break;\n               case \"2\":\n                  resolve(false);\n                  break;\n               default:\n                  break;\n            }\n         }, () => {\n            resolve(false);\n         });\n      });\n\t}\n\n}\n","const pg = window.require(\"pg\");\n\nexport function Client(){\n\treturn pg.Client(Configuration());\n}\n\nexport function Pool(){\n\treturn new pg.Pool(Configuration());\n}\n\nfunction Configuration(){\n\treturn {\n\t\tuser: \"postgres\",\n\t\thost: \"127.0.0.1\",\n\t\tdatabase: \"satflex\",\n\t\tpassword: \"postgres\",\n\t\tport: 5432\n\t};\n}\n","import React from \"react\";\nimport \"../css/Content.css\";\n\nexport default class Content extends React.Component {\n\n\trender(){\n\t\treturn (\n\t\t\t<div id=\"content\" {...this.props}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport $ from \"jquery\";\nimport \"floatthead\";\n\nimport \"../css/DataGrid.css\";\n\nexport default class DataGrid extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.calcBlankSpace = this.calcBlankSpace.bind(this);\n\t\tthis.elementScroll = this.elementScroll.bind(this);\n\t\tthis.onClickHeadCell = this.onClickHeadCell.bind(this);\n\t\tthis.onScroll = this.onScroll.bind(this);\n\t\tthis.updateBlankSpace = this.updateBlankSpace.bind(this);\n\t\tthis.updateReceivedProps = this.updateReceivedProps.bind(this);\n\n\t\tvar nextProps = this.updateReceivedProps(props.header, props.data);\n\n\t\tthis.state = {\n\t\t\tdata: nextProps.data,\n\t\t\theader: nextProps.header,\n\t\t\tlimit: 100,\n\t\t\toffset: 0,\n\t\t\tblankSpace: {\n\t\t\t\tbottom: 0,\n\t\t\t\ttop: 0\n\t\t\t}\n\t\t};\n\n\t\tthis.scrollActive = true;\n\t\tthis.longScroll = false;\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.elementScroll().addEventListener(\"scroll\", this.onScroll);\n\t\tthis.element = ReactDOM.findDOMNode(this);\n\t\twindow.grid = this.element;\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.elementScroll().removeEventListener(\"scroll\", this.onScroll);\n\t}\n\n\tcomponentDidUpdate(){\n\t\tif(this.referenceElement && !this.longScroll){\n\t\t\tvar eScroll = this.elementScroll();\n\t\t\tvar eRefTop = $(this.referenceElement.element).position().top;\n\t\t\tthis.scrollActive = false;\n\n\t\t\tvar scrollTop = $(eScroll).scrollTop() - (eRefTop - this.referenceElement.top);\n\t\t\tif(scrollTop > this.element.scrollHeight){\n\t\t\t\tscrollTop = this.element.scrollHeight;\n\t\t\t}\n\n\t\t\t$(eScroll).scrollTop(scrollTop);\n\t\t\tthis.scrollActive = true;\n\t\t}\n\n\t\tif(this.firstUpdateBlankSpace !== true){\n\t\t\tthis.firstUpdateBlankSpace = true;\n\t\t\tthis.updateBlankSpace();\n\t\t}\n\n\t\t$(this.element).children(\"table\").floatThead();\n\t\t$(this.element).children(\"table\").floatThead(\"reflow\");\n\t}\n\n\tcomponentWillUpdate(){\n\t\tvar table = $(this.element).children(\"table\"); // Corpo da grade\n\t\tvar tr = $(table).children(\"tbody\").children(); // Lista com todas as linhas da grade, inclusive o BlankSpace\n\t\tvar tr50 = $(tr).eq(Math.floor(this.state.limit * 0.5));\n\t\tif($(tr50).length > 0){\n\t\t\tthis.referenceElement = {\n\t\t\t\telement: tr50,\n\t\t\t\ttop: $(tr50).position().top\n\t\t\t};\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\t// Trata os dados recebidos\n\t\tnextProps = this.updateReceivedProps(nextProps.header, nextProps.data);\n\n\t\t// Atualiza os dados\n\t\tthis.setState({\n\t\t\theader: nextProps.header,\n\t\t\tdata: nextProps.data\n\t\t});\n\n\t\t// Atualiza o tamanho dos BlankSpaces\n\t\tthis.firstUpdateBlankSpace = false;\n\t}\n\n\telementIsVisibleByScroll(elem, parent){\n\t\tif(!$(this.element).is(\":visible\")){\n\t\t\treturn false;\n\t\t}\n\n\t\tparent = (parent === undefined ? window : parent);\n\n\t\tvar parentTop = $(parent).scrollTop();\n\t\tvar parentBottom = parentTop + $(parent).height();\n\n\t\tvar elemTop = (parent === window ? $(elem).offset().top : $(elem).position().top);\n\t\tvar elemBottom = elemTop + $(elem).height();\n\n\t\tif(elemTop < parentTop && elemBottom > parentTop){\n\t\t\treturn true;\n\t\t}else if(elemTop > parentTop && elemBottom < parentBottom){\n\t\t\treturn true;\n\t\t}else if(elemTop < parentBottom && elemBottom > parentBottom){\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n\n\telementScroll(){\n\t\tif(this.props.height === undefined){\n\t\t\treturn window;\n\t\t}else{\n\t\t\treturn ReactDOM.findDOMNode(this);\n\t\t}\n\t}\n\n\tonClickHeadCell(e){\n\t\t// Captura a chave do elemento clicado\n\t\tvar key = $(e.target).attr(\"cellkey\");\n\n\t\t// Atualiza a ordenacao no grid\n\t\tvar cell = null;\n\t\tvar hIndex = null;\n\t\tvar hOrder = null;\n\t\tvar header = this.state.header;\n\t\tfor(var i in header){\n\t\t\tcell = header[i];\n\t\t\tif(cell.key === key){\n\t\t\t\thIndex = i;\n\t\t\t\thOrder = (cell.order === 1 ? -1 : 1);\n\t\t\t\tcell.order = hOrder;\n\t\t\t}else{\n\t\t\t\tcell.order = 0;\n\t\t\t}\n\t\t\theader[i] = cell;\n\t\t}\n\n\t\t// Atualiza a ordem dos dados\n\t\tvar data = this.state.data;\n\t\tdata.sort(function(a, b){\n\t\t\tif(a[\"data\"][hIndex][\"text\"] < b[\"data\"][hIndex][\"text\"])\n\t\t\t\treturn (hOrder === 1 ? -1 : 1);\n\t\t\tif(a[\"data\"][hIndex][\"text\"] > b[\"data\"][hIndex][\"text\"])\n\t\t\t\treturn (hOrder === 1 ? 1 : -1);\n\t\t\treturn 0;\n\t\t});\n\n\t\t// Atualiza o header no state\n\t\tthis.setState({\n\t\t\theader: header,\n\t\t\tdata: data\n\t\t});\n\t}\n\n\tonScroll(){\n\t\tif(!this.scrollActive){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(!$(this.element).is(\":visible\")){\n\t\t\treturn true;\n\t\t}\n\n\t\tvar eScroll = this.elementScroll(); // Elemento que esta controlando o Scroll (window, ou div principal da grade)\n\t\tif(this.currentScroll === undefined || Math.abs(this.currentScroll - $(eScroll).scrollTop()) > 50){\n\t\t\tthis.currentScroll = $(eScroll).scrollTop();\n\t\t}else{\n\t\t\treturn true;\n\t\t}\n\n\t\tvar datagrid = this.element; // Elemento principal da grade (div)\n\t\tvar table = $(datagrid).children(\"table\"); // Tabela da grade\n\t\tvar thead = $(table).children(\"thead\"); // Header da grade\n\t\tvar tr = $(table).children(\"tbody\").children(); // Lista com todas as linhas da grade, inclusive o BlankSpace\n\t\tvar bsFirst = $(tr).first(); // BlankSpace superior\n\t\tvar bsLast = $(tr).last(); // BlankSpace inferior\n\t\tvar trFirst = $(bsFirst).next(); // Primeira linha da grade, ignorando o BlankSpace\n\t\tvar trLast = $(bsLast).prev(); // Ultima linha da grade, ignorando o BlankSpace\n\t\tvar tr20 = $(tr).eq(Math.floor(this.state.limit * 0.2)); // Linha de posicao equivalente a 20% do total de linhas\n\t\tvar tr80 = $(tr).eq(Math.floor(this.state.limit * 0.8)); // Linha de posicao equivalente a 80% do total de linhas\n\n\t\tvar hTop = ($(thead).position().top - $(eScroll).scrollTop()) * -1;\n\t\tif(hTop < 0){\n\t\t\thTop = 0;\n\t\t}\n\n\t\tvar limit = this.state.limit;\n\t\tvar offset = this.state.offset;\n\t\tvar count = this.state.data.length;\n\n\t\tthis.longScroll = false;\n\n\t\tif(offset > 0 && (this.elementIsVisibleByScroll(trFirst, eScroll) || this.elementIsVisibleByScroll(tr20, eScroll))){\n\t\t\toffset = offset - Math.floor(limit / 2);\n\t\t\tif(offset < 0){\n\t\t\t\toffset = 0;\n\t\t\t}\n\t\t}else if(offset + limit < count && (this.elementIsVisibleByScroll(trLast, eScroll) || this.elementIsVisibleByScroll(tr80, eScroll))){\n\t\t\toffset = offset + Math.floor(limit / 2);\n\t\t}else if((this.elementIsVisibleByScroll(bsFirst, eScroll) || this.elementIsVisibleByScroll(bsLast, eScroll)) && (!this.elementIsVisibleByScroll(trFirst, eScroll) && !this.elementIsVisibleByScroll(trLast, eScroll))){\n\t\t\tvar currScroll = null;\n\t\t\tif(eScroll === window){\n\t\t\t\tcurrScroll = ($(eScroll).scrollTop() - $(datagrid).offset().top) / $(datagrid).height();\n\t\t\t}else{\n\t\t\t\tcurrScroll = $(eScroll).scrollTop() / $(table).height();\n\t\t\t}\n\t\t\toffset = Math.round(this.state.data.length * currScroll);\n\t\t\tthis.longScroll = true;\n\t\t}\n\n\t\tif(offset > count - limit){\n\t\t\toffset = count - limit;\n\t\t}\n\t\tif(offset < 0){\n\t\t\toffset = 0;\n\t\t}\n\n\t\tif(offset !== this.state.offset){\n\t\t\tvar blankSpace = this.calcBlankSpace(offset);\n\n\t\t\tif(this.initialBlankSpace === undefined){\n\t\t\t\tthis.initialBlankSpace = blankSpace;\n\t\t\t\tthis.initialBlankSpace.height = blankSpace.top + blankSpace.bottom;\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\toffset: offset,\n\t\t\t\tblankSpace: blankSpace\n\t\t\t});\n\t\t}\n\t}\n\n\tcalcBlankSpace(offset){\n\t\toffset = (offset === undefined ? this.state.offset : offset);\n\n\t\tvar data = this.state.data;\n\t\tvar limit = this.state.limit;\n\n\t\tvar table = $(this.element).children(\".table\"); // Tabela da grade\n\t\tvar tr = $(table).children(\"tbody\").children(); // Lista com todas as linhas da grade, inclusive o BlankSpace\n\t\tvar bsFirst = $(tr).first(); // BlankSpace superior\n\t\tvar trFirst = $(bsFirst).next(); // Primeira linha da grade, ignorando o BlankSpace\n\t\tvar trHeight = $(trFirst).height() - 5;\n\n\t\tvar top = offset * trHeight;\n\t\tvar bottom = (data.length - offset - limit) * trHeight;\n\n\t\tif(this.longScroll && this.initialBlankSpace !== undefined){\n\t\t\tvar eScroll = this.elementScroll();\n\n\t\t\tvar rowsHeight = $(tr).not(\":first, :last\").map(function(){\n\t\t\t\treturn $(this).height();\n\t\t\t}).get().reduce(((a, b) => a + b), 0);\n\n\t\t\ttop = $(eScroll).scrollTop() - (trHeight * 10);\n\t\t\tbottom = $(table).height() - rowsHeight - top;\n\n\t\t\tif(top > this.initialBlankSpace.height){\n\t\t\t\ttop = this.initialBlankSpace.height;\n\t\t\t}\n\t\t\tif(bottom > this.initialBlankSpace.height){\n\t\t\t\tbottom = this.initialBlankSpace.height;\n\t\t\t}\n\t\t}\n\n\t\tif(top < 0){\n\t\t\ttop = 0;\n\t\t}\n\t\tif(bottom < 0){\n\t\t\tbottom = 0;\n\t\t}\n\n\t\treturn {\n\t\t\ttop: top,\n\t\t\tbottom: bottom\n\t\t};\n\t}\n\n\tupdateBlankSpace(){\n\t\tthis.setState({\n\t\t\tblankSpace: this.calcBlankSpace()\n\t\t});\n\t}\n\n\tupdateReceivedProps(header, data){\n\t\theader = (header === undefined ? this.state.header : header);\n\t\tdata = (data === undefined ? this.state.data : data);\n\n\t\t// Trata os dados do cabecalho\n\t\tfor(let i in header){\n\t\t\tlet cell = header[i];\n\n\t\t\tif(typeof cell === \"string\"){\n\t\t\t\tcell = {\n\t\t\t\t\t\"text\": cell\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcell = $.extend({\n\t\t\t\talign: \"left\",\n\t\t\t\tkey: i,\n\t\t\t\torder: 0,\n\t\t\t\ttext: \"\"\n\t\t\t}, cell);\n\n\t\t\theader[i] = cell;\n\t\t}\n\n\t\t// Trata os dados principais da grade\n\t\tvar key = 0;\n\t\tfor(let i in data){\n\t\t\tlet row = data[i];\n\n\t\t\tif($.isArray(row)){\n\t\t\t\trow = {\n\t\t\t\t\tdata: row\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tdata[i] = row;\n\n\t\t\tfor(let j in data[i].data){\n\t\t\t\tlet cell = data[i].data[j];\n\n\t\t\t\tif(typeof cell === \"string\"){\n\t\t\t\t\tcell = {\n\t\t\t\t\t\t\"text\": cell\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tcell = $.extend({\n\t\t\t\t\talign: \"left\",\n\t\t\t\t\tkey: key++,\n\t\t\t\t\ttext: \"\",\n\t\t\t\t\twidth: null\n\t\t\t\t}, cell);\n\n\t\t\t\tdata[i].data[j] = cell;\n\t\t\t}\n\t\t}\n\n\t\treturn {header: header, data: data};\n\t}\n\n\trender(){\n\t\tvar data = this.state.data.slice(this.state.offset, (this.state.offset + this.state.limit));\n\t\treturn (\n\t\t\t<div className=\"DataGrid\" style={{height: this.props.height}}>\n\t\t\t\t<table className={\"DataGridTable table table-striped table-hover \" + this.props.className}>\n\t\t\t\t\t<DataGridHead header={this.state.header} onClickHeadCell={this.onClickHeadCell} />\n\t\t\t\t\t<DataGridBody data={data} blankSpace={this.state.blankSpace} />\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass DataGridBody extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<tbody>\n\t\t\t\t<DataGridBlankSpace height={this.props.blankSpace.top} />\n\t\t\t\t\t{this.props.data.map(function(row, i){\n\t\t\t\t\t\treturn <DataGridBodyRow row={row} key={i} />\n\t\t\t\t\t})}\n\t\t\t\t<DataGridBlankSpace height={this.props.blankSpace.bottom} />\n\t\t\t</tbody>\n\t\t)\n\t}\n}\n\nclass DataGridBodyCell extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<td className={\"text-\" + this.props.cell.align} onClick={this.props.cell.onClick} style={{width: this.props.cell.width}}>{this.props.cell.text}</td>\n\t\t)\n\t}\n}\n\nclass DataGridBodyRow extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<tr onClick={this.props.row.onClick}>\n\t\t\t\t{this.props.row.data.map(function(cell, i){\n\t\t\t\t\treturn <DataGridBodyCell cell={cell} key={i} />\n\t\t\t\t})}\n\t\t\t</tr>\n\t\t)\n\t}\n}\n\nclass DataGridHead extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t{this.props.header.map((cell, i) => {\n\t\t\t\t\t\treturn <DataGridHeadCell cell={cell} onClick={this.props.onClickHeadCell} key={i} />\n\t\t\t\t\t})}\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t)\n\t}\n\n}\n\nclass DataGridHeadCell extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<th className={\"text-\"+this.props.cell.align + \" DataGridHeadCellOrder-\"+this.props.cell.order} onClick={this.props.onClick} cellkey={this.props.cell.key}>\n\t\t\t\t{this.props.cell.text}\n\t\t\t</th>\n\t\t)\n\t}\n}\n\nclass DataGridBlankSpace extends React.Component {\n\trender(){\n\t\tvar height = (this.props.height === undefined ? 0 : this.props.height);\n\n\t\treturn (\n\t\t\t<tr>\n\t\t\t\t<td style={{border: 0, height: height, padding: 0}}></td>\n\t\t\t</tr>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {SwatchesPicker} from \"react-color\";\nimport $ from \"jquery\";\n\nimport \"../css/ColorInput.css\";\n\nexport default class ColorInput extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpicker: false,\n\t\t\tvalue: props.value\n\t\t};\n\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.onClick = this.onClick.bind(this);\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tvalue: nextProps.value\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tdocument.addEventListener(\"click\", this.onDocumentClick);\n\t\tthis.element = ReactDOM.findDOMNode(this);\n\t}\n\n\tcomponentWillUnmount(){\n\t\tdocument.removeEventListener(\"click\", this.onDocumentClick);\n\t}\n\n\tonChange(color, event){\n\t\tevent.persist();\n\n\t\tthis.setState({\n\t\t\tpicker: false,\n\t\t\tvalue: color.hex\n\t\t}, () => {\n\t\t\tif(this.props.onChange){\n\t\t\t\tlet target = $(event.target).parents(\"[class*='-picker']\").first().prev().get(0);\n\t\t\t\tevent.target = target;\n\t\t\t\tthis.props.onChange(event);\n\t\t\t}\n\t\t});\n\t}\n\n\tonClick(event){\n\t\tthis.setState({\n\t\t\tpicker: true\n\t\t});\n\t\tevent.preventDefault();\n\t}\n\n\tonDocumentClick(event){\n\t\tif(this.state.picker){\n\t\t\tlet found = false;\n\t\t\t$(this.element).find(\"*\").each((i, element) => {\n\t\t\t\tif(event.target === element){\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(!found){\n\t\t\t\tthis.setState({\n\t\t\t\t\tpicker: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\trender(){\n\t\tlet props = Object.assign({}, this.props);\n\n\t\tdelete props.value;\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<input {...props} value={this.state.value} onClick={this.onClick} />\n\t\t\t\t<SwatchesPicker value={this.state.value} onChange={this.onChange} className={this.state.picker ? null : \"d-none\"} />\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport $ from \"jquery\";\n\nimport ReactSelect from \"react-select\";\n//import \"react-select/dist/react-select.css\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class Select extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\toptions: (props.options === undefined ? [] : props.options),\n\t\t\tvalue: (props.value === undefined ? \"\" : props.value)\n\t\t};\n\n\t\tthis.getDBOptions = this.getDBOptions.bind(this);\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.verifyComponentId = this.verifyComponentId.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.element = ReactDOM.findDOMNode(this);\n\t\tthis.verifyComponentId();\n\t\tthis.getDBOptions();\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.getDBOptions(nextProps);\n\n\t\tif(nextProps.value !== this.props.value){\n\t\t\tthis.setState({\n\t\t\t\tvalue: nextProps.value\n\t\t\t});\n\t\t}\n\t}\n\n\tgetDBOptions(props){\n\t\tprops = (props === undefined ? this.props : props);\n\n\t\tif(props.dbtable === undefined){\n\t\t\treturn true;\n\t\t}\n\n\t\tvar dbtable = props.dbtable;\n\t\tvar dbcolumn = props.dbcolumn;\n\t\tvar dbfilter = props.dbfilter;\n\t\tvar dbparent = props.dbparent;\n\n\t\tif(dbcolumn === undefined){\n\t\t\tdbcolumn = \"descricao\";\n\t\t}\n\t\tif(dbfilter === undefined && dbparent !== undefined){\n\t\t\tlet parent = document.getElementById(dbparent);\n\t\t\tdbfilter = \"id\" + $(parent).attr(\"dbtable\") + \"=\" + $(parent).val();\n\t\t}\n\n\t\tif(this.ajaxDBOptions !== null && this.ajaxDBOptions !== undefined){\n\t\t\tthis.ajaxDBOptions.abort();\n\t\t\tthis.ajaxDBOptions = null;\n\t\t}\n\n\t\tlet query = \"SELECT id\"+dbtable+\", \"+dbcolumn+\" FROM \"+dbtable+\" ORDER BY 2\";\n\n\t\tthis.props.Pool.query({text: query, rowMode: \"array\"}, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet options = [];\n\t\t\tfor(let i in res.rows){\n\t\t\t\tlet row = res.rows[i];\n\t\t\t\toptions.push({value: row[0], label: row[1]});\n\t\t\t}\n\t\t\tif(this.state.options !== options){\n\t\t\t\tthis.setState({\n\t\t\t\t\toptions: options\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tonChange(option){\n\t\tlet value = (option ? option.value : null);\n\t\tthis.setState({\n\t\t\tvalue: value\n\t\t});\n\n\t\tif(this.props.onChange){\n\t\t\tlet event = {target: {id: this.props.id, value: value}};\n\t\t\tthis.props.onChange(event);\n\t\t}\n\t}\n\n\tverifyComponentId(){\n\t\tif(this.props.id){\n\t\t\tlet input = $(\"[name='\" + this.props.id + \"']\");\n\t\t\tif(input.length > 0){\n\t\t\t\tinput.attr(\"id\", $(input).attr(\"name\"));\n\t\t\t}\n\t\t}\n\t}\n\n\trender(){\n\t\t// Captura as opcoes enviadas\n\t\tvar options = this.state.options;\n\n\t\t// Verifica se as opcoes estao no formato JSON e converte para array de JSON\n\t\tif(!Array.isArray(options)){\n\t\t\tvar optionsAux = [];\n\t\t\tfor(var value in options){\n\t\t\t\t// Estrutura padrao das opcoes do Select\n\t\t\t\toptionsAux.push({\n\t\t\t\t\tvalue: value,\n\t\t\t\t\tlabel: options[value]\n\t\t\t\t});\n\t\t\t}\n\t\t\toptions = optionsAux;\n\t\t}\n\n\t\t// Se nao foi passado um array como opcao, criar um array em branco\n\t\tif(!Array.isArray(options)){\n\t\t\toptions = [];\n\t\t}\n\n\t\treturn (\n\t\t\t<ReactSelect\n\t\t\t\tclearable={false}\n\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\tid={this.props.id}\n\t\t\t\tname={this.props.id}\n\t\t\t\tonChange={this.onChange}\n\t\t\t\tonInputChange={this.verifyComponentId}\n\t\t\t\toptions={options}\n\t\t\t\tplaceholder=\"\"\n\t\t\t\tsearchable={false}\n\t\t\t\tvalue={(this.state.value ? this.state.value : this.props.defaultValue)}\n\t\t\t/>\n\t\t);\n\t}\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport $ from \"jquery\";\n\nimport ColorInput from \"./ColorInput.js\";\nimport Select from \"./Select.js\";\n\nimport \"../css/FormControl.css\";\n\nexport default class FormControl extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onFocus = this.onFocus.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.element = ReactDOM.findDOMNode(this);\n\t}\n\n\tonFocus(){\n\t\tif(this.props.InformarValor){\n\t\t\tlet settings = this.props.InformarValor;\n\t\t\tif(settings.success === undefined){\n\t\t\t\tsettings.success = (valor) => {\n\t\t\t\t\t$(this.element).val(valor);\n\t\t\t\t\tif(this.props.onChange){\n\t\t\t\t\t\tlet event = {target: {id: this.props.id, value: valor}};\n\t\t\t\t\t\tthis.props.onChange(event);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\twindow.InformarValor.show(settings);\n\t\t}\n\t}\n\n\trender(){\n\t\tlet props = Object.assign({}, this.props);\n\n\t\tdelete props.InformarValor;\n\n\t\tlet value = props.value;\n\t\tif(value === null){\n\t\t\tvalue = \"\";\n\t\t}\n\n\t\t// Tratamento feito para para os modais de cadastro de produto e categoria\n\t\tif(value === undefined && props.id && props.id.substr(0, 5) === \"modal\"){\n\t\t\tvalue = \"\";\n\t\t}\n\n\t\tlet className = (props.className ? props.className.split(\" \") : []);\n\t\tclassName.push(\"form-control\");\n\n\t\tif(props.size){\n\t\t\tclassName.push(\"form-control-\" + props.size);\n\t\t}\n\n\t\tif(props.type === \"date\"){\n\t\t\tclassName.push(\"text-center\");\n\t\t}\n\n\t\tprops.className = className.join(\" \");\n\t\tprops.value = value;\n\n\t\tif(this.props.onFocus === undefined){\n\t\t\tprops.onFocus = this.onFocus;\n\t\t}\n\n\t\tswitch(props.type){\n\t\t\t// Se o componente for do tipo Checkbox\n\t\t\tcase \"checkbox\":\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"form-check\">\n\t\t\t\t\t\t<input type=\"checkbox\" id={this.props.id} className=\"form-check-input\" checked={value === \"S\"} defaultValue={this.props.defaultValue} disabled={this.props.disabled} onChange={this.props.onChange} onClick={this.props.onClick} />\n\t\t\t\t\t\t<label className=\"form-check-label\" htmlFor={this.props.id}>{this.props.label}</label>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\n\t\t\t// Se o componente for do tipo Color\n\t\t\tcase \"color\":\n\t\t\t\treturn (\n\t\t\t\t\t<ColorInput {...props} />\n\t\t\t\t)\n\n\t\t\t// Se o componente for do tipo Select\n\t\t\tcase \"select\":\n\t\t\t\tdelete props.type;\n\t\t\t\treturn (\n\t\t\t\t\t<Select {...props} />\n\t\t\t\t)\n\n\t\t\t// Se o componente for do tipo Select\n\t\t\tcase \"textarea\":\n\t\t\t\tdelete props.type;\n\t\t\t\treturn (\n\t\t\t\t\t<textarea {...props}></textarea>\n\t\t\t\t)\n\n\t\t\t// Se o componente for algum input padrao que nao necessita ser personalizado\n\t\t\tdefault:\n\t\t\t\treturn (\n\t\t\t\t\t<input {...props} />\n\t\t\t\t)\n\t\t}\n\t}\n}\n","import React from \"react\";\nimport \"../css/Label.css\";\n\nexport default class Label extends React.Component {\n\n\trender(){\n\t\treturn (\n\t\t\t<label {...this.props}>\n\t\t\t\t{this.props.children}\n\t\t\t</label>\n\t\t);\n\t}\n\n}\n","import React from \"react\";\nimport FormControl from \"./FormControl.js\";\nimport Label from \"./Label.js\";\nimport \"../css/FormGroup.css\";\n\nexport default class FormGroup extends React.Component {\n\n\trender(){\n\t\tlet props = Object.assign({}, this.props);\n\n\t\tlet className = [\"form-group\"];\n\t\tif(props.className){\n\t\t\tclassName.push(props.className);\n\t\t}\n\t\tif(props.warning){\n\t\t\tclassName.push(\"form-group-warning\");\n\t\t\tdelete props.warning;\n\t\t}\n\n\t\tif(props.InformarValor){\n\t\t\tif(props.InformarValor.title === undefined){\n\t\t\t\tprops.InformarValor.title = this.props.label;\n\t\t\t}\n\t\t}\n\n\t\tprops.className = props.inputClassName;\n\t\tdelete props.inputClassName;\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{[\"checkbox\"].indexOf(this.props.type) > -1 ? null : <Label htmlFor={this.props.id}>{this.props.label}</Label>}\n\t\t\t\t<FormControl {...props} />\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nexport default class Hr extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<hr {...this.props} />\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport FormGroup from \"../com/FormGroup.js\";\nimport Hr from \"../com/Hr.js\";\nimport Modal from \"../com/Modal.js\";\nimport Row from \"../com/Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class ModalCategoria extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tshow: this.props.show,\n\t\t\tshowDiv: \"principal\",\n\t\t\ttitle: null\n\t\t};\n\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.changeDiv = this.changeDiv.bind(this);\n\t\tthis.changeTitle = this.changeTitle.bind(this);\n\t\tthis.excluir = this.excluir.bind(this);\n\t\tthis.gravar = this.gravar.bind(this);\n\t\tthis.limpar = this.limpar.bind(this);\n\t\tthis.onChangeNcm = this.onChangeNcm.bind(this);\n\t\tthis.onChangeInput = this.onChangeInput.bind(this);\n\t\tthis.onChangeSincTributacao = this.onChangeSincTributacao.bind(this);\n\t\tthis.sincronizarTributacao = this.sincronizarTributacao.bind(this);\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tcarregar(idcategoria, callback){\n\t\tlet query = [\n\t\t\t\"SELECT categoria.descricao, categoria.dthrcriacao, categoria.cor,\",\n\t\t\t\"  categoria.sinctributacao, ncm.codigoncm, categoria.origem,\",\n\t\t\t\"  categoria.cfop, categoria.csosn, categoria.aliqicms, \",\n\t\t\t\"  categoria.cstpis, categoria.aliqpis, categoria.cstcofins, \",\n\t\t\t\"  categoria.aliqcofins, categoria.codcontribsocial, categoria.cest\",\n\t\t\t\"FROM categoria\",\n\t\t\t\"LEFT JOIN ncm USING (idncm)\",\n\t\t\t\"WHERE categoria.idcategoria = $1\"\n\t\t].join(\" \");\n\n\t\tthis.props.Pool.query(query, [idcategoria], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(res.rows.length === 0){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Categoria no encontrada\",\n\t\t\t\t\ttext: \"A categoria selecionada no pde ser encontrada.\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet state = {};\n\t\t\tlet row = res.rows[0];\n\n\t\t\tfor(let id in row){\n\t\t\t\tlet value = row[id];\n\t\t\t\tswitch(id){\n\t\t\t\t\tcase \"dthrcriacao\":\n\t\t\t\t\t\tvalue = value.toLocaleString();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tvalue = value.format(2, \",\", \".\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tstate[\"input_\" + id] = value;\n\t\t\t}\n\t\t\tthis.setState(state);\n\n\t\t\tif(typeof callback === \"function\"){\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t}\n\n\tchangeDiv(name){\n\t\tthis.setState({\n\t\t\tshowDiv: name\n\t\t});\n\t}\n\n\tchangeTitle(props){\n\t\tif(props.idcategoria){\n\t\t\tprops.Pool.query(\"SELECT descricao FROM categoria WHERE idcategoria = $1\", [props.idcategoria], (err, res) => {\n\t\t\t\tif(err){\n\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\ttitle: \"Alterando categoria: \" + res.rows[0].descricao\n\t\t\t\t});\n\t\t\t});\n\t\t}else{\n\t\t\tthis.setState({\n\t\t\t\ttitle: \"Criando nova categoria\"\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tif(!nextProps.show){\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.changeTitle(nextProps);\n\n\t\tlet updateShowState = () => {\n\t\t\tthis.setState({\n\t\t\t\tshow: nextProps.show\n\t\t\t});\n\t\t};\n\n\t\tif(nextProps.idcategoria){\n\t\t\tthis.carregar(nextProps.idcategoria, updateShowState);\n\t\t}else{\n\t\t\tthis.limpar();\n\t\t\tupdateShowState();\n\t\t}\n\t}\n\n\texcluir(){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Exclur categoria\",\n\t\t\ttext: \"Tem certeza que deseja exclur a categoria <b>\" + this.state.input_descricao + \"</b>?\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tthis.props.Pool.query(\"DELETE FROM categoria WHERE idcategoria = $1\", [this.props.idcategoria], (err, res) => {\n\t\t\t\t\t\t\tif(err){\n\t\t\t\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tshow: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\twindow.FastMessage.show(\"Categoria excluda com sucesso.\");\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"No\",\n\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t})\n\t}\n\n\tasync gravar(){\n\t\tlet query = null;\n\n\t\tlet columns = [];\n\t\tlet values = [];\n\t\tfor(let name in this.state){\n\t\t\tif(name.substr(0, 6) === \"input_\"){\n\t\t\t\tlet name2 = name.replace(\"input_\", \"\");\n\t\t\t\tlet value = this.state[name];\n\n\t\t\t\tif(name2 === \"codigoncm\" && value){\n\t\t\t\t\ttry{\n\t\t\t\t\t\tlet res = await this.props.Pool.query(\"SELECT idncm FROM ncm WHERE codigoncm = $1\", [value]);\n\t\t\t\t\t\tif(res.rows.length === 0){\n\t\t\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\t\t\ttitle: \"NCM inexistente\",\n\t\t\t\t\t\t\t\ttext: \"O cdigo de NCM \" + value + \" no pde ser encontrado.<br>Verifique se foi informado corretamente.\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tname2 = \"idncm\";\n\t\t\t\t\t\tvalue = res.rows[0].idncm;\n\t\t\t\t\t}catch(err) {\n\t\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif([\"idcategoria\", \"dthrcriacao\"].indexOf(name2) > -1){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tswitch(name2){\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tif(value){\n\t\t\t\t\t\t\tvalue = value.toFloat();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcolumns.push(name2);\n\t\t\t\tvalues.push(value);\n\t\t\t}\n\t\t}\n\n\t\tif(this.props.idcategoria){\n\t\t\tlet num = 1;\n\t\t\tlet sets = [];\n\t\t\tfor(let i in columns){\n\t\t\t\tsets.push(columns[i] + \" = $\" + num++);\n\t\t\t}\n\t\t\tquery = \"UPDATE categoria SET \" + sets.join(\", \") + \" WHERE idcategoria = \" + this.props.idcategoria;\n\t\t}else{\n\t\t\tlet sets = [];\n\t\t\tfor(let i = 0; i < columns.length; i++){\n\t\t\t\tsets.push(\"$\" + (i + 1));\n\t\t\t}\n\t\t\tquery = \"INSERT INTO categoria (\" + columns.join(\", \") + \") VALUES (\" + sets.join(\", \") + \")\";\n\t\t}\n\n\t\tthis.props.Pool.query(query, values, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.FastMessage.show(\"Categoria gravada com sucesso.\");\n\t\t});\n\t}\n\n\tlimpar(){\n\t\tlet state = {};\n\t\tfor(let name in this.state){\n\t\t\tif(name.substr(0, 6) === \"input_\"){\n\t\t\t\tstate[name] =  null;\n\t\t\t}\n\t\t}\n\t\tthis.setState(state);\n\t}\n\n\tonChangeInput(event, callback){\n\t\tlet element = event.target;\n\t\tlet id = element.id.replace(\"modalcategoria-\", \"\");\n\t\tlet value = element.value;\n\t\tif(element.type === \"checkbox\"){\n\t\t\tvalue = (element.checked ? \"S\" : \"N\");\n\t\t}\n\n\t\tthis.setState({\n\t\t\t[\"input_\" + id]: value\n\t    }, callback);\n\t}\n\n\tonChangeNcm(event){\n\t\tthis.onChangeInput(event, () => {\n\t\t\tthis.sincronizarTributacao();\n\t\t});\n\t}\n\n\tonChangeSincTributacao(event){\n\t\tthis.onChangeInput(event, () => {\n\t\t\tthis.sincronizarTributacao();\n\t\t});\n\t}\n\n\tsincronizarTributacao(){\n\t\tif(this.state.input_sinctributacao !== \"S\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tlet query = [\n\t\t\t\"SELECT origem, cfop, csosn, aliqicms, cstpis, aliqpis, \",\n\t\t\t\"  cstcofins, aliqcofins, codcontribsocial, cest\",\n\t\t\t\"FROM ncm\",\n\t\t\t\"WHERE codigoncm = $1\"\n\t\t].join(\" \");\n\n\t\tthis.props.Pool.query(query, [this.state.input_codigoncm], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(res.rows.length === 0){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"NCM no encontrado\",\n\t\t\t\t\ttext: \"O NCM informado na categoria no pde ser encontrado.\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet state = {};\n\t\t\tlet row = res.rows[0];\n\t\t\tfor(let id in row){\n\t\t\t\tlet value = row[id];\n\t\t\t\tswitch(id){\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tvalue = value.format(2, \",\", \".\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tstate[\"input_\" + id] = value;\n\t\t\t}\n\t\t\tthis.setState(state);\n\t\t});\n\t}\n\n\tshouldComponentUpdate(nextProps){\n\t\treturn nextProps.show;\n\t}\n\n\trender(){\n\t\tlet origemOptions = {\n\t\t\t\"0\": \"0 - Nacional, exceto as indicadas nos cdigos 3, 4, 5 e 8\",\n\t\t\t\"1\": \"1 - Estrangeira - Importao direta, exceto a indicada no cdigo 6\",\n\t\t\t\"2\": \"2 - Estrangeira - Adquirida no mercado interno, exceto a indicada no cdigo 7\",\n\t\t\t\"3\": \"3 - Nacional, mercadoria ou bem com Contedo de Importao superior a 40% e inferior ou igual a 70%\",\n\t\t\t\"4\": \"4 - Nacional, cuja produo tenha sido feita em conformidade com os processos produtivos bsicos de que tratam o Decreto-Lei n 288/67, e as Leis ns 8.248/91, 8.387/91, 10.176/01 e 11.484/ 07\",\n\t\t\t\"5\": \"5 - Nacional, mercadoria ou bem com Contedo de Importao inferior ou igual a 40%\",\n\t\t\t\"6\": \"6 - Estrangeira - Importao direta, sem similar nacional, constante em lista da Resoluo CAMEX n 79/2012 e gs natural\",\n\t\t\t\"7\": \"7 - Estrangeira - Adquirida no mercado interno, sem similar nacional, constante em lista da Resoluo CAMEX n 79/2012 e gs natural\",\n\t\t\t\"8\": \"8 - Nacional, mercadoria ou bem com Contedo de Importao superior a 70%\"\n\t\t};\n\n\t\treturn (\n\t\t\t<Modal title={this.state.title} size=\"lg\" show={this.state.show} beforeClose={this.props.beforeClose} afterClose={this.props.afterClose} closeOnOutClick={false}>\n\t\t\t\t<Row>\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-descricao\" className=\"col-5\" label=\"Descrio\" value={this.state.input_descricao} onChange={this.onChangeInput} />\n\t\t\t\t\t<FormGroup type=\"color\" id=\"modalcategoria-cor\" className=\"col-3\" label=\"Cor representativa\" value={this.state.input_cor} onChange={this.onChangeInput} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-dthrcriacao\" className=\"col-4\" label=\"Criado em\" readOnly={true} value={this.state.input_dthrcriacao} onChange={this.onChangeInput} disabled={true} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-codigoncm\" label=\"NCM da categoria\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"9999.99.99\"}} value={this.state.input_codigoncm} onChange={this.onChangeNcm} />\n\t\t\t\t\t<FormGroup type=\"checkbox\" id=\"modalcategoria-sinctributacao\" label=\"Usar as mesmas tributaes da categoria\" className=\"col-9\" value={this.state.input_sinctributacao} onChange={this.onChangeSincTributacao} />\n\t\t\t\t\t<FormGroup type=\"select\" id=\"modalcategoria-origem\" className=\"col-6\" label=\"Origem do categoria\" options={origemOptions} value={this.state.input_origem} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-cfop\" label=\"CFOP\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"9.999\"}} value={this.state.input_cfop} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"select\" id=\"modalcategoria-csosn\" className=\"col-3\" inputClassName=\"text-center\" label=\"CSOSN\" options={{\"102\": \"102\", \"300\": \"300\", \"400\": \"400\", \"500\": \"500\"}} value={this.state.input_csosn} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-aliqicms\" label=\"Alquota de ICMS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqicms} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-cstpis\" label=\"CST do PIS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_cstpis} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-aliqpis\" label=\"Alquota de PIS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqpis} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-cstcofins\" label=\"CST do Cofins\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_cstcofins} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-aliqcofins\" label=\"Alquota de Cofins\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqcofins} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-codcontribsocial\" label=\"Contribuio social\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_codcontribsocial} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-cest\" label=\"CEST\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99.999.99\"}} value={this.state.input_cest} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t</Row>\n\t\t\t\t<Hr className=\"mt-0\" />\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Button text=\"Exclur\" icon=\"bin\" color=\"red\" onClick={this.excluir} className={this.props.idcategoria ? \"\" : \"d-none\"} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\" className=\"text-right\">\n\t\t\t\t\t\t<Button text=\"Cancelar\" icon=\"undo\" color=\"red\" onClick={this.cancelar} />\n\t\t\t\t\t\t<Button text=\"Gravar categoria\" icon=\"thumbs-up\" color=\"green\" className=\"ml-2\" onClick={this.gravar} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport \"../css/Title.css\";\n\nexport default class Title extends React.Component {\n\trender(){\n\t\tlet text = (this.props.text !== undefined ? this.props.text : this.props.children);\n\t\tlet model = (this.props.model !== undefined ? this.props.model : 1);\n\n\t\treturn (\n\t\t\t<h1 className={\"title-model-\" + model}>\n\t\t\t\t{text}\n\t\t\t</h1>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport {Redirect} from \"react-router\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport DataGrid from \"../com/DataGrid.js\";\nimport FormControl from \"../com/FormControl.js\";\nimport Icon from \"../com/Icon.js\";\nimport ModalCategoria from \"../com/ModalCategoria.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/Categoria.css\";\n\nexport default class Categoria extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdataGrid: [],\n\t\t\tpesquisa: \"\",\n\t\t\tidcategoria: null,\n\t\t\tshowModalCategoria: false,\n\t\t\tredirectToProduto: false\n\t\t};\n\n\t\tthis.beforeCloseModal = this.beforeCloseModal.bind(this);\n\t\tthis.loadDataGrid = this.loadDataGrid.bind(this);\n\t\tthis.novaCategoria = this.novaCategoria.bind(this);\n\t\tthis.onChangePesquisa = this.onChangePesquisa.bind(this);\n\t\tthis.onClickBtnProduto = this.onClickBtnProduto.bind(this);\n\t\tthis.onKeyUpPesquisa = this.onKeyUpPesquisa.bind(this);\n\t\tthis.pesquisaLimpar = this.pesquisaLimpar.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tbeforeCloseModal(){\n\t\tthis.setState({\n\t\t\tshowModalCategoria: false\n\t\t}, () => {\n\t\t\tthis.loadDataGrid();\n\t\t});\n\t}\n\n\tcarregarCategoria(idcategoria){\n\t\tthis.setState({\n\t\t\tshowModalCategoria: true,\n\t\t\tidcategoria: idcategoria\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.loadDataGrid();\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.Pool.end();\n\t}\n\n\tloadDataGrid(){\n\t\tlet query = [\n\t\t\t\"SELECT categoria.idcategoria, categoria.descricao, \",\n\t\t\t\"  ncm.codigoncm AS codigoncm, categoria.dthrcriacao,\",\n\t\t\t\"  (SELECT COUNT(idproduto) FROM produto WHERE idcategoria = categoria.idcategoria) AS produtos\",\n\t\t\t\"FROM categoria\",\n\t\t\t\"LEFT JOIN ncm USING (idncm)\",\n\t\t\t\"WHERE categoria.descricao ILIKE '%'||$1||'%'\",\n\t\t\t\"ORDER BY categoria.descricao\"\n\t\t].join(\" \");\n\n\t\tthis.Pool.query(query, [this.state.pesquisa], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tlet data = [];\n\t\t\t\tfor(let i in res.rows){\n\t\t\t\t\tlet row = res.rows[i];\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{text: row.descricao, align: \"left\"},\n\t\t\t\t\t\t\t{text: row.codigoncm, align: \"center\"},\n\t\t\t\t\t\t\t{text: row.produtos, align: \"center\"},\n\t\t\t\t\t\t\t{text: row.dthrcriacao.toLocaleString(), align: \"center\"}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\tthis.carregarCategoria(row.idcategoria);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tdataGrid: data\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tnovaCategoria(){\n\t\tthis.setState({\n\t\t\tshowModalCategoria: true,\n\t\t\tidcategoria: null\n\t\t});\n\t}\n\n\tonChangePesquisa(event){\n\t\tthis.setState({\n\t\t\tpesquisa: event.target.value\n\t\t});\n\t}\n\n\tonClickBtnProduto(){\n\t\tthis.setState({\n\t\t\tredirectToProduto: true\n\t\t});\n\t}\n\n\tonKeyUpPesquisa(event){\n\t\tif(event.keyCode === 13){\n\t\t\tthis.loadDataGrid();\n\t\t}\n\t}\n\n\tpesquisaLimpar(){\n\t\tthis.setState({\n\t\t\tpesquisa: \"\"\n\t\t}, () => {\n\t\t\tthis.loadDataGrid();\n\t\t});\n\t}\n\n\trender(){\n\t\tif(this.state.redirectToProduto){\n\t\t\treturn <Redirect to=\"/produto\" />\n\t\t}\n\n\t\tlet dataGridHeader = [\n\t\t\t{text: \"Descrio\", align: \"left\"},\n\t\t\t{text: \"NCM\", align: \"center\"},\n\t\t\t{text: \"Produtos\", align: \"center\"},\n\t\t\t{text: \"Criado em\", align: \"center\"}\n\t\t];\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title model=\"2\">Cadastro de <b>Categorias</b></Title>\n\t\t\t\t<Row className=\"mb-4\">\n\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t<FormControl type=\"search\" id=\"pesquisa\" value={this.state.pesquisa} placeholder=\"Pesquise uma categoria...\" onKeyUp={this.onKeyUpPesquisa} onChange={this.onChangePesquisa} />\n\t\t\t\t\t\t<Icon name=\"cross\" id=\"pesquisa-limpar\" onClick={this.pesquisaLimpar} className={this.state.pesquisa.length > 0 ? null : \"d-none\"} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"2\" className=\"pl-0\">\n\t\t\t\t\t\t<Button text=\"Buscar\" icon=\"search\" color=\"green\" onClick={this.loadDataGrid} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\" className=\"text-right\">\n\t\t\t\t\t\t<Button text=\"Produtos\" icon=\"layers\" color=\"blue\" className=\"mr-3\" onClick={this.onClickBtnProduto} />\n\t\t\t\t\t\t<Button text=\"Nova categoria\" icon=\"plus\" color=\"green\" onClick={this.novaCategoria} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<DataGrid header={dataGridHeader} data={this.state.dataGrid} />\n\t\t\t\t<ModalCategoria Pool={this.Pool} show={this.state.showModalCategoria} idcategoria={this.state.idcategoria} beforeClose={this.beforeCloseModal} />\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import ftp from \"ftp\";\nimport childProcess from \"child_process\";\nimport { applicationDirectory, defaultMessageBoxError, valorParametro } from \"../def/function.js\";\n\nconst fs = window.require(\"fs\");\nconst electron = window.require(\"electron\");\n\nexport default class Atualizacao {\n\n\tconstructor(Pool){\n\t\tthis.Pool = Pool;\n\n\t\tthis.atualizarAplicativoParcial = this.atualizarAplicativoParcial.bind(this);\n\t\tthis.atualizarBancoDeDados = this.atualizarBancoDeDados.bind(this);\n\t\tthis.baixarAplicativoParcial = this.baixarAplicativoParcial.bind(this);\n\t\tthis.verificarAtualizacao = this.verificarAtualizacao.bind(this);\n\n\t\tthis.fs = fs;\n\t}\n\n\tasync atualizarAplicativoParcial(callBack){\n\t\tthis.baixarAplicativoParcial(async (err) => {\n\t\t\tif(err) return callBack(err);\n\t\t\tawait this.atualizarBancoDeDados((err) => {\n\t\t\t\tif(err) return callBack(err);\n\n\t\t\t\t// Sucesso\n\t\t\t\tcallBack();\n\t\t\t});\n\t\t});\n\t}\n\n\tasync atualizarBancoDeDados(callBack){\n\t\tif(this.ftp === undefined){\n\t\t\tthis.ftp = ftp;\n\t\t}\n\n\t\t// Funcao usada para ler um arquivo no FTP sem necessitar de callback\n\t\tlet ftpReadSync = async (client, filename) => {\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tclient.get(filename, false, (err, stream) => {\n\t\t\t\t\tif(err) throw new Error(err);\n\n\t\t\t\t\tlet chunks = [];\n\t\t\t\t\tstream.on(\"data\", (chunk) => {\n\t\t\t\t\t\tchunks.push(chunk.toString());\n\t\t\t\t\t}).on(\"end\", () => {\n\t\t\t\t\t\tresolve(chunks.join(\"\"));\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\t// Verifica ultima instrucao executada\n\t\tlet paramAtualizacaoInstrucaoSQL = parseInt(await valorParametro(this.Pool, \"ATUALIZACAO\", \"INSTRUCAOSQL\"), 10);\n\n\t\ttry{\n\t\t\t// Conecta no servidor FTP\n\t\t\tlet client = new this.ftp();\n\t\t\tclient.on(\"ready\", () => {\n\t\t\t\tclient.list(\"/sql\", false, async (err, list) => {\n\t\t\t\t\tif(err) return callBack(err);\n\n\t\t\t\t\t// Verifica quais instrucoes devem ser executadas\n\t\t\t\t\tlet arrArquivoSQL = [];\n\t\t\t\t\tfor(let file of list){\n\t\t\t\t\t\tlet numeroInstrucaoSQL = parseInt(file.name.replace(\".sql\", \"\"), 10);\n\t\t\t\t\t\tif(numeroInstrucaoSQL > paramAtualizacaoInstrucaoSQL){\n\t\t\t\t\t\t\tarrArquivoSQL.push(file.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tarrArquivoSQL.sort();\n\n\t\t\t\t\t// Abre os arquivos e atualiza o banco de dados\n\t\t\t\t\ttry{\n\t\t\t\t\t\tfor(let i in arrArquivoSQL){\n\t\t\t\t\t\t\tlet arquivoSQL = arrArquivoSQL[i];\n\t\t\t\t\t\t\tlet instrucaoSQL = await ftpReadSync(client, \"/sql/\" + arquivoSQL);\n\t\t\t\t\t\t\tconsole.log(\"Executar SQL: \\n\"+instrucaoSQL);\n\t\t\t\t\t\t\tawait this.Pool.query(instrucaoSQL);\n\t\t\t\t\t\t\tconsole.log(\"SQL Finalizada\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcallBack();\n\t\t\t\t\t}catch(err){\n\t\t\t\t\t\tconsole.log(\"Erro ao atualizar BD: \" + err.message);\n\t\t\t\t\t\tcallBack(err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).connect({\n\t\t\t\thost: \"websac.net\",\n\t\t\t\tport: \"21\",\n\t\t\t\tuser: \"satflex-update\",\n\t\t\t\tpassword: \"automacao\"\n\t\t\t});\n\t\t}catch(err){\n\t\t\tcallBack(err);\n\t\t}\n\t}\n\n\tbaixarAplicativoParcial(callBack){\n\t\tif(window.__ignoreAppUpdate === true){\n\t\t\treturn callBack();\n\t\t}\n\n\t\tif(this.childProcess === undefined){\n\t\t\tthis.childProcess = childProcess;\n\t\t}\n\n\t\tthis.childProcess.exec(\"git --version\", [], (err) => {\n\t\t\tif(err) return callBack(new Error(\"git-not-found\"));\n\n\t\t\tlet gitDir = applicationDirectory() + \"/.git\";\n\t\t\tconsole.log(\"Diretrio .git: \" + gitDir);\n\n\t\t\ttry{\n\t\t\t\tthis.childProcess.execSync(\"git config --global git.user \\\"satflex@controlware.com.br\\\"\");\n\t\t\t}catch(err){\n\t\t\t\treturn callBack(err);\n\t\t\t}\n\n\t\t\tlet spawn = this.childProcess.spawn(\"cd \\\"\" + applicationDirectory() + \"\\\" && git pull\", {shell: true});\n\t\t\tspawn.stdout.on(\"data\", (data) => {\n\t\t\t\tconsole.log(\"stdout: \" + data.toString());\n\t\t\t});\n\t\t\tspawn.stderr.on(\"data\", (data) => {\n\t\t\t\tconsole.log(\"stderr: \" + data.toString());\n\t\t\t});\n\t\t\tspawn.on(\"close\", (data) => {\n\t\t\t\tconsole.log(\"exit: \" + data.toString());\n\t\t\t\tcallBack();\n\t\t\t});\n\t\t\t/*\n\t\t\tthis.childProcess.exec(commands.join(\" && \"), [], (err) => {\n\t\t\t\tif(err){\n\t\t\t\t\tcallBack(err);\n\t\t\t\t}else{\n\t\t\t\t\tcallBack();\n\t\t\t\t}\n\t\t\t});\n\t\t\t*/\n\t\t});\n\t}\n\n\tbaixarGit(){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Git no est instalado\",\n\t\t\ttext: \"Para atualizar o SAT-Flex,  necessrio que o Git esteja instalado.\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Baixar o Git\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\ticon: \"github\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tlet shell = electron.shell;\n\t\t\t\t\t\tshell.openExternal(\"ftp://instalacao:123@websac.net/SATFlex/Git-2.18.0-32-bit.exe\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Mais tarde...\",\n\t\t\t\t\tcolor: \"blue\",\n\t\t\t\t\ticon: \"undo\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tversaoAtual(){\n\t\tlet fileName = applicationDirectory() + \"/package.json\";\n\t\treturn window.require(fileName).version;\n\t}\n\n\tverificarAtualizacao(){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Atualizao do SAT-Flex\",\n\t\t\ttext: \"Deseja iniciar a atualizao do SAT-Flex agora?<br>Isso pode levar alguns minutos.\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\twindow.Loading.show();\n\t\t\t\t\t\tconsole.log(\"Inicio da atualizao: \" + new Date().toLocaleString());\n\t\t\t\t\t\tthis.atualizarAplicativoParcial((err) => {\n\t\t\t\t\t\t\tconsole.log(\"Fim da atualizao: \" + new Date().toLocaleString());\n\t\t\t\t\t\t\twindow.Loading.hide();\n\n\t\t\t\t\t\t\tif(err){\n\t\t\t\t\t\t\t\tif(err.message === \"git-not-found\"){\n\t\t\t\t\t\t\t\t\tthis.baixarGit();\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\t\t\ttitle: \"Atualizado com sucesso!\",\n\t\t\t\t\t\t\t\ttext: \"O seu SAT-Flex foi atualizado com sucesso!<br>A aplicao ser reinciada.\",\n\t\t\t\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\t\t\t\ttext: \"Ok\",\n\t\t\t\t\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\twindow.require('electron').ipcRenderer.sendSync(\"restart\");\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"No\",\n\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n}\n","import React from \"react\";\nimport {Redirect} from \"react-router\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport Icon from \"../com/Icon.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport Atualizacao from \"../com/Atualizacao.js\";\n\nimport {serialNumber} from \"../def/function.js\";\n\nimport \"../css/Configuracoes.css\";\n\nexport default class Configuracoes extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tredirect: null,\n\t\t\tserialnumber: null,\n\t\t\tversaoAtual: null\n\t\t};\n\n\t\tthis.verificarAtualizacao = this.verificarAtualizacao.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t\tthis.Atualizacao = new Atualizacao(this.Pool);\n\t}\n\n\tcomponentDidMount(){\n\t\t(async () => {\n\t\t\tthis.setState({\n\t\t\t\tserialnumber: await serialNumber()\n\t\t\t});\n\t\t})();\n\t}\n\n\tverificarAtualizacao(){\n\t\tthis.Atualizacao.verificarAtualizacao();\n\t}\n\n\trender(){\n\t\tif(this.state.redirect){\n\t\t\treturn <Redirect to={this.state.redirect} />\n\t\t}\n\n\t\tlet versaoAtual = this.Atualizacao.versaoAtual();\n\n\t\tlet serialnumber = null;\n\t\tif(this.state.serialnumber){\n\t\t\tserialnumber = <b>{this.state.serialnumber}</b>;\n\t\t}else{\n\t\t\tserialnumber = <Icon name=\"spinner3\" className=\"ani-spin\" />\n\t\t}\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Configuraes</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"8\" offset=\"2\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text={\"Verificar atualizao<br><small>verso atual: \"+versaoAtual+\"</small>\"} icon=\"safari\" size=\"xxl\" block={true} onClick={this.verificarAtualizacao} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text=\"Parmetros<br>do sistema\" icon=\"widgets\" size=\"xxl\" block={true} onClick={() => {this.setState({redirect: \"/parametro\"})}} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text=\"Ferramentas\" icon=\"tools\" size=\"xxl\" block={true} onClick={() => {this.setState({redirect: \"/ferramentas\"})}} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<div className=\"serialnumber\">\n\t\t\t\t\t<small>Nmero de srie</small><br />\n\t\t\t\t\t{serialnumber}\n\t\t\t\t</div>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","//import nodemailer from \"nodemailer\";\nconst nodemailer = window.require(\"nodemailer\");\n\nexport default class Email {\n\n\tconstructor(){\n\t\tthis.nodemailer = nodemailer;\n\n\t\tthis._anexos = [];\n\t\tthis._destinatario = null;\n\t\tthis._titulo = null;\n\t\tthis._remetente = null;\n\t}\n\n\tanexo(filename){\n\t\tthis._anexos.push({\n\t\t\tfilename: filename.split(\"/\").reverse()[0],\n\t\t\tpath: filename,\n\t\t\tcid: String(Math.random())\n\t\t});\n\t}\n\n\tcorpo(corpo){\n\t\tthis._corpo = corpo;\n\t}\n\n\tdestinatario(destinatario){\n\t\tif(Array.isArray(destinatario)){\n\t\t\tdestinatario = destinatario.join(\", \");\n\t\t}\n\t\tthis._destinatario = destinatario;\n\t}\n\n\tenviar(success, fail){\n\t\tlet transport = this.nodemailer.createTransport({\n\t\t\thost: \"smtp-relay.sendinblue.com\",\n\t\t\tport: 587,\n\t\t\tsecure: false,\n\t\t\tauth: {\n\t\t\t\tuser: \"murilo@controlware.com.br\",\n\t\t\t\tpass: \"2xhH64OnTwBPYvKF\"\n\t\t\t},\n\t\t\ttls: {\n\t\t\t\trejectUnauthorized: false\n\t\t\t}\n\t\t});\n\n\t\tlet message = {\n\t\t\tfrom: '\"'+this._remetente+'\" <satflex@controlware.com.br>',\n\t\t\tto: this._destinatario,\n\t\t\tsubject: this._titulo,\n\t\t\thtml: this._corpo,\n\t\t\tattachments: this._anexos\n\t\t};\n\n\t\ttransport.sendMail(message, (err, info) => {\n\t\t\tif(err){\n\t\t\t\tfail(err);\n\t\t\t\treturn err;\n\t\t\t}\n\t\t\tsuccess();\n\t\t\treturn true;\n\t\t});\n\t}\n\n\tremetente(remetente){\n\t\tthis._remetente = remetente;\n\t}\n\n\ttitulo(titulo){\n\t\tthis._titulo = titulo;\n\t}\n\n}\n","import React from \"react\";\nimport \"../css/SubTitle.css\";\n\nexport default class SubTitle extends React.Component {\n\trender(){\n\t\tlet text = (this.props.text !== undefined ? this.props.text : this.props.children);\n\t\tlet model = (this.props.model !== undefined ? this.props.model : 1);\n\n\t\treturn (\n\t\t\t<h3 className={\"subtitle-model-\" + model}>\n\t\t\t\t{text}\n\t\t\t</h3>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport nodeZip from \"node-zip\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport Email from \"../com/Email.js\";\nimport FormGroup from \"../com/FormGroup.js\";\nimport Row from \"../com/Row.js\";\nimport SubTitle from \"../com/SubTitle.js\";\nimport Title from \"../com/Title.js\";\n\nimport {valorParametro, writeTemporary} from \"./../def/function.js\";\n\nexport default class Contador extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.atualizarEmailContador = this.atualizarEmailContador.bind(this);\n\t\tthis.carregarDocumentos = this.carregarDocumentos.bind(this);\n\t\tthis.enviarEmail = this.enviarEmail.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tasync atualizarEmailContador(){\n\t\tawait this.Pool.query(\"UPDATE parametro SET valor = $1 WHERE grupo = $2 AND nome = $3\", [$(\"#email\").val(), \"CONTADOR\", \"EMAIL\"]);\n\t}\n\n\tasync carregarDocumentos(){\n\t\tlet query = [\n\t\t\t\"SELECT chave, xml, chavecanc, xmlcanc\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE xml IS NOT NULL\",\n\t\t\t\"  AND chave IS NOT NULL\",\n\t\t\t\"  AND dthrcriacao::DATE BETWEEN $1 AND $2\",\n\t\t\t\"ORDER BY dthrcriacao\"\n\t\t].join(\" \");\n\t\tlet res = await this.Pool.query(query, [$(\"#dtinicial\").val(), $(\"#dtfinal\").val()]);\n\t\treturn res.rows;\n\t}\n\n\tcarregarEmailContador(){\n\t\tvalorParametro(this.Pool, \"CONTADOR\", \"EMAIL\", (valor) => {\n\t\t\t$(\"#email\").val(valor);\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarEmailContador();\n\t}\n\n\tasync enviarEmail(){\n\t\tlet destinatario = $(\"#email\").val();\n\t\tlet dtinicial = $(\"#dtinicial\").val();\n\t\tlet dtfinal = $(\"#dtfinal\").val();\n\n\t\t// Verifica se os campos foram preenchidos\n\t\tif(destinatario.length === 0){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Informe o e-mail do contador antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\tif(dtinicial.length === 0){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Informe a data inicial antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\tif(dtfinal.length === 0){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Informe a data final antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\t// Abre o loading\n\t\twindow.Loading.show();\n\n\t\t// Carrega o nome fantasia do cliente\n\t\tlet remetente = await valorParametro(this.Pool, \"EMITENTE\", \"NOMEFANTASIA\");\n\n\t\t// Reformata as datas de 'Y-m-d' para 'd/m/Y'\n\t\tdtinicial = dtinicial.split(\"-\").reverse().join(\"/\");\n\t\tdtfinal = dtfinal.split(\"-\").reverse().join(\"/\");\n\n\t\t// Atualiza o email do contador\n\t\tawait this.atualizarEmailContador();\n\n\t\t// Carrega os documentos\n\t\tlet documentos = await this.carregarDocumentos();\n\n\t\t// Verifica se existe algum documento para ser enviado\n\t\tif(documentos.length === 0){\n\t\t\twindow.Loading.hide();\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Nenhum documento fiscal foi encontrado no perodo especificado.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\t// Cria o arquivo ZIP\n\t\tlet zip = new nodeZip();\n\t\tdocumentos.forEach((documento) => {\n\t\t\tif(documento.xml){\n\t\t\t\tzip.file(documento.chave + \".xml\", documento.xml);\n\t\t\t}\n\t\t\tif(documento.xmlcanc){\n\t\t\t\tzip.file(documento.chavecanc + \".xml\", documento.xmlcanc);\n\t\t\t}\n\t\t});\n\t\tlet zippedData = zip.generate({\n\t\t\tbase64: false,\n\t\t\tcompression: \"DEFLATE\"\n\t\t});\n\t\tlet filename = new Date().toISOString().substr(0, 10) + \".zip\";\n\t\tlet zipfile = writeTemporary(filename, zippedData);\n\n\t\t// Envia o email\n\t\tlet email = new Email();\n\t\temail.remetente(remetente);\n\t\temail.destinatario(destinatario);\n\t\temail.titulo(\"SAT-Flex: XMLs de \" + dtinicial + \" at \" + dtfinal);\n\t\temail.anexo(zipfile);\n\t\temail.corpo(\"Seguem os XMLs do perodo de \" + dtinicial + \" at \" + dtfinal + \" anexados ao e-mail.\");\n\t\temail.enviar(() => {\n\t\t\t// Fecha o loading\n\t\t\twindow.Loading.hide();\n\n\t\t\t// Mensagem de sucesso\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Enviado com sucesso\",\n\t\t\t\ttext: \"O e-mail contendo os XMLs no perodo especificado foi enviado com sucesso para o e-mail do contador.\"\n\t\t\t});\n\t\t}, (err) => {\n\t\t\t// Fecha o loading\n\t\t\twindow.Loading.hide();\n\n\t\t\t// Mensagem de erro\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Houve uma falha\",\n\t\t\t\ttext: err.message\n\t\t\t});\n\t\t});\n\t}\n\n\trender(){\n\t\tlet date = new Date();\n\t\tlet dtinical = new Date(date.getFullYear(), date.getMonth() - 1, 1).toISOString().substr(0, 10);\n\t\tlet dtfinal = new Date(date.getFullYear(), date.getMonth(), 0).toISOString().substr(0, 10);\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Mdulo do contador</Title>\n\t\t\t\t<SubTitle>Enviar arquivos fiscais por e-mail</SubTitle>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\" offset=\"3\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<FormGroup type=\"email\" id=\"email\" label=\"E-mail do contador\" className=\"col-12\" size=\"lg\" />\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtinicial\" label=\"Data inicial\" className=\"col-6\" size=\"lg\" defaultValue={dtinical} />\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtfinal\" label=\"Data final\" className=\"col-6\" size=\"lg\" defaultValue={dtfinal} />\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<div className=\"text-center mt-2\">\n\t\t\t\t\t\t\t<Button text=\"Enviar arquivos por e-mail\" icon=\"mail-read\" size=\"lg\" onClick={this.enviarEmail} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nexport default class ButtonGroup extends React.Component {\n\trender(){\n\n\t\tvar className = [\n\t\t\t\"btn-group\",\n\t\t\t\"btn-group-\" + this.props.size\n\t\t];\n\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nButtonGroup.defaultProps = {\n\tsize: \"md\"\n};\n","import React from \"react\";\n\nexport default class Center extends React.Component {\n\n\trender(){\n\t\tlet className = [this.props.className];\n\t\tclassName.push(\"text-center\");\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport chartJS from \"react-chartjs\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport ButtonGroup from \"../com/ButtonGroup.js\";\nimport Center from \"../com/Center.js\";\nimport Content from \"../com/Content.js\";\nimport SubTitle from \"../com/SubTitle.js\";\nimport Title from \"../com/Title.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/Estatistica.css\";\n\nexport default class Estatistica extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.carregarDados = this.carregarDados.bind(this);\n\t\tthis.carregarDadosCategoria = this.carregarDadosCategoria.bind(this);\n\t\tthis.carregarDadosFormaPagamento = this.carregarDadosFormaPagamento.bind(this);\n\t\tthis.carregarDadosGeral = this.carregarDadosGeral.bind(this);\n\t\tthis.carregarDadosProduto = this.carregarDadosProduto.bind(this);\n\n\t\tthis.state = {\n\t\t\ttabela: null,\n\t\t\tdados: null\n\t\t};\n\n\t\tthis.LineChart = chartJS.Line;\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tasync carregarDados(tabela){\n\t\ttry{\n\t\t\twindow.Loading.show();\n\n\t\t\tlet dados = null;\n\t\t\tswitch(tabela){\n\t\t\t\tcase \"categoria\":\n\t\t\t\t\tdados = await this.carregarDadosCategoria();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"formapagamento\":\n\t\t\t\t\tdados = await this.carregarDadosFormaPagamento();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"produto\":\n\t\t\t\t\tdados = await this.carregarDadosProduto();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tdados = await this.carregarDadosGeral();\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\ttabela: tabela,\n\t\t\t\tdados: dados\n\t\t\t});\n\t\t}catch(err){\n\t\t\tdefaultMessageBoxError(err);\n\t\t}finally{\n\t\t\twindow.Loading.hide();\n\t\t}\n\t}\n\n\tasync carregarDadosCategoria(){\n\t\tlet queryDiario = [\n\t\t\t\"SELECT categoria.descricao AS a,\",\n\t\t\t\"  v_vendaprodutodiario.dtvenda AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"LEFT JOIN categoria USING (idcategoria)\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '30 days'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resDiario = await this.Pool.query(queryDiario);\n\t\tlet dadosDiario = this.prepararDados(resDiario.rows, \"D\");\n\n\t\tlet querySemanal = [\n\t\t\t\"SELECT categoria.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"LEFT JOIN categoria USING (idcategoria)\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '6 months'::INTERVAL\",\n\t\t\t\"  AND EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda) != 0\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resSemanal = await this.Pool.query(querySemanal);\n\t\tlet dadosSemanal = this.prepararDados(resSemanal.rows, \"S\");\n\n\t\tlet queryMensal = [\n\t\t\t\"SELECT categoria.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(MONTH FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"LEFT JOIN categoria USING (idcategoria)\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '2 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resMensal = await this.Pool.query(queryMensal);\n\t\tlet dadosMensal = this.prepararDados(resMensal.rows, \"M\");\n\n\t\tlet queryAnual = [\n\t\t\t\"SELECT categoria.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda)) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"LEFT JOIN categoria USING (idcategoria)\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '10 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resAnual = await this.Pool.query(queryAnual);\n\t\tlet dadosAnual = this.prepararDados(resAnual.rows, \"Y\");\n\n\t\treturn {\n\t\t\tdiario: dadosDiario,\n\t\t\tsemanal: dadosSemanal,\n\t\t\tmensal: dadosMensal,\n\t\t\tanual: dadosAnual\n\t\t};\n\t}\n\n\tasync carregarDadosFormaPagamento(){\n\t\tlet queryDiario = [\n\t\t\t\"SELECT formapagamento.descricao AS a,\",\n\t\t\t\"  v_vendapagamentodiario.dtvenda AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendapagamentodiario, formapagamento\",\n\t\t\t\"WHERE (v_vendapagamentodiario.idformapagamento IS NULL OR v_vendapagamentodiario.idformapagamento = formapagamento.idformapagamento)\",\n\t\t\t\"  AND (formapagamento.status IS NULL OR formapagamento.status = 'A')\",\n\t\t\t\"  AND v_vendapagamentodiario.dtvenda >= CURRENT_DATE - '30 days'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resDiario = await this.Pool.query(queryDiario);\n\t\tlet dadosDiario = this.prepararDados(resDiario.rows, \"D\");\n\n\t\tlet querySemanal = [\n\t\t\t\"SELECT formapagamento.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendapagamentodiario.dtvenda) || '-' || LPAD(EXTRACT(WEEK FROM v_vendapagamentodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendapagamentodiario, formapagamento\",\n\t\t\t\"WHERE (v_vendapagamentodiario.idformapagamento IS NULL OR v_vendapagamentodiario.idformapagamento = formapagamento.idformapagamento)\",\n\t\t\t\"  AND (formapagamento.status IS NULL OR formapagamento.status = 'A')\",\n\t\t\t\"  AND v_vendapagamentodiario.dtvenda >= CURRENT_DATE - '6 months'::INTERVAL\",\n\t\t\t\"  AND EXTRACT(WEEK FROM v_vendapagamentodiario.dtvenda) != 0\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resSemanal = await this.Pool.query(querySemanal);\n\t\tlet dadosSemanal = this.prepararDados(resSemanal.rows, \"S\");\n\n\t\tlet queryMensal = [\n\t\t\t\"SELECT formapagamento.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendapagamentodiario.dtvenda) || '-' || LPAD(EXTRACT(MONTH FROM v_vendapagamentodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendapagamentodiario, formapagamento\",\n\t\t\t\"WHERE (v_vendapagamentodiario.idformapagamento IS NULL OR v_vendapagamentodiario.idformapagamento = formapagamento.idformapagamento)\",\n\t\t\t\"  AND (formapagamento.status IS NULL OR formapagamento.status = 'A')\",\n\t\t\t\"  AND v_vendapagamentodiario.dtvenda >= CURRENT_DATE - '2 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resMensal = await this.Pool.query(queryMensal);\n\t\tlet dadosMensal = this.prepararDados(resMensal.rows, \"M\");\n\n\t\tlet queryAnual = [\n\t\t\t\"SELECT formapagamento.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendapagamentodiario.dtvenda)) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendapagamentodiario, formapagamento\",\n\t\t\t\"WHERE (v_vendapagamentodiario.idformapagamento IS NULL OR v_vendapagamentodiario.idformapagamento = formapagamento.idformapagamento)\",\n\t\t\t\"  AND (formapagamento.status IS NULL OR formapagamento.status = 'A')\",\n\t\t\t\"  AND v_vendapagamentodiario.dtvenda >= CURRENT_DATE - '10 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resAnual = await this.Pool.query(queryAnual);\n\t\tlet dadosAnual = this.prepararDados(resAnual.rows, \"Y\");\n\n\t\treturn {\n\t\t\tdiario: dadosDiario,\n\t\t\tsemanal: dadosSemanal,\n\t\t\tmensal: dadosMensal,\n\t\t\tanual: dadosAnual\n\t\t};\n\t}\n\n\tasync carregarDadosGeral(){\n\t\tlet queryDiario = [\n\t\t\t\"SELECT 'Venda' AS a,\",\n\t\t\t\"  v_vendaprodutodiario.dtvenda AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario\",\n\t\t\t\"WHERE v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '30 days'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resDiario = await this.Pool.query(queryDiario);\n\t\tlet dadosDiario = this.prepararDados(resDiario.rows, \"D\");\n\n\t\tlet querySemanal = [\n\t\t\t\"SELECT 'Venda' AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario\",\n\t\t\t\"WHERE v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '6 months'::INTERVAL\",\n\t\t\t\"  AND EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda) != 0\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resSemanal = await this.Pool.query(querySemanal);\n\t\tlet dadosSemanal = this.prepararDados(resSemanal.rows, \"S\");\n\n\t\tlet queryMensal = [\n\t\t\t\"SELECT 'Venda' AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(MONTH FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario\",\n\t\t\t\"WHERE v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '2 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resMensal = await this.Pool.query(queryMensal);\n\t\tlet dadosMensal = this.prepararDados(resMensal.rows, \"M\");\n\n\t\tlet queryAnual = [\n\t\t\t\"SELECT 'Venda' AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda)) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario\",\n\t\t\t\"WHERE v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '10 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resAnual = await this.Pool.query(queryAnual);\n\t\tlet dadosAnual = this.prepararDados(resAnual.rows, \"Y\");\n\n\t\treturn {\n\t\t\tdiario: dadosDiario,\n\t\t\tsemanal: dadosSemanal,\n\t\t\tmensal: dadosMensal,\n\t\t\tanual: dadosAnual\n\t\t};\n\t}\n\n\tasync carregarDadosProduto(){\n\t\tlet queryDiario = [\n\t\t\t\"SELECT produto.descricao AS a,\",\n\t\t\t\"  v_vendaprodutodiario.dtvenda AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '30 days'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resDiario = await this.Pool.query(queryDiario);\n\t\tlet dadosDiario = this.prepararDados(resDiario.rows, \"D\");\n\n\t\tlet querySemanal = [\n\t\t\t\"SELECT produto.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '6 months'::INTERVAL\",\n\t\t\t\"  AND EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda) != 0\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resSemanal = await this.Pool.query(querySemanal);\n\t\tlet dadosSemanal = this.prepararDados(resSemanal.rows, \"S\");\n\n\t\tlet queryMensal = [\n\t\t\t\"SELECT produto.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(MONTH FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '2 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resMensal = await this.Pool.query(queryMensal);\n\t\tlet dadosMensal = this.prepararDados(resMensal.rows, \"M\");\n\n\t\tlet queryAnual = [\n\t\t\t\"SELECT produto.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda)) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '10 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resAnual = await this.Pool.query(queryAnual);\n\t\tlet dadosAnual = this.prepararDados(resAnual.rows, \"Y\");\n\n\t\treturn {\n\t\t\tdiario: dadosDiario,\n\t\t\tsemanal: dadosSemanal,\n\t\t\tmensal: dadosMensal,\n\t\t\tanual: dadosAnual\n\t\t};\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarDados(\"categoria\");\n\t}\n\n\tprepararDados(rows, tipoData){\n\t\tlet groups = [];\n\t\tlet labels = [];\n\t\tfor(let i in rows){\n\t\t\tlet row = rows[i];\n\t\t\tswitch(tipoData){\n\t\t\t\tcase \"D\": // Diario (recebe 'Y-m-d')\n\t\t\t\t\trow.x = String(row.x.getDate()).lpad(2, \"0\") + \"/\" + String(row.x.getMonth() + 1).lpad(2, \"0\") + \"/\" + (row.x.getFullYear());\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"S\": // Mensal (recebe 'Y-w')\n\t\t\t\t\trow.x = row.x.split(\"-\").reverse().join(\"/\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"M\": // Mensal (recebe 'Y-m')\n\t\t\t\t\trow.x = row.x.split(\"-\").reverse().join(\"/\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Y\": // Anual (recebe 'Y')\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\trows[i].x = row.x;\n\t\t\tif(labels.indexOf(row.x) === -1){\n\t\t\t\tlabels.push(row.x);\n\t\t\t}\n\t\t\tif(groups.indexOf(row.a) === -1){\n\t\t\t\tgroups.push(row.a);\n\t\t\t}\n\t\t}\n\n\t\tlet dataGroup = {};\n\t\tfor(let label of labels){\n\t\t\tfor(let group of groups){\n\t\t\t\tif(dataGroup[group] === undefined) dataGroup[group] = [];\n\n\t\t\t\tlet found = false;\n\t\t\t\tfor(let row of rows){\n\t\t\t\t\tif(row.a === group && row.x === label){\n\t\t\t\t\t\tdataGroup[group].push(row.y);\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(!found) dataGroup[group].push(0);\n\t\t\t}\n\t\t}\n\n\t\tlet datasets = [];\n\t\tfor(let group in dataGroup){\n\t\t\t// Gera um RGB aleatorio caso seja do tipo Diario\n\t\t\t// O outros tipos de datas utilizam o mesmo gerado pelo Diario\n\t\t\tif(this.cor === undefined) this.cor = {};\n\t\t\tif(tipoData === \"D\") this.cor[group] = Math.round(Math.random() * 255) + \",\" + Math.round(Math.random() * 255) + \",\" + Math.round(Math.random() * 255);\n\t\t\tlet rgb = this.cor[group];\n\n\t\t\t// Cria o dataset\n\t\t\tdatasets.push({\n\t\t\t\tlabel: group,\n\t\t\t\tfillColor: \"rgba(\"+rgb+\",0.2)\",\n\t\t\t\tstrokeColor: \"rgba(\"+rgb+\",1)\",\n\t\t\t\tpointColor: \"rgba(\"+rgb+\",1)\",\n\t\t\t\tpointStrokeColor: \"#fff\",\n\t\t\t\tpointHighlightFill: \"#fff\",\n\t\t\t\tpointHighlightStroke: \"rgba(\"+rgb+\",1)\",\n\t\t\t\tdata: dataGroup[group]\n\t\t\t});\n\t\t}\n\n\t\treturn {\n\t\t\tlabels: labels,\n\t\t\tdatasets: datasets\n\t\t};\n\t}\n\n\trender(){\n\t\tlet options = {\n\t\t\tlegend: {\n\t\t\t\tdisplay: true\n\t\t\t}\n\t\t};\n\n\t\tlet chartHeight = \"300px\";\n\t\tlet chartWidth = \"900px\";\n\n\t\tlet chartDiario = null;\n\t\tif(this.state.dados !== null){\n\t\t\tchartDiario = <this.LineChart data={this.state.dados.diario} options={options} height={chartHeight} width={chartWidth} redraw />\n\t\t}\n\n\t\tlet chartSemanal = null;\n\t\tif(this.state.dados !== null){\n\t\t\tchartSemanal = <this.LineChart data={this.state.dados.semanal} options={options} height={chartHeight} width={chartWidth} redraw />\n\t\t}\n\n\t\tlet chartMensal = null;\n\t\tif(this.state.dados !== null){\n\t\t\tchartMensal = <this.LineChart data={this.state.dados.mensal} options={options} height={chartHeight} width={chartWidth} redraw />\n\t\t}\n\n\t\tlet chartAnual = null;\n\t\tif(this.state.dados !== null){\n\t\t\tchartAnual = <this.LineChart data={this.state.dados.anual} options={options} height={chartHeight} width={chartWidth} redraw />\n\t\t}\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Estatsticas</Title>\n\t\t\t\t<Center className=\"mb-5\">\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button text=\"Geral\" color=\"green\" size=\"lg\" active={this.state.tabela === null} onClick={() => {this.carregarDados(null)}} />\n\t\t\t\t\t\t<Button text=\"Finalizadora\" color=\"green\" size=\"lg\" active={this.state.tabela === \"formapagamento\"} onClick={() => {this.carregarDados(\"formapagamento\")}} />\n\t\t\t\t\t\t<Button text=\"Categoria\" color=\"green\" size=\"lg\" active={this.state.tabela === \"categoria\"} onClick={() => {this.carregarDados(\"categoria\")}} />\n\t\t\t\t\t\t<Button text=\"Produto\" color=\"green\" size=\"lg\" active={this.state.tabela === \"produto\"} onClick={() => {this.carregarDados(\"produto\")}} />\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t<SubTitle model=\"2\">Venda diria nos ltimos 30 dias</SubTitle>\n\t\t\t\t\t{chartDiario}\n\t\t\t\t\t<SubTitle model=\"2\">Venda semanal nos ltimos 6 meses</SubTitle>\n\t\t\t\t\t{chartSemanal}\n\t\t\t\t\t<SubTitle model=\"2\">Venda mensal nos ltimos 2 anos</SubTitle>\n\t\t\t\t\t{chartMensal}\n\t\t\t\t\t<SubTitle model=\"2\">Venda anual nos ltimos 10 anos</SubTitle>\n\t\t\t\t\t{chartAnual}\n\t\t\t\t</Center>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","const LF = \"\\x0a\";\nconst ESC = \"\\x1b\";\nconst GS = \"\\x1d\";\n\nexport default class EscPos {\n\n\t// Metodo construtor\n\t// O parametro \"font\" representa a fonte a ser utilizada (vem dos parametros do sistema)\n\tconstructor(font){\n\t\tthis.font = font;\n\t\tthis.content = [];\n\t}\n\n\t// Imprime um codigo de barras\n\tbarcode(barcode, height, width){\n\t\theight = (height === undefined ? 50 : height);\n\t\twidth = (width === undefined ? 1 : width);\n\n\t\t// Descobre o tipo de codigo de barras\n\t\tlet type = null;\n\t\tswitch(barcode.length){\n\t\t\tcase 7: // EAN7\n\t\t\tcase 8: // EAN8\n\t\t\t\ttype = 68;\n\t\t\t\tbreak;\n\t\t\tcase 12: // EAN12\n\t\t\tcase 13: // EAN13\n\t\t\t\ttype = 67;\n\t\t\t\tbreak;\n\t\t\tdefault: // ITF\n\t\t\t\ttype = 70;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Define a altura do codigo de barras\n\t\tthis.content.push(GS + \"h\" + String.fromCharCode(height));\n\n\t\t// Define a largura das barras do codigo de barras\n\t\tthis.content.push(GS + \"w\" + String.fromCharCode(width));\n\n\t\t// Centraliza a impressao\n\t\tthis.content.push(ESC + \"a\" + String.fromCharCode(1));\n\n\t\t// Imprime o codigo de barras\n\t\tthis.content.push(GS + \"k\" + String.fromCharCode(type) + String.fromCharCode(barcode.length) + barcode);\n\n\t\t// Alinha a impressao a esquerda\n\t\tthis.content.push(ESC + \"a\" + String.fromCharCode(0));\n\n\t}\n\n\t// Liga ou desliga o texto em negrito\n\tbold(bool){\n\t\tthis.content.push(ESC + \"G\" + String.fromCharCode(bool ? 1 : 0));\n\t}\n\n\t// Aciona a guilhotina\n\tcut(){\n\t\tthis.content.push(GS + \"V\" + String.fromCharCode(1));\n\t}\n\n\t// Abre gaveta\n\tdrawer(){\n\t\tthis.content.push(ESC + \"p\" + String.fromCharCode(0) + String.fromCharCode(13) + String.fromCharCode(10));\n\t}\n\n\t// Alimenta o papel (medida em linhas)\n\tfeed(lines){\n\t\tthis.content.push(ESC + \"d\" + String.fromCharCode(lines));\n\t}\n\n\t// Retorna o conteudo a ser impresso\n\tgetContent(){\n\t\treturn this.content.join(\"\");\n\t}\n\n\t// Reinicia as configuracoes para os valores padroes\n\treset(){\n\t\tthis.content = [];\n\t\tthis.content.push(ESC + String.fromCharCode(0)); // Espaco entre linhas no tamanho padrao\n\t\tthis.content.push(ESC + \" \" + String.fromCharCode(0)); // Espaco entre os caracteres\n\t\tthis.content.push(ESC + \"M\" + String.fromCharCode(this.font)); // Estilo da fonte\n\t\tthis.content.push(GS + \"!\" + String.fromCharCode(0)); // Tamanho da fonte\n\t\tthis.content.push(ESC + \"t\" + String.fromCharCode(3)); // Tabela de codigo de caracter (Portugues)\n\t\tthis.content.push(ESC + \"R\" + String.fromCharCode(12)); // Caracteres internacionais (America Latina)\n\t\tthis.content.push(GS + \"B\" + String.fromCharCode(0)); // Desliga o fundo pintado (cores invertidas)\n\t\tthis.content.push(ESC + \"G\" + String.fromCharCode(0)); // Desliga o negrito\n\t\tthis.content.push(ESC + \"a\" + String.fromCharCode(0)); // Alinha a impressao a esquerda\n\t}\n\n\t// Imprime um QR Code\n\tqrcode(qrcode){\n\t\tlet len = qrcode.length + 3;\n\t\tlet pl = len % 256;\n\t\tlet ph = len / 256;\n\n\t\t// Centraliza a impressao\n\t\tthis.content.push(ESC + \"a\" + String.fromCharCode(1));\n\n\t\t// Columns function (65)\n\t\tthis.content.push(GS + \"(k\" + String.fromCharCode(4) + String.fromCharCode(0) + String.fromCharCode(49) + String.fromCharCode(65) + String.fromCharCode(50) + String.fromCharCode(0))\n\n\t\t// Size function (67)\n\t\tthis.content.push(GS + \"(k\" + String.fromCharCode(3) + String.fromCharCode(0) + String.fromCharCode(49) + String.fromCharCode(67) + String.fromCharCode(3));\n\n\t\t// Error correction function (69)\n\t\tthis.content.push(GS + \"(k\" + String.fromCharCode(3) + String.fromCharCode(0) + String.fromCharCode(49) + String.fromCharCode(69) + String.fromCharCode(51));\n\n\t\t// Save data function (80)\n\t\tthis.content.push(GS + \"(k\" + String.fromCharCode(pl) + String.fromCharCode(ph) + String.fromCharCode(49) + String.fromCharCode(80) + String.fromCharCode(48) + qrcode);\n\n\t\t// Print function (81)\n\t\tthis.content.push(GS + \"(k\" + String.fromCharCode(3) + String.fromCharCode(0) + String.fromCharCode(49) + String.fromCharCode(81) + String.fromCharCode(48));\n\n\t\t// Alinha impressao a esquerda\n\t\tthis.content.push(ESC + \"a\" + String.fromCharCode(0));\n\t}\n\n\t// Imprime um texto\n\ttext(text, bold){\n\t\ttext = text.removeSpecial();\n\t\ttext = text.replaceAll(\"|\", String.fromCharCode(179));\n\t\tif(bold) this.bold(true);\n\t\tthis.content.push(text + LF);\n\t\tif(bold) this.bold(false);\n\t}\n\n}\n","//import RNFS from \"react-native-fs\";\nimport os from \"os\";\nimport xmlJS from \"xml-js\";\nimport child_process from \"child_process\";\nimport EscPos from \"./EscPos.js\";\nimport {valorParametro, writeTemporary} from \"../def/function.js\";\n\nexport default class Printer {\n\n\tconstructor(Pool){\n\t\tthis.Pool = Pool;\n\t\tthis.os = os;\n\t\tthis.childProcess = child_process;\n\n\t\t// Usar o metodo \"carregarEscPos\" para utilizar essa variavel\n\t\t// Nunca usar assim:   let escpos = this.escpos\n\t\t// Sempre usar assim:  let escpos = await this.carregarEscPos()\n\t\tthis.escpos = null;\n\n\t\tthis.colunas = null;\n\t\tthis.nome = null;\n\t\tthis.modelo = null;\n\n\t\tthis.documento = null;\n\t\tthis.documentoprodutos = null;\n\t\tthis.documentopagamentos = null;\n\n\t\tthis.parametroImpressoraGuilhotina = null;\n\t\tthis.parametroImpressoraModeloImpressao = null;\n\t}\n\n\t// Alimenta o papel (medida em linhas)\n\tasync alimentar(linhas){\n\t\tlinhas = (linhas === undefined ? 1 : linhas);\n\n\t\tlet escpos = await this.carregarEscPos();\n\t\tescpos.feed(linhas);\n\t}\n\n\t// Imprime um codigo de barras\n\tasync barcode(barcode){\n\t\tlet escpos = await this.carregarEscPos();\n\t\tescpos.barcode(barcode);\n\t}\n\n\tasync carregarEscPos(){\n\t\tif(this.escpos === null){\n\t\t\tlet fonte = (this.colunas > 48 ? \"1\" : \"0\");\n\t\t\tthis.escpos = new EscPos(fonte);\n\t\t}\n\t\treturn this.escpos;\n\t}\n\n\tasync carregarDadosDocumento(iddocumento){\n\t\tlet documento, documentoprodutos,documentopagamentos;\n\n\t\tconst client = await this.Pool.connect();\n\n\t\ttry{\n\t\t\tlet res = await client.query(\"SELECT * FROM documento WHERE iddocumento = $1\", [iddocumento]);\n\t\t\tif(res.rows.length === 0){\n\t\t\t\tthrow new Error(\"Nenhum documento foi encontrado.\");\n\t\t\t}\n\t\t\tdocumento = res.rows[0];\n\n\t\t\tlet queryDocumentoProduto = [\n\t\t\t\t\"SELECT documentoproduto.*, unidade.precisao, unidade.sigla\",\n\t\t\t\t\"FROM documentoproduto\",\n\t\t\t\t\"LEFT JOIN produto USING (idproduto)\",\n\t\t\t\t\"LEFT JOIN unidade USING (idunidade)\",\n\t\t\t\t\"WHERE documentoproduto.iddocumento = $1\",\n\t\t\t\t\"ORDER BY documentoproduto.sequencial\"\n\t\t\t].join(\" \");\n\t\t\tres = await client.query(queryDocumentoProduto, [iddocumento]);\n\t\t\tdocumentoprodutos = res.rows;\n\n\t\t\tlet queryDocumentoPagamento = [\n\t\t\t\t\"SELECT documentopagamento.*, formapagamento.descricao AS formapagamento\",\n\t\t\t\t\"FROM documentopagamento\",\n\t\t\t\t\"LEFT JOIN formapagamento USING (idformapagamento)\",\n\t\t\t\t\"WHERE documentopagamento.iddocumento = $1\"\n\t\t\t].join(\" \");\n\t\t\tres = await client.query(queryDocumentoPagamento, [iddocumento]);\n\t\t\tdocumentopagamentos = res.rows;\n\t\t}catch(e){\n\t\t\tthrow e;\n\t\t}finally{\n\t\t\tclient.release();\n\t\t}\n\n\t\tthis.documento = documento;\n\t\tthis.documentoprodutos = documentoprodutos;\n\t\tthis.documentopagamentos = documentopagamentos;\n\t}\n\n\t// Retorna o conteudo a ser enviado para a impressora\n\tasync conteudo(){\n\t\tlet escpos = await this.carregarEscPos();\n\t\treturn escpos.getContent();\n\t}\n\n\t// Abre gaveta\n\tasync gaveta(){\n\t\tlet escpos = await this.carregarEscPos();\n\t\tescpos.drawer();\n\t}\n\n\t// Aciona a guilhotina\n\tasync guilhotina(){\n\t\tif(this.parametroImpressoraGuilhotina === null){\n\t\t\tthis.parametroImpressoraGuilhotina = await valorParametro(this.Pool, \"IMPRESSORA\", \"GUILHOTINA\");\n\t\t}\n\t\tif(this.parametroImpressoraGuilhotina === \"S\"){\n\t\t\tlet escpos = await this.carregarEscPos();\n\t\t\tescpos.cut();\n\t\t}\n\t}\n\n\t// Imprime um texto em uma impressora\n\tasync imprimir(texto, nome, modelo){\n\t\tif(texto === undefined || texto === null){\n\t\t\ttexto = await this.conteudo();\n\t\t}\n\n\t\tif(modelo === undefined){\n\t\t\tif(this.modelo === null){\n\t\t\t\tmodelo = await valorParametro(this.Pool, \"IMPRESSORA\", \"MODELO\");\n\t\t\t}else{\n\t\t\t\tmodelo = this.modelo;\n\t\t\t}\n\t\t}\n\t\tif(modelo === \"nenhum\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tlet filename = writeTemporary(\"printer.txt\", texto);\n\t\tif(true || this.os.platform() === \"win32\"){\n\t\t\tnome = (nome === undefined ? this.nome : nome);\n\n\t\t\tconst execSync = (this.childProcess.execSync || window.require(\"child_process\").execSync);\n\t\t\t\n\t\t\tlet command = \"copy \\\"\" + filename + \"\\\" \" + nome.toUpperCase();\n\t\t\tcommand = command.replaceAll(\"/\", \"\\\\\");\n\t\t\texecSync(command);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t// Imprimir o cabecalho nos documentos\n\tasync imprimirCabecalho(){\n\t\t// Nome da loja\n\t\tlet nomefantasia = await valorParametro(this.Pool, \"EMITENTE\", \"NOMEFANTASIA\");\n\t\tawait this.texto(nomefantasia, \"center\", true);\n\n\t\t// Razao social\n\t\tlet razaosocial = await valorParametro(this.Pool, \"EMITENTE\", \"RAZAOSOCIAL\");\n\t\tif(razaosocial !== nomefantasia){\n\t\t\tawait this.texto(razaosocial, \"center\", true);\n\t\t}\n\n\t\t// Endereco\n\t\tlet paramEmitenteEndereco = await valorParametro(this.Pool, \"EMITENTE\", \"ENDERECO\");\n\t\tlet paramEmitenteNumero = await valorParametro(this.Pool, \"EMITENTE\", \"NUMERO\");\n\t\tawait this.texto(paramEmitenteEndereco + \", \" + paramEmitenteNumero, \"center\");\n\n\t\t// Bairro, cidade e estado\n\t\tlet paramEmitenteBairro = await valorParametro(this.Pool, \"EMITENTE\", \"BAIRRO\");\n\t\tlet paramEmitenteMunicipio = await valorParametro(this.Pool, \"EMITENTE\", \"MUNICIPIO\");\n\t\tlet paramEmitenteUF = await valorParametro(this.Pool, \"EMITENTE\", \"UF\");\n\t\tawait this.texto(paramEmitenteBairro + \" - \" + paramEmitenteMunicipio + \" - \" + paramEmitenteUF, \"center\");\n\n\t\t// CNPJ e IE\n\t\tlet paramEmitenteCNPJ = await valorParametro(this.Pool, \"EMITENTE\", \"CNPJ\");\n\t\tlet paramEmitenteIE = await valorParametro(this.Pool, \"EMITENTE\", \"IE\");\n\t\tawait this.texto(\"CNPJ \" + paramEmitenteCNPJ + \" IE \" + paramEmitenteIE, \"center\");\n\n\t\t// Linha\n\t\tawait this.linha();\n\t}\n\n\t// Imprime um documento\n\tasync imprimirDocumento(iddocumento, success, fail){\n\t\tawait this.reiniciar();\n\t\tawait this.carregarDadosDocumento(iddocumento);\n\n\t\tlet result = false;\n\n\t\tswitch(this.documento.status){\n\t\t\tcase \"A\":\n\t\t\t\tresult = await this.imprimirDocumentoAtivo();\n\t\t\t\tbreak;\n\t\t\tcase \"C\":\n\t\t\t\tresult = await this.imprimirDocumentoCancelado();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(result && typeof success === \"function\"){\n\t\t\tsuccess();\n\t\t}else if(!result && typeof fail === \"function\"){\n\t\t\tfail();\n\t\t}\n\t}\n\n\t// Imprime um documento ativo\n\tasync imprimirDocumentoAtivo(numerovias){\n\t\tnumerovias = (numerovias === undefined ? 1 : numerovias);\n\n\t\tlet informacoes  = null;\n\t\tlet qrcode = null;\n\n\t\t// Carrega o XML do documento\n\t\tif(this.documento.operacao === \"CU\" && this.documento.xml){\n\t\t\tlet xml = xmlJS.xml2json(this.documento.xml, {compact: true});\n\t\t\txml = JSON.parse(xml);\n\t\t\tinformacoes = xml.CFe.infCFe.infAdic.infCpl._text;\n\t\t\tif(xml.CFe.infCFe.ide.assinaturaQRCODE){\n\t\t\t\tqrcode = xml.CFe.infCFe.ide.assinaturaQRCODE._text;\n\t\t\t}\n\t\t}\n\n\t\t// Cria o cabecalho\n\t\tawait this.imprimirCabecalho();\n\n\t\t// Identificacao do documento\n\t\tlet numero = null;\n\t\tlet dthrcriacao = this.documento.dthrcriacao;\n\t\tlet dtcriacao = dthrcriacao.toLocaleString().split(\" \")[0];\n\t\tlet hrcriacao = String(dthrcriacao.getHours()).lpad(2, \"0\") + \":\" + String(dthrcriacao.getMinutes()).lpad(2, \"0\") + \":\" + String(dthrcriacao.getSeconds()).lpad(2, \"0\");\n\t\tswitch(this.documento.operacao){\n\t\t\tcase \"CU\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : this.documento.iddocumento).lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"CUPOM FISCAL ELETRNICO - SAT\", \"center\", true);\n\t\t\t\tawait this.texto(\"COO: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"NC\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"NOTA FISCAL A PARTIR DE CUPOM\", \"center\", true);\n\t\t\t\tawait this.texto(\"Nm: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"OR\":\n\t\t\t\tnumero = String(this.documento.iddocumento ? this.documento.iddocumento : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"ORAMENTO - SEM VALOR FISCAL\", \"center\", true);\n\t\t\t\tawait this.texto(\"Nm: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"RE\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"NOTA FISCAL DE REMESSA\", \"center\", true);\n\t\t\t\tawait this.texto(\"Nm: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Linha\n\t\tawait this.linha();\n\n\t\t// Identificacao do consumidor\n\t\tlet cpfcnpj = null;\n\t\tswitch(this.documento.operacao){\n\t\t\tcase \"CU\":\n\t\t\t\tcpfcnpj = (this.documento.cpfcnpj ? this.documento.cpfcnpj : \"no informado\");\n\t\t\t\tawait this.texto(\"CPF/CNPJ do consumidor: \" + cpfcnpj);\n\t\t\t\tbreak;\n\t\t\tcase \"OR\":\n\t\t\t\tcpfcnpj = (this.documento.cpfcnpj ? this.documento.cpfcnpj : \"no informado\");\n\t\t\t\tlet nomeorcamento = (this.documento.nomeorcamento ? this.documento.nomeorcamento : \"no informado\");\n\t\t\t\tawait this.texto(\"Nome do cliente: \" + nomeorcamento);\n\t\t\t\tawait this.texto(\"CPF/CNPJ do cliente: \" + cpfcnpj);\n\t\t\t\tbreak;\n\t\t\tcase \"NC\":\n\t\t\tcase \"RE\":\n\t\t\t\tlet query = [\n\t\t\t\t\t\"SELECT parceiro.nome, parceiro.tipopessoa, parceiro.cpfcnpj,\",\n\t\t\t\t\t\"  parceiro.inscricaoestadual, cidade.nome AS cidade, estado.sigla AS estado,\",\n\t\t\t\t\t\"  parceiro.cep, parceiro.bairro, parceiro.endereco, parceiro.numero,\",\n\t\t\t\t\t\"  parceiro.complemento\",\n\t\t\t\t\t\"FROM parceiro\",\n\t\t\t\t\t\"LEFT JOIN cidade USING (idcidade)\",\n\t\t\t\t\t\"LEFT JOIN estado USING (idestado)\",\n\t\t\t\t\t\"WHERE parceiro.idparceiro = $1\"\n\t\t\t\t].join(\" \");\n\n\t\t\t\tlet res = await this.Pool.query(query, [this.documento.idparceiro]);\n\t\t\t\tlet parceiro = res.rows[0];\n\n\t\t\t\tawait this.texto(\"DADOS DO DESTINATARIO\", \"center\", true);\n\t\t\t\tawait this.texto(\"Nome: \" + parceiro.nome);\n\t\t\t\tawait this.texto((parceiro.tipopessoa === \"F\" ? \"CPF\" : \"CNPJ\") + \": \" + parceiro.cpfcnpj);\n\t\t\t\tif(parceiro.inscricaoestadual){\n\t\t\t\t\tawait this.texto(\"Inscricao estadual: \" + parceiro.inscricaoestadual);\n\t\t\t\t}\n\t\t\t\tawait this.texto(\"Cidade: \" + parceiro.cidade  + \" - \" + parceiro.estado);\n\t\t\t\tawait this.texto(\"CEP: \" + parceiro.cep + \"   Bairro: \" + parceiro.bairro);\n\t\t\t\tawait this.texto(\"Endereo: \" + parceiro.endereco + \", \" + parceiro.numero);\n\t\t\t\tif(parceiro.complemento){\n\t\t\t\t\tawait this.texto(\"Complemento: \" + this.complemento);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Linha\n\t\tawait this.linha();\n\n\t\t// Imprime os produtos\n\t\tif(this.parametroImpressoraModeloImpressao === null){\n\t\t\tthis.parametroImpressoraModeloImpressao = await valorParametro(this.Pool, \"IMPRESSORA\", \"MODELOIMPRESSAO\");\n\t\t}\n\t\tswitch(this.parametroImpressoraModeloImpressao){\n\t\t\tcase '1': await this.imprimirListaProdutosModelo01(); break;\n\t\t\tcase '2': await this.imprimirListaProdutosModelo02(); break;\n\t\t\tdefault: await this.imprimirListaProdutosModelo01(); break;\n\t\t}\n\t\t\n\t\t// Total dos itens\n\t\tlet totaldocumento = this.documento.totaldocumento.format(2, \",\", \".\");\n\t\tawait this.texto(\"TOTAL\" + \" \".repeat(this.colunas - (5 + totaldocumento.length)) + totaldocumento, \"left\", true);\n\t\tawait this.alimentar(1);\n\n\t\t// Imprime os pagamentos\n\t\tawait this.documentopagamentos.forEach(async (documentopagamento, i) => {\n\t\t\tlet totalpagamento = 0;\n\n\t\t\t// Captura os valores\n\t\t\tlet descricao = documentopagamento.formapagamento.removeSpecial();\n\t\t\tif(i + 1 === this.documentopagamentos.length){\n\t\t\t\ttotalpagamento = parseFloat(documentopagamento.totalpagamento) + parseFloat(this.documento.totaltroco);\n\t\t\t}else{\n\t\t\t\ttotalpagamento = documentopagamento.totalpagamento;\n\t\t\t}\n\t\t\ttotalpagamento = totalpagamento.format(2, \",\", \".\");\n\n\t\t\t// Imprime o pagamento no cupom\n\t\t\tawait this.texto(descricao + \" \".repeat(this.colunas - descricao.length - totalpagamento.length) + totalpagamento);\n\t\t});\n\n\t\t// Imprime o troco\n\t\tif(this.documento.totaltroco > 0){\n\t\t\tlet descricao = \"Troco\";\n\t\t\tlet totaltroco = this.documento.totaltroco.format(2, \",\", \".\");\n\t\t\tawait this.texto(descricao + \" \".repeat(this.colunas - descricao.length - totaltroco.length) + totaltroco);\n\t\t}\n\n\t\t// Verifica se eh um documento fiscal\n\t\tif(this.documento.chave){\n\t\t\t// Linha\n\t\t\tawait this.linha();\n\n\t\t\t// Verifica se eh cupom\n\t\t\tif(this.documento.operacao === \"CU\"){\n\t\t\t\t// Observacoes do contribuinte\n\t\t\t\tawait this.texto(\"OBSERVAES DO CONTRIBUINTE\", \"center\");\n\t\t\t\tawait this.texto(\"ICMS recolhido conforme LC 123/2006 - Simples Nacional.\");\n\t\t\t\tawait this.texto(informacoes);\n\n\t\t\t\t// Linha\n\t\t\t\tawait this.linha();\n\n\t\t\t\t// Numero do SAT\n\t\t\t\tlet paramSatSerie = await valorParametro(this.Pool, \"SAT\", \"SERIE\");\n\t\t\t\tawait this.texto(\"SAT No. \" + paramSatSerie, \"center\");\n\t\t\t\tawait this.texto(dtcriacao + \" - \" + hrcriacao, \"center\");\n\t\t\t}\n\n\t\t\t// Imprime a chave CFe\n\t\t\tlet chave = this.documento.chave.substr(-44);\n\t\t\tawait this.alimentar(1);\n\t\t\tawait this.texto(chave, \"center\");\n\t\t\tawait this.barcode(chave.substr(0, 22));\n\t\t\tawait this.alimentar(1);\n\t\t\tawait this.barcode(chave.substr(22));\n\n\t\t\t// Imprime o QR Code\n\t\t\tif(qrcode){\n\t\t\t\tawait this.alimentar(1);\n\t\t\t\tawait this.qrcode(qrcode);\n\t\t\t}\n\t\t}\n\n\t\t// Cria uma margem no cupom\n\t\tawait this.alimentar(3);\n\n\t\t// Cria uma margem no cupom\n\t\tawait this.guilhotina();\n\n\t\t// Imprime o documento\n\t\tfor(let i = 0; i < numerovias; i++){\n\t\t\tif(!this.imprimir()){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t// Imprime um documento ativo\n\tasync imprimirDocumentoCancelado(numerovias){\n\t\tlet paramSATSerie = await valorParametro(this.Pool, \"SAT\", \"SERIE\");\n\n\t\tlet xml = null;\n\t\tlet qrcode = null;\n\t\tlet xmlcanc = null;\n\t\tlet qrcodecanc = null\n\n\t\t// Carrega o XML do documento\n\t\tif(this.documento.operacao === \"CU\" && this.documento.xml){\n\t\t\txml = xmlJS.xml2json(this.documento.xml, {compact: true});\n\t\t\txml = JSON.parse(xml);\n\t\t\tif(xml.CFe.infCFe.ide.assinaturaQRCODE){\n\t\t\t\tqrcode = xml.CFe.infCFe.ide.assinaturaQRCODE._text;\n\t\t\t}\n\n\t\t\txmlcanc = xmlJS.xml2json(this.documento.xml, {compact: true});\n\t\t\txmlcanc = JSON.parse(xmlcanc);\n\t\t\tif(xmlcanc.CFe.infCFe.ide.assinaturaQRCODE){\n\t\t\t\tqrcodecanc = xmlcanc.CFe.infCFe.ide.assinaturaQRCODE._text;\n\t\t\t}\n\t\t}\n\n\t\t// Cria o cabecalho\n\t\tawait this.imprimirCabecalho();\n\n\t\t// Identificacao do documento\n\t\tlet numero = null;\n\t\tlet dthrcriacao = this.documento.dthrcriacao;\n\t\tlet dtcriacao = dthrcriacao.toLocaleString().split(\" \")[0];\n\t\tlet hrcriacao = String(dthrcriacao.getHours()).lpad(2, \"0\") + \":\" + String(dthrcriacao.getMinutes()).lpad(2, \"0\") + \":\" + String(dthrcriacao.getSeconds()).lpad(2, \"0\");\n\t\tswitch(this.documento.operacao){\n\t\t\tcase \"CU\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : this.documento.iddocumento).lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"CUPOM FISCAL ELETRNICO - SAT\", \"center\", true);\n\t\t\t\tawait this.texto(\"COO: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"NC\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"NOTA FISCAL A PARTIR DE CUPOM\", \"center\", true);\n\t\t\t\tawait this.texto(\"Nmero: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"OR\":\n\t\t\t\tnumero = String(this.documento.iddocumento ? this.documento.iddocumento : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"ORAMENTO - SEM VALOR FISCAL\", \"center\", true);\n\t\t\t\tawait this.texto(\"Nmero: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"RE\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"NOTA FISCAL DE REMESSA\", \"center\", true);\n\t\t\t\tawait this.texto(\"Nmero: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tawait this.texto(\"CANCELAMENTO\", \"center\", true);\n\t\tawait this.linha();\n\n\t\t// Dados do documento de venda\n\t\tswitch(this.documento.operacao){\n\t\t\tcase \"CU\":\n\t\t\t\tawait this.texto(\"Dados do cupom fiscal eletronico cancelado\", \"center\", true);\n\t\t\t\tawait this.texto(\"SAT No. \" + paramSATSerie, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"OR\":\n\t\t\t\tlet orcamento = this.documento.iddocumento.lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"Dados do oramento cancelado\", \"center\", true);\n\t\t\t\tawait this.texto(\"Oramento No. \" + orcamento, \"center\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlet numero = this.documento.numero.lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"Dados do nota fiscal eletronica cancelada\", \"center\", true);\n\t\t\t\tawait this.texto(\"Nota Fiscal No. \" + numero, \"center\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\tawait this.texto(\"TOTAL R$ \" + this.documento.totaldocumento.format(2, \",\", \".\"), \"center\");\n\t\tawait this.texto(dtcriacao + \" \" + hrcriacao, \"center\");\n\n\t\t// Verifica se eh um documento fiscal\n\t\tif(this.documento.chave){\n\n\t\t\t// Chave CFe do documento de venda\n\t\t\tawait this.alimentar(1);\n\t\t\tlet chave = this.documento.chave.substr(-44);\n\t\t\tawait this.texto(chave, \"center\");\n\t\t\tawait this.barcode(chave.substr(0, 22));\n\t\t\tawait this.alimentar(1);\n\t\t\tawait this.barcode(chave.substr(22));\n\n\t\t\t// QR Code do documento de venda\n\t\t\tif(qrcode){\n\t\t\t\tawait this.alimentar(1);\n\t\t\t\tawait this.qrcode(qrcode);\n\t\t\t}\n\t\t}\n\n\t\t// Linha\n\t\tawait this.linha();\n\n\t\tif(this.documento.operacao === \"CU\"){\n\t\t\tlet dthrcancelamento = this.documento.dthrcancelamento;\n\t\t\tlet dtcancelamento = dthrcancelamento.toLocaleString().split(\" \")[0];\n\t\t\tlet hrcancelamento = String(dthrcancelamento.getHours()).lpad(2, \"0\") + \":\" + String(dthrcancelamento.getMinutes()).lpad(2, \"0\") + \":\" + String(dthrcancelamento.getSeconds()).lpad(2, \"0\");\n\n\t\t\t// Dados do documento de cancelamento\n\t\t\tawait this.texto(\"Dados do cupom fiscal eletronico de cancelamento\", \"center\", true);\n\t\t\tawait this.texto(\"SAT No. \" + paramSATSerie, \"center\");\n\t\t\tawait this.texto(dtcancelamento + \" \" + hrcancelamento, \"center\");\n\n\t\t\t// Verifica se eh um documento fiscal\n\t\t\tif(this.documento.chavecanc){\n\n\t\t\t\t// Chave CFe do documento de cancelamento\n\t\t\t\tawait this.alimentar(1);\n\t\t\t\tlet chave = this.documento.chavecanc.substr(-44);\n\t\t\t\tawait this.texto(chave, \"center\");\n\t\t\t\tawait this.barcode(chave.substr(0, 22));\n\t\t\t\tawait this.alimentar(1);\n\t\t\t\tawait this.barcode(chave.substr(22));\n\n\t\t\t\t// QR Code do documento de cancelamento\n\t\t\t\tif(qrcodecanc){\n\t\t\t\t\tawait this.alimentar(1);\n\t\t\t\t\tawait this.qrcode(qrcodecanc);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Cria uma margem no cupom\n\t\tawait this.alimentar(6);\n\n\t\t// Aciona a guilhotina\n\t\tawait this.guilhotina();\n\n\t\t// Imprime o documento\n\t\tif(!this.imprimir()){\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t// Imprime modelo 1 da lista de produtos (impressao em uma linha)\n\tasync imprimirListaProdutosModelo01() {\n\t\t// Cabecalho dos produtos\n\t\tawait this.texto(\"#   Descrio\" + \" \".repeat(this.colunas - 40) + \"   Qtde X Preo       Total\");\n\n\t\t// Linha\n\t\tawait this.linha();\n\n\t\t// Imprime os produtos\n\t\tawait this.documentoprodutos.forEach(async (documentoproduto) => {\n\t\t\t// Sequencial do produto\n\t\t\tlet sequencial = String(documentoproduto.sequencial).lpad(3, \"0\");\n\n\t\t\t// Total do item\n\t\t\tlet totalproduto = (documentoproduto.quantidade * documentoproduto.preco).format(2, \",\", \".\");\n\n\t\t\t// Calculo (preco x quantidade)\n\t\t\tlet quantidade = documentoproduto.quantidade.format(documentoproduto.precisao, \",\", \".\") + \" \" + documentoproduto.sigla;\n\t\t\tlet calculo = quantidade.lpad(10, \" \") + \" X \" + documentoproduto.preco.format(2, \",\", \".\").rpad(8, \" \") + \" \" + totalproduto.lpad(8, \" \");\n\n\t\t\t// Calcula o tamanho maximo da descricao do produto\n\t\t\tlet descricaoLength = this.colunas - (sequencial.length + calculo.length + 2);\n\n\t\t\t// Descricao do produto\n\t\t\tlet descricao = documentoproduto.descricao.removeSpecial().substr(0, descricaoLength).rpad(descricaoLength, \" \");\n\n\t\t\t// Monta o texto final e envia para impressora\n\t\t\tawait this.texto(sequencial + \" \" + descricao + \" \" + calculo);\n\n\t\t\t// Verifica se houve desconto no item\n\t\t\tif(documentoproduto.totaldesconto > 0){\n\t\t\t\tlet totaldesconto = \"-\" + documentoproduto.totaldesconto.format(2, \",\", \".\");\n\t\t\t\tlet texto = \"    Desconto\" + \" \".repeat(this.colunas - (12 + totaldesconto.length)) + totaldesconto;\n\t\t\t\tawait this.texto(texto);\n\t\t\t}\n\n\t\t\t// Verifica se houve acrescimo no item\n\t\t\tif(documentoproduto.totalacrescimo > 0){\n\t\t\t\tlet totalacrescimo = \"+\" + documentoproduto.totalacrescimo.format(2, \",\", \".\");\n\t\t\t\tlet texto = \"    Acrescimo\" + \" \".repeat(this.colunas - (13 + totalacrescimo.length)) + totalacrescimo;\n\t\t\t\tawait this.texto(texto);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Imprime modelo 2 da lista de produtos\n\tasync imprimirListaProdutosModelo02() {\n\t\t// Cabecalho dos produtos\n\t\tawait this.texto(\"Descrio do produto\");\n\t\tawait this.texto(\"Quantidade X Preo\" + \" \".repeat(this.colunas - 23) + \"Total\");\n\n\t\t// Linha\n\t\tawait this.linha();\n\n\t\t// Imprime os produtos\n\t\tfor(let i = 0; i < this.documentoprodutos.length; i++){\n\t\t\tlet documentoproduto = this.documentoprodutos[i];\n\t\t//}\n\t\t//await this.documentoprodutos.forEach(async (documentoproduto) => {\n\n\t\t\t// Descricao do produto\n\t\t\tlet descricao = documentoproduto.descricao.removeSpecial();\n\t\t\t\n\t\t\t// Sequencial do produto\n\t\t\tlet sequencial = String(documentoproduto.sequencial).lpad(3, \"0\");\n\n\t\t\t// Calculo\n\t\t\tlet quantidade = documentoproduto.quantidade.format(documentoproduto.precisao, \",\", \".\") + \" \" + documentoproduto.sigla;\n\t\t\tlet preco = documentoproduto.preco.format(2, \",\", \".\");\n\t\t\tlet totalproduto = (documentoproduto.quantidade * documentoproduto.preco).format(2, \",\", \".\");\n\n\t\t\t// Monta a primeira linha\n\t\t\tlet linha1 = sequencial + \" \" + descricao;\n\t\t\tawait this.texto(linha1);\n\n\t\t\t// Monta a segunda linha\n\t\t\tlet calculo = \"    \" + quantidade + \" X \" + preco;\n\t\t\tlet linha2 = calculo + \" \".repeat(this.colunas - calculo.length - totalproduto.length) + totalproduto;\n\t\t\tawait this.texto(linha2);\n\n\t\t\t// Verifica se houve desconto no item\n\t\t\tif(documentoproduto.totaldesconto > 0){\n\t\t\t\tlet totaldesconto = \"-\" + documentoproduto.totaldesconto.format(2, \",\", \".\");\n\t\t\t\tlet texto = \"    Desconto\" + \" \".repeat(this.colunas - (12 + totaldesconto.length)) + totaldesconto;\n\t\t\t\tawait this.texto(texto);\n\t\t\t}\n\n\t\t\t// Verifica se houve acrescimo no item\n\t\t\tif(documentoproduto.totalacrescimo > 0){\n\t\t\t\tlet totalacrescimo = \"+\" + documentoproduto.totalacrescimo.format(2, \",\", \".\");\n\t\t\t\tlet texto = \"    Acrescimo\" + \" \".repeat(this.colunas - (13 + totalacrescimo.length)) + totalacrescimo;\n\t\t\t\tawait this.texto(texto);\n\t\t\t}\n\t\t}\n\n\t\t// Linha\n\t\tawait this.linha();\n\t}\n\n\t// Imprime uma linha de separacao\n\tasync linha(){\n\t\tawait this.texto(\"-\".repeat(this.colunas));\n\t}\n\n\t// Imprime um QR Code\n\tasync qrcode(qrcode){\n\t\tlet escpos = await this.carregarEscPos();\n\t\tescpos.qrcode(qrcode);\n\t}\n\n\t// Reinicia as configuracoes da impressora para os valor padroes\n\tasync reiniciar(){\n\t\tif(this.colunas === null){\n\t\t\tthis.colunas = parseInt(await valorParametro(this.Pool, \"IMPRESSORA\", \"COLUNAS\"), 10);\n\t\t}\n\t\tif(this.nome === null){\n\t\t\tthis.nome = await valorParametro(this.Pool, \"IMPRESSORA\", \"NOME\");\n\t\t}\n\t\tif(this.modelo === null){\n\t\t\tthis.modelo = await valorParametro(this.Pool, \"IMPRESSORA\", \"MODELO\");\n\t\t}\n\n\t\tlet escpos = await this.carregarEscPos();\n\t\tescpos.reset();\n\t}\n\n\t// Imprime um texto com opcao de alinhamento e negrito\n\tasync texto(texto, align, bold){\n\t\talign = (align === undefined ? \"left\" : align);\n\t\tbold = (bold === undefined ? false : bold);\n\n\t\tif(texto === null){\n\t\t\ttexto = \"\";\n\t\t}\n\n\t\tlet escpos = await this.carregarEscPos();\n\n\t\tswitch(align){\n\t\t\tcase \"center\":\n\t\t\t\ttexto = texto.cpad(this.colunas, \" \");\n\t\t\t\tbreak;\n\t\t\tcase \"left\":\n\t\t\t\ttexto = texto.rpad(this.colunas, \" \");\n\t\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\ttexto = texto.lpad(this.colunas, \" \");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\ttexto = texto.substr(0, this.colunas);\n\n\t\tescpos.text(texto, bold);\n\t}\n\n}\n","import React from \"react\";\nimport $ from \"jquery\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport FormGroup from \"../com/FormGroup.js\";\nimport Row from \"../com/Row.js\";\nimport SubTitle from \"../com/SubTitle.js\";\nimport Title from \"../com/Title.js\";\n\nimport Printer from \"../com/Printer.js\";\n\nimport {currentDate, valorParametro} from \"../def/function.js\";\n\nexport default class Fechamento extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\ttipo: null,\n\t\t\tdtinicial: null,\n\t\t\tdtfinal: null,\n\t\t\tativarFechamentoRelatorio: false,\n\t\t\tativarFechamentoResumo: false\n\t\t};\n\n\t\tthis.gerar = this.gerar.bind(this);\n\t\tthis.imprimir = this.imprimir.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t\tthis.Printer = new Printer(this.Pool);\n\n\t\t// Tipo de documentos que deverao ser contabilizadas\n\t\tlet arrOperacao = [\"CU\"];\n\t\tfor(let i in arrOperacao){\n\t\t\tarrOperacao[i] = \"'\" + arrOperacao[i] + \"'\";\n\t\t}\n\t\tthis.operacaoQuery = \"(\" + arrOperacao.join(\", \") + \")\";\n\t}\n\n\tasync gerar(){\n\t\tif(!$(\"#tipo\").val()){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Por favor, informe o tipo de fechamento antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\tif(!$(\"#dtinicial\").val()){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Por favor, informe a data inicial do fechamento antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\tif(!$(\"#dtfinal\").val()){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Por favor, informe a data final do fechamento antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tawait this.prepararImpressao();\n\n\t\tthis.setState({\n\t\t\ttipo: $(\"#tipo\").val(),\n\t\t\tdtinicial: $(\"#dtinicial\").val(),\n\t\t\tdtfinal: $(\"#dtfinal\").val(),\n\t\t\tativarFechamentoRelatorio: false,\n\t\t\tativarFechamentoResumo: false\n\t\t}, () => {\n\t\t\tthis.setState({\n\t\t\t\tativarFechamentoRelatorio: true\n\t\t\t}, () => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tativarFechamentoResumo: true\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tasync imprimir(){\n\t\tawait this.Printer.alimentar(3);\n\t\tawait this.Printer.guilhotina();\n\t\tawait this.Printer.imprimir();\n\t\twindow.FastMessage.show(\"Fechamento impresso com sucesso!\");\n\t}\n\n\tasync prepararImpressao(){\n\t\tawait this.Printer.reiniciar();\n\n\t\t// Formata as datas\n\t\tlet dtinicial = $(\"#dtinicial\").val().split(\"-\").reverse().join(\"/\");\n\t\tlet dtfinal = $(\"#dtfinal\").val().split(\"-\").reverse().join(\"/\");\n\n\t\t// Cabecalho\n\t\tawait this.Printer.texto(await valorParametro(this.Pool, \"EMITENTE\", \"NOMEFANTASIA\"), \"center\", true);\n\t\tawait this.Printer.texto(\"FECHAMENTO: \" + dtinicial + \" a \" + dtfinal, \"center\", true);\n\t\tawait this.Printer.alimentar();\n\t}\n\n\trender(){\n\t\tlet disabledImprimir = (!this.state.tipo);\n\n\t\treturn (\n\t\t\t<Content className=\"Fechamento\">\n\t\t\t\t<Title>Fechamento</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\" offset=\"3\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<FormGroup type=\"select\" id=\"tipo\" label=\"Fechamento por\" className=\"col-12\" options={{\"data\": \"Data\", \"categoria\": \"Categoria\", \"formapagamento\": \"Forma de pagamento\", \"produto\": \"Produto\"}} defaultValue=\"data\" />\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtinicial\" label=\"Data inicial\" className=\"col-6\" defaultValue={currentDate()} />\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtfinal\" label=\"Data final\" className=\"col-6\" defaultValue={currentDate()} />\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"pr-0\">\n\t\t\t\t\t\t\t\t<Button text=\"Gerar\" block={true} color=\"green\" icon=\"file-play\" onClick={this.gerar} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"pl-0\">\n\t\t\t\t\t\t\t\t<Button text=\"Imprimir\" block={true} color=\"blue\" icon=\"printer\" onClick={this.imprimir} disabled={disabledImprimir} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<FechamentoRelatorio Pool={this.Pool} Printer={this.Printer} tipo={this.state.tipo} dtinicial={this.state.dtinicial} dtfinal={this.state.dtfinal} operacaoQuery={this.operacaoQuery} ativar={this.state.ativarFechamentoRelatorio} />\n\t\t\t\t<FechamentoResumo Pool={this.Pool} Printer={this.Printer} dtinicial={this.state.dtinicial} dtfinal={this.state.dtfinal} operacaoQuery={this.operacaoQuery} ativar={this.state.ativarFechamentoResumo} />\n\t\t\t</Content>\n\t\t)\n\t}\n}\n\nclass FechamentoRelatorio extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdados: []\n\t\t};\n\n\t\tthis.tipoDescritivo = this.tipoDescritivo.bind(this);\n\t}\n\n\tasync carregarDados(props){\n\t\tprops = (props === undefined ? this.props : props);\n\n\t\t// Verifica se deve executar a instrucao\n\t\tif(!props.ativar){\n\t\t\treturn;\n\t\t}\n\n\t\t// Monta a query de acordo com o tipo de fechamento\n\t\tlet query = null;\n\t\tswitch(props.tipo){\n\t\t\tcase \"categoria\":\n\t\t\t\tquery = [\n\t\t\t\t\t\"SELECT categoria.descricao,\",\n\t\t\t\t\t\"  SUM(documentoproduto.quantidade) AS quantidade,\",\n\t\t\t\t\t\"  SUM(documentoproduto.totalproduto) AS total\",\n\t\t\t\t\t\"FROM documentoproduto\",\n\t\t\t\t\t\"INNER JOIN documento USING (iddocumento)\",\n\t\t\t\t\t\"INNER JOIN produto USING (idproduto)\",\n\t\t\t\t\t\"INNER JOIN categoria USING (idcategoria)\",\n\t\t\t\t\t\"WHERE documento.dthrcriacao::DATE BETWEEN $1 AND $2\",\n\t\t\t\t\t\"  AND documento.status = 'A'\",\n\t\t\t\t\t\"  AND documento.operacao IN \" + props.operacaoQuery,\n\t\t\t\t\t\"GROUP BY 1\",\n\t\t\t\t\t\"ORDER BY 3 DESC\"\n\t\t\t\t].join(\" \");\n\t\t\t\tbreak;\n\t\t\tcase \"data\":\n\t\t\t\tquery = [\n\t\t\t\t\t\"SELECT TO_CHAR(documento.dthrcriacao, 'DD/MM/YYYY') AS descricao,\",\n\t\t\t\t\t\"  SUM(documentoproduto.quantidade) AS quantidade,\",\n\t\t\t\t\t\"  SUM(documentoproduto.totalproduto) AS total,\",\n\t\t\t\t\t\"  documento.dthrcriacao::DATE AS dtcriacao\",\n\t\t\t\t\t\"FROM documentoproduto\",\n\t\t\t\t\t\"INNER JOIN documento USING (iddocumento)\",\n\t\t\t\t\t\"WHERE documento.dthrcriacao::DATE BETWEEN $1 AND $2\",\n\t\t\t\t\t\"  AND documento.status = 'A'\",\n\t\t\t\t\t\"  AND documento.operacao IN \" + props.operacaoQuery,\n\t\t\t\t\t\"GROUP BY 1, 4\",\n\t\t\t\t\t\"ORDER BY 4\"\n\t\t\t\t].join(\" \");\n\t\t\t\tbreak;\n\t\t\tcase \"formapagamento\":\n\t\t\t\tquery = [\n\t\t\t\t\t\"SELECT formapagamento.descricao,\",\n\t\t\t\t\t\"  COUNT(documentopagamento.iddocumentopagamento) AS quantidade,\",\n\t\t\t\t\t\"  SUM(documentopagamento.totalpagamento) AS total\",\n\t\t\t\t\t\"FROM documentopagamento\",\n\t\t\t\t\t\"INNER JOIN documento USING (iddocumento)\",\n\t\t\t\t\t\"INNER JOIN formapagamento USING (idformapagamento)\",\n\t\t\t\t\t\"WHERE documento.dthrcriacao::DATE BETWEEN $1 AND $2\",\n\t\t\t\t\t\"  AND documento.status = 'A'\",\n\t\t\t\t\t\"  AND documento.operacao IN \" + props.operacaoQuery,\n\t\t\t\t\t\"GROUP BY 1\",\n\t\t\t\t\t\"ORDER BY 3 DESC\"\n\t\t\t\t].join(\" \");\n\t\t\t\tbreak;\n\t\t\tcase \"produto\":\n\t\t\t\tquery = [\n\t\t\t\t\t\"SELECT produto.descricao,\",\n\t\t\t\t\t\"  SUM(documentoproduto.quantidade) AS quantidade,\",\n\t\t\t\t\t\"  SUM(documentoproduto.totalproduto) AS total\",\n\t\t\t\t\t\"FROM documentoproduto\",\n\t\t\t\t\t\"INNER JOIN documento USING (iddocumento)\",\n\t\t\t\t\t\"INNER JOIN produto USING (idproduto)\",\n\t\t\t\t\t\"WHERE documento.dthrcriacao::DATE BETWEEN $1 AND $2\",\n\t\t\t\t\t\"  AND documento.status = 'A'\",\n\t\t\t\t\t\"  AND documento.operacao IN \" + props.operacaoQuery,\n\t\t\t\t\t\"GROUP BY 1\",\n\t\t\t\t\t\"ORDER BY 3 DESC\"\n\t\t\t\t].join(\" \");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Executa comando SQL\n\t\tlet res = await props.Pool.query(query, [props.dtinicial, props.dtfinal]);\n\n\t\t// Determina o tamanho de cada coluna\n\t\tlet colunas = this.props.Printer.colunas;\n\t\tlet colQuantidade = 6;\n\t\tlet colTotal = 10;\n\t\tlet colDescricao = colunas - colQuantidade - colTotal;\n\n\t\t// Cria o cabecalho da grade na impressao\n\t\tlet texto = this.tipoDescritivo().substr(0, colDescricao).rpad(colDescricao, \" \");\n\t\ttexto += \"Qtde\".substr(0, colQuantidade).cpad(colQuantidade, \" \");\n\t\ttexto += \"Total\".substr(0, colTotal).lpad(colTotal, \" \");\n\t\tawait this.props.Printer.texto(texto, \"left\", true);\n\n\t\t// Alimenta classe da impressora\n\t\tfor(let i in res.rows){\n\t\t\tlet row = res.rows[i];\n\t\t\tlet descricao = row.descricao.removeSpecial();\n\t\t\tlet quantidade = row.quantidade.format(0, \",\", \".\");\n\t\t\tlet total = row.total.format(2, \",\", \".\");\n\n\t\t\tlet texto = descricao.substr(0, colDescricao).rpad(colDescricao, \" \");\n\t\t\ttexto += quantidade.substr(0, colQuantidade).cpad(colQuantidade, \" \");\n\t\t\ttexto += total.substr(0, colTotal).lpad(colTotal, \" \");\n\t\t\tawait this.props.Printer.texto(texto);\n\t\t}\n\t\tawait this.props.Printer.alimentar(2);\n\n\t\t// Atualiza o State com os dados\n\t\tthis.setState({\n\t\t\tdados: res.rows\n\t\t});\n\t}\n\n\tcomponentWillUpdate(nextProps){\n\t\tif(nextProps !== this.props){\n\t\t\tthis.carregarDados(nextProps);\n\t\t}\n\t}\n\n\ttipoDescritivo(){\n\t\tswitch(this.props.tipo){\n\t\t\tcase \"categoria\":\n\t\t\t\treturn \"Categoria\";\n\t\t\tcase \"data\":\n\t\t\t\treturn \"Data\";\n\t\t\tcase \"formapagamento\":\n\t\t\t\treturn \"Forma de pagamento\";\n\t\t\tcase \"produto\":\n\t\t\t\treturn \"Produto\";\n\t\t\tdefault:\n\t\t\t\treturn this.props.tipo;\n\t\t}\n\t}\n\n\trender(){\n\t\tif(!this.props.ativar || this.props.tipo === null){\n\t\t\treturn null;\n\t\t}\n\n\t\tlet t_quantidade = 0;\n\t\tlet t_total = 0;\n\n\t\treturn (\n\t\t\t<Row className=\"mt-5\">\n\t\t\t\t<Col size=\"8\" offset=\"2\">\n\t\t\t\t\t<table className=\"table table-striped\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>{this.tipoDescritivo()}</th>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">Quantidade</th>\n\t\t\t\t\t\t\t\t<th className=\"text-right\">Total</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{this.state.dados.map((e, i) => {\n\t\t\t\t\t\t\t\tt_quantidade += parseFloat(e.quantidade);\n\t\t\t\t\t\t\t\tt_total += parseFloat(e.total);\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<tr key={i}>\n\t\t\t\t\t\t\t\t\t\t<td>{e.descricao}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-center\">{e.quantidade.format(0, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + e.total.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">{t_quantidade.format(0, \",\", \".\")}</th>\n\t\t\t\t\t\t\t\t<th className=\"text-right\">{\"R$ \" + t_total.format(2, \",\", \".\")}</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tfoot>\n\t\t\t\t\t</table>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t);\n\t}\n}\n\nclass FechamentoResumo extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\ttotalbruto: 0,\n\t\t\ttotalcancelado: 0,\n\t\t\tqtdecancelado: 0,\n\t\t\ttotalativo: 0,\n\t\t\tqtdeativo: 0,\n\t\t\ttotalorcamento: 0\n\t\t};\n\n\t\tthis.carregarDados = this.carregarDados.bind(this);\n\t}\n\n\tasync carregarDados(props){\n\t\tprops = (props === undefined ? this.props : props);\n\n\t\t// Verifica se deve executar a instrucao\n\t\tif(!props.ativar){\n\t\t\treturn;\n\t\t}\n\n\t\tlet query = [\n\t\t\t\"SELECT COALESCE((SELECT SUM(totaldocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND operacao IN (\" + props.operacaoQuery + \")), 0) AS totalbruto,\",\n\t\t\t\"  COALESCE((SELECT SUM(totaldocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND status = 'C' AND operacao IN (\" + props.operacaoQuery + \")), 0) AS totalcancelado,\",\n\t\t\t\"  COALESCE((SELECT COUNT(iddocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND status = 'C' AND operacao IN (\" + props.operacaoQuery + \")), 0) AS qtdecancelado,\",\n\t\t\t\"  COALESCE((SELECT SUM(totaldocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND status = 'A' AND operacao IN (\" + props.operacaoQuery + \")), 0) AS totalativo,\",\n\t\t\t\"  COALESCE((SELECT COUNT(iddocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND status = 'A' AND operacao IN (\" + props.operacaoQuery + \")), 0) AS qtdeativo,\",\n\t\t\t\"  COALESCE((SELECT SUM(totaldocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND status = 'A' AND operacao IN ('OR')), 0) AS totalorcamento\",\n\t\t].join(\" \");\n\n\t\t// Executa comando SQL\n\t\tlet res = await props.Pool.query(query, [props.dtinicial, props.dtfinal]);\n\t\tlet row = res.rows[0];\n\n\t\t// Monta impressao do resumo\n\t\tlet colResumo2 = 15;\n\t\tlet colResumo1 = this.props.Printer.colunas - colResumo2;\n\t\tawait this.props.Printer.texto(\"RESUMO\", \"center\", true);\n\t\tawait this.props.Printer.texto(\"Total bruto das vendas\".rpad(colResumo1, \" \") + row.totalbruto.format(2, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Total de vendas canceladas\".rpad(colResumo1, \" \") + row.totalcancelado.format(2, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Quantidade de vendas canceladas\".rpad(colResumo1, \" \") + row.qtdecancelado.format(0, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Total liquido das vendas\".rpad(colResumo1, \" \") + row.totalativo.format(2, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Quantidade de vendas\".rpad(colResumo1, \" \") + row.qtdeativo.format(0, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Total liquido das vendas\".rpad(colResumo1, \" \") + (row.totalativo / row.qtdeativo).format(2, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Total bruto dos orcamentos\".rpad(colResumo1, \" \") + row.totalorcamento.format(2, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.alimentar(2);\n\n\t\t// Atualiza o State com o dados\n\t\tthis.setState({\n\t\t\ttotalbruto: row.totalbruto,\n\t\t\ttotalcancelado: row.totalcancelado,\n\t\t\tqtdecancelado: row.qtdecancelado,\n\t\t\ttotalativo: row.totalativo,\n\t\t\tqtdeativo: row.qtdeativo,\n\t\t\ttotalorcamento: row.totalorcamento\n\t\t});\n\t}\n\n\tcomponentWillUpdate(nextProps){\n\t\tif(nextProps !== this.props){\n\t\t\tthis.carregarDados(nextProps);\n\t\t}\n\t}\n\n\trender(){\n\t\tif(!this.props.ativar || this.props.dtinicial === null || this.props.dtfinal === null){\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"mb-5\">\n\t\t\t\t<SubTitle text=\"Resumo\" />\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"8\" offset=\"2\">\n\t\t\t\t\t\t<table className=\"table table-striped\">\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Total bruto das vendas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + this.state.totalbruto.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Total de vendas canceladas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + this.state.totalcancelado.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Quantidade de vendas canceladas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{this.state.qtdecancelado}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Total liquido de vendas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + this.state.totalativo.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Quantidade de vendas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{this.state.qtdeativo}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Ticket mdio das vendas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + (this.state.totalativo / this.state.qtdeativo).format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Total dos oramentos</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + this.state.totalorcamento.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import { default as xlsx } from \"node-xlsx\";\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nconst electron = window.require(\"electron\");\nconst remote = window.require(\"@electron/remote\");\n\nexport default class Importacao {\n\n\tconstructor(Pool){\n\t\tthis.Pool = Pool;\n\t}\n\n\tcorAleatoria(){\n\t\tlet cores = [\n\t\t\t\"#b71c1c\", \"#d32f2f\", \"#f44336\", \"#e57373\", \"#ffcdd2\",\n\t\t\t\"#880e4f\", \"#c2185b\", \"#e91e63\", \"#f06292\", \"#f8bbd0\",\n\t\t\t\"#4a148c\", \"#7b1fa2\", \"#9c27b0\", \"#ba68c8\", \"#e1bee7\",\n\t\t\t\"#311b92\", \"#512da8\", \"#673ab7\", \"#9575cd\", \"#d1c4e9\",\n\t\t\t\"#1a237e\", \"#303f9f\", \"#3f51b5\", \"#7986cb\", \"#c5cae9\",\n\t\t\t\"#0d47a1\", \"#1976d2\", \"#2196f3\", \"#64b5f6\", \"#bbdefb\",\n\t\t\t\"#01579b\", \"#0288d1\", \"#03a9f4\", \"#4fc3f7\", \"#b3e5fc\",\n\t\t\t\"#006064\", \"#0097a7\", \"#00bcd4\", \"#4dd0e1\", \"#b2ebf2\",\n\t\t\t\"#004d40\", \"#00796b\", \"#009688\", \"#4db6ac\", \"#b2dfdb\",\n\t\t\t\"#194D33\", \"#388e3c\", \"#4caf50\", \"#81c784\", \"#c8e6c9\",\n\t\t\t\"#33691e\", \"#689f38\", \"#8bc34a\", \"#aed581\", \"#dcedc8\",\n\t\t\t\"#827717\", \"#afb42b\", \"#cddc39\", \"#dce775\", \"#f0f4c3\",\n\t\t\t\"#f57f17\", \"#fbc02d\", \"#ffeb3b\", \"#fff176\", \"#fff9c4\",\n\t\t\t\"#ff6f00\", \"#ffa000\", \"#ffc107\", \"#ffd54f\", \"#ffecb3\",\n\t\t\t\"#e65100\", \"#f57c00\", \"#ff9800\", \"#ffb74d\", \"#ffe0b2\",\n\t\t\t\"#bf360c\", \"#e64a19\", \"#ff5722\", \"#ff8a65\", \"#ffccbc\",\n\t\t\t\"#3e2723\", \"#5d4037\", \"#795548\", \"#a1887f\", \"#d7ccc8\",\n\t\t\t\"#263238\", \"#455a64\", \"#607d8b\", \"#90a4ae\", \"#cfd8dc\",\n\t\t\t\"#000000\", \"#525252\", \"#969696\", \"#D9D9D9\", \"#FFFFFF\"\n\t\t];\n\t\treturn cores[Math.floor(Math.random() * cores.length)];\n\t}\n\n\tasync incluirCategoria(client, categoria){\n\t\tlet cor = this.corAleatoria();\n\n\t\tlet sql = \"INSERT INTO categoria (descricao, idncm, sinctributacao, cor) VALUES ($1, $2, $3, $4) RETURNING idcategoria\";\n\t\tlet res = await client.query(sql, [categoria.descricao, categoria.idncm, 'S', cor]);\n\n\t\treturn res.rows[0].idcategoria;\n\t}\n\n\tasync incluirProduto(client, produto){\n\t\tconsole.log(produto);\n\n\t\t// Trata alguns valores recebidos\n\t\tif(produto.balanca)\tproduto.balanca = produto.balanca.substr(0, 1).toUpperCase();\n\t\tif(produto.precovariavel) produto.precovariavel = produto.precovariavel.substr(0, 1).toUpperCase();\n\t\tif(produto.preco) produto.preco = produto.preco.toFloat();\n\t\tif(produto.aliqicms) produto.aliqicms = produto.aliqicms.toFloat();\n\t\tif(produto.aliqpis) produto.aliqpis = produto.aliqpis.toFloat();\n\t\tif(produto.aliqcofins) produto.aliqcofins = produto.aliqcofins.toFloat();\n\n\t\t// Balanca para unidade de medida\n\t\tproduto.idunidade = (produto.balanca === \"S\" ? 2 : 1);\n\t\tdelete produto.balanca;\n\n\t\t// Preenche o preco com zero caso venha vazio\n\t\tif(!produto.preco){\n\t\t\tproduto.preco = 0;\n\t\t}\n\n\t\t// Reformata o NCM\n\t\tif(produto.codigoncm){\n\t\t\tproduto.codigoncm = String(produto.codigoncm).removeFormat();\n\t\t\tproduto.codigoncm = produto.codigoncm.substr(0, 4) + \".\" + produto.codigoncm.substr(4, 2) + \".\" + produto.codigoncm.substr(6, 2);\n\t\t}\n\n\t\t// Reformata o CEST\n\t\tif(produto.cest){\n\t\t\tproduto.cest = produto.cest.removeFormat();\n\t\t\tproduto.cest = produto.cest.substr(0, 2) + \".\" + produto.cest.substr(2, 4) + \".\" + produto.cest.substr(6, 2);\n\t\t}\n\n\t\t// Reformata o CFOP\n\t\tif(produto.cfop){\n\t\t\tproduto.cfop = produto.cfop.removeFormat();\n\t\t\tproduto.cfop = produto.cfop.substr(0, 1) + \".\" + produto.cfop.substr(1, 3);\n\t\t}\n\n\t\t// Verifica se deve sincronizar a tributacao\n\t\tconsole.log([produto.csosn, produto.cstpis, produto.cstcofins, (produto.csosn || produto.cstpis || produto.cstcofins)]);\n\t\tif(produto.csosn || produto.cstpis || produto.cstcofins){\n\t\t\tproduto.sinctributacao = \"N\";\n\t\t}else{\n\t\t\tproduto.sinctributacao = \"S\";\n\t\t}\n\n\t\t// Carrega o ID do NCM\n\t\tif(produto.codigoncm && !produto.idncm){\n\t\t\tlet res = await client.query(\"SELECT idncm FROM ncm WHERE codigoncm = $1\", [produto.codigoncm]);\n\t\t\tif(res.rows.length === 0){\n\t\t\t\tthrow new Error(\"O NCM \" + produto.codigoncm + \" no foi encontrado na base de NCMs do SAT-Flex.\");\n\t\t\t}\n\t\t\tproduto.idncm = res.rows[0].idncm;\n\t\t}\n\n\t\t// Verifica se deve consultar a categoria\n\t\tif(produto.categoria && !produto.idcateogria){\n\t\t\tlet res = await client.query(\"SELECT idcategoria FROM categoria WHERE descricao = $1\", [produto.categoria]);\n\t\t\tif(res.rows.length === 0){\n\t\t\t\t// Cria a categoria e retorna o ID\n\t\t\t\tproduto.idcategoria = await this.incluirCategoria(client, {\n\t\t\t\t\tdescricao: produto.categoria,\n\t\t\t\t\tidncm: produto.idncm\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tproduto.idcategoria = res.rows[0].idcategoria;\n\t\t\t}\n\t\t}\n\n\t\t// Remove as colunas que nao vao entrar no SQL\n\t\tdelete produto.codigoncm;\n\t\tdelete produto.categoria;\n\n\t\t// Caputura as colunas e os valores\n\t\tlet columns = Object.keys(produto);\n\t\tlet values = Object.values(produto);\n\t\tlet references = [];\n\t\tfor(let i = 1; i <= values.length; i++){\n\t\t\treferences.push(\"$\" + String(i));\n\t\t}\n\n\t\t// Cria SQL de inclusao do produto e executa\n\t\tlet sql = \"INSERT INTO produto (\" + columns.join(\", \") + \") VALUES (\" + references.join(\", \") + \")\";\n\t\tawait client.query(sql, values);\n\n\t\t// Incrementa o contador de produto importados\n\t\tthis.importados++;\n\t}\n\n\tasync processarPlanilha(fileName, callBack){\n\t\t// Abre um client com o banco de dados\n\t\tconst client = await this.Pool.connect();\n\n\t\ttry{\n\t\t\t// Inicia a transacao\n\t\t\tclient.query(\"BEGIN\");\n\n\t\t\t// Carrega a planilha\n\t\t\tlet planilha = xlsx.parse(fileName);\n\n\t\t\t// Captura os dados a serem lidos\n\t\t\tlet dados = planilha[0].data;\n\n\t\t\t// Remove a primeira linha (cabecalho)\n\t\t\tdados.shift();\n\n\t\t\t// Verifica se existe ao menos um produto\n\t\t\tif(typeof dados !== \"object\" || dados.length === 0 || dados[0].length === 0){\n\t\t\t\tthrow new Error(\"Nenhum produto foi encontrado na planilha.\");\n\t\t\t}\n\n\t\t\t// Percorre as linhas da planilha\n\t\t\tfor(let linha of dados){\n\t\t\t\tif(!linha[0]){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet produto = {\n\t\t\t\t\tdescricao: linha[0],\n\t\t\t\t\tcategoria: linha[1],\n\t\t\t\t\tcodigoean: linha[2],\n\t\t\t\t\tbalanca: linha[3],\n\t\t\t\t\tprecovariavel: linha[4],\n\t\t\t\t\tpreco: linha[5],\n\t\t\t\t\tcodigoncm: linha[6],\n\t\t\t\t\torigem: linha[7],\n\t\t\t\t\tcsosn: linha[8],\n\t\t\t\t\taliqicms: linha[9],\n\t\t\t\t\tcstpis: linha[10],\n\t\t\t\t\taliqpis: linha[11],\n\t\t\t\t\tcstcofins: linha[12],\n\t\t\t\t\taliqcofins: linha[13],\n\t\t\t\t\tcodcontribsocial: linha[14],\n\t\t\t\t\tcest: linha[15],\n\t\t\t\t\tcfop: linha[16]\n\t\t\t\t};\n\n\t\t\t\t// Tenta gravar o produto\n\t\t\t\tawait this.incluirProduto(client, produto);\n\t\t\t}\n\n\t\t\t// Confirma a transacao do banco de dados\n\t\t\tawait client.query(\"COMMIT\");\n\n\t\t\t// Sucesso\n\t\t\tcallBack();\n\t\t}catch(err){\n\t\t\t// Cancela a transacao no banco\n\t\t\tawait client.query(\"ROLLBACK\");\n\t\t\tcallBack(err);\n\t\t}finally{\n\t\t\t// Libera o client com o banco\n\t\t\tclient.release();\n\t\t}\n\t}\n\n\tselecionarPlanilha(){\n\t\tlet { dialog } = remote;\n\t\tdialog.showOpenDialog({\n\t\t\ttitle: \"Selecone a planilha de produtos\",\n\t\t\tfilters: [\n\t\t\t\t{name: \"MS-Excel\", extensions: [\"xls\", \"xlsx\"]}\n\t\t\t]\n\t\t}, (filePaths) => {\n\t\t\tif(filePaths && filePaths.length > 0){\n\t\t\t\tthis.importados = 0;\n\t\t\t\twindow.Loading.show();\n\t\t\t\tthis.processarPlanilha(filePaths[0], (err) => {\n\t\t\t\t\twindow.Loading.hide();\n\t\t\t\t\tif(err) return defaultMessageBoxError(err);\n\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\ttitle: \"Planilha importada com sucesso!\",\n\t\t\t\t\t\ttext: \"A planilha de produtos foi importada com sucesso.<br>Total de produtos: \" + String(this.importados)\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n}\n","import React from \"react\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport Importacao from \"../com/Importacao.js\";\nimport Printer from \"../com/Printer.js\";\n\nconst electron = window.require(\"electron\");\n\nexport default class Ferramentas extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tredirect: null\n\t\t};\n\n\t\tthis.descobrirPortaImpressora = this.descobrirPortaImpressora.bind(this);\n\t\tthis.importarPlanilha = this.importarPlanilha.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tconsoleDesenvolvedor(){\n\t\telectron.ipcRenderer.sendSync(\"open-dev-tools\");\n\t}\n\n\tdescobrirPortaImpressora(){\n\t\twindow.Loading.show();\n\t\tnew Promise(async (resolve) => {\n\t\t\tlet printer = new Printer(this.Pool);\n\t\t\tfor(let i = 1; i <= 20; i++){\n\t\t\t\tlet nome = \"COM\" + String(i);\n\t\t\t\tlet texto = \"Porta configurada para impressora: \" + nome + \" \".repeat(90);\n\t\t\t\ttry{\n\t\t\t\t\tawait printer.imprimir(nome, texto, \"escpos\");\n\t\t\t\t}catch(err){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tresolve();\n\t\t}).then(() => {\n\t\t\twindow.Loading.hide();\n\t\t\twindow.FastMessage.show(\"Texto enviado para as portas COM\");\n\t\t});\n\t}\n\n\timportarPlanilha(){\n\t\tlet importacao = new Importacao(this.Pool);\n\t\timportacao.selecionarPlanilha();\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Ferramentas</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"8\" offset=\"2\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text=\"Descobrir porta<br>COM da impressora\" icon=\"printer\" size=\"xxl\" block={true} onClick={this.descobrirPortaImpressora} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text=\"Importar planilha<br>de produtos\" icon=\"download\" size=\"xxl\" block={true} onClick={this.importarPlanilha} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text=\"Abrir console de<br>desenvolvedor\" icon=\"embed2\" size=\"xxl\" block={true} onClick={this.consoleDesenvolvedor} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport \"../css/ListGroup.css\";\n\nexport default class ListGroup extends React.Component {\n\trender(){\n\t\tlet className = [\"list-group\"];\n\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport \"../css/ListItem.css\";\n\nexport default class ListItem extends React.Component {\n\trender(){\n\t\tlet props = Object.assign({}, this.props);\n\n\t\tlet className = [\"list-group-item\"];\n\t\tif(props.className){\n\t\t\tclassName.push(props.className);\n\t\t}\n\t\tif(props.active){\n\t\t\tclassName.push(\"active\");\n\t\t}\n\t\tdelete props.active;\n\t\tdelete props.className;\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")} {...props}>\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport FormControl from \"../com/FormControl.js\";\nimport ListGroup from \"../com/ListGroup.js\";\nimport ListItem from \"../com/ListItem.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/Parametro.css\";\n\nexport default class Parametro extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tlistaGrupo: [],\n\t\t\tlistaParametro: [],\n\t\t\tgrupoAtivo: null,\n\t\t\tparametroAtivo: null,\n\n\t\t\tidparametro: null,\n\t\t\tvalor: null,\n\t\t\tobservacao: null\n\t\t};\n\n\t\tthis.ajustarAltura = this.ajustarAltura.bind(this);\n\t\tthis.carregarListaGrupo = this.carregarListaGrupo.bind(this);\n\t\tthis.carregarListaParametro = this.carregarListaParametro.bind(this);\n\t\tthis.carregarParametro = this.carregarParametro.bind(this);\n\t\tthis.gravar = this.gravar.bind(this);\n\t\tthis.onChangeValor = this.onChangeValor.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tajustarAltura(){\n\t\t$(\"#content .list-group\").each(function(){\n\t\t\tlet height = window.innerHeight - $(this).offset().top - 30;\n\t\t\t$(this).height(height);\n\t\t});\n\t}\n\n\tcarregarListaGrupo(){\n\t\tthis.Pool.query(\"SELECT DISTINCT grupo FROM parametro WHERE visivel = 'S' ORDER BY grupo\", [], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tlistaGrupo: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcarregarListaParametro(grupo){\n\t\tthis.Pool.query(\"SELECT idparametro, nome FROM parametro WHERE visivel = 'S' AND grupo = $1 ORDER BY ordem, nome\", [grupo], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tlistaParametro: res.rows,\n\t\t\t\tgrupoAtivo: grupo,\n\t\t\t\tparametroAtivo: null,\n\n\t\t\t\tidparametro: null,\n\t\t\t\tvalor: null,\n\t\t\t\tobservacao: null\n\t\t\t});\n\t\t});\n\t}\n\n\tcarregarParametro(idparametro){\n\t\tthis.Pool.query(\"SELECT idparametro, valor, observacao FROM parametro WHERE idparametro = $1\", [idparametro], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet row = res.rows.shift();\n\t\t\tthis.setState({\n\t\t\t\tparametroAtivo: idparametro,\n\t\t\t\tidparametro: row.idparametro,\n\t\t\t\tvalor: row.valor,\n\t\t\t\tobservacao: row.observacao\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\twindow.addEventListener(\"resize\", this.ajustarAltura);\n\n\t\tthis.ajustarAltura();\n\t\tthis.carregarListaGrupo();\n\t}\n\n\tcomponentWillUnmount(){\n\t\twindow.removeEventListener(\"resize\", this.ajustarAltura);\n\t}\n\n\tgravar(){\n\t\tlet query = \"UPDATE parametro SET valor = $1 WHERE idparametro = $2\";\n\t\tthis.Pool.query(query, [this.state.valor, this.state.idparametro], (err) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\twindow.FastMessage.show(\"Parmetro atualizado com sucesso!\");\n\t\t})\n\t}\n\n\tonChangeValor(event){\n\t\tthis.setState({\n\t\t\tvalor: event.target.value\n\t\t});\n\t}\n\n\trender(){\n\t\tlet observacao = null;\n\t\tif(this.state.observacao){\n\t\t\tobservacao = this.state.observacao.replaceAll(\"\\\\n\", \"<br>\");\n\t\t}\n\n\t\treturn (\n\t\t\t<Content className=\"Parametro\">\n\t\t\t\t<Title>Parmetros do sistema</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"3\" offset=\"1\">\n\t\t\t\t\t\t<ListGroup>\n\t\t\t\t\t\t\t{this.state.listaGrupo.map((row, i) => {\n\t\t\t\t\t\t\t\treturn <ListItem key={i} active={this.state.grupoAtivo === row.grupo} onClick={() => {this.carregarListaParametro(row.grupo)}}>{row.grupo}</ListItem>\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</ListGroup>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"3\">\n\t\t\t\t\t\t<ListGroup>\n\t\t\t\t\t\t\t{this.state.listaParametro.map((row, i) => {\n\t\t\t\t\t\t\t\treturn <ListItem key={i} active={this.state.parametroAtivo === row.idparametro} onClick={() => {this.carregarParametro(row.idparametro)}}>{row.nome}</ListItem>\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</ListGroup>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t<FormControl type=\"textarea\" rows=\"7\" value={this.state.valor} onChange={this.onChangeValor} disabled={!this.state.idparametro} />\n\t\t\t\t\t\t<Button text=\"Gravar alteraes\" icon=\"floppy-disk\" color=\"green\" size=\"lg\" block={true} className=\"mt-2 mb-2\" disabled={!this.state.idparametro} onClick={this.gravar} />\n\t\t\t\t\t\t<div className={\"observacao\" + (observacao ? \"\" : \" d-none\")} dangerouslySetInnerHTML={{__html: observacao}}></div>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport FormControl from \"../com/FormControl.js\";\nimport FormGroup from \"../com/FormGroup.js\";\nimport Hr from \"../com/Hr.js\";\nimport Modal from \"../com/Modal.js\";\nimport Row from \"../com/Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class ModalProduto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tshow: this.props.show,\n\t\t\tshowDiv: null,\n\t\t\ttitle: null\n\t\t};\n\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.changeDiv = this.changeDiv.bind(this);\n\t\tthis.changeTitle = this.changeTitle.bind(this);\n\t\tthis.excluir = this.excluir.bind(this);\n\t\tthis.gravar = this.gravar.bind(this);\n\t\tthis.limpar = this.limpar.bind(this);\n\t\tthis.onChangeCategoria = this.onChangeCategoria.bind(this);\n\t\tthis.onChangeInput = this.onChangeInput.bind(this);\n\t\tthis.onChangeSincTributacao = this.onChangeSincTributacao.bind(this);\n\t\tthis.sincronizarTributacao = this.sincronizarTributacao.bind(this);\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false,\n\t\t\tshowDiv: null\n\t\t});\n\t}\n\n\tcarregar(idproduto, callback){\n\t\tlet query = [\n\t\t\t\"SELECT produto.descricao, produto.dthrcriacao,\",\n\t\t\t\"  produto.idcategoria, produto.codigoean, produto.idunidade,\",\n\t\t\t\"  produto.precovariavel, produto.preco, produto.status,\",\n\t\t\t\"  produto.sinctributacao, ncm.codigoncm, produto.origem,\",\n\t\t\t\"  produto.cfop, produto.csosn, produto.aliqicms, \",\n\t\t\t\"  produto.cstpis, produto.aliqpis, produto.cstcofins, \",\n\t\t\t\"  produto.aliqcofins, produto.codcontribsocial, produto.cest\",\n\t\t\t\"FROM produto\",\n\t\t\t\"LEFT JOIN ncm USING (idncm)\",\n\t\t\t\"WHERE produto.idproduto = $1\"\n\t\t].join(\" \");\n\n\t\tthis.props.Pool.query(query, [idproduto], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(res.rows.length === 0){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Produto no encontrado\",\n\t\t\t\t\ttext: \"O produto selecionado no pde ser encontrado.\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet state = {};\n\t\t\tlet row = res.rows[0];\n\t\t\tfor(let id in row){\n\t\t\t\tlet value = row[id];\n\t\t\t\tswitch(id){\n\t\t\t\t\tcase \"dthrcriacao\":\n\t\t\t\t\t\tvalue = value.toLocaleString();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"preco\":\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tvalue = value.format(2, \",\", \".\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tstate[\"input_\" + id] = value;\n\t\t\t}\n\t\t\tthis.setState(state);\n\n\t\t\tif(typeof callback === \"function\"){\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t}\n\n\tchangeDiv(name){\n\t\tthis.setState({\n\t\t\tshowDiv: name\n\t\t});\n\t}\n\n\tchangeTitle(props){\n\t\tif(props.idproduto){\n\t\t\tprops.Pool.query(\"SELECT descricao FROM produto WHERE idproduto = $1\", [props.idproduto], (err, res) => {\n\t\t\t\tif(err){\n\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\ttitle: \"Alterando produto: \" + res.rows[0].descricao\n\t\t\t\t});\n\t\t\t});\n\t\t}else{\n\t\t\tthis.setState({\n\t\t\t\ttitle: \"Criando novo produto\"\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tif(!nextProps.show){\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.changeTitle(nextProps);\n\n\t\tlet updateShowState = () => {\n\t\t\tthis.setState({\n\t\t\t\tshow: nextProps.show\n\t\t\t}, () => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.changeDiv(\"principal\");\n\t\t\t\t}, 1000);\n\t\t\t});\n\t\t};\n\n\t\tif(nextProps.idproduto){\n\t\t\tthis.carregar(nextProps.idproduto, updateShowState);\n\t\t}else{\n\t\t\tthis.limpar();\n\t\t\tupdateShowState();\n\t\t}\n\t}\n\n\texcluir(){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Exclur produto\",\n\t\t\ttext: \"Tem certeza que deseja exclur o produto <b>\" + this.state.input_descricao + \"</b>?\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tthis.props.Pool.query(\"DELETE FROM produto WHERE idproduto = $1\", [this.props.idproduto], (err, res) => {\n\t\t\t\t\t\t\tif(err){\n\t\t\t\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tshow: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\twindow.FastMessage.show(\"Produto excludo com sucesso.\");\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"No\",\n\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t})\n\t}\n\n\tasync gravar(){\n\t\tlet query = null;\n\n\t\tlet columns = [];\n\t\tlet values = [];\n\t\tfor(let name in this.state){\n\t\t\tif(name.substr(0, 6) === \"input_\"){\n\t\t\t\tlet name2 = name.replace(\"input_\", \"\");\n\t\t\t\tlet value = this.state[name];\n\n\t\t\t\tif(name2 === \"codigoncm\" && value){\n\t\t\t\t\ttry{\n\t\t\t\t\t\tlet res = await this.props.Pool.query(\"SELECT idncm FROM ncm WHERE codigoncm = $1\", [value]);\n\t\t\t\t\t\tif(res.rows.length === 0){\n\t\t\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\t\t\ttitle: \"NCM inexistente\",\n\t\t\t\t\t\t\t\ttext: \"O cdigo de NCM \" + value + \" no pde ser encontrado.<br>Verifique se foi informado corretamente.\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tname2 = \"idncm\";\n\t\t\t\t\t\tvalue = res.rows[0].idncm;\n\t\t\t\t\t}catch(err){\n\t\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif([\"idproduto\", \"dthrcriacao\"].indexOf(name2) > -1){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tswitch(name2){\n\t\t\t\t\tcase \"preco\":\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tif(value){\n\t\t\t\t\t\t\tvalue = value.toFloat();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcolumns.push(name2);\n\t\t\t\tvalues.push(value);\n\t\t\t}\n\t\t}\n\n\t\tif(this.props.idproduto){\n\t\t\tlet num = 1;\n\t\t\tlet sets = [];\n\t\t\tfor(let i in columns){\n\t\t\t\tsets.push(columns[i] + \" = $\" + num++);\n\t\t\t}\n\t\t\tquery = \"UPDATE produto SET \" + sets.join(\", \") + \" WHERE idproduto = \" + this.props.idproduto;\n\t\t}else{\n\t\t\tlet sets = [];\n\t\t\tfor(let i = 0; i < columns.length; i++){\n\t\t\t\tsets.push(\"$\" + (i + 1));\n\t\t\t}\n\t\t\tquery = \"INSERT INTO produto (\" + columns.join(\", \") + \") VALUES (\" + sets.join(\", \") + \")\";\n\t\t}\n\n\t\tthis.props.Pool.query(query, values, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.FastMessage.show(\"Produto gravado com sucesso.\");\n\t\t});\n\t}\n\n\tlimpar(){\n\t\tlet state = {};\n\t\tfor(let name in this.state){\n\t\t\tif(name.substr(0, 6) === \"input_\"){\n\t\t\t\tstate[name] =  null;\n\t\t\t}\n\t\t}\n\t\tthis.setState(state);\n\t}\n\n\tonChangeCategoria(event){\n\t\tthis.onChangeInput(event, () => {\n\t\t\tthis.sincronizarTributacao();\n\t\t});\n\t}\n\n\tonChangeInput(event, callback){\n\t\tlet element = event.target;\n\t\tlet id = element.id.replace(\"modalproduto-\", \"\");\n\t\tlet value = element.value;\n\t\tif(element.type === \"checkbox\"){\n\t\t\tvalue = (element.checked ? \"S\" : \"N\");\n\t\t}\n\n\t\tthis.setState({\n\t\t\t[\"input_\" + id]: value\n\t    }, callback);\n\t}\n\n\tonChangeSincTributacao(event){\n\t\tthis.onChangeInput(event, () => {\n\t\t\tthis.sincronizarTributacao();\n\t\t});\n\t}\n\n\tsincronizarTributacao(){\n\t\tif(this.state.input_sinctributacao !== \"S\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tlet query = [\n\t\t\t\"SELECT ncm.codigoncm, categoria.origem,\",\n\t\t\t\"  categoria.cfop, categoria.csosn, categoria.aliqicms, \",\n\t\t\t\"  categoria.cstpis, categoria.aliqpis, categoria.cstcofins, \",\n\t\t\t\"  categoria.aliqcofins, categoria.codcontribsocial, categoria.cest\",\n\t\t\t\"FROM categoria\",\n\t\t\t\"LEFT JOIN ncm USING (idncm)\",\n\t\t\t\"WHERE categoria.idcategoria = $1\"\n\t\t].join(\" \");\n\n\t\tthis.props.Pool.query(query, [this.state.input_idcategoria], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(res.rows.length === 0){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Categoria no encontrada\",\n\t\t\t\t\ttext: \"A categoria informada no produto no pde ser encontrada.\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet state = {};\n\t\t\tlet row = res.rows[0];\n\t\t\tfor(let id in row){\n\t\t\t\tlet value = row[id];\n\t\t\t\tswitch(id){\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tvalue = value.format(2, \",\", \".\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tstate[\"input_\" + id] = value;\n\t\t\t}\n\t\t\tthis.setState(state);\n\t\t});\n\t}\n\n\tshouldComponentUpdate(nextProps){\n\t\treturn nextProps.show;\n\t}\n\n\trender(){\n\t\tlet origemOptions = {\n\t\t\t\"0\": \"0 - Nacional, exceto as indicadas nos cdigos 3, 4, 5 e 8\",\n\t\t\t\"1\": \"1 - Estrangeira - Importao direta, exceto a indicada no cdigo 6\",\n\t\t\t\"2\": \"2 - Estrangeira - Adquirida no mercado interno, exceto a indicada no cdigo 7\",\n\t\t\t\"3\": \"3 - Nacional, mercadoria ou bem com Contedo de Importao superior a 40% e inferior ou igual a 70%\",\n\t\t\t\"4\": \"4 - Nacional, cuja produo tenha sido feita em conformidade com os processos produtivos bsicos de que tratam o Decreto-Lei n 288/67, e as Leis ns 8.248/91, 8.387/91, 10.176/01 e 11.484/ 07\",\n\t\t\t\"5\": \"5 - Nacional, mercadoria ou bem com Contedo de Importao inferior ou igual a 40%\",\n\t\t\t\"6\": \"6 - Estrangeira - Importao direta, sem similar nacional, constante em lista da Resoluo CAMEX n 79/2012 e gs natural\",\n\t\t\t\"7\": \"7 - Estrangeira - Adquirida no mercado interno, sem similar nacional, constante em lista da Resoluo CAMEX n 79/2012 e gs natural\",\n\t\t\t\"8\": \"8 - Nacional, mercadoria ou bem com Contedo de Importao superior a 70%\"\n\t\t};\n\n\t\treturn (\n\t\t\t<Modal title={this.state.title} size=\"lg\" show={this.state.show} beforeClose={this.props.beforeClose} afterClose={this.props.afterClose} closeOnOutClick={false}>\n\t\t\t\t<div className={this.state.showDiv !== \"principal\" ? \"d-none\" : \"\"}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-descricao\" className=\"col-8\" label=\"Descrio\" value={this.state.input_descricao} onChange={this.onChangeInput} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-dthrcriacao\" className=\"col-4\" label=\"Criado em\" readOnly={true} value={this.state.input_dthrcriacao} onChange={this.onChangeInput} disabled={true} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-idcategoria\" className=\"col-5\" label=\"Categoria\" dbtable=\"categoria\" dbcolumn=\"descricao\" Pool={this.props.Pool} value={this.state.input_idcategoria} onChange={this.onChangeCategoria} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-codigoean\" className=\"col-4\" label=\"Cdigo EAN\" value={this.state.input_codigoean} onChange={this.onChangeInput} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-idunidade\" className=\"col-3\" label=\"Unidade de venda\" dbtable=\"unidade\" dbcolumn=\"descricao\" Pool={this.props.Pool} value={this.state.input_idunidade} onChange={this.onChangeInput} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-precovariavel\" className=\"col-3\" label=\"Preo varivel\" options={{\"S\": \"Sim\", \"N\": \"No\"}} value={this.state.input_precovariavel} onChange={this.onChangeInput} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-preco\" className=\"col-3\" inputClassName=\"text-center\" label=\"Preo de venda\" InformarValor={{money: true, decimal: 2}} value={this.state.input_preco} onChange={this.onChangeInput} disabled={this.state.input_precovariavel === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-status\" className=\"col-3\" label=\"Status\" options={{\"A\": \"Ativo\", \"I\": \"Inativo\"}} value={this.state.input_status} onChange={this.onChangeInput} />\n\t\t\t\t\t\t<Col size=\"3\" labelMargin={true}>\n\t\t\t\t\t\t\t<Button text=\"Tributaes...\" icon=\"file-text\" color=\"blue\" block={true} onClick={() => {this.changeDiv(\"tributacao\")}} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Hr className=\"mt-0\" />\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t\t<Button text=\"Exclur\" icon=\"bin\" color=\"red\" onClick={this.excluir} className={this.props.idproduto ? \"\" : \"d-none\"} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col size=\"6\" className=\"text-right\">\n\t\t\t\t\t\t\t<Button text=\"Cancelar\" icon=\"undo\" color=\"red\" onClick={this.cancelar} />\n\t\t\t\t\t\t\t<Button text=\"Gravar produto\" icon=\"thumbs-up\" color=\"green\" className=\"ml-2\" onClick={this.gravar} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t\t<div className={this.state.showDiv !== \"tributacao\" ? \"d-none\" : \"\"}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col size=\"12\">\n\t\t\t\t\t\t\t<FormControl type=\"checkbox\" id=\"modalproduto-sinctributacao\" label=\"Usar as mesmas tributaes da categoria\" className=\"col-12\" value={this.state.input_sinctributacao} onChange={this.onChangeSincTributacao} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-codigoncm\" label=\"NCM do produto\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"9999.99.99\"}} value={this.state.input_codigoncm} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-origem\" className=\"col-6\" label=\"Origem do produto\" options={origemOptions} value={this.state.input_origem} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-cfop\" label=\"CFOP\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"9.999\"}} value={this.state.input_cfop} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-csosn\" className=\"col-3\" inputClassName=\"text-center\" label=\"CSOSN\" options={{\"102\": \"102\", \"300\": \"300\", \"400\": \"400\", \"500\": \"500\"}} value={this.state.input_csosn} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-aliqicms\" label=\"Alquota de ICMS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqicms} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-cstpis\" label=\"CST do PIS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_cstpis} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-aliqpis\" label=\"Alquota de PIS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqpis} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-cstcofins\" label=\"CST do Cofins\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_cstcofins} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-aliqcofins\" label=\"Alquota de Cofins\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqcofins} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-codcontribsocial\" label=\"Contribuio social\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_codcontribsocial} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-cest\" label=\"CEST\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99.999.99\"}} value={this.state.input_cest} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<Col size=\"12\" className=\"text-right\">\n\t\t\t\t\t\t\t<Button text=\"Voltar para o produto...\" icon=\"file-text\" color=\"blue\" onClick={() => {this.changeDiv(\"principal\")}} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport {Redirect} from \"react-router\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport DataGrid from \"../com/DataGrid.js\";\nimport FormControl from \"../com/FormControl.js\";\nimport Icon from \"../com/Icon.js\";\nimport ModalProduto from \"../com/ModalProduto.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/Produto.css\";\n\nexport default class Produto extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdataGrid: [],\n\t\t\tpesquisa: \"\",\n\t\t\tidproduto: null,\n\t\t\tshowModalProduto: false,\n\t\t\tredirectToCategoria: false\n\t\t};\n\n\t\tthis.beforeCloseModal = this.beforeCloseModal.bind(this);\n\t\tthis.loadDataGrid = this.loadDataGrid.bind(this);\n\t\tthis.novoProduto = this.novoProduto.bind(this);\n\t\tthis.onChangePesquisa = this.onChangePesquisa.bind(this);\n\t\tthis.onClickBtnCategoria = this.onClickBtnCategoria.bind(this);\n\t\tthis.onKeyUpPesquisa = this.onKeyUpPesquisa.bind(this);\n\t\tthis.pesquisaLimpar = this.pesquisaLimpar.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tbeforeCloseModal(){\n\t\tthis.setState({\n\t\t\tshowModalProduto: false\n\t\t}, () => {\n\t\t\tthis.loadDataGrid();\n\t\t});\n\t}\n\n\tcarregarProduto(idproduto){\n\t\tthis.setState({\n\t\t\tshowModalProduto: true,\n\t\t\tidproduto: idproduto\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.loadDataGrid();\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.Pool.end();\n\t}\n\n\tloadDataGrid(){\n\t\tlet query = [\n\t\t\t\"SELECT produto.idproduto, produto.descricao, categoria.descricao AS categoria,\",\n\t\t\t\"  produto.preco, produto.codigoean, produto.dthrcriacao\",\n\t\t\t\"FROM produto\",\n\t\t\t\"LEFT JOIN categoria USING (idcategoria)\",\n\t\t\t\"WHERE produto.descricao ILIKE '%'||$1||'%'\",\n\t\t\t\"  OR produto.codigoean ILIKE '%'||$1||'%'\",\n\t\t\t\"ORDER BY produto.descricao\"\n\t\t].join(\" \");\n\n\t\tthis.Pool.query(query, [this.state.pesquisa], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tlet data = [];\n\n\t\t\t\tfor(let i in res.rows){\n\t\t\t\t\tlet row = res.rows[i];\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{text: row.descricao, align: \"left\"},\n\t\t\t\t\t\t\t{text: row.categoria, align: \"left\"},\n\t\t\t\t\t\t\t{text: row.preco.format(2, \",\", \".\"), align: \"center\"},\n\t\t\t\t\t\t\t{text: row.codigoean, align: \"center\"},\n\t\t\t\t\t\t\t{text: row.dthrcriacao.toLocaleString(), align: \"center\"}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\tthis.carregarProduto(row.idproduto);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tdataGrid: data\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tnovoProduto(){\n\t\tthis.setState({\n\t\t\tshowModalProduto: true,\n\t\t\tidproduto: null\n\t\t});\n\t}\n\n\tonChangePesquisa(event){\n\t\tthis.setState({\n\t\t\tpesquisa: event.target.value\n\t\t});\n\t}\n\n\tonClickBtnCategoria(){\n\t\tthis.setState({\n\t\t\tredirectToCategoria: true\n\t\t});\n\t}\n\n\tonKeyUpPesquisa(event){\n\t\tif(event.keyCode === 13){\n\t\t\tthis.loadDataGrid();\n\t\t}\n\t}\n\n\tpesquisaLimpar(){\n\t\tthis.setState({\n\t\t\tpesquisa: \"\"\n\t\t}, () => {\n\t\t\tthis.loadDataGrid();\n\t\t});\n\t}\n\n\trender(){\n\t\tif(this.state.redirectToCategoria){\n\t\t\treturn <Redirect to=\"/categoria\" />\n\t\t}\n\n\t\tlet dataGridHeader = [\n\t\t\t{text: \"Descrio\", align: \"left\"},\n\t\t\t{text: \"Categoria\", align: \"left\"},\n\t\t\t{text: \"Preo\", align: \"center\"},\n\t\t\t{text: \"EAN\", align: \"left\"},\n\t\t\t{text: \"Criado em\", align: \"center\"}\n\t\t];\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title model=\"2\">Cadastro de <b>Produtos</b></Title>\n\t\t\t\t<Row className=\"mb-4\">\n\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t<FormControl type=\"search\" id=\"pesquisa\" value={this.state.pesquisa} placeholder=\"Pesquise um produto...\" onKeyUp={this.onKeyUpPesquisa} onChange={this.onChangePesquisa} />\n\t\t\t\t\t\t<Icon name=\"cross\" id=\"pesquisa-limpar\" onClick={this.pesquisaLimpar} className={this.state.pesquisa.length > 0 ? null : \"d-none\"} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"2\" className=\"pl-0\">\n\t\t\t\t\t\t<Button text=\"Buscar\" icon=\"search\" color=\"green\" onClick={this.loadDataGrid} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\" className=\"text-right\">\n\t\t\t\t\t\t<Button text=\"Categorias\" icon=\"layers\" color=\"blue\" className=\"mr-3\" onClick={this.onClickBtnCategoria} />\n\t\t\t\t\t\t<Button text=\"Novo produto\" icon=\"plus\" color=\"green\" onClick={this.novoProduto} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<DataGrid header={dataGridHeader} data={this.state.dataGrid} />\n\t\t\t\t<ModalProduto Pool={this.Pool} show={this.state.showModalProduto} idproduto={this.state.idproduto} beforeClose={this.beforeCloseModal} />\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport {Redirect} from \"react-router\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nexport default class Relatorios extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tredirect: null\n\t\t};\n\t}\n\n\trender(){\n\t\tif(this.state.redirect){\n\t\t\treturn <Redirect to={this.state.redirect} />\n\t\t}\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Relatrios</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"3\" offset=\"3\">\n\t\t\t\t\t\t<Button text=\"Fechamento\" icon=\"calendar\" size=\"xxl\" block={true} onClick={() => {this.setState({redirect: \"/fechamento\"})}} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"3\">\n\t\t\t\t\t\t<Button text=\"Estatsticas\" icon=\"chart-dots\" size=\"xxl\" block={true} onClick={() => {this.setState({redirect: \"/estatistica\"})}} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row className=\"mt-4\">\n\t\t\t\t\t<Col size=\"3\" offset=\"3\">\n\t\t\t\t\t\t<Button text=\"Oramentos\" icon=\"files-empty\" size=\"xxl\" block={true} onClick={() => {this.setState({redirect: \"/relorcamento\"})}} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport {Redirect} from \"react-router\";\nimport $ from \"jquery\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport FormGroup from \"../com/FormGroup.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport Printer from \"../com/Printer.js\";\n\nimport {currentDate, decimaisQuantidade, defaultMessageBoxError, valorParametro} from \"../def/function.js\";\n\nexport default class RelOrcamento extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdtinicial: null,\n\t\t\tdtfinal: null,\n\t\t\tredirect: null\n\t\t};\n\n\t\tthis.acaoOrcamento = this.acaoOrcamento.bind(this);\n\t\tthis.gerar = this.gerar.bind(this);\n\t\tthis.imprimir = this.imprimir.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t\tthis.Printer = new Printer(this.Pool);\n\t}\n\n\tacaoOrcamento(documento){\n\t\tlet info = [\n\t\t\t\"Nmero: \" + String(documento.iddocumento).lpad(6, \"0\"),\n\t\t\t\"Cliente: \" + (documento.nomeorcamento ? documento.nomeorcamento : \"\"),\n\t\t\t\"Quantidade: \" + documento.totalquantidade.format(decimaisQuantidade(documento.totalquantidade), \",\", \".\"),\n\t\t\t\"Total: R$ \" + documento.totaldocumento.format(2, \",\", \".\")\n\t\t].join(\"<br>\");\n\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"O que voc deseja fazer com o oramento?\",\n\t\t\ttext: info,\n\t\t\tsize: \"lg\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Efetivar oramento\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tredirect: \"venda/\" + documento.iddocumento\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Excluir\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\ticon: \"bin\",\n\t\t\t\t\tclassName: \"btn-sm\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\t\ttitle: \"Excluso de oramento\",\n\t\t\t\t\t\t\ttext: \"Tem certeza que deseja exclur o oramento?<br>Essa ao no poder ser desfeita.\",\n\t\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t\t\t\twindow.Loading.show();\n\t\t\t\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\t\t\t\tawait this.Pool.query(\"DELETE FROM documento WHERE iddocumento = $1\", [documento.iddocumento]);\n\t\t\t\t\t\t\t\t\t\t\tawait this.gerar();\n\t\t\t\t\t\t\t\t\t\t}catch(error){\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessageBoxError(error);\n\t\t\t\t\t\t\t\t\t\t}finally{\n\t\t\t\t\t\t\t\t\t\t\twindow.Loading.hide();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext: \"No\",\n\t\t\t\t\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Voltar\",\n\t\t\t\t\tcolor: \"blue\",\n\t\t\t\t\ticon: \"undo\",\n\t\t\t\t\tonClick: function(){\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tasync gerar(){\n\t\tif(!$(\"#dtinicial\").val()){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Por favor, informe a data inicial do fechamento antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\tif(!$(\"#dtfinal\").val()){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Por favor, informe a data final do fechamento antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tawait this.prepararImpressao();\n\n\t\tthis.setState({\n\t\t\tdtinicial: $(\"#dtinicial\").val(),\n\t\t\tdtfinal: $(\"#dtfinal\").val()\n\t\t});\n\t}\n\n\tasync imprimir(){\n\t\ttry{\n\t\t\tawait this.Printer.alimentar(3);\n\t\t\tawait this.Printer.guilhotina();\n\t\t\tawait this.Printer.imprimir();\n\t\t\twindow.FastMessage.show(\"Relatrio impresso com sucesso!\");\n\t\t}catch(err){\n\t\t\tdefaultMessageBoxError(err);\n\t\t}\n\t}\n\n\tasync prepararImpressao(){\n\t\tawait this.Printer.reiniciar();\n\n\t\t// Formata as datas\n\t\tlet dtinicial = $(\"#dtinicial\").val().split(\"-\").reverse().join(\"/\");\n\t\tlet dtfinal = $(\"#dtfinal\").val().split(\"-\").reverse().join(\"/\");\n\n\t\t// Cabecalho\n\t\tawait this.Printer.texto(await valorParametro(this.Pool, \"EMITENTE\", \"NOMEFANTASIA\"), \"center\", true);\n\t\tawait this.Printer.texto(\"ORAMENTOS: \" + (dtinicial === dtfinal ? dtinicial : dtinicial + \"  \" + dtfinal), \"center\", true);\n\t\tawait this.Printer.alimentar();\n\t}\n\n\trender(){\n\t\tif(this.state.redirect){\n\t\t\treturn <Redirect to={this.state.redirect} />\n\t\t}\n\n\t\tlet disabledImprimir = (!this.state.dtinicial || !this.state.dtfinal);\n\n\t\treturn (\n\t\t\t<Content className=\"RelOrcamento\">\n\t\t\t\t<Title>Relatrio de Oramento</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\" offset=\"3\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtinicial\" label=\"Data inicial\" className=\"col-6\" defaultValue={currentDate()} />\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtfinal\" label=\"Data final\" className=\"col-6\" defaultValue={currentDate()} />\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"pr-0\">\n\t\t\t\t\t\t\t\t<Button text=\"Gerar\" block={true} color=\"green\" icon=\"file-play\" onClick={this.gerar} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"pl-0\">\n\t\t\t\t\t\t\t\t<Button text=\"Imprimir\" block={true} color=\"blue\" icon=\"printer\" onClick={this.imprimir} disabled={disabledImprimir} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<RelOrcamentoRelatorio Pool={this.Pool} Printer={this.Printer} dtinicial={this.state.dtinicial} dtfinal={this.state.dtfinal} acaoOrcamento={this.acaoOrcamento} />\n\t\t\t</Content>\n\t\t)\n\t}\n}\n\nclass RelOrcamentoRelatorio extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdados: []\n\t\t};\n\t}\n\n\tasync carregarDados(props){\n\t\tprops = (props === undefined ? this.props : props);\n\n\t\t// Monta a query\n\t\tlet query = [\n\t\t\t\"SELECT iddocumento, totalquantidade, totaldocumento, nomeorcamento,\",\n\t\t\t\"  dthrcriacao::DATE as dtcriacao, dthrcriacao::TIME as hrcriacao\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE operacao = $1\",\n\t\t\t\"  AND dthrcriacao::DATE BETWEEN $2 AND $3\",\n\t\t\t\"ORDER BY dthrcriacao\"\n\t\t].join(\" \");\n\n\t\t// Executa comando SQL\n\t\tlet res = await props.Pool.query(query, [\"OR\", props.dtinicial, props.dtfinal]);\n\n\t\t// Determina o tamanho de cada coluna\n\t\tlet colunas = this.props.Printer.colunas;\n\t\tlet colIdDocumento = 7;\n\t\tlet colTotalQuantidade = 6;\n\t\tlet colTotalDocumento = 10;\n\t\tlet colNomeOrcamento = colunas - colIdDocumento - colTotalQuantidade - colTotalDocumento;\n\n\t\t// Cria o cabecalho da grade na impressao\n\t\tlet texto = \"Nmero\".substr(0, colIdDocumento).rpad(colIdDocumento, \" \");\n\t\ttexto += \"Cliente\".substr(0, colNomeOrcamento).cpad(colNomeOrcamento, \" \");\n\t\ttexto += \"Qtde\".substr(0, colTotalQuantidade).cpad(colTotalQuantidade, \" \");\n\t\ttexto += \"Total\".substr(0, colTotalDocumento).lpad(colTotalDocumento, \" \");\n\t\tawait this.props.Printer.texto(texto, \"left\", true);\n\n\t\t// Alimenta classe da impressora\n\t\tlet t_totalquantidade = 0;\n\t\tlet t_totaldocumento = 0;\n\t\tfor(let i in res.rows){\n\t\t\tlet row = res.rows[i];\n\n\t\t\tlet iddocumento = String(row.iddocumento).lpad(6, \"0\");\n\t\t\tlet nomeorcamento = (row.nomeorcamento === null ? \"\" : String(row.nomeorcamento));\n\t\t\tlet totalquantidade = row.totalquantidade.format(decimaisQuantidade(row.totalquantidade), \",\", \".\");\n\t\t\tlet totaldocumento = row.totaldocumento.format(2, \",\", \".\");\n\n\t\t\ttexto = iddocumento.substr(0, colIdDocumento).rpad(colIdDocumento, \" \");\n\t\t\ttexto += nomeorcamento.substr(0, colNomeOrcamento).rpad(colNomeOrcamento, \" \");\n\t\t\ttexto += totalquantidade.substr(0, colTotalQuantidade).cpad(colTotalQuantidade, \" \");\n\t\t\ttexto += totaldocumento.substr(0, colTotalDocumento).lpad(colTotalDocumento, \" \");\n\t\t\tawait this.props.Printer.texto(texto);\n\n\t\t\tt_totalquantidade += parseFloat(row.totalquantidade);\n\t\t\tt_totaldocumento += parseFloat(row.totaldocumento);\n\t\t}\n\n\t\t// Calcula as casas decimais\n\t\tt_totalquantidade = t_totalquantidade.format(decimaisQuantidade(t_totalquantidade), \",\", \".\");\n\t\tt_totaldocumento = t_totaldocumento.format(2, \",\", \".\");\n\n\t\t// Totalizacao\n\t\ttexto = \"Total\".substr(0, (colIdDocumento + colNomeOrcamento)).rpad((colIdDocumento + colNomeOrcamento), \" \");\n\t\ttexto += String(t_totalquantidade).substr(0, colTotalQuantidade).cpad(colTotalQuantidade, \" \");\n\t\ttexto += String(t_totaldocumento).substr(0, colTotalDocumento).lpad(colTotalDocumento, \" \");\n\t\tawait this.props.Printer.texto(texto, \"left\", true);\n\t\tawait this.props.Printer.alimentar(2);\n\n\t\t// Atualiza o State com os dados\n\t\tthis.setState({\n\t\t\tdados: res.rows\n\t\t});\n\t}\n\n\tcomponentWillUpdate(nextProps){\n\t\tif(nextProps !== this.props){\n\t\t\tthis.carregarDados(nextProps);\n\t\t}\n\t}\n\n\trender(){\n\t\tif(!this.props.dtinicial || !this.props.dtfinal){\n\t\t\treturn null;\n\t\t}\n\n\t\tlet t_totalquantidade = 0;\n\t\tlet t_totaldocumento = 0;\n\n\t\treturn (\n\t\t\t<Row className=\"mt-5\">\n\t\t\t\t<Col size=\"8\" offset=\"2\">\n\t\t\t\t\t<table className=\"table table-striped mb-5\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">Nmero</th>\n\t\t\t\t\t\t\t\t<th className=\"text-left\">Cliente</th>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">Quantidade</th>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">Total</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{this.state.dados.map((e, i) => {\n\t\t\t\t\t\t\t\tt_totalquantidade += parseFloat(e.totalquantidade);\n\t\t\t\t\t\t\t\tt_totaldocumento += parseFloat(e.totaldocumento);\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<tr key={i} onClick={() => {this.props.acaoOrcamento(e)}}>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-center\">{String(e.iddocumento).lpad(6, \"0\")}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-left\">{e.nomeorcamento}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-center\">{e.totalquantidade.format(decimaisQuantidade(e.totalquantidade), \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + e.totaldocumento.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">{t_totalquantidade.format(decimaisQuantidade(t_totalquantidade), \",\", \".\")}</th>\n\t\t\t\t\t\t\t\t<th className=\"text-right\">{\"R$ \" + t_totaldocumento.format(2, \",\", \".\")}</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tfoot>\n\t\t\t\t\t</table>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nconst fs = window.require(\"fs\");\n\nexport default class Image extends React.Component {\n\trender(){\n\t\tlet props = Object.assign({}, this.props);\n\n\t\tif(props.src){\n\t\t\tif(fs.existsSync(props.src)){\n\t\t\t\tlet ext = props.src.split(\".\").reverse()[0];\n\t\t\t\tlet data = fs.readFileSync(props.src, \"base64\");\n\t\t\t\tprops.src = \"data:image/\" + ext + \";base64,\" + data;\n\t\t\t}else{\n\t\t\t\tprops.src = null;\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<img {...props} alt=\"\" />\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport Hr from \"../com/Hr.js\";\nimport Icon from \"../com/Icon.js\";\nimport Image from \"../com/Image.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport {defaultMessageBoxError} from \"./../def/function.js\";\n\nimport \"../css/Suporte.css\";\n\nexport default class Suporte extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tlogotipo: null,\n\t\t\tinformativo: null,\n\t\t\ttelefone: null,\n\t\t\temail: null,\n\t\t\tendereco: null\n\t\t};\n\n\t\tthis.carregarDados = this.carregarDados.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tcarregarDados(){\n\t\tthis.Pool.query(\"SELECT nome, valor FROM parametro WHERE grupo = $1\", [\"REVENDA\"], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet state = {};\n\t\t\tfor(let row of res.rows){\n\t\t\t\tstate[row.nome.toLowerCase()] = row.valor.replaceAll(\"\\n\", \"</br>\");\n\t\t\t}\n\t\t\tthis.setState(state);\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarDados();\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Suporte</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"5\" offset=\"1\">\n\t\t\t\t\t\t<Image className=\"logotipo\" src={this.state.logotipo} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"5\" offset=\"1\">\n\t\t\t\t\t\t<p className=\"informativo\" dangerouslySetInnerHTML={{__html: this.state.informativo}}></p>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col className=\"contatos\" size=\"4\" offset=\"1\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"1\"><Icon name=\"phone\" /></Col>\n\t\t\t\t\t\t\t<Col size=\"11\"><p dangerouslySetInnerHTML={{__html: this.state.telefone}}></p></Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Hr />\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"1\"><Icon name=\"mail\" /></Col>\n\t\t\t\t\t\t\t<Col size=\"11\"><p dangerouslySetInnerHTML={{__html: this.state.email}}></p></Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Hr />\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"1\"><Icon name=\"location\" /></Col>\n\t\t\t\t\t\t\t<Col size=\"11\"><p dangerouslySetInnerHTML={{__html: this.state.endereco}}></p></Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Col from \"./Col.js\";\nimport Row from \"./Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class PainelRapidoPesquisa extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpesquisa: props.pesquisa, // Atual pesquisa\n\t\t\tprodutos: [], // Lista de produtos visiveis\n\t\t\ttotalproduto: null // Total do produto caso seja um produto de balanca\n\t\t};\n\n\t\tthis.carregarProdutos = this.carregarProdutos.bind(this);\n\t}\n\n\tcarregarProdutos(pesquisa){\n\t\tpesquisa = (pesquisa ? pesquisa : this.props.pesquisa);\n\t\tif(typeof pesquisa !== \"string\" || pesquisa.length === 0){\n\t\t\tthis.setState({\n\t\t\t\tprodutos: []\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tlet codigoean = null;\n\t\tlet totalproduto = null;\n\n\t\tlet where = [];\n\t\tif(pesquisa.length === 13 && pesquisa.substr(0, 1) === \"2\"){\n\t\t\tcodigoean = parseInt(pesquisa.substr(1, 6), 10);\n\t\t\ttotalproduto = parseInt(pesquisa.substr(7, 5), 10) / 100;\n\t\t\tpesquisa = codigoean;\n\t\t\twhere.push(\"produto.codigoean = $1\");\n\t\t}else{\n\t\t\twhere.push(\"produto.descricao ILIKE '%'||$1||'%'\");\n\t\t\twhere.push(\"produto.codigoean = $1\");\n\t\t}\n\n\t\tthis.totalproduto = totalproduto;\n\n\t\tlet query = [\n\t\t\t\"SELECT produto.idproduto, produto.descricao, produto.precovariavel,\",\n\t\t\t\"  produto.preco, categoria.cor, unidade.precisao, unidade.descricao AS unidade\",\n\t\t\t\"FROM produto\",\n\t\t\t\"INNER JOIN categoria USING (idcategoria)\",\n\t\t\t\"INNER JOIN unidade USING (idunidade)\",\n\t\t\t\"WHERE \" + where.join(\" OR \"),\n\t\t\t\"ORDER BY descricao\"\n\t\t].join(\" \");\n\n\t\tthis.props.Pool.query(query, [pesquisa], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tprodutos: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarProdutos();\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.carregarProdutos(nextProps.pesquisa);\n\t}\n\n\trender(){\n\t\tlet className = [\"painelrapido\", \"painelrapido-pesquisa\"];\n\n\t\tif(this.props.layoutVendas === \"0\"){\n\t\t\tclassName.push(\"painelrapido-poucosprodutos\");\n\t\t}\n\n\t\t// Define se deve selecionar o produto ao desenhar\n\t\t// Criado para situacao em que o usuario leu um codigo de barras e ja deve carregar o produto\n\t\tlet selecionarProduto = (!isNaN(this.props.pesquisa) && this.state.produtos.length === 1);\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t<Row className=\"painelrapido-produto\">\n\t\t\t\t\t{this.state.produtos.map((produto, i) => {\n\t\t\t\t\t\treturn <Produto key={i} {...produto} onSelectProduto={this.props.onSelectProduto} layoutVendas={this.props.layoutVendas} selecionarProduto={selecionarProduto} totalproduto={this.totalproduto} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nclass Produto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\t//console.log(this.props.selecionarProduto);\n\t\tif(this.props.selecionarProduto){\n\t\t\tthis.props.onSelectProduto(this.props, null, this.props.totalproduto);\n\t\t}\n\t}\n\n\tonClick(event){\n\t\tif(this.props.onSelectProduto){\n\t\t\tthis.props.onSelectProduto(this.props, event, this.props.totalproduto);\n\t\t}\n\t}\n\n\trender(){\n\t\tlet size = (this.props.layoutVendas === \"0\" ? 3 : 2);\n\n\t\treturn (\n\t\t\t<Col size={size}>\n\t\t\t\t<div className=\"painelrapido-produto-item\" style={{borderColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport Col from \"./Col.js\";\nimport Row from \"./Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/PainelRapidoPoucosProdutos.css\";\n\nexport default class PainelRapidoPoucosProdutos extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcategorias: [], // Lista de categorias visiveis\n\t\t\tprodutos: [], // Lista de produtos visiveis\n\t\t\tcategoria: null // Dados da categoria ativa\n\t\t};\n\n\t\tthis.carregarCategorias = this.carregarCategorias.bind(this);\n\t\tthis.carregarProdutos = this.carregarProdutos.bind(this);\n\t\tthis.trocarCategoria = this.trocarCategoria.bind(this);\n\t}\n\n\tcarregarCategorias(){\n\t\tlet query = \"SELECT idcategoria, descricao, cor FROM categoria ORDER BY descricao\";\n\t\tthis.props.Pool.query(query, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tcategorias: res.rows,\n\t\t\t\tcategoria: (res.rows.length > 0 ? res.rows[0] : null)\n\t\t\t}, () => {\n\t\t\t\tthis.carregarProdutos();\n\t\t\t});\n\t\t});\n\t}\n\n\tcarregarProdutos(){\n\t\tif(this.state.categoria === null){\n\t\t\treturn false;\n\t\t}\n\t\tlet query = [\n\t\t\t\"SELECT produto.idproduto, produto.descricao, produto.precovariavel,\",\n\t\t\t\"  produto.preco, unidade.precisao, unidade.descricao AS unidade\",\n\t\t\t\"FROM produto\",\n\t\t\t\"INNER JOIN unidade USING (idunidade)\",\n\t\t\t\"WHERE produto.status = $1\",\n\t\t\t\"  AND produto.idcategoria = $2\",\n\t\t\t\"ORDER BY produto.descricao\"\n\t\t].join(\" \");\n\t\tthis.props.Pool.query(query, [\"A\", this.state.categoria.idcategoria], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tprodutos: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarCategorias();\n\t}\n\n\ttrocarCategoria(categoria){\n\t\tthis.setState({\n\t\t\tcategoria: categoria\n\t\t}, () => {\n\t\t\tthis.carregarProdutos();\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className=\"painelrapido painelrapido-poucosprodutos\">\n\t\t\t\t<Row className=\"painelrapido-categoria\">\n\t\t\t\t\t{this.state.categorias.map((categoria, i) => {\n\t\t\t\t\t\treturn <Categoria key={i} {...categoria} trocarCategoria={this.trocarCategoria} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t\t<Row className=\"painelrapido-produto\">\n\t\t\t\t\t{this.state.produtos.map((produto, i) => {\n\t\t\t\t\t\treturn <Produto key={i} {...produto} cor={this.state.categoria.cor} onSelectProduto={this.props.onSelectProduto} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nclass Categoria extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(){\n\t\tthis.props.trocarCategoria(this.props);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"3\">\n\t\t\t\t<div className=\"painelrapido-categoria-item\" style={{backgroundColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n\nclass Produto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(event){\n\t\tif(this.props.onSelectProduto){\n\t\t\tthis.props.onSelectProduto(this.props, event);\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"3\">\n\t\t\t\t<div className=\"painelrapido-produto-item\" style={{borderColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport Col from \"./Col.js\";\nimport Row from \"./Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class PainelRapidoMediosProdutos extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcategorias: [], // Lista de categorias visiveis\n\t\t\tprodutos: [], // Lista de produtos visiveis\n\t\t\tcategoria: null // Dados da categoria ativa\n\t\t};\n\n\t\tthis.carregarCategorias = this.carregarCategorias.bind(this);\n\t\tthis.carregarProdutos = this.carregarProdutos.bind(this);\n\t\tthis.trocarCategoria = this.trocarCategoria.bind(this);\n\t}\n\n\tcarregarCategorias(){\n\t\tlet query = \"SELECT idcategoria, descricao, cor FROM categoria ORDER BY descricao\";\n\t\tthis.props.Pool.query(query, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tcategorias: res.rows,\n\t\t\t\tcategoria: (res.rows.length > 0 ? res.rows[0] : null)\n\t\t\t}, () => {\n\t\t\t\tthis.carregarProdutos();\n\t\t\t});\n\t\t});\n\t}\n\n\tcarregarProdutos(){\n\t\tif(this.state.categoria === null){\n\t\t\treturn;\n\t\t}\n\t\tlet query = [\n\t\t\t\"SELECT produto.idproduto, produto.descricao, produto.precovariavel,\",\n\t\t\t\"  produto.preco, unidade.precisao, unidade.descricao AS unidade\",\n\t\t\t\"FROM produto\",\n\t\t\t\"INNER JOIN unidade USING (idunidade)\",\n\t\t\t\"WHERE produto.status = $1\",\n\t\t\t\"  AND produto.idcategoria = $2\",\n\t\t\t\"ORDER BY produto.descricao\"\n\t\t].join(\" \");\n\t\tthis.props.Pool.query(query, [\"A\", this.state.categoria.idcategoria], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tprodutos: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarCategorias();\n\t}\n\n\ttrocarCategoria(categoria){\n\t\tthis.setState({\n\t\t\tcategoria: categoria\n\t\t}, () => {\n\t\t\tthis.carregarProdutos();\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className=\"painelrapido painelrapido-mediosprodutos\">\n\t\t\t\t<Row className=\"painelrapido-categoria\">\n\t\t\t\t\t{this.state.categorias.map((categoria, i) => {\n\t\t\t\t\t\treturn <Categoria key={i} {...categoria} trocarCategoria={this.trocarCategoria} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t\t<Row className=\"painelrapido-produto\">\n\t\t\t\t\t{this.state.produtos.map((produto, i) => {\n\t\t\t\t\t\treturn <Produto key={i} {...produto} cor={this.state.categoria.cor} onSelectProduto={this.props.onSelectProduto} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nclass Categoria extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(){\n\t\tthis.props.trocarCategoria(this.props);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"2\">\n\t\t\t\t<div className=\"painelrapido-categoria-item\" style={{backgroundColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n\nclass Produto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(event){\n\t\tif(this.props.onSelectProduto){\n\t\t\tthis.props.onSelectProduto(this.props, event);\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"2\">\n\t\t\t\t<div className=\"painelrapido-produto-item\" style={{borderColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport Col from \"./Col.js\";\nimport Icon from \"./Icon.js\";\nimport Row from \"./Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class PainelRapidoMuitosProdutos extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcategorias: [], // Lista de categorias visiveis\n\t\t\tprodutos: [], // Lista de produtos visiveis\n\t\t\tcategoria: null // Dados da categoria ativa\n\t\t};\n\n\t\tthis.carregarCategorias = this.carregarCategorias.bind(this);\n\t\tthis.carregarProdutos = this.carregarProdutos.bind(this);\n\t\tthis.trocarCategoria = this.trocarCategoria.bind(this);\n\t\tthis.voltarCategoria = this.voltarCategoria.bind(this);\n\t}\n\n\tcarregarCategorias(){\n\t\tlet query = \"SELECT idcategoria, descricao, cor FROM categoria ORDER BY descricao\";\n\t\tthis.props.Pool.query(query, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tcategorias: res.rows,\n\t\t\t\tcategoria: null\n\t\t\t}, () => {\n\t\t\t\tthis.carregarProdutos();\n\t\t\t});\n\t\t});\n\t}\n\n\tcarregarProdutos(){\n\t\tif(this.state.categoria === null){\n\t\t\treturn;\n\t\t}\n\t\tlet query = [\n\t\t\t\"SELECT produto.idproduto, produto.descricao, produto.precovariavel,\",\n\t\t\t\"  produto.preco, unidade.precisao, unidade.descricao AS unidade\",\n\t\t\t\"FROM produto\",\n\t\t\t\"INNER JOIN unidade USING (idunidade)\",\n\t\t\t\"WHERE produto.status = $1\",\n\t\t\t\"  AND produto.idcategoria = $2\",\n\t\t\t\"ORDER BY produto.descricao\"\n\t\t].join(\" \");\n\t\tthis.props.Pool.query(query, [\"A\", this.state.categoria.idcategoria], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tprodutos: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarCategorias();\n\t}\n\n\ttrocarCategoria(categoria){\n\t\tthis.setState({\n\t\t\tcategoria: categoria\n\t\t}, () => {\n\t\t\tthis.carregarProdutos();\n\t\t});\n\t}\n\n\tvoltarCategoria(){\n\t\tthis.setState({\n\t\t\tcategoria: null,\n\t\t\tprodutos: []\n\t\t});\n\t}\n\n\trender(){\n\t\tlet painelRapidoCategoria = null;\n\t\tif(this.state.categoria === null){\n\t\t\tpainelRapidoCategoria = (\n\t\t\t\t<Row className=\"painelrapido-categoria\">\n\t\t\t\t\t{this.state.categorias.map((categoria, i) => {\n\t\t\t\t\t\treturn <Categoria key={i} idcategoria={categoria.idcategoria} descricao={categoria.descricao} cor={categoria.cor} trocarCategoria={this.trocarCategoria} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t);\n\t\t}\n\n\t\tlet painelRapidoProduto = null;\n\t\tif(this.state.categoria !== null){\n\t\t\tpainelRapidoProduto = (\n\t\t\t\t<Row className=\"painelrapido-produto\">\n\t\t\t\t\t<Col size=\"2\">\n\t\t\t\t\t\t<div className=\"painelrapido-categoria-item\" style={{backgroundColor: this.state.categoria.cor}} onClick={this.voltarCategoria}>\n\t\t\t\t\t\t\t<Icon name=\"chevron-left\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t\t{this.state.produtos.map((produto, i) => {\n\t\t\t\t\t\treturn <Produto key={i} {...produto} cor={this.state.categoria.cor} onSelectProduto={this.props.onSelectProduto} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"painelrapido painelrapido-muitosprodutos\">\n\t\t\t\t{painelRapidoCategoria}\n\t\t\t\t{painelRapidoProduto}\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nclass Categoria extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(){\n\t\tthis.props.trocarCategoria(this.props);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"2\">\n\t\t\t\t<div className=\"painelrapido-categoria-item\" style={{backgroundColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n\nclass Produto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(event){\n\t\tif(this.props.onSelectProduto){\n\t\t\tthis.props.onSelectProduto(this.props, event);\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"2\">\n\t\t\t\t<div className=\"painelrapido-produto-item\" style={{borderColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\n\nimport \"./../css/PainelRapido.css\";\n\nimport PainelRapidoPesquisa from  \"./PainelRapidoPesquisa.js\";\nimport PainelRapidoPoucosProdutos from  \"./PainelRapidoPoucosProdutos.js\";\nimport PainelRapidoMediosProdutos from  \"./PainelRapidoMediosProdutos.js\";\nimport PainelRapidoMuitosProdutos from  \"./PainelRapidoMuitosProdutos.js\";\n\nimport {defaultMessageBoxError, valorParametro} from \"./../def/function.js\";\n\nexport default class PainelRapido extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tlayoutVendas: null\n\t\t};\n\t}\n\n\tajustarAltura(){\n\t\tif($(\".painelrapido\").length > 0){\n\t\t\tlet height = window.innerHeight - $(\".painelrapido\").offset().top;\n\t\t\t$(\".painelrapido\").height(height);\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\t\twindow.addEventListener(\"resize\", this.ajustarAltura);\n\n\t\tvalorParametro(this.props.Pool, \"DIVERSOS\", \"LAYOUTVENDAS\", (valor) => {\n\t\t\tthis.setState({\n\t\t\t\tlayoutVendas: valor\n\t\t\t});\n\t\t}, (err) => {\n\t\t\tdefaultMessageBoxError(err);\n\t\t});\n\n\t\tthis.ajustarAltura();\n\t}\n\n\tcomponentDidUpdate(){\n\t\tthis.ajustarAltura();\n\t}\n\n\tcomponentWillUnmount(){\n\t\twindow.removeEventListener(\"resize\", this.ajustarAltura);\n\t}\n\n\trender(){\n\t\tif(this.props.pesquisa.length > 0){\n\t\t\treturn <PainelRapidoPesquisa {...this.props} layoutVendas={this.state.layoutVendas} />\n\t\t}\n\n\t\tswitch(this.state.layoutVendas){\n\t\t\tcase \"0\": return <PainelRapidoPoucosProdutos {...this.props} />;\n\t\t\tcase \"1\": return <PainelRapidoMediosProdutos {...this.props} />;\n\t\t\tcase \"2\": return <PainelRapidoMuitosProdutos {...this.props} />;\n\t\t\tdefault: return null;\n\t\t}\n\t}\n\n}\n","import React from \"react\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport FormControl from \"./FormControl.js\";\nimport Label from \"./Label.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport \"../css/VendaAplicarAcrescimo.css\";\n\nexport default class VendaEditarProduto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tacrescimovalor: 0,\n\t\t\tacrescimopercentual: 0,\n\t\t\ttotaldocumento: props.totalbruto,\n\t\t\tshow: props.show\n\t\t};\n\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.onChangeAcrescimoPercentual = this.onChangeAcrescimoPercentual.bind(this);\n\t\tthis.onChangeAcrescimoValor = this.onChangeAcrescimoValor.bind(this);\n\t\tthis.onChangeTotalLiquido = this.onChangeTotalLiquido.bind(this);\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tacrescimovalor: 0,\n\t\t\tacrescimopercentual: 0,\n\t\t\ttotaldocumento: nextProps.totalbruto,\n\t\t\tshow: nextProps.show\n\t\t});\n\t}\n\n\tconfirmar(){\n\t\tthis.props.aplicarAcrescimo(this.props.totalbruto, this.state.acrescimovalor);\n\t}\n\n\tonChangeAcrescimoPercentual(event){\n\t\tlet acrescimopercentual = event.target.value.toFloat();\n\t\tlet acrescimovalor = this.props.totalbruto * acrescimopercentual / 100;\n\t\tlet totaldocumento = this.props.totalbruto - this.props.totaldesconto + acrescimovalor;\n\n\t\tthis.setState({\n\t\t\tacrescimopercentual: acrescimopercentual,\n\t\t\tacrescimovalor: acrescimovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\tonChangeAcrescimoValor(event){\n\t\tlet acrescimovalor = event.target.value.toFloat();\n\t\tlet acrescimopercentual = acrescimovalor / this.props.totalbruto * 100;\n\t\tlet totaldocumento = this.props.totalbruto - this.props.totaldesconto + acrescimovalor;\n\n\t\tthis.setState({\n\t\t\tacrescimopercentual: acrescimopercentual,\n\t\t\tacrescimovalor: acrescimovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\tonChangeTotalLiquido(event){\n\t\tlet totaldocumento = event.target.value.toFloat();\n\t\tif(totaldocumento < this.props.totalbruto){\n\t\t\ttotaldocumento = this.props.totalbruto;\n\t\t}\n\t\tlet acrescimovalor =  totaldocumento - this.props.totalbruto + this.props.totaldesconto;\n\t\tlet acrescimopercentual = acrescimovalor / this.props.totalbruto * 100;\n\n\t\tthis.setState({\n\t\t\tacrescimopercentual: acrescimopercentual,\n\t\t\tacrescimovalor: acrescimovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal id=\"VendaAplicarAcrescimo\" title=\"Aplicando acrscimo...\" show={this.state.show} size=\"md\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Total dos itens</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" disabled={true} value={this.props.totalbruto.format(2, \",\", \".\")} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Total de desconto</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" disabled={true} value={this.props.totaldesconto.format(2, \",\", \".\")} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Acrscimo em percentual</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.acrescimopercentual.format(0, \",\", \".\")} InformarValor={{decimal: 0}} onChange={this.onChangeAcrescimoPercentual} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Acrscimo em valor</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.acrescimovalor.format(2, \",\", \".\")} InformarValor={{decimal: 2, money: true}} onChange={this.onChangeAcrescimoValor} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Total final</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.totaldocumento.format(2, \",\", \".\")} InformarValor={{decimal: 2, money: true}} onChange={this.onChangeTotalLiquido} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<div className=\"text-right mt-2\">\n\t\t\t\t\t<Button icon=\"undo\" color=\"red\" className=\"float-left\" onClick={this.cancelar} />\n\t\t\t\t\t<Button text=\"Confirmar\" icon=\"thumbs-up\" color=\"green\" onClick={this.confirmar} />\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport FormControl from \"./FormControl.js\";\nimport Label from \"./Label.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport \"../css/VendaAplicarDesconto.css\";\n\nexport default class VendaEditarProduto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdescontovalor: 0,\n\t\t\tdescontopercentual: 0,\n\t\t\ttotaldocumento: props.totalbruto,\n\t\t\tshow: props.show\n\t\t};\n\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.onChangeDescontoPercentual = this.onChangeDescontoPercentual.bind(this);\n\t\tthis.onChangeDescontoValor = this.onChangeDescontoValor.bind(this);\n\t\tthis.onChangeTotalLiquido = this.onChangeTotalLiquido.bind(this);\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tdescontovalor: 0,\n\t\t\tdescontopercentual: 0,\n\t\t\ttotaldocumento: nextProps.totalbruto,\n\t\t\tshow: nextProps.show\n\t\t});\n\t}\n\n\tconfirmar(){\n\t\tthis.props.aplicarDesconto(this.props.totalbruto, this.state.descontovalor);\n\t}\n\n\tonChangeDescontoPercentual(event){\n\t\tlet descontopercentual = event.target.value.toFloat();\n\t\tlet descontovalor = this.props.totalbruto * descontopercentual / 100;\n\t\tlet totaldocumento = this.props.totalbruto - descontovalor;\n\n\t\tthis.setState({\n\t\t\tdescontopercentual: descontopercentual,\n\t\t\tdescontovalor: descontovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\tonChangeDescontoValor(event){\n\t\tlet descontovalor = event.target.value.toFloat();\n\t\tlet descontopercentual = descontovalor / this.props.totalbruto * 100;\n\t\tlet totaldocumento = this.props.totalbruto - descontovalor;\n\n\t\tthis.setState({\n\t\t\tdescontopercentual: descontopercentual,\n\t\t\tdescontovalor: descontovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\tonChangeTotalLiquido(event){\n\t\tlet totaldocumento = event.target.value.toFloat();\n\t\tif(totaldocumento > this.props.totalbruto){\n\t\t\ttotaldocumento = this.props.totalbruto;\n\t\t}\n\t\tlet descontovalor = this.props.totalbruto - totaldocumento;\n\t\tlet descontopercentual = descontovalor / this.props.totalbruto * 100;\n\n\t\tthis.setState({\n\t\t\tdescontopercentual: descontopercentual,\n\t\t\tdescontovalor: descontovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal id=\"VendaAplicarDesconto\" title=\"Aplicando desconto...\" show={this.state.show} size=\"md\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Total dos itens</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" disabled={true} value={this.props.totalbruto.format(2, \",\", \".\")} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Desconto em percentual</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.descontopercentual.format(0, \",\", \".\")} InformarValor={{decimal: 0}} onChange={this.onChangeDescontoPercentual} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Desconto em valor</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.descontovalor.format(2, \",\", \".\")} InformarValor={{decimal: 2, money: true}} onChange={this.onChangeDescontoValor} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Total final</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.totaldocumento.format(2, \",\", \".\")} InformarValor={{decimal: 2, money: true}} onChange={this.onChangeTotalLiquido} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<div className=\"text-right mt-2\">\n\t\t\t\t\t<Button icon=\"undo\" color=\"red\" className=\"float-left\" onClick={this.cancelar} />\n\t\t\t\t\t<Button text=\"Confirmar\" icon=\"thumbs-up\" color=\"green\" onClick={this.confirmar} />\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t)\n\t}\n}\n","import {applicationDirectory} from  \"../def/function.js\";\n\nconst fs = window.require(\"fs\");\nconst childProcess = window.require(\"child_process\");\n\nexport default class ComDLL {\n\n\tconstructor(){\n\t\tthis.appPath = applicationDirectory();\n\t\tthis.childProcess = childProcess;\n\t\tthis.fs = fs;\n\n\t\tthis.srcPath = this.appPath + \"/src\";\n\t\tthis.comDLLPath = this.srcPath + \"/lib/comdll-1.0.0\";\n\t}\n\n\texecute(dllPath, method, args, xml){\n\t\ttry{\n\t\t\tlet commandExec = this.comDLLPath + \"/ComDLL.exe\";\n\t\t\tlet commandArgs = [\n\t\t\t\tthis.srcPath + \"/\" + dllPath,\n\t\t\t\tmethod\n\t\t\t].concat(args);\n\n\t\t\tlet xmlFile = this.comDLLPath + \"/entrada.xml\";\n\t\t\tlet returnFile = this.comDLLPath + \"/retorno.txt\";\n\n\t\t\tif(this.fs.existsSync(xmlFile)){\n\t\t\t\tthis.fs.unlinkSync(xmlFile);\n\t\t\t}\n\t\t\tif(this.fs.existsSync(returnFile)){\n\t\t\t\tthis.fs.unlinkSync(returnFile);\n\t\t\t}\n\n\t\t\tif(xml !== undefined){\n\t\t\t\tthis.fs.writeFileSync(xmlFile, xml, \"utf8\");\n\t\t\t}\n\t\t\tthis.childProcess.execFileSync(commandExec, commandArgs, {\n\t\t\t\ttimeout: 60000\n\t\t\t});\n\t\t\tlet result = this.fs.readFileSync(returnFile);\n\n\t\t\treturn result.toString().trim();\n\t\t}catch(err){\n\t\t\tswitch(err.code){\n\t\t\t\tcase \"ETIMEDOUT\":\n\t\t\t\t\tthrow new Error(\"O tempo mximo de comunicao com o equipamento fiscal SAT foi excedido.<br>Desconecte todos os cabos conectados ao SAT, espere 5 segundos, conecte-os de volta e tente efetuar a operao novamente.<br><br>Caso o problema persista, entre em contato com o suporte.\");\n\t\t\t\tdefault:\n\t\t\t\t\tthrow err;\n\t\t\t}\n\t\t}\n\t}\n\n}\n","import jsontoxml from \"jsontoxml\";\n\nimport ComDLL from \"../com/ComDLL.js\";\nimport {\n\tsleep, valorParametro, writeTemporary\n} from \"../def/function.js\";\n\nconst fs = window.require(\"fs\");\nconst os = window.require(\"os\");\n\nexport default class SAT {\n\n\tconstructor(Pool){\n\t\tthis.Pool = Pool;\n\t\tthis.ComDLL = new ComDLL();\n\t\tthis.jsontoxml = jsontoxml;\n\t\tthis.os = os;\n\t\tthis.fs = fs;\n\n\t\tthis.error = null;\n\t}\n\n\t// Cancela um documento ativo\n\tasync cancelarDocumento(iddocumento){\n\t\t// Carrega os parametros\n\t\tlet paramSATModelo = await valorParametro(this.Pool, \"SAT\", \"MODELO\");\n\t\tlet paramSATAtivacao = await valorParametro(this.Pool, \"SAT\", \"ATIVACAO\");\n\t\t// Carrega o documento\n\t\tlet {documento} = await this.carregarDadosDocumento(iddocumento);\n\n\t\t// Cria o XML do documento fiscal a ser enviado para o SAT\n\t\tlet xmlEntrada = null;\n\t\tif(paramSATModelo === \"sweda\"){\n\t\t\txmlEntrada = await this.gerarXMLCancelamento(iddocumento);\n\t\t}else{\n\t\t\txmlEntrada = documento.xml;\n\t\t}\n\t\twriteTemporary(\"cancelamento.xml\", xmlEntrada);\n\n\t\t// Verifica se deve enviar para o SAT\n\t\tif(paramSATModelo === \"nenhum\"){\n\t\t\treturn {xmlcanc: null, chavecanc: null};\n\t\t}\n\n\t\t// Define a DLL a ser utilizada\n\t\tlet dllPath = \"lib/comdll-1.0.0/SAT-\" + paramSATModelo + \".dll\";\n\n\t\t// Executa o comando na DLL\n\t\tlet retorno = null;\n\t\tlet arrRetorno = null;\n\t\twhile(retorno === null || arrRetorno[1] === \"06098\"){\n\t\t\tif(retorno !== null){\n\t\t\t\tawait sleep(500);\n\t\t\t}\n\t\t\tretorno = this.ComDLL.execute(dllPath, \"CancelarUltimaVenda\", [paramSATAtivacao, documento.chave], xmlEntrada);\n\t\t\tif(retorno === false){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tarrRetorno = retorno.split(\"|\");\n\t\t}\n\n\t\tif(!this.validarRetorno(retorno)){\n\t\t\treturn false;\n\t\t}\n\n\t\tlet xmlSaida = atob(arrRetorno[6]);\n\t\tlet chave = arrRetorno[8].trim();\n\n\t\tif(typeof xmlSaida === \"string\" && xmlSaida.length === 0 && paramSATModelo === \"sweda\"){\n\t\t\tarrRetorno = this.fs.readFileSync(\"C:/Sweda/Retorno.txt\").toString();\n\t\t\txmlSaida = atob(arrRetorno[6]);\n\t\t}\n\n\t\treturn {\n\t\t\txmlcanc: xmlSaida,\n\t\t\tchavecanc: chave\n\t\t};\n\t}\n\n\tasync carregarDadosDocumento(iddocumento){\n\t\tlet documento, documentoprodutos,documentopagamentos;\n\n\t\tlet objectName = this.Pool.constructor.name;\n\n\t\tlet client = null;\n\t\tif(objectName === \"Pool\"){\n\t\t\tclient = await this.Pool.connect();\n\t\t}else{\n\t\t\tclient = this.Pool;\n\t\t}\n\n\t\ttry{\n\t\t\tlet res = await client.query(\"SELECT * FROM documento WHERE iddocumento = $1\", [iddocumento]);\n\t\t\tif(res.rows.length === 0){\n\t\t\t\tthrow new Error(\"Nenhum documento foi encontrado.\");\n\t\t\t}\n\t\t\tdocumento = res.rows[0];\n\n\t\t\tlet queryDocumentoProduto = [\n\t\t\t\t\"SELECT documentoproduto.*, unidade.sigla\",\n\t\t\t\t\"FROM documentoproduto\",\n\t\t\t\t\"LEFT JOIN produto USING (idproduto)\",\n\t\t\t\t\"LEFT JOIN unidade USING (idunidade)\",\n\t\t\t\t\"WHERE documentoproduto.iddocumento = $1\",\n\t\t\t\t\"ORDER BY documentoproduto.sequencial\"\n\t\t\t].join(\" \");\n\t\t\tres = await client.query(queryDocumentoProduto, [iddocumento]);\n\t\t\tdocumentoprodutos = res.rows;\n\n\t\t\tlet queryDocumentoPagamento = [\n\t\t\t\t\"SELECT documentopagamento.*, formapagamento.especie\",\n\t\t\t\t\"FROM documentopagamento\",\n\t\t\t\t\"LEFT JOIN formapagamento USING (idformapagamento)\",\n\t\t\t\t\"WHERE documentopagamento.iddocumento = $1\"\n\t\t\t].join(\" \");\n\t\t\tres = await client.query(queryDocumentoPagamento, [iddocumento]);\n\t\t\tdocumentopagamentos = res.rows;\n\t\t}catch(e){\n\t\t\tthrow e;\n\t\t}finally{\n\t\t\tif(objectName === \"Pool\"){\n\t\t\t\tclient.release();\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tdocumento: documento,\n\t\t\tdocumentoprodutos: documentoprodutos,\n\t\t\tdocumentopagamentos: documentopagamentos\n\t\t};\n\t}\n\n\tasync consultarUltimaSessaoFiscal(){\n\t\t/*\n\t\tlet paramSATAtivacao = await valorParametro(this.Pool, \"SAT\", \"ATIVACAO\");\n\t\t\n\t\tconst retorno = this.ComDLL.execute(dllPath, \"ConsultarUltimaSessaoFiscal\", [paramSATAtivacao]);\n\t\tif(retorno === false){\n\t\t\treturn false;\n\t\t}\n\t\tif(!this.validarRetorno(retorno)){\n\t\t\treturn false;\n\t\t}\n\n\t\tlet arrRetorno = retorno.split(\"|\");\n\n\t\tlet xmlSaida = atob(arrRetorno[6]);\n\t\tlet chave = arrRetorno[8].trim();\n\t\tlet numero = chave.substr(-13, 6);\n\n\t\tif(typeof xmlSaida === \"string\" && xmlSaida.length === 0 && paramSATModelo === \"sweda\"){\n\t\t\tarrRetorno = this.fs.readFileSync(\"C:/Sweda/Retorno.txt\").toString();\n\t\t\txmlSaida = atob(arrRetorno[6]);\n\t\t}\n\n\t\tlet tipo = arrRetorno[1];\n\t\tswitch(arrRetorno[1]){\n\t\t\tcase \"06000\":\n\t\t\t\ttipo = \"venda\";\n\t\t\t\tbreak;\n\t\t\tcase \"07000\":\n\t\t\t\ttipo = \"cancelamento\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn {\n\t\t\ttipo: tipo,\n\t\t\txml: xmlSaida,\n\t\t\tchave: chave,\n\t\t\tnumero: numero\n\t\t};\n\t\t*/\n\t}\n\n\tasync gerarXMLCancelamento(iddocumento, success, fail){\n\t\tlet {documento} = await this.carregarDadosDocumento(iddocumento);\n\n\t\tlet paramDesenvolvedoraCNPJ = await valorParametro(this.Pool, \"DESENVOLVEDORA\", \"CNPJ\");\n\t\tlet paramDesenvolvedoraAssinatura = await valorParametro(this.Pool, \"DESENVOLVEDORA\", \"ASSINATURA\");\n\t\tlet paramSATCaixa = await valorParametro(this.Pool, \"SAT\", \"CAIXA\");\n\n\t\tlet infCFe = [{\n\t\t\tname: \"infCFe\",\n\t\t\tattrs: {\"chCanc\": documento.chave},\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tname: \"ide\",\n\t\t\t\t\tchildren: {\n\t\t\t\t\t\t\"CNPJ\": paramDesenvolvedoraCNPJ.removeFormat(),\n\t\t\t\t\t\t\"signAC\": paramDesenvolvedoraAssinatura,\n\t\t\t\t\t\t\"numeroCaixa\": paramSATCaixa.lpad(3, \"0\")\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"emit\",\n\t\t\t\t\tchildren: []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"dest\",\n\t\t\t\t\tchildren: []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"total\",\n\t\t\t\t\tchildren: []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"infAdic\",\n\t\t\t\t\tchildren: []\n\t\t\t\t}\n\t\t\t]\n\t\t}];\n\n\t\tlet xml = [{\n\t\t\tname: \"CFeCanc\",\n\t\t\tchildren: [infCFe]\n\t\t}];\n\n\t\tlet finalXML = this.jsontoxml(xml);\n\n\t\tif(typeof success === \"function\"){\n\t\t\tsuccess(finalXML);\n\t\t}\n\n\t\treturn finalXML;\n\t}\n\n\tasync gerarXMLDocumento(iddocumento, success, fail){\n\t\tlet {documento, documentoprodutos, documentopagamentos} = await this.carregarDadosDocumento(iddocumento);\n\n\t\tlet paramDesenvolvedoraCNPJ = await valorParametro(this.Pool, \"DESENVOLVEDORA\", \"CNPJ\");\n\t\tlet paramDesenvolvedoraAssinatura = await valorParametro(this.Pool, \"DESENVOLVEDORA\", \"ASSINATURA\");\n\t\t//let paramSATAmbiente = await valorParametro(this.Pool, \"SAT\", \"AMBIENTE\");\n\t\tlet paramSATCaixa = await valorParametro(this.Pool, \"SAT\", \"CAIXA\");\n\t\tlet paramEmitenteCNPJ = await valorParametro(this.Pool, \"EMITENTE\", \"CNPJ\");\n\t\tlet paramEmitenteIE = await valorParametro(this.Pool, \"EMITENTE\", \"IE\");\n\t\tlet paramEmitenteImpostoFederal = await valorParametro(this.Pool, \"EMITENTE\", \"IMPOSTOFEDERAL\");\n\t\tlet paramEmitenteImpostoEstadual = await valorParametro(this.Pool, \"EMITENTE\", \"IMPOSTOESTADUAL\");\n\n\t\tif(!paramEmitenteImpostoFederal) paramEmitenteImpostoFederal = 0;\n\t\tif(!paramEmitenteImpostoEstadual) paramEmitenteImpostoEstadual = 0;\n\n\t\tlet ide = {\n\t\t\tname: \"ide\",\n\t\t\tchildren: {\n\t\t\t\t\"CNPJ\": paramDesenvolvedoraCNPJ.removeFormat(),\n\t\t\t\t\"signAC\": paramDesenvolvedoraAssinatura,\n\t\t\t\t\"numeroCaixa\": paramSATCaixa.lpad(3, \"0\")\n\t\t\t\t//\"tpAmb\": paramSATAmbiente\n\t\t\t}\n\t\t};\n\n\t\tlet emit = {\n\t\t\tname: \"emit\",\n\t\t\tchildren: {\n\t\t\t\t\"CNPJ\": paramEmitenteCNPJ.removeFormat(),\n\t\t\t\t\"IE\": paramEmitenteIE.removeFormat(),\n\t\t\t\t\"cRegTribISSQN\": 1,\n\t\t\t\t\"indRatISSQN\": \"N\"\n\t\t\t}\n\t\t};\n\n\t\tlet destChildren = {};\n\t\tlet destCPFCNPJ = (documento.cpfcnpj ? documento.cpfcnpj.removeFormat() : \"\");\n\t\tif(destCPFCNPJ.length > 11){\n\t\t\tdestChildren = {\"CNPJ\": destCPFCNPJ};\n\t\t}else if(destCPFCNPJ.length > 9){\n\t\t\tdestChildren = {\"CPF\": destCPFCNPJ};\n\t\t}\n\t\tlet dest = {\n\t\t\tname: \"dest\",\n\t\t\tchildren: destChildren\n\t\t};\n\n\t\tlet dets = documentoprodutos.map((documentoproduto) => {\n\t\t\tlet prod = [\n\t\t\t\t{name: \"cProd\", text: documentoproduto.idproduto},\n\t\t\t\t{name: \"xProd\", text: documentoproduto.descricao.replaceAll(\"&\", \"&amp;\")},\n\t\t\t\t{name: \"NCM\", text: documentoproduto.codigoncm.removeFormat()},\n\t\t\t\t{name: \"CFOP\", text: documentoproduto.cfop.removeFormat()},\n\t\t\t\t{name: \"uCom\", text: documentoproduto.sigla},\n\t\t\t\t{name: \"qCom\", text: documentoproduto.quantidade.format(4, \".\", \"\")},\n\t\t\t\t{name: \"vUnCom\", text: documentoproduto.preco},\n\t\t\t\t{name: \"indRegra\", text: \"T\"},\n\t\t\t\t{name: \"vDesc\", text: documentoproduto.totaldesconto},\n\t\t\t\t{name: \"vOutro\", text: documentoproduto.totalacrescimo}\n\t\t\t];\n\t\t\tif(documentoproduto.cest !== null && documentoproduto.cest.length > 0){\n\t\t\t\tprod.push({\n\t\t\t\t\tname: \"obsFiscoDet\",\n\t\t\t\t\tattrs: {\"xCampoDet\": \"Cod. CEST\"},\n\t\t\t\t\tchildren: {\n\t\t\t\t\t\t\"xTextoDet\": documentoproduto.cest.removeFormat()\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet ICMS = {};\n\t\t\tif([\"102\", \"300\", \"400\", \"500\"].indexOf(documentoproduto.csosn) > -1){\n\t\t\t\tICMS = {\"ICMSSN102\": {\"Orig\": documentoproduto.origem, \"CSOSN\": documentoproduto.csosn}};\n\t\t\t}\n\n\t\t\tlet PIS = {};\n\t\t\tif([\"01\", \"02\"].indexOf(documentoproduto.cstpis) > -1){\n\t\t\t\tPIS = {\"PISAliq\": {\"CST\": documentoproduto.cstpis, \"vBC\": documentoproduto.basepis, \"pPIS\": documentoproduto.aliqpis.format(4, \".\", \"\")}};\n\t\t\t}else if([\"03\"].indexOf(documentoproduto.cstpis) > -1){\n\t\t\t\tPIS = {\"PISQtde\": {\"CST\": documentoproduto.cstpis, \"qBCProd\": documentoproduto.quantidade, \"vAliqProd\": documentoproduto.aliqpis.format(4, \".\", \"\")}};\n\t\t\t}else if([\"04\", \"06\", \"07\", \"08\", \"09\"].indexOf(documentoproduto.cstpis) > -1){\n\t\t\t\tPIS = {\"PISNT\": {\"CST\": documentoproduto.cstpis}};\n\t\t\t}else if([\"49\"].indexOf(documentoproduto.cstpis) > -1){\n\t\t\t\tPIS = {\"PISSN\": {\"CST\": documentoproduto.cstpis}};\n\t\t\t}else if([\"99\"].indexOf(documentoproduto.cstpis) > -1){\n\t\t\t\tPIS = {\"PISOutr\": {\"CST\": documentoproduto.cstpis, \"vBC\": documentoproduto.basepis, \"pPIS\": documentoproduto.aliqpis.format(4, \".\", \"\")}};\n\t\t\t}\n\n\t\t\tlet COFINS = {};\n\t\t\tif([\"01\", \"02\"].indexOf(documentoproduto.cstcofins) > -1){\n\t\t\t\tCOFINS = {\"COFINSAliq\": {\"CST\": documentoproduto.cstcofins, \"vBC\": documentoproduto.basecofins, \"pCOFINS\": documentoproduto.aliqcofins.format(4, \".\", \"\")}};\n\t\t\t}else if([\"03\"].indexOf(documentoproduto.cstcofins) > -1){\n\t\t\t\tCOFINS = {\"COFINSQtde\": {\"CST\": documentoproduto.cstcofins, \"qBCProd\": documentoproduto.quantidade, \"vAliqProd\": documentoproduto.aliqcofins.format(4, \".\", \"\")}};\n\t\t\t}else if([\"04\", \"06\", \"07\", \"08\", \"09\"].indexOf(documentoproduto.cstcofins) > -1){\n\t\t\t\tCOFINS = {\"COFINSNT\": {\"CST\": documentoproduto.cstcofins}};\n\t\t\t}else if([\"49\"].indexOf(documentoproduto.cstcofins) > -1){\n\t\t\t\tCOFINS = {\"COFINSSN\": {\"CST\": documentoproduto.cstcofins}};\n\t\t\t}else if([\"99\"].indexOf(documentoproduto.cstcofins) > -1){\n\t\t\t\tCOFINS = {\"COFINSOutr\": {\"CST\": documentoproduto.cstcofins, \"vBC\": documentoproduto.basecofins, \"pCOFINS\": documentoproduto.aliqcofins.format(4, \".\", \"\")}};\n\t\t\t}\n\n\t\t\tlet det = {\n\t\t\t\tname: \"det\",\n\t\t\t\tattrs: {\"nItem\": documentoproduto.sequencial},\n\t\t\t\tchildren: {\n\t\t\t\t\t\"prod\": prod,\n\t\t\t\t\t\"imposto\": {\n\t\t\t\t\t\t\"ICMS\": ICMS,\n\t\t\t\t\t\t\"PIS\": PIS,\n\t\t\t\t\t\t\"COFINS\": COFINS\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn det;\n\t\t});\n\n\t\tlet total = {\n\t\t\tname: \"total\"\n\t\t};\n\n\t\tlet pgtoChildren = documentopagamentos.map((documentopagamento) => {\n\t\t\treturn {\n\t\t\t\tname: \"MP\",\n\t\t\t\tchildren: {\n\t\t\t\t\t\"cMP\": documentopagamento.especie,\n\t\t\t\t\t\"vMP\": documentopagamento.totalpagamento\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tlet pgto = {\n\t\t\tname: \"pgto\",\n\t\t\tchildren: pgtoChildren\n\t\t};\n\n\t\tlet impostoFederal = (documento.totaldocumento * paramEmitenteImpostoFederal.toFloat() / 100).format(2, \",\" , \".\");\n\t\tlet impostoEstadual = (documento.totaldocumento * paramEmitenteImpostoEstadual.toFloat() / 100).format(2, \",\" , \".\");\n\t\tlet impostoAproximado = \"Valor aprox. imposto: R$ \" + impostoFederal + \" Fed / R$ \" + impostoEstadual + \" Est / Fonte SEBRAE\";\n\n\t\tlet infAdic = {\n\t\t\tname: \"infAdic\",\n\t\t\tchildren: {\n\t\t\t\t\"infCpl\": impostoAproximado\n\t\t\t}\n\t\t}\n\n\t\tlet infCFeChildren = [ide, emit, dest].concat(dets).concat([total, pgto, infAdic]);\n\n\t\tlet infCFe = [{\n\t\t\tname: \"infCFe\",\n\t\t\tattrs: {\"versaoDadosEnt\": \"0.07\"},\n\t\t\tchildren: infCFeChildren\n\t\t}];\n\n\t\tlet xml = [{\n\t\t\tname: \"CFe\",\n\t\t\tchildren: [infCFe]\n\t\t}];\n\n\t\tlet finalXML = this.jsontoxml(xml);\n\n\t\tif(typeof success === \"function\"){\n\t\t\tsuccess(finalXML);\n\t\t}\n\n\t\treturn finalXML;\n\t}\n\n\tnovoNumSessao(){\n\t\treturn String(Math.round(Math.random() * Math.pow(10, 6))).lpad(6, \"0\");\n\t}\n\n\t// Transmite o documento fiscal\n\tasync transmitirDocumento(iddocumento){\n\t\t/*\n\t\t// Verifica se a venda ja nao foi processada\n\t\tlet ultimaSessao = await this.consultarUltimaSessaoFiscal();\n\t\tif(ultimaSessao[\"tipo\"] === \"venda\" && ultimaSessao[\"chave\"]){\n\t\t\tconst resDocumento = await this.Pool.query(\"SELECT count(iddocumento) FROM documento WHERE chave = $1\", [ultimaSessao[\"chave\"]]);\n\t\t\tif(resDocumento.rows[0].iddocumento === 0){\n\t\t\t\treturn ultimaSessao;\n\t\t\t}\n\t\t}\n\t\t*/\n\t\t// Carrega os parametros\n\t\tlet paramSATModelo = await valorParametro(this.Pool, \"SAT\", \"MODELO\");\n\t\tlet paramSATAtivacao = await valorParametro(this.Pool, \"SAT\", \"ATIVACAO\");\n\n\t\t// Cria o XML do documento fiscal a ser enviado para o SAT\n\t\tlet xmlEntrada = await this.gerarXMLDocumento(iddocumento);\n\t\twriteTemporary(\"venda.xml\", xmlEntrada);\n\n\t\t// Verifica se deve enviar para o SAT\n\t\tif(paramSATModelo === \"nenhum\"){\n\t\t\treturn {xml: null, chave: null, numero: null};\n\t\t}\n\n\t\t// Define a DLL a ser utilizada\n\t\tlet dllPath = \"lib/comdll-1.0.0/SAT-\" + paramSATModelo + \".dll\";\n\n\t\tlet retorno = null;\n\t\tlet arrRetorno = null;\n\t\twhile(retorno === null || arrRetorno[1] === \"06098\"){\n\t\t\tif(retorno !== null){\n\t\t\t\tawait sleep(500);\n\t\t\t}\n\t\t\tretorno = this.ComDLL.execute(dllPath, \"EnviarDadosVenda\", [paramSATAtivacao], xmlEntrada);\n\t\t\tif(retorno === false){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tarrRetorno = retorno.split(\"|\");\n\t\t}\n\n\t\tif(!this.validarRetorno(retorno)){\n\t\t\treturn false;\n\t\t}\n\n\t\tlet xmlSaida = atob(arrRetorno[6]);\n\t\tlet chave = arrRetorno[8].trim();\n\t\tlet numero = chave.substr(-13, 6);\n\n\t\tif(typeof xmlSaida === \"string\" && xmlSaida.length === 0 && paramSATModelo === \"sweda\"){\n\t\t\tarrRetorno = this.fs.readFileSync(\"C:/Sweda/Retorno.txt\").toString();\n\t\t\txmlSaida = atob(arrRetorno[6]);\n\t\t}\n\n\t\treturn {\n\t\t\txml: xmlSaida,\n\t\t\tchave: chave,\n\t\t\tnumero: numero\n\t\t};\n\t}\n\n\tvalidarRetorno(retorno){\n\t\tlet arrRetorno = retorno.split(\"|\");\n\n\t\tthis.error = null;\n\t\tlet sucesso = false;\n\n\t\tswitch(arrRetorno[1]){\n\t\t\t/*\n\t\t\t * Metodo: AtivarSAT\n\t\t\t */\n\t\t\tcase \"04000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\tcase \"04006\": // CSR ICP-BRASIL criado com sucesso\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\t/*\n\t\t\t * Metodo: EnviarDadosVenda\n\t\t\t */\n\t\t\tcase \"06000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\t/*\n\t\t\t * Metodo: CancelarUltimaVenda\n\t\t\t */\n\t\t\tcase \"07000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\t/*\n\t\t\t * Metodo: ConsultarSAT\n\t\t\t */\n\t\t\tcase \"08000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\t/*\n\t\t\t * Metodo: TesteFimAFim\n\t\t\t */\n\t\t\tcase \"09000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\t/*\n\t\t\t * Metodo: ConsultarStatusOperacional\n\t\t\t */\n\t\t\tcase \"10000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.error = arrRetorno[3];\n\t\t\t\tif(this.error === undefined || this.error === null || this.error.length === 0){\n\t\t\t\t\tthis.error = \"Erro desconhecido. (Cdigo \" + arrRetorno[1] + \")\";\n\t\t\t\t}else if([\"98\", \"99\"].indexOf(arrRetorno[1].substr(-2)) > -1){\n\t\t\t\t\tthis.error = \"No foi possvel comunicar com o equipamento fiscal SAT.<br><br>Reinicie o equipamento da seguinte maneira:<br>1. Desconecte todos os cabos ligados ao SAT.<br>2. Aguarde 5 segundos.<br>3. Conecte os cabos de volta ao SAT.<br>4. Tente efetuar a venda novamente.<br><br>Caso o problema persista, entre em contato com nosso suporte.\";\n\t\t\t\t}\n\t\t\t\tsucesso = false;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn sucesso;\n\t}\n\n}\n","import React from \"react\";\nimport ini from \"ini\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport Hr from \"./Hr.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport Printer from \"../com/Printer.js\";\nimport SAT from \"../com/SAT.js\";\n\nimport {currentTimestamp, defaultMessageBoxError, valorParametro} from \"../def/function.js\";\n\nexport default class VendaCancelarCupom extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tiddocumento: null,\n\t\t\tnumero: null,\n\t\t\ttotaldocumento: null,\n\t\t\tcpfcnpj: null,\n\t\t\tshow: false\n\t\t};\n\n\t\tthis.atualizarState = this.atualizarState.bind(this);\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.carregarUltimoDocumento = this.carregarUltimoDocumento.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.outroCupom = this.outroCupom.bind(this);\n\n\t\tthis.Printer = new Printer(this.props.Pool);\n\t\tthis.SAT = new SAT(this.props.Pool);\n\t}\n\n\tatualizarState(data){\n\t\tlet numero = (data.numero ? data.numero : \"\");\n\t\tlet cpfcnpj = (data.cpfcnpj ? data.cpfcnpj : \"no informado\");\n\n\t\tthis.setState({\n\t\t\tiddocumento: data.iddocumento,\n\t\t\tnumero: String(numero).lpad(6, \"0\"),\n\t\t\ttotaldocumento: \"R$ \" + data.totaldocumento.format(2, \",\", \".\"),\n\t\t\tcpfcnpj: cpfcnpj\n\t\t});\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tasync carregarDocumento(localizarNumero){\n\t\tlet query = [\n\t\t\t\"SELECT iddocumento, numero, totaldocumento, cpfcnpj\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE operacao = $1\",\n\t\t\t\"  AND numero = $2\",\n\t\t\t\"ORDER BY iddocumento DESC\",\n\t\t\t\"LIMIT 1\"\n\t\t].join(\" \");\n\n\t\tlet res = await this.props.Pool.query(query, [\"CU\", localizarNumero]);\n\n\t\tif(res.rowCount === 0){\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Houve uma falha\",\n\t\t\t\ttext: \"Nenhum documento foi encontrado com o nmero \" + localizarNumero + \".\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tlet data = res.rows[0];\n\t\tthis.atualizarState(data);\n\t}\n\n\tasync carregarUltimoDocumento(){\n\t\tlet query = [\n\t\t\t\"SELECT iddocumento, numero, totaldocumento, cpfcnpj\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE operacao = $1\",\n\t\t\t\"ORDER BY iddocumento DESC\",\n\t\t\t\"LIMIT 1\"\n\t\t].join(\" \");\n\n\t\tlet res = await this.props.Pool.query(query, [\"CU\"]);\n\n\t\tif(res.rowCount === 0){\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Houve uma falha\",\n\t\t\t\ttext: \"Nenhum documento foi encontrado.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tlet data = res.rows[0];\n\t\tthis.atualizarState(data);\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tshow: nextProps.show\n\t\t});\n\n\t\tif(!this.state.show && nextProps.show){\n\t\t\tthis.carregarUltimoDocumento();\n\t\t}\n\t}\n\n\tasync confirmar(){\n\t\ttry {\n\t\t\twindow.Loading.show();\n\n\t\t\t// Carrega os parametros\n\t\t\tlet paramSATModelo = await valorParametro(this.props.Pool, \"SAT\", \"MODELO\");\n\n\t\t\t// Cancela venda no SAT\n\t\t\tlet retorno = {xmlcanc: null, chavecanc: null};\n\t\t\tif(paramSATModelo !== \"nenhum\"){\n\t\t\t\tretorno = await this.SAT.cancelarDocumento(this.state.iddocumento);\n\t\t\t\tif(retorno === false){\n\t\t\t\t\tthrow new Error(this.SAT.error);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Atualiza tabela no banco de dados\n\t\t\tlet query = [\n\t\t\t\t\"UPDATE documento SET\",\n\t\t\t\t\"  status = $2, dthrcancelamento = $3,\",\n\t\t\t\t\"  xmlcanc = $4, chavecanc = $5\",\n\t\t\t\t\"WHERE iddocumento = $1\"\n\t\t\t].join(\" \");\n\t\t\tlet values = [\n\t\t\t\tthis.state.iddocumento,\n\t\t\t\t\"C\", currentTimestamp(),\n\t\t\t\tretorno.xmlcanc, retorno.chavecanc\n\t\t\t];\n\t\t\tawait this.props.Pool.query(query, values);\n\n\t\t\t// Imprime o cupom do cancelamento\n\t\t\tlet numeroVias = ini.parse(await valorParametro(this.props.Pool, \"IMPRESSORA\", \"NUMEROVIAS\"));\n\t\t\tfor(let i = 1; i <= numeroVias.cancelamento; i++){\n\t\t\t\tthis.Printer.imprimirDocumento(this.state.iddocumento);\n\t\t\t}\n\n\t\t\t// Mensagem de sucesso\n\t\t\twindow.FastMessage.show(\"Venda cancelada com sucesso!\");\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t}catch(err){\n\t\t\tconsole.error(err.stack);\n\t\t\tdefaultMessageBoxError(err.message);\n\t\t}finally{\n\t\t\twindow.Loading.hide();\n\t\t}\n\t}\n\n\toutroCupom(){\n\t\twindow.InformarValor.show({\n\t\t\ttitle: \"Informe o nmero do cupom\",\n\t\t\tmask: \"999999\",\n\t\t\tsuccess: (value) => {\n\t\t\t\tthis.carregarDocumento(value);\n\t\t\t}\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal id=\"VendaCancelarCupom\" title=\"Cancelamento de venda\" show={this.state.show} size=\"md\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"12\" className=\"text-left\">\n\t\t\t\t\t\tTem certeza que deseja cancelar a venda?<br />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\tCupom: {this.state.numero}<br />\n\t\t\t\t\t\tTotal: {this.state.totaldocumento}<br />\n\t\t\t\t\t\tCPF: {this.state.cpfcnpj}\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Hr />\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"5\">\n\t\t\t\t\t\t<Button text=\"Outro cupom\" color=\"blue\" onClick={this.outroCupom} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"7\" className=\"text-right\">\n\t\t\t\t\t\t<Button text=\"Sim\" icon=\"thumbs-up\" color=\"green\" className=\"mr-2\" onClick={this.confirmar} />\n\t\t\t\t\t\t<Button text=\"No\" icon=\"thumbs-down\" color=\"red\" onClick={this.cancelar} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport $ from \"jquery\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport Hr from \"./Hr.js\";\nimport Icon from \"./Icon.js\";\nimport ListGroup from \"./ListGroup.js\";\nimport ListItem from \"./ListItem.js\";\nimport Row from \"./Row.js\";\n\nimport \"../css/VendaDetalhe.css\";\n\nexport default class VendaDetalhe extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\theight: \"0px\"\n\t\t}\n\n\t\tthis.ajustarAltura = this.ajustarAltura.bind(this);\n\t}\n\n\tajustarAltura(){\n\t\tthis.setState({\n\t\t\theight: window.innerHeight\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\twindow.addEventListener(\"resize\", this.ajustarAltura);\n\t\tthis.ajustarAltura();\n\t}\n\n\tcomponentWillUnmount(){\n\t\twindow.removeEventListener(\"resize\", this.ajustarAltura);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className=\"vendadetalhe\" style={{height: this.state.height}}>\n\t\t\t\t<VendaDetalheCabecalho\n\t\t\t\t\tcancelarUltimaVenda={this.props.cancelarUltimaVenda}\n\t\t\t\t\tcancelarVendaAtual={this.props.cancelarVendaAtual}\n\t\t\t\t\tcarregarOrcamento={this.props.carregarOrcamento}\n\t\t\t\t\tlistaDocumentoProduto={this.props.listaDocumentoProduto}\n\t\t\t\t\toperacao={this.props.operacao}\n\t\t\t\t\treimprimirCupom={this.props.reimprimirCupom}\n\t\t\t\t\ttrocarOperacao={this.props.trocarOperacao}\n\t\t\t\t/>\n\t\t\t\t<VendaDetalheCorpo\n\t\t\t\t\taumentarQuantidade={this.props.aumentarQuantidade}\n\t\t\t\t\tdiminuirQuantidade={this.props.diminuirQuantidade}\n\t\t\t\t\teditarProduto={this.props.editarProduto}\n\t\t\t\t\tlistaDocumentoProduto={this.props.listaDocumentoProduto}\n\t\t\t\t\tremoverProduto={this.props.removerProduto}\n\t\t\t\t/>\n\t\t\t\t<VendaDetalheRodape\n\t\t\t\t\tabrirFinalizacao={this.props.abrirFinalizacao}\n\t\t\t\t\tcpfcnpj={this.props.cpfcnpj}\n\t\t\t\t\tinformarCPF={this.props.informarCPF}\n\t\t\t\t\tlistaDocumentoProduto={this.props.listaDocumentoProduto}\n\t\t\t\t\toperacao={this.props.operacao}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass VendaDetalheCabecalho extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.alternarOrcamento = this.alternarOrcamento.bind(this);\n\t\tthis.alternarVenda = this.alternarVenda.bind(this);\n\t\tthis.efetivarOrcamento = this.efetivarOrcamento.bind(this);\n\t\tthis.onClickDocument = this.onClickDocument.bind(this);\n\t\tthis.onClickIcon = this.onClickIcon.bind(this);\n\n\t\tthis.exibindoOpcoes = false;\n\t}\n\n\tabrirOpcoes(){\n\t\tlet opcoes = ReactDOM.findDOMNode(this.opcoes);\n\t\t$(opcoes).stop().animate({\n\t\t\theight: \"show\"\n\t\t}, 350);\n\t\tthis.exibindoOpcoes = true;\n\t}\n\n\talternarOrcamento(){\n\t\tthis.props.trocarOperacao(\"OR\");\n\t}\n\n\talternarVenda(){\n\t\tthis.props.trocarOperacao(\"CU\");\n\t}\n\n\tcomponentDidMount(){\n\t\tdocument.addEventListener(\"click\", this.onClickDocument);\n\t}\n\n\tcomponentWillUnmount(){\n\t\tdocument.removeEventListener(\"click\", this.onClickDocument);\n\t}\n\n\tefetivarOrcamento(){\n\t\twindow.InformarValor.show({\n\t\t\ttitle: \"Nmero do oramento\",\n\t\t\tmask: \"999999\",\n\t\t\tsuccess: (value) => {\n\t\t\t\tif(value.length > 0){\n\t\t\t\t\tthis.props.carregarOrcamento(value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tfecharOpcoes(){\n\t\tlet opcoes = ReactDOM.findDOMNode(this.opcoes);\n\t\t$(opcoes).stop().animate({\n\t\t\theight: \"hide\"\n\t\t}, 350);\n\t\tthis.exibindoOpcoes = false;\n\t}\n\n\tonClickDocument(event){\n\t\tlet icon = ReactDOM.findDOMNode(this.icon);\n\t\tif(!this.iconClicked && icon.contains(event.target)){\n\t\t\tthis.iconClicked = true;\n\t\t}else if(this.exibindoOpcoes){\n\t\t\tthis.iconClicked = false;\n\t\t\tthis.fecharOpcoes();\n\t\t}\n\t}\n\n\tonClickIcon(){\n\t\tthis.abrirOpcoes();\n\t}\n\n\trender(){\n\t\tlet countLista = this.props.listaDocumentoProduto.length;\n\t\tlet operacao = this.props.operacao;\n\n\t\tlet titulo = null;\n\t\tswitch(operacao){\n\t\t\tcase \"OR\":\n\t\t\t\ttitulo = \"Oramento\";\n\t\t\t\tbreak;\n\t\t\tcase \"CU\":\n\t\t\tdefault:\n\t\t\t\ttitulo = \"Detalhe da venda\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"vendadetalhe-cabecalho\">\n\t\t\t\t<div>\n\t\t\t\t\t<h4>{titulo}</h4>\n\t\t\t\t\t<Icon name=\"menu\" onClick={this.onClickIcon} ref={(icon) => { this.icon = icon }} />\n\t\t\t\t\t<div className={\"vendadetalhe-cabecalho-opcoes\"} ref={(opcoes) => { this.opcoes = opcoes }}>\n\t\t\t\t\t\t<ListGroup>\n\t\t\t\t\t\t\t<ListItem className={countLista === 0 ? \" d-none\" : \"\"} onClick={this.props.cancelarVendaAtual}>Cancelar venda atual</ListItem>\n\t\t\t\t\t\t\t<ListItem className={countLista === 0 ? \"\" : \" d-none\"} onClick={this.props.cancelarUltimaVenda}>Cancelar ltima venda</ListItem>\n\t\t\t\t\t\t\t<ListItem onClick={this.props.reimprimirCupom}>Reimprimir cupom</ListItem>\n\t\t\t\t\t\t\t<ListItem className={operacao !== \"CU\" ? \"\" : \" d-none\"} onClick={this.alternarVenda}>Alternar para venda</ListItem>\n\t\t\t\t\t\t\t<ListItem className={operacao !== \"OR\" ? \"\" : \" d-none\"} onClick={this.alternarOrcamento}>Alternar para oramento</ListItem>\n\t\t\t\t\t\t\t<ListItem onClick={this.efetivarOrcamento}>Efetivar um oramento</ListItem>\n\t\t\t\t\t\t</ListGroup>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass VendaDetalheCorpo extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.countLista = props.listaDocumentoProduto.length;\n\t}\n\n\tcomponentDidUpdate(){\n\t\tif(this.props.listaDocumentoProduto.length > this.countLista){\n\t\t\tthis.scrollToBottom();\n\t\t}\n\t\tthis.countLista = this.props.listaDocumentoProduto.length;\n\t}\n\n\tscrollToBottom(){\n\t\t$(\"#vendadetalhe-corpo-conteudo\").stop().animate({\n\t\t\t\"scrollTop\": $(\"#vendadetalhe-corpo-conteudo\").get(0).scrollHeight\n\t\t}, 1000);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className=\"vendadetalhe-corpo\">\n\t\t\t\t<div>\n\t\t\t\t\t<div id=\"vendadetalhe-corpo-conteudo\">\n\t\t\t\t\t\t{this.props.listaDocumentoProduto.map((documentoproduto, i) => {\n\t\t\t\t\t\t\tdocumentoproduto.i = i;\n\t\t\t\t\t\t\treturn <VendaDetalheCorpoItem key={i} documentoproduto={documentoproduto} aumentarQuantidade={this.props.aumentarQuantidade} diminuirQuantidade={this.props.diminuirQuantidade} editarProduto={this.props.editarProduto} removerProduto={this.props.removerProduto} />\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass VendaDetalheCorpoItem extends React.Component {\n\n\trender(documentoproduto){\n\t\tlet espaco = \"   \";\n\t\tlet preco = \"R$ \" + this.props.documentoproduto.preco.format(2, \",\", \".\");\n\t\tlet quantidade  = this.props.documentoproduto.quantidade.format(this.props.documentoproduto.precisao, \",\", \".\");\n\t\tlet totaldesconto = \"R$ \" + this.props.documentoproduto.totaldesconto.format(2, \",\", \".\");\n\t\tlet totalacrescimo = \"R$ \" + this.props.documentoproduto.totalacrescimo.format(2, \",\", \".\");\n\t\tlet totalproduto = \"R$ \" + this.props.documentoproduto.totalproduto.format(2, \",\", \".\");\n\n\t\tlet calculo = null;\n\t\tif(this.props.documentoproduto.descontounitario > 0 && this.props.documentoproduto.acrescimounitario > 0){\n\t\t\tcalculo = preco + espaco + \"x\" + espaco + quantidade + espaco + \"-\" + espaco + totaldesconto + espaco + \"+\" + espaco + totalacrescimo + espaco + \"=\" + espaco + \"<b>\" + totalproduto + \"</b>\";\n\t\t}else if(this.props.documentoproduto.descontounitario > 0){\n\t\t\tcalculo = preco + espaco + \"x\" + espaco + quantidade + espaco + \"-\" + espaco + totaldesconto + espaco + \"=\" + espaco + \"<b>\" + totalproduto + \"</b>\";\n\t\t}else if(this.props.documentoproduto.acrescimounitario > 0){\n\t\t\tcalculo = preco + espaco + \"x\" + espaco + quantidade + espaco + \"+\" + espaco + totalacrescimo + espaco + \"=\" + espaco + \"<b>\" + totalproduto + \"</b>\";\n\t\t}else{\n\t\t\tcalculo = preco + espaco + \"x\" + espaco + quantidade + espaco + \"=\" + espaco + \"<b>\" + totalproduto + \"</b>\";\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Row className=\"vendadetalhe-produto\" onClick={() => { this.props.editarProduto(this.props.documentoproduto); }}>\n\t\t\t\t\t<Col size=\"8\">\n\t\t\t\t\t\t<div className=\"vendadetalhe-produto-descricao\">{this.props.documentoproduto.descricao}</div>\n\t\t   \t\t\t\t<div className=\"vendadetalhe-produto-calculo\" dangerouslySetInnerHTML={{__html: calculo}}></div>\n\t\t \t\t\t</Col>\n\t\t \t\t\t<Col size=\"4\" className=\"vendadetalhe-produto-botao text-right\">\n\t\t   \t\t\t\t<div>\n\t\t\t\t\t\t\t<Button icon=\"plus\" color=\"green\" onClick={(event) => { this.props.aumentarQuantidade(this.props.documentoproduto); event.stopPropagation(); }} />\n\t\t\t\t\t\t\t<Button icon=\"minus\" color=\"red\" onClick={(event) => { this.props.diminuirQuantidade(this.props.documentoproduto); event.stopPropagation(); }} />\n\t\t   \t\t\t\t</div>\n\t\t\t\t\t\t<Button icon=\"bin\" color=\"red\" onClick={(event) => { this.props.removerProduto(this.props.documentoproduto); event.stopPropagation(); }} />\n\t\t \t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Hr />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass VendaDetalheRodape extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcpfcnpj: props.cpfcnpj\n\t\t};\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tcpfcnpj: nextProps.cpfcnpj\n\t\t});\n\t}\n\n\trender(){\n\t\tlet totalquantidade = 0;\n\t\tlet totalbruto = 0;\n\t\tlet totaldesconto = 0;\n\t\tlet totaldocumento = 0;\n\n\t\tthis.props.listaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\ttotalquantidade += parseFloat(documentoproduto.quantidade);\n\t\t\ttotalbruto += parseFloat(documentoproduto.preco * documentoproduto.quantidade);\n\t\t\ttotaldesconto += parseFloat(documentoproduto.totaldesconto);\n\t\t\ttotaldocumento += parseFloat(documentoproduto.totalproduto);\n\t\t});\n\n\t\treturn (\n\t\t\t<div className=\"vendadetalhe-rodape\">\n\t\t\t\t<div>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t\t<div className=\"vendadetalhe-rodape-informacao mb-3 mt-1\">\n\t\t\t\t\t\t\t\t<div>Quantidade de itens <strong>{totalquantidade}</strong></div>\n\t\t\t\t\t\t\t\t<div>Total dos itens <strong><small>R$</small>{totalbruto.format(2, \",\", \".\")}</strong></div>\n\t\t\t\t\t\t\t\t<div>Total de desconto <strong><small>R$</small>{totaldesconto.format(2, \",\", \".\")}</strong></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={this.props.operacao === \"CU\" ? \"\" : \"d-none\"}>\n\t\t\t\t\t\t\t\t<div className={\"vendadetalhe-rodape-cpfcnpj\" + (this.state.cpfcnpj ? \"\" : \" d-none\")} style={{position: \"absolute\", bottom: \"0px\"}}>\n\t\t\t\t\t\t\t\t\t<span>CPF: <strong>{this.state.cpfcnpj}</strong></span>\n\t\t\t\t\t\t\t\t\t<Button text=\"alterar\" color=\"green\" size=\"xs\" className=\"ml-2\" onClick={this.props.informarCPF} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={this.state.cpfcnpj ? \" d-none\" : \"\"} style={{position: \"absolute\", bottom: \"0px\"}}>\n\t\t\t\t\t\t\t\t\t<Button text=\"Informar CPF\" color=\"green\" size=\"sm\" onClick={this.props.informarCPF} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t\t<div className=\"vendadetalhe-rodape-totaldocumento\">{totaldocumento.format(2, \",\", \".\")}</div>\n\t\t\t\t\t\t\t<Button text=\"F I N A L I Z A R\" icon=\"dollar2\" size=\"lg\" block=\"true\" color=\"green\" disabled={totaldocumento === 0} onClick={this.props.abrirFinalizacao} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"./Button.js\";\nimport FormGroup from \"./FormGroup.js\";\nimport Hr from \"./Hr.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport \"../css/VendaEditarProduto.css\";\n\nexport default class VendaEditarProduto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tquantidade: this.props.documentoproduto.quantidade,\n\t\t\tpreco: this.props.documentoproduto.preco,\n\t\t\tdescontounitario: this.props.documentoproduto.descontounitario,\n\t\t\tacrescimounitario: this.props.documentoproduto.acrescimounitario,\n\t\t\ttotaldesconto: this.props.documentoproduto.totaldesconto,\n\t\t\ttotalacrescimo: this.props.documentoproduto.totalacrescimo,\n\t\t\ttotalproduto: this.props.documentoproduto.totalproduto,\n\t\t\tshow: this.props.show\n\t\t};\n\n\t\tthis.calcularTotais = this.calcularTotais.bind(this);\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.onChangeAcrescimoPercentual = this.onChangeAcrescimoPercentual.bind(this);\n\t\tthis.onChangeAcrescimoUnitario = this.onChangeAcrescimoUnitario.bind(this);\n\t\tthis.onChangeDescontoPercentual = this.onChangeDescontoPercentual.bind(this);\n\t\tthis.onChangeDescontoUnitario = this.onChangeDescontoUnitario.bind(this);\n\t\tthis.onChangePreco = this.onChangePreco.bind(this);\n\t\tthis.onChangeQuantidade = this.onChangeQuantidade.bind(this);\n\t\tthis.onChangeTotalAcrescimo = this.onChangeTotalAcrescimo.bind(this);\n\t\tthis.onChangeTotalDesconto = this.onChangeTotalDesconto.bind(this);\n\t}\n\n\tcalcularTotais(){\n\t\tlet totalbruto = this.state.preco * this.state.quantidade;\n\t\tlet totalacrescimo = this.state.acrescimounitario * this.state.quantidade;\n\t\tlet totaldesconto = this.state.descontounitario * this.state.quantidade;\n\t\tlet totalproduto = totalbruto - totaldesconto + totalacrescimo;\n\n\t\tthis.setState({\n\t\t\ttotalbruto: totalbruto,\n\t\t\ttotalacrescimo: totalacrescimo,\n\t\t\ttotaldesconto: totaldesconto,\n\t\t\ttotalproduto: totalproduto\n\t\t});\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tquantidade: nextProps.documentoproduto.quantidade,\n\t\t\tpreco: nextProps.documentoproduto.preco,\n\t\t\tdescontounitario: nextProps.documentoproduto.descontounitario,\n\t\t\tacrescimounitario: nextProps.documentoproduto.acrescimounitario,\n\t\t\tshow: nextProps.show\n\t\t}, this.calcularTotais);\n\t}\n\n\tconfirmar(){\n\t\tlet documentoproduto = Object.assign({}, this.props.documentoproduto);\n\n\t\tdocumentoproduto.quantidade = this.state.quantidade;\n\t\tdocumentoproduto.preco = this.state.preco;\n\t\tdocumentoproduto.descontounitario = this.state.descontounitario;\n\t\tdocumentoproduto.acrescimounitario = this.state.acrescimounitario;\n\t\tdocumentoproduto.totaldesconto = this.state.totaldesconto;\n\t\tdocumentoproduto.totalacrescimo = this.state.totalacrescimo;\n\t\tdocumentoproduto.totalproduto = this.state.totalproduto;\n\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t}, () => {\n\t\t\tthis.props.atualizarDocumentoProduto(documentoproduto)\n\t\t});\n\t}\n\n\tonChangeAcrescimoPercentual(event){\n\t\tlet acrescimopercentual = event.target.value.toFloat();\n\t\tlet acrescimounitario  = this.state.preco * acrescimopercentual / 100;\n\n\t\tthis.setState({\n\t\t\tacrescimounitario: acrescimounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeAcrescimoUnitario(event){\n\t\tlet acrescimounitario  = event.target.value.toFloat();\n\n\t\tthis.setState({\n\t\t\tacrescimounitario: acrescimounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeDescontoPercentual(event){\n\t\tlet descontopercentual = event.target.value.toFloat();\n\t\tlet descontounitario  = this.state.preco * descontopercentual / 100;\n\n\t\tthis.setState({\n\t\t\tdescontounitario: descontounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeDescontoUnitario(event){\n\t\tlet descontounitario  = event.target.value.toFloat();\n\n\t\tthis.setState({\n\t\t\tdescontounitario: descontounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangePreco(event){\n\t\tlet preco  = event.target.value.toFloat();\n\n\t\tthis.setState({\n\t\t\tpreco: preco\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeQuantidade(event){\n\t\tlet quantidade  = event.target.value.toFloat();\n\n\t\tthis.setState({\n\t\t\tquantidade: quantidade\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeTotalAcrescimo(event){\n\t\tlet acrescimounitario = event.target.value.toFloat() / this.state.quantidade;\n\n\t\tthis.setState({\n\t\t\tacrescimounitario: acrescimounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeTotalDesconto(event){\n\t\tlet descontounitario = event.target.value.toFloat() / this.state.quantidade;\n\n\t\tthis.setState({\n\t\t\tdescontounitario: descontounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\trender(){\n\t\tlet totalbruto = this.state.preco * this.state.quantidade;\n\t\tlet acrescimopercentual = (totalbruto > 0 ? this.state.totalacrescimo / totalbruto * 100 : 0);\n\t\tlet descontopercentual = (totalbruto > 0 ? this.state.totaldesconto / totalbruto * 100 : 0);\n\n\t\tlet decimalQuantidade = this.props.documentoproduto.precisao;\n\n\t\treturn (\n\t\t\t<Modal id=\"VendaEditarProduto\" title={this.props.documentoproduto.descricao} show={this.state.show} size=\"md\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<Row>\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Quantidade\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.quantidade.format(decimalQuantidade, \",\", \".\")} onChange={this.onChangeQuantidade} InformarValor={{decimal: decimalQuantidade}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Preo unitrio\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.preco.format(2, \",\", \".\")} onChange={this.onChangePreco} InformarValor={{decimal: 2, money: true}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Valor do item\" className=\"col-4\" inputClassName=\"text-center\" value={totalbruto.format(2, \",\", \".\")} disabled={true} readOnly={true} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Desconto unitrio\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.descontounitario.format(2, \",\", \".\")} onChange={this.onChangeDescontoUnitario} InformarValor={{decimal: 2, money: true}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Desconto percentual\" className=\"col-4\" inputClassName=\"text-center\" value={descontopercentual.format(2, \",\", \".\")} onChange={this.onChangeDescontoPercentual} InformarValor={{decimal: 0}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Total de desconto\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.totaldesconto.format(2, \",\", \".\")} onChange={this.onChangeTotalDesconto} InformarValor={{decimal: 2, money: true}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Acrscimo unitrio\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.acrescimounitario.format(2, \",\", \".\")} onChange={this.onChangeAcrescimoUnitario} InformarValor={{decimal: 2, money: true}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Acrsc percentual\" className=\"col-4\" inputClassName=\"text-center\" value={acrescimopercentual.format(2, \",\", \".\")} onChange={this.onChangeAcrescimoPercentual} InformarValor={{decimal: 0}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Total de acrscimo\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.totalacrescimo.format(2, \",\", \".\")} onChange={this.onChangeTotalAcrescimo} InformarValor={{decimal: 2, money: true}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Total final\" className=\"col-4 offset-8\" inputClassName=\"text-center\" value={this.state.totalproduto.format(2, \",\", \".\")} disabled={true} readOnly={true} />\n\t\t\t\t</Row>\n\t\t\t\t<Hr />\n\t\t\t\t<div className=\"text-right\">\n\t\t\t\t\t<Button text=\"Confirmar\" icon=\"thumbs-up\" color=\"green\" className=\"mr-2\" onClick={this.confirmar} />\n\t\t\t\t\t<Button text=\"Voltar\" icon=\"thumbs-down\" color=\"red\" onClick={this.cancelar} />\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nexport default class Card extends React.Component {\n\n\trender(){\n\t\tlet className = [this.props.className];\n\t\tclassName.push(\"card\");\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"./Button.js\";\nimport Card from \"./Card.js\";\nimport Col from \"./Col.js\";\nimport FormGroup from \"./FormGroup.js\";\nimport Hr from \"./Hr.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/VendaFinalizacao.css\";\n\nexport default class VendaFinalizacao extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdocumentopagamentos: props.listaDocumentoPagamento,\n\t\t\tformaspagamento: [],\n\t\t\tshow: false\n\t\t};\n\n\t\tthis.finalizarVenda = this.finalizarVenda.bind(this);\n\t\tthis.removerPagamento = this.removerPagamento.bind(this);\n\n\t\tthis.totalpago = 0;\n\t\tthis.totalrestante = 0;\n\t\tthis.totaltroco = 0;\n\t}\n\n\tcarregarFormasPagamento(){\n\t\tlet query = \"SELECT idformapagamento, descricao, especie FROM formapagamento WHERE status = $1 ORDER BY especie\";\n\t\tthis.props.Pool.query(query, [\"A\"], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tformaspagamento: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarFormasPagamento();\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tdocumentopagamentos: nextProps.listaDocumentoPagamento,\n\t\t\tshow: nextProps.show\n\t\t});\n\t}\n\n\tfinalizarVenda(){\n\t\tthis.props.finalizarVenda(this.state.documentopagamentos, this.totaltroco);\n\t}\n\n\ticonEspecie(especie){\n\t\tswitch(especie){\n\t\t\tcase \"01\": return \"dollar\";\n\t\t\tcase \"02\": return \"keyboard\";\n\t\t\tcase \"03\":\n\t\t\tcase \"04\": return \"credit-card\";\n\t\t\tcase \"10\":\n\t\t\tcase \"11\":\n\t\t\tcase \"12\":\n\t\t\tcase \"13\": return \"discout\";\n\t\t\tcase \"99\": return \"money\";\n\t\t\tdefault: return \"money\";\n\t\t}\n\t}\n\n\tincluirPagamento(formapagamento){\n\t\twindow.InformarValor.show({\n\t\t\ttitle: formapagamento.descricao,\n\t\t\tdecimal: 2,\n\t\t\tmoney: true,\n\t\t\tvalue: this.totalrestante.format(2, \",\", \".\"),\n\t\t\tsuccess: (valor) => {\n\t\t\t\tvalor = valor.toFloat();\n\t\t\t\tif(!(valor > 0)){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet documentopagamentos = this.state.documentopagamentos;\n\t\t\t\tdocumentopagamentos.push({\n\t\t\t\t\tidformapagamento: formapagamento.idformapagamento,\n\t\t\t\t\tdescricao: formapagamento.descricao,\n\t\t\t\t\ttotalpagamento: valor\n\t\t\t\t});\n\t\t\t\tthis.setState({\n\t\t\t\t\tdocumentopagamentos: documentopagamentos\n\t\t\t\t}, () => {\n\t\t\t\t\tif(formapagamento.especie === \"01\" && this.totalrestante === 0){\n\t\t\t\t\t\tthis.finalizarVenda();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t}\n\n\tremoverPagamento(i){\n\t\tlet documentopagamentos = this.state.documentopagamentos;\n\t\tdocumentopagamentos.splice(i, 1);\n\t\tthis.setState({\n\t\t\tdocumentopagamentos: documentopagamentos\n\t\t});\n\t}\n\n\trender(){\n\t\tthis.totalpago = 0;\n\t\tfor(let documentopagamento of this.state.documentopagamentos){\n\t\t\tthis.totalpago += documentopagamento.totalpagamento;\n\t\t}\n\t\tif(this.totalpago > this.props.totaldocumento){\n\t\t\tthis.totalrestante = 0;\n\t\t\tthis.totaltroco = Math.round((this.totalpago - this.props.totaldocumento) * 100) / 100;\n\t\t}else{\n\t\t\tthis.totalrestante = Math.round((this.props.totaldocumento - this.totalpago) * 100) / 100;\n\t\t\tthis.totaltroco = 0;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={\"vendafinalizacao\" + (this.state.show ? \"\" : \" d-none\")}>\n\t\t\t\t<Modal title=\"Finalizao da venda\" size=\"lg\" show={this.state.show} beforeClose={this.props.beforeClose}>\n\t\t\t\t\t<div className=\"vendafinalizacao-totaldocumento\">\n\t\t\t\t\t\t{this.props.totaldocumento.format(2, \",\", \".\")}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Row className=\"vendafinalizacao-formapagamento\">\n\t\t\t\t\t\t{this.state.formaspagamento.map((formapagamento, i) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Col size=\"4\" key={i}>\n\t\t\t\t\t\t\t\t\t<Button text={formapagamento.descricao} block={true} size=\"lg\" icon={this.iconEspecie(formapagamento.especie)} disabled={this.totalrestante === 0} onClick={() => { this.incluirPagamento(formapagamento) }} />\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Hr />\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<FormGroup label=\"Total pago\" className=\"col-3\" inputClassName=\"text-center\" size=\"lg\" value={this.totalpago.format(2, \",\", \".\")} disabled={true} />\n\t\t\t\t\t\t<FormGroup label=\"Total restante\" className=\"col-3\" inputClassName=\"text-center\" size=\"lg\" value={this.totalrestante.format(2, \",\", \".\")} disabled={true} warning={this.totalrestante} />\n\t\t\t\t\t\t<FormGroup label=\"Total de troco\" className=\"col-3\" inputClassName=\"text-center\" size=\"lg\" value={this.totaltroco.format(2, \",\", \".\")} disabled={true} warning={this.totaltroco} />\n\t\t\t\t\t\t<Col size=\"3\" labelMargin={true}>\n\t\t\t\t\t\t\t<Button text=\"Finalizar!\" icon=\"thumbs-up\" block={true} size=\"lg\" color=\"green\" disabled={this.totalrestante > 0} onClick={this.finalizarVenda} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<VendaFinalizacaoListaPagamentos documentopagamentos={this.state.documentopagamentos} removerPagamento={this.removerPagamento} />\n\t\t\t\t</Modal>\n\t\t\t\t<div className=\"vendafinalizacao-botoesextras\">\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t\t<Button text=\"Desconto\" icon=\"folder-minus\" size=\"sm\" block={true} disabled={this.totalpago > 0} onClick={this.props.aplicarDesconto} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t\t<Button text=\"Acrscimo\" icon=\"folder-plus\" size=\"sm\" block={true} disabled={this.totalpago > 0} onClick={this.props.aplicarAcrescimo} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t\t<Button text=\"Incluir 10%\" icon=\"user-plus\" size=\"sm\" block={true} onClick={this.props.incluirDezPorcento} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass VendaFinalizacaoListaPagamentos extends React.Component {\n\trender(){\n\t\tif(this.props.documentopagamentos.length === 0){\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Hr className=\"mt-0\" />\n\t\t\t\t<Row className=\"justify-content-center\">\n\t\t\t\t\t{this.props.documentopagamentos.map((documentopagamento, i) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Col size=\"6\" key={i}>\n\t\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t<Col size=\"5\">\n\t\t\t\t\t\t\t\t\t\t\t<span>{documentopagamento.descricao}</span>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<span>{documentopagamento.totalpagamento.format(2, \",\", \".\")}</span>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col size=\"3\">\n\t\t\t\t\t\t\t\t\t\t\t<Button icon=\"bin\" color=\"red\" size=\"sm\" block={true} onClick={() => {this.props.removerPagamento(i)}} />\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport FormGroup from \"./FormGroup.js\";\nimport Hr from \"./Hr.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport {validarCPF, validarCNPJ} from \"../def/function.js\";\n\nexport default class VendaFinalizacaoOrcamento extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tnomeorcamento: this.props.nomeorcamento,\n\t\t\tcpfcnpj: this.props.cpfcnpj,\n\t\t\tshow: this.props.show\n\t\t};\n\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.onChangeCpfCnpj = this.onChangeCpfCnpj.bind(this);\n\t\tthis.onChangeNomeOrcamento = this.onChangeNomeOrcamento.bind(this);\n\t\tthis.onFocusCpfCnpj = this.onFocusCpfCnpj.bind(this);\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tnomeorcamento: nextProps.nomeorcamento,\n\t\t\tcpfcnpj: nextProps.cpfcnpj,\n\t\t\tshow: nextProps.show\n\t\t});\n\t}\n\n\tconfirmar(){\n\t\tthis.props.finalizarOrcamento(this.state.nomeorcamento, this.state.cpfcnpj);\n\t}\n\n\tonChangeCpfCnpj(event){\n\t\tthis.setState({\n\t\t\tcpfcnpj: event.target.value\n\t\t});\n\t}\n\n\tonChangeNomeOrcamento(event){\n\t\tthis.setState({\n\t\t\tnomeorcamento: event.target.value\n\t\t});\n\t}\n\n\tonFocusCpfCnpj(event){\n\t\twindow.InformarValor.show({\n\t\t\ttitle: \"Informe o CPF ou CNPJ\",\n\t\t\tmask: \"99999999999999\",\n\t\t\tsuccess: (valor) => {\n\t\t\t\tlet cpfcnpj = null;\n\t\t\t\tif(valor.length === 11 && validarCPF(valor)){\n\t\t\t\t\tcpfcnpj = valor.substr(0, 3) + \".\" + valor.substr(3, 3) + \".\" + valor.substr(6, 3) + \"-\" + valor.substr(9, 2);\n\t\t\t\t}else if(valor.length === 14 && validarCNPJ(valor)){\n\t\t\t\t\tcpfcnpj = valor.substr(0, 2) + \".\" + valor.substr(2, 3) + \".\" + valor.substr(5, 3) + \"/\" + valor.substr(8, 4) + \"-\" + valor.substr(12, 2);\n\t\t\t\t}else if(valor.length > 0){\n\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\ttitle: \"CPF ou CNPJ invlido\",\n\t\t\t\t\t\ttext: \"O CPF ou CNPJ informado  invlido.\"\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tcpfcnpj: cpfcnpj\n\t\t\t\t});\n\t\t\t},\n\t\t\tfail: () => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcpfcnpj: null\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal id=\"VendaFinalizacaoOrcamento\" show={this.state.show} size=\"sm\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<Row>\n\t\t\t\t\t<FormGroup type=\"text\" className=\"col-12\" label=\"Nome do cliente\" value={this.state.nomeorcamento} onChange={this.onChangeNomeOrcamento} />\n\t\t\t\t\t<FormGroup type=\"text\" className=\"col-12\" label=\"CPF/CNPJ\" value={this.state.cpfcnpj} onChange={this.onChangeCpfCnpj} onFocus={this.onFocusCpfCnpj} />\n\t\t\t\t</Row>\n\t\t\t\t<Hr className=\"mt-0\" />\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Button text=\"Cancelar\" color=\"red\" block={true} onClick={this.cancelar} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\" className=\"pl-0\">\n\t\t\t\t\t\t<Button text=\"Confirmar\" color=\"green\" block={true} onClick={this.confirmar} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport Col from \"./Col.js\";\nimport ListGroup from \"./ListGroup.js\";\nimport ListItem from \"./ListItem.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\nimport Printer from \"./Printer.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/VendaReimprimirCupom.css\";\n\nexport default class VendaReimprimirCupom extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tlistaUltimosDocumentos: [],\n\t\t\tshow: false\n\t\t};\n\n\t\tthis.carregarUltimosDocumentos = this.carregarUltimosDocumentos.bind(this);\n\t\tthis.imprimir = this.imprimir.bind(this);\n\t}\n\n\tatualizarState(data){\n\t\tlet numero = (data.numero ? data.numero : \"\");\n\t\tlet cpfcnpj = (data.cpfcnpj ? data.cpfcnpj : \"no informado\");\n\n\t\tthis.setState({\n\t\t\tiddocumento: data.iddocumento,\n\t\t\tnumero: String(numero).lpad(6, \"0\"),\n\t\t\ttotaldocumento: \"R$ \" + data.totaldocumento.format(2, \",\", \".\"),\n\t\t\tcpfcnpj: cpfcnpj\n\t\t});\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tasync carregarDocumento(localizarNumero){\n\t\tlet query = [\n\t\t\t\"SELECT iddocumento, numero, totaldocumento, cpfcnpj\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE operacao = $1\",\n\t\t\t\"  AND numero = $2\",\n\t\t\t\"ORDER BY iddocumento DESC\",\n\t\t\t\"LIMIT 1\"\n\t\t].join(\" \");\n\n\t\tlet res = await this.props.Pool.query(query, [\"CU\", localizarNumero]);\n\n\t\tif(res.rowCount === 0){\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Houve uma falha\",\n\t\t\t\ttext: \"Nenhum documento foi encontrado com o nmero \" + localizarNumero + \".\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tlet data = res.rows[0];\n\t\tthis.atualizarState(data);\n\t}\n\n\tasync carregarUltimosDocumentos(){\n\t\tlet query = [\n\t\t\t\"SELECT iddocumento, dthrcriacao, totaldocumento, totalquantidade, cpfcnpj\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE operacao = $1\",\n\t\t\t\"ORDER BY dthrcriacao DESC\",\n\t\t\t\"LIMIT 3\"\n\t\t].join(\" \");\n\n\t\tlet res = await this.props.Pool.query(query, [\"CU\"]);\n\n\t\tlet data = [];\n\t\tfor(let row of res.rows){\n\t\t\tdata.push(row);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tlistaUltimosDocumentos: data\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tshow: nextProps.show\n\t\t});\n\n\t\tif(!this.state.show && nextProps.show){\n\t\t\tthis.carregarUltimosDocumentos();\n\t\t}\n\t}\n\n\tasync imprimir(iddocumento){\n\t\tlet printer = new Printer(this.props.Pool);\n\t\tawait printer.imprimirDocumento(iddocumento, () => {\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.FastMessage.show(\"Cupom enviado para impressora com sucesso!\");\n\t\t}, (err) => {\n\t\t\tif(err) defaultMessageBoxError(err);\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal id=\"VendaReimprimirCupom\" title=\"Reimpresso de cupom\" show={this.state.show} size=\"md\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<ListGroup>\n\t\t\t\t\t{this.state.listaUltimosDocumentos.map((documento, i) => {\n\t\t\t\t\t\tlet dthrcriacao = documento.dthrcriacao.toLocaleString();\n\t\t\t\t\t\tlet totaldocumento = \"R$ \" + documento.totaldocumento.format(2, \",\", \".\");\n\t\t\t\t\t\tlet totalquantidade = Math.round(documento.totalquantidade);\n\t\t\t\t\t\tlet cpfcnpj = documento.cpfcnpj;\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<ListItem key={i} onClick={() => {this.imprimir(documento.iddocumento)}}>\n\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t<Col size=\"12\">\n\t\t\t\t\t\t\t\t\t\t<h3 className=\"text-center\">{dthrcriacao}</h3>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t<Col size=\"4\" className=\"text-center\">\n\t\t\t\t\t\t\t\t\t\t<span>Total documento</span>\n\t\t\t\t\t\t\t\t\t\t<h4>{totaldocumento}</h4>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t<Col size=\"4\" className=\"text-center\">\n\t\t\t\t\t\t\t\t\t\t<span>Qtde de itens</span>\n\t\t\t\t\t\t\t\t\t\t<h4>{totalquantidade}</h4>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t<Col size=\"4\" className=\"text-center\">\n\t\t\t\t\t\t\t\t\t\t<span>CPF/CNPJ</span>\n\t\t\t\t\t\t\t\t\t\t<h4>{cpfcnpj}</h4>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</ListGroup>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport ini from \"ini\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport FormControl from \"../com/FormControl.js\";\nimport Icon from \"../com/Icon.js\";\nimport PainelRapido from \"../com/PainelRapido.js\";\nimport Row from \"../com/Row.js\";\nimport VendaAplicarAcrescimo from \"../com/VendaAplicarAcrescimo.js\";\nimport VendaAplicarDesconto from \"../com/VendaAplicarDesconto.js\";\nimport VendaCancelarCupom from  \"../com/VendaCancelarCupom.js\";\nimport VendaDetalhe from \"../com/VendaDetalhe.js\";\nimport VendaEditarProduto from \"../com/VendaEditarProduto.js\";\nimport VendaFinalizacao from \"../com/VendaFinalizacao.js\";\nimport VendaFinalizacaoOrcamento from \"../com/VendaFinalizacaoOrcamento.js\";\nimport VendaReimprimirCupom from \"../com/VendaReimprimirCupom.js\";\n\nimport Printer from \"../com/Printer.js\";\nimport SAT from \"../com/SAT.js\";\n\nimport \"../def/prototype.js\";\nimport {\n\tdefaultMessageBoxError, temporaryDirectory, validarCPF,\n\tvalidarCNPJ, valorParametro, writeTemporary\n} from \"../def/function.js\";\n\nimport \"../css/Venda.css\";\n\nconst fs = window.require(\"fs\");\n\nexport default class Venda extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tlet documentoproduto = this.criarObjetoDocumentoProduto();\n\n\t\tthis.state = {\n\t\t\tdocumentoproduto: documentoproduto, // Produto atual que esta sendo editado\n\t\t\tlistaDocumentoProduto: [], // Lista de produtos que compoe a venda\n\t\t\tlistaDocumentoPagamento: [], // Lista de pagamentos que compoe a venda\n\t\t\toperacao: \"CU\", // Operacao (CU: Cupom, OR: Orcamento)\n\t\t\tcpfcnpj: null, // CPF/CNPJ do cliente\n\t\t\tnomeorcamento: null, // Nome do cliente\n\t\t\tiddocumentoorcamento: null, // ID do orcamento de origem\n\t\t\tpesquisa: \"\", // Conteudo da pesquisa\n\t\t\tpesquisaEfetiva: \"\", // O real termo sendo pesquisado\n\t\t\tshowEditarProduto: false, // Se deve exibir o modal da edicao de produtos\n\t\t\tshowVendaAplicarDesconto: false, // Se deve exibir o modal da aplicacao de desconto\n\t\t\tshowVendaAplicarAcrescimo: false, // Se deve exibir o modal da aplicacao de acrescimo\n\t\t\tshowVendaCancelarCupom: false, // Se deve exibir o modal de cancelamento de cupom\n\t\t\tshowVendaFinalizacao: false, // Se deve exibir o modal da finalizacao de venda\n\t\t\tshowVendaFinalizacaoOrcamento: false, // Se deve exibir o modal da finalizacao de orcamento\n\t\t\tshowVendaReimprimirCupom: false // Se deve exibir o modal de reimpressao de cupom\n\t\t};\n\n\t\tthis.abrirFinalizacao = this.abrirFinalizacao.bind(this);\n\t\tthis.aplicarAcrescimo = this.aplicarAcrescimo.bind(this);\n\t\tthis.aplicarDesconto = this.aplicarDesconto.bind(this);\n\t\tthis.atualizarDocumentoProduto = this.atualizarDocumentoProduto.bind(this);\n\t\tthis.aumentarQuantidade = this.aumentarQuantidade.bind(this);\n\t\tthis.cancelarUltimaVenda = this.cancelarUltimaVenda.bind(this);\n\t\tthis.cancelarVendaAtual = this.cancelarVendaAtual.bind(this);\n\t\tthis.carregarOrcamento = this.carregarOrcamento.bind(this);\n\t\tthis.carregarTemporario = this.carregarTemporario.bind(this);\n\t\tthis.diminuirQuantidade = this.diminuirQuantidade.bind(this);\n\t\tthis.editarProduto = this.editarProduto.bind(this);\n\t\tthis.finalizarDocumento = this.finalizarDocumento.bind(this);\n\t\tthis.finalizarOrcamento = this.finalizarOrcamento.bind(this);\n\t\tthis.finalizarVenda = this.finalizarVenda.bind(this);\n\t\tthis.gravarTemporario = this.gravarTemporario.bind(this);\n\t\tthis.incluirDezPorcento = this.incluirDezPorcento.bind(this);\n\t\tthis.incluirProduto = this.incluirProduto.bind(this);\n\t\tthis.informarCPF = this.informarCPF.bind(this);\n\t\tthis.onChangePesquisa = this.onChangePesquisa.bind(this);\n\t\tthis.onClickBuscar = this.onClickBuscar.bind(this);\n\t\tthis.onKeyUpPesquisa = this.onKeyUpPesquisa.bind(this);\n\t\tthis.pesquisaLimpar = this.pesquisaLimpar.bind(this);\n\t\tthis.reimprimirCupom = this.reimprimirCupom.bind(this);\n\t\tthis.reiniciar = this.reiniciar.bind(this);\n\t\tthis.removerProduto = this.removerProduto.bind(this);\n\t\tthis.trocarOperacao = this.trocarOperacao.bind(this);\n\n\t\tthis.Pool = new Pool();\n\n\t\tthis.temporaryFileName = \"venda.tmp\";\n\t}\n\n\tabrirFinalizacao(){\n\t\tswitch(this.state.operacao){\n\t\t\tcase \"CU\":\n\t\t\t\tthis.setState({\n\t\t\t\t\tshowVendaFinalizacao: true\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"OR\":\n\t\t\t\tthis.setState({\n\t\t\t\t\tshowVendaFinalizacaoOrcamento: true\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\taplicarAcrescimo(totalbruto, totalacrescimo){\n\t\tif(isNaN(totalbruto) || isNaN(totalacrescimo)){\n\t\t\tthis.setState({\n\t\t\t\tshowVendaAplicarAcrescimo: true\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\n\t\tlistaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\tlet totalproduto = documentoproduto.preco * documentoproduto.quantidade;\n\t\t\tlet acrescimoproduto  = totalacrescimo * (totalproduto / totalbruto);\n\t\t\tlet acrescimounitario = acrescimoproduto / documentoproduto.quantidade;\n\t\t\tdocumentoproduto.acrescimounitario = acrescimounitario;\n\t\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\t});\n\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto,\n\t\t\tshowVendaAplicarAcrescimo: false\n\t\t});\n\t}\n\n\taplicarDesconto(totalbruto, totaldesconto){\n\t\tif(isNaN(totalbruto) || isNaN(totaldesconto)){\n\t\t\tthis.setState({\n\t\t\t\tshowVendaAplicarDesconto: true\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\n\t\tlistaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\tlet totalproduto = documentoproduto.preco * documentoproduto.quantidade;\n\t\t\tlet descontoproduto = Math.round(totaldesconto * (totalproduto / totalbruto) * 100) / 100;\n\t\t\tlet descontounitario = Math.round(descontoproduto / documentoproduto.quantidade * 100) / 100;\n\t\t\tdocumentoproduto.descontounitario = descontounitario;\n\t\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\t});\n\n\t\tlet calcularDiferenca = () => {\n\t\t\tlet t_descontoproduto = 0;\n\t\t\tlistaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\t\tt_descontoproduto += documentoproduto.descontounitario * documentoproduto.quantidade;\n\t\t\t});\n\t\t\tlet diferenca = totaldesconto - t_descontoproduto;\n\t\t\tdiferenca = Math.round(diferenca * 100) / 100;\n\t\t\treturn diferenca;\n\t\t};\n\n\t\tlet i = 0;\n\t\tlet diferenca = calcularDiferenca();\n\t\twhile(diferenca !== 0 && i++ < 20){\n\t\t\tlet index = Math.round(Math.random() * (listaDocumentoProduto.length - 1));\n\t\t\tlet documentoproduto = listaDocumentoProduto[index];\n\t\t\tlet descontounitario = documentoproduto.descontounitario;\n\t\t\tlet descontoproduto = (descontounitario * documentoproduto.quantidade) + diferenca;\n\t\t\tdescontounitario = Math.round(descontoproduto / documentoproduto.quantidade * 100) / 100;\n\t\t\tdocumentoproduto.descontounitario = descontounitario;\n\t\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\t\tdiferenca = calcularDiferenca();\n\t\t}\n\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto,\n\t\t\tshowVendaAplicarDesconto: false\n\t\t});\n\t}\n\n\tatualizarDocumentoProduto(documentoproduto){\n\t\tlet i = documentoproduto.i;\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\t\tlistaDocumentoProduto[i] = documentoproduto;\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto\n\t\t});\n\t}\n\n\taumentarQuantidade(documentoproduto){\n\t\tlet i = documentoproduto.i;\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\t\tdocumentoproduto = listaDocumentoProduto[i];\n\t\tdocumentoproduto.quantidade++;\n\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\tlistaDocumentoProduto[i] = documentoproduto;\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto\n\t\t});\n\t}\n\n\tcalcularDocumentoProduto(documentoproduto){\n\t\tdocumentoproduto.totaldesconto = documentoproduto.descontounitario * documentoproduto.quantidade;\n\t\tdocumentoproduto.totalacrescimo = documentoproduto.acrescimounitario * documentoproduto.quantidade;\n\t\tdocumentoproduto.totalproduto = (documentoproduto.preco * documentoproduto.quantidade) - documentoproduto.totaldesconto + documentoproduto.totalacrescimo;\n\t}\n\n\tcancelarUltimaVenda(){\n\t\tthis.setState({\n\t\t\tshowVendaCancelarCupom: true\n\t\t});\n\t}\n\n\tcancelarVendaAtual(){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Cancelamento de venda\",\n\t\t\ttext: \"Tem certeza que deseja cancelar a venda atual?\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tcpfcnpj: null,\n\t\t\t\t\t\t\tlistaDocumentoProduto: [],\n\t\t\t\t\t\t\tlistaDocumentoPagamento: []\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"No\",\n\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tasync carregarOrcamento(iddocumento){\n\t\ttry{\n\t\t\twindow.Loading.show();\n\n\t\t\tlet queryDocumento = \"SELECT iddocumento, cpfcnpj, nomeorcamento FROM documento WHERE operacao = $1 AND iddocumento = $2\";\n\t\t\tlet resDocumento = await this.Pool.query(queryDocumento, [\"OR\", iddocumento]);\n\t\t\tif(resDocumento.rows.length === 0){\n\t\t\t\tthrow new Error(\"Oramento de nmero <b>\" + iddocumento + \"</b> no pde ser encontrado.\");\n\t\t\t}\n\t\t\tlet documento = resDocumento.rows[0];\n\n\t\t\tlet listaDocumentoProduto = [];\n\t\t\tlet queryDocumentoProduto = \"SELECT * FROM documentoproduto WHERE iddocumento = $1\";\n\t\t\tlet resDocumentoProduto = await this.Pool.query(queryDocumentoProduto, [documento.iddocumento]);\n\t\t\tfor(let row of resDocumentoProduto.rows){\n\t\t\t\tlistaDocumentoProduto.push(this.criarObjetoDocumentoProduto({\n\t\t\t\t\tidproduto: row.idproduto,\n\t\t\t\t\tdescricao: row.descricao,\n\t\t\t\t\tunidade: row.unidade,\n\t\t\t\t\tprecisao: row.precisao,\n\t\t\t\t\tprecovariavel: row.precovariavel,\n\t\t\t\t\tquantidade: row.quantidade,\n\t\t\t\t\tpreco: row.preco,\n\t\t\t\t\tdescontounitario: row.descontounitario,\n\t\t\t\t\ttotaldesconto: row.totaldesconto,\n\t\t\t\t\tacrescimounitario: row.acrescimounitario,\n\t\t\t\t\ttotalacrescimo: row.totalacrescimo,\n\t\t\t\t\ttotalproduto: row.totalproduto\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\toperacao: \"CU\",\n\t\t\t\tcpfcnpj: documento.cpfcnpj,\n\t\t\t\tnomeorcamento: documento.nomeorcamento,\n\t\t\t\tlistaDocumentoProduto: listaDocumentoProduto,\n\t\t\t\tiddocumentoorcamento: iddocumento\n\t\t\t});\n\t\t}catch(err){\n\t\t\tdefaultMessageBoxError(err);\n\t\t}finally{\n\t\t\twindow.Loading.hide();\n\t\t}\n\t}\n\n\tasync carregarTemporario(){\n\t\tlet filename = temporaryDirectory() + \"/\" + this.temporaryFileName;\n\t\tif(fs.existsSync(filename)){\n\t\t\tlet content = fs.readFileSync(filename);\n\t\t\tlet state = JSON.parse(content);\n\t\t\tif(typeof state === \"object\"){\n\t\t\t\tthis.setState(state);\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\t\tif(this.props.match.params.id){\n\t\t\tthis.carregarOrcamento(this.props.match.params.id);\n\t\t}else{\n\t\t\tthis.carregarTemporario();\n\t\t}\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.Pool.end();\n\t}\n\n\tcomponentWillUpdate(nextProps, nextState){\n\t\tthis.gravarTemporario(nextState);\n\t}\n\n\tcriarObjetoDocumentoProduto(documentoproduto){\n\t\treturn $.extend({\n\t\t\t\"idproduto\": null,\n\t\t\t\"descricao\": null,\n\t\t\t\"unidade\": \"Unidade\",\n\t\t\t\"precisao\": 0,\n\t\t\t\"precovariavel\": \"N\",\n\t\t\t\"quantidade\": 0,\n\t\t\t\"preco\": 0,\n\t\t\t\"descontounitario\": 0,\n\t\t\t\"totaldesconto\": 0,\n\t\t\t\"acrescimounitario\": 0,\n\t\t\t\"totalacrescimo\": 0,\n\t\t\t\"totalproduto\": 0\n\t\t}, documentoproduto);\n\t}\n\n\tdiminuirQuantidade(documentoproduto){\n\t\tlet i = documentoproduto.i;\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\t\tdocumentoproduto = listaDocumentoProduto[i];\n\t\tif(documentoproduto.quantidade - 1 <= 0){\n\t\t\treturn true;\n\t\t}\n\t\tdocumentoproduto.quantidade--;\n\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\tlistaDocumentoProduto[i] = documentoproduto;\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto\n\t\t});\n\t}\n\n\teditarProduto(documentoproduto){\n\t\tthis.setState({\n\t\t\tdocumentoproduto: documentoproduto,\n\t\t\tshowEditarProduto: true\n\t\t});\n\t}\n\n\tasync finalizarDocumento(){\n\t\twindow.Loading.show();\n\n\t\t// Abre um client com o banco para fazer transacao\n\t\tconst client = await this.Pool.connect();\n\t\ttry{\n\t\t\t// Inicia a transacao\n\t\t\tawait client.query(\"BEGIN\");\n\n\t\t\t// Ajusta o TimeZone no banco dados\n\t\t\t//await client.query(\"SET timezone = 'America/Sao_Paulo'\");\n\n\t\t\t// Cria o documento\n\t\t\tlet sqlInsertDocumento = [\n\t\t\t\t\"INSERT INTO documento (operacao, modelo, cpfcnpj, nomeorcamento, totaltroco)\",\n\t\t\t\t\"VALUES ($1, $2, $3, $4, $5)\",\n\t\t\t\t\"RETURNING iddocumento\"\n\t\t\t].join(\" \");\n\t\t\tlet resDocumento = await client.query(sqlInsertDocumento, [\n\t\t\t\tthis.state.operacao, \"65\", this.state.cpfcnpj,\n\t\t\t\tthis.state.nomeorcamento, this.state.totaltroco\n\t\t\t]);\n\n\t\t\t// Captura o id do documento gravado\n\t\t\tlet iddocumento = resDocumento.rows[0].iddocumento;\n\n\t\t\t// Captura todos os codigos de produtos\n\t\t\tlet listaIdProduto = [];\n\t\t\tfor(let documentoproduto of this.state.listaDocumentoProduto){\n\t\t\t\tlistaIdProduto.push(documentoproduto.idproduto);\n\t\t\t}\n\n\t\t\t// Carrega as informacoes necessarias para incluir o produto\n\t\t\tlet queryProduto = [\n\t\t\t\t\"SELECT produto.idproduto, ncm.codigoncm, produto.origem,\",\n\t\t\t\t\"  produto.csosn, produto.aliqicms, produto.cstpis, produto.aliqpis,\",\n\t\t\t\t\"  produto.cstcofins, produto.aliqcofins, produto.codcontribsocial,\",\n\t\t\t\t\"  produto.cest, produto.cfop\",\n\t\t\t\t\"FROM produto\",\n\t\t\t\t\"LEFT JOIN ncm USING (idncm)\",\n\t\t\t\t\"WHERE idproduto IN (\" + listaIdProduto.join(\", \") + \")\"\n\t\t\t].join(\" \");\n\n\t\t\tlet resProduto = await client.query(queryProduto);\n\n\t\t\t// Organiza os produtos carregados\n\t\t\tlet listaProdutos = {};\n\t\t\tfor(let row of resProduto.rows){\n\t\t\t\tlet idproduto = row.idproduto;\n\t\t\t\tdelete row.idproduto;\n\t\t\t\tlistaProdutos[idproduto] = row;\n\t\t\t}\n\n\t\t\t// Percorre os itens da venda\n\t\t\tlet sequencial = 1;\n\t\t\tfor(let documentoproduto of this.state.listaDocumentoProduto){\n\t\t\t\tlet produto = listaProdutos[documentoproduto.idproduto];\n\n\t\t\t\tlet sqlInsertDocumentoProduto = [\n\t\t\t\t\t\"INSERT INTO documentoproduto (\",\n\t\t\t\t\t\"  iddocumento, sequencial, idproduto,\",\n\t\t\t\t\t\"  descricao, preco, quantidade,\",\n\t\t\t\t\t\"  descontounitario, acrescimounitario, codigoncm,\",\n\t\t\t\t\t\"  origem, csosn, aliqicms,\",\n\t\t\t\t\t\"  cstpis, aliqpis, cstcofins,\",\n\t\t\t\t\t\"  aliqcofins, codcontribsocial, cest,\",\n\t\t\t\t\t\"  cfop\",\n\t\t\t\t\t\") VALUES (\",\n\t\t\t\t\t\"  $1, $2, $3,\",\n\t\t\t\t\t\"  $4, $5, $6,\",\n\t\t\t\t\t\"  $7, $8, $9,\",\n\t\t\t\t\t\"  $10, $11, $12,\",\n\t\t\t\t\t\"  $13, $14, $15,\",\n\t\t\t\t\t\"  $16, $17, $18,\",\n\t\t\t\t\t\"  $19\",\n\t\t\t\t\t\")\"\n\t\t\t\t].join(\" \");\n\n\t\t\t\tawait client.query(sqlInsertDocumentoProduto, [\n\t\t\t\t\tiddocumento, sequencial++, documentoproduto.idproduto,\n\t\t\t\t\tdocumentoproduto.descricao, documentoproduto.preco, documentoproduto.quantidade,\n\t\t\t\t\tdocumentoproduto.descontounitario, documentoproduto.acrescimounitario, produto.codigoncm,\n\t\t\t\t\tproduto.origem, produto.csosn, produto.aliqicms,\n\t\t\t\t\tproduto.cstpis, produto.aliqpis, produto.cstcofins,\n\t\t\t\t\tproduto.aliqcofins, produto.codcontribsocial, produto.cest,\n\t\t\t\t\tproduto.cfop\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\t// Verifica se eh cupom\n\t\t\tif(this.state.operacao === \"CU\"){\n\t\t\t\tlet listaDocumentoPagamento = this.state.listaDocumentoPagamento;\n\n\t\t\t\t// Verifica se existe troco, e se caso sim, abate o valor da ultima finalizadora informada\n\t\t\t\tif(this.state.totaltroco > 0){\n\t\t\t\t\tlet i = listaDocumentoPagamento.length - 1;\n\t\t\t\t\tlistaDocumentoPagamento[i].totalpagamento -= this.state.totaltroco;\n\t\t\t\t}\n\n\t\t\t\t// Grava os pagamentos\n\t\t\t\tfor(let documentopagamento of listaDocumentoPagamento){\n\t\t\t\t\tlet sqlInsertDocumentoPagamento = [\n\t\t\t\t\t\t\"INSERT INTO documentopagamento (iddocumento, idformapagamento, totalpagamento)\",\n\t\t\t\t\t\t\"VALUES ($1, $2, $3)\"\n\t\t\t\t\t].join(\" \");\n\n\t\t\t\t\tawait client.query(sqlInsertDocumentoPagamento, [\n\t\t\t\t\t\tiddocumento, documentopagamento.idformapagamento, documentopagamento.totalpagamento\n\t\t\t\t\t]);\n\t\t\t\t}\n\n\t\t\t\t// Transmite o documento atraves do SAT\n\t\t\t\tlet sat = new SAT(client);\n\t\t\t\tlet retorno = await sat.transmitirDocumento(iddocumento);\n\t\t\t\tif(retorno === false){\n\t\t\t\t\tthrow new Error(sat.error);\n\t\t\t\t}\n\n\t\t\t\t// Atualiza os dados do documento fiscal\n\t\t\t\tawait client.query(\"UPDATE documento SET xml = $1, chave = $2, numero = $3 WHERE iddocumento = $4\", [retorno.xml, retorno.chave, retorno.numero, iddocumento]);\n\t\t\t}\n\n\t\t\t// Apaga o orcamento origem se houver\n\t\t\tif(this.state.iddocumentoorcamento){\n\t\t\t\tawait client.query(\"DELETE FROM documento WHERE iddocumento = $1\", [this.state.iddocumentoorcamento]);\n\t\t\t}\n\n\t\t\t// Confirma a transacao do banco de dados\n\t\t\tawait client.query(\"COMMIT\");\n\n\t\t\t// Mensagem de sucesso\n\t\t\tif(this.state.totaltroco > 0){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttext: \"<div class='text-center'><h5>Venda finalizada com sucesso!</h5><h3>Total de troco</h3><h1><small>R$</small>\" + this.state.totaltroco.format(2, \",\", \".\") + \"</h1></div>\"\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tswitch(this.state.operacao){\n\t\t\t\t\tcase \"CU\":\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twindow.FastMessage.show(\"Venda finalizada com sucesso!\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"OR\":\n\t\t\t\t\t\twindow.FastMessage.show(\"Oramento finalizado com sucesso!\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Imprime o documento\n\t\t\tlet numeroVias = ini.parse(await valorParametro(this.Pool, \"IMPRESSORA\", \"NUMEROVIAS\"));\n\t\t\tnumeroVias = (this.state.operacao === \"OR\" ? numeroVias.orcamento : numeroVias.venda);\n\n\t\t\tif(await valorParametro(this.Pool, \"IMPRESSORA\", \"CONFIRMACAO\") === \"S\"){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Imprimir cupom\",\n\t\t\t\t\ttext: \"Deseja imprimir o cupom da venda realizada?\",\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t\tfor(let i = 1; i <= numeroVias; i++){\n\t\t\t\t\t\t\t\t\tlet printer = new Printer(this.Pool);\n\t\t\t\t\t\t\t\t\tawait printer.imprimirDocumento(iddocumento);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: \"No\",\n\t\t\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tfor(let i = 1; i <= numeroVias; i++){\n\t\t\t\t\tlet printer = new Printer(this.Pool);\n\t\t\t\t\tawait printer.imprimirDocumento(iddocumento);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Prepara a tela para uma nova venda\n\t\t\tthis.reiniciar();\n\t\t}catch(err){\n\t\t\tawait client.query(\"ROLLBACK\");\n\t\t\tdefaultMessageBoxError(err);\n\t\t}finally{\n\t\t\tclient.release();\n\t\t\twindow.Loading.hide();\n\t\t}\n\t}\n\n\tfinalizarOrcamento(nomeorcamento, cpfcnpj){\n\t\tthis.setState({\n\t\t\tnomeorcamento: nomeorcamento,\n\t\t\tcpfcnpj: cpfcnpj,\n\t\t\tlistaDocumentoPagamento: [],\n\t\t\ttotaltroco: 0,\n\t\t\tshowVendaFinalizacaoOrcamento: false\n\t\t}, () => {\n\t\t\tthis.finalizarDocumento();\n\t\t});\n\t}\n\n\tfinalizarVenda(documentopagamentos, totaltroco){\n\t\tthis.setState({\n\t\t\tlistaDocumentoPagamento: documentopagamentos,\n\t\t\ttotaltroco: totaltroco,\n\t\t}, () => {\n\t\t\tthis.finalizarDocumento();\n\t\t});\n\t}\n\n\tasync gravarTemporario(state){\n\t\tstate = (state === undefined ? this.state : state);\n\t\twriteTemporary(this.temporaryFileName, JSON.stringify(state));\n\t}\n\n\tincluirDezPorcento(){\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\n\t\tlistaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\tdocumentoproduto.acrescimounitario = documentoproduto.preco * 0.1;\n\t\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\t});\n\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto\n\t\t});\n\t}\n\n\tincluirProduto(produto, event, totalproduto){\n\t\tproduto = Object.assign({}, produto);\n\n\t\tlet informarPeso = (produto) => {\n\t\t\twindow.InformarValor.show({\n\t\t\t\ttitle: \"Quantidade em \" + produto.unidade.toLowerCase() + \"s\",\n\t\t\t\tdecimal: produto.precisao,\n\t\t\t\tsuccess: (valor) => {\n\t\t\t\t\tproduto.quantidade = valor.toFloat();\n\t\t\t\t\tthis.incluirProdutoDefinitivo(produto);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tif(produto.precovariavel === \"S\"){\n\t\t\twindow.InformarValor.show({\n\t\t\t\ttitle: \"Preo do produto\",\n\t\t\t\tmoney: true,\n\t\t\t\tdecimal: 2,\n\t\t\t\tsuccess: (valor) => {\n\t\t\t\t\tproduto.preco = valor.toFloat();\n\t\t\t\t\tif(produto.precisao > 0 && !totalproduto){\n\t\t\t\t\t\tinformarPeso(produto);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.incluirProdutoDefinitivo(produto, totalproduto);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}else if(produto.precisao > 0 && !totalproduto){\n\t\t\tinformarPeso(produto);\n\t\t}else{\n\t\t\tthis.incluirProdutoDefinitivo(produto, totalproduto);\n\t\t}\n\t}\n\n\tincluirProdutoDefinitivo(produto, totalproduto){\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\n\t\tif(totalproduto){\n\t\t\tproduto.quantidade = totalproduto / produto.preco;\n\t\t}else if(!produto.quantidade){\n\t\t\tproduto.quantidade = 1;\n\t\t}\n\n\t\tlet documentoproduto = this.criarObjetoDocumentoProduto({\n\t\t\tidproduto: produto.idproduto,\n\t\t\tdescricao: produto.descricao,\n\t\t\tunidade: produto.unidade,\n\t\t\tprecisao: produto.precisao,\n\t\t\tprecovariavel: produto.precovariavel,\n\t\t\tquantidade: produto.quantidade,\n\t\t\tpreco: produto.preco\n\t\t});\n\n\t\tthis.calcularDocumentoProduto(documentoproduto);\n\n\t\tlet found = false;\n\t\tlistaDocumentoProduto.forEach((documentoproduto2) => {\n\t\t\tif(found){\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet documentoprodutoComp1 = Object.assign({}, documentoproduto);\n\t\t\tlet documentoprodutoComp2 = Object.assign({}, documentoproduto2);\n\n\t\t\tdelete documentoprodutoComp1.quantidade;\n\t\t\tdelete documentoprodutoComp2.quantidade;\n\t\t\tdelete documentoprodutoComp1.totalproduto;\n\t\t\tdelete documentoprodutoComp2.totalproduto;\n\t\t\tdelete documentoprodutoComp2.i;\n\n\t\t\tif(JSON.stringify(documentoprodutoComp1) === JSON.stringify(documentoprodutoComp2)){\n\t\t\t\tdocumentoproduto2.quantidade += documentoproduto.quantidade;\n\t\t\t\tthis.calcularDocumentoProduto(documentoproduto2);\n\t\t\t\tfound = true;\n\t\t\t}\n\t\t});\n\n\t\tif(parseFloat(documentoproduto.preco) === 0){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Produto sem preo\",\n\t\t\t\ttext: \"O preo do produto precisa ser maior que zero.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif(!found){\n\t\t\tlistaDocumentoProduto.push(documentoproduto);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto,\n\t\t\tpesquisa: \"\",\n\t\t\tpesquisaEfetiva: \"\"\n\t\t});\n\t}\n\n\tinformarCPF(){\n\t\twindow.InformarValor.show({\n\t\t\ttitle: \"Informe o CPF ou CNPJ\",\n\t\t\tmask: \"99999999999999\",\n\t\t\tsuccess: (valor) => {\n\t\t\t\tlet cpfcnpj = null;\n\t\t\t\tif(valor.length === 11 && validarCPF(valor)){\n\t\t\t\t\tcpfcnpj = valor.substr(0, 3) + \".\" + valor.substr(3, 3) + \".\" + valor.substr(6, 3) + \"-\" + valor.substr(9, 2);\n\t\t\t\t}else if(valor.length === 14 && validarCNPJ(valor)){\n\t\t\t\t\tcpfcnpj = valor.substr(0, 2) + \".\" + valor.substr(2, 3) + \".\" + valor.substr(5, 3) + \"/\" + valor.substr(8, 4) + \"-\" + valor.substr(12, 2);\n\t\t\t\t}else if(valor.length > 0){\n\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\ttitle: \"CPF ou CNPJ invlido\",\n\t\t\t\t\t\ttext: \"O CPF ou CNPJ informado  invlido.<br>Por favor, digite novamente.\",\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: \"Ok\",\n\t\t\t\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\t\t\t\tcolor: \"blue\",\n\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t\t\tthis.informarCPF();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tcpfcnpj: cpfcnpj\n\t\t\t\t});\n\t\t\t},\n\t\t\tfail: () => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcpfcnpj: null\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tonChangePesquisa(event){\n\t\tthis.setState({\n\t\t\tpesquisa: event.target.value\n\t\t});\n\t}\n\n\tonClickBuscar(){\n\t\tthis.setState({\n\t\t\tpesquisaEfetiva: this.state.pesquisa\n\t\t});\n\t}\n\n\tonKeyUpPesquisa(event){\n\t\tif(event.keyCode === 13){\n\t\t\tthis.onClickBuscar();\n\t\t}\n\t}\n\n\tpesquisaLimpar(){\n\t\tthis.setState({\n\t\t\tpesquisa: \"\",\n\t\t\tpesquisaEfetiva: \"\"\n\t\t});\n\t}\n\n\treimprimirCupom(){\n\t\tthis.setState({\n\t\t\tshowVendaReimprimirCupom: true\n\t\t});\n\t}\n\n\treiniciar(){\n\t\tlet documentoproduto = this.criarObjetoDocumentoProduto();\n\n\t\tthis.setState({\n\t\t\tdocumentoproduto: documentoproduto,\n\t\t\tlistaDocumentoProduto: [],\n\t\t\tlistaDocumentoPagamento: [],\n\t\t\t//operacao: \"CU\",\n\t\t\tcpfcnpj: null,\n\t\t\tnomeorcamento: null,\n\t\t\tiddocumentoorcamento: null,\n\t\t\tpesquisa: \"\",\n\t\t\tpesquisaEfetiva: \"\",\n\t\t\tshowEditarProduto: false,\n\t\t\tshowVendaFinalizacao: false,\n\t\t\tshowVendaFinalizacaoOrcamento: false,\n\t\t\tshowVendaAplicarDesconto: false,\n\t\t\tshowVendaAplicarAcrescimo: false\n\t\t});\n\t}\n\n\tremoverProduto(documentoproduto){\n\t\tlet totalproduto = \"R$ \" + documentoproduto.totalproduto.format(2, \",\", \".\");\n\n\t\twindow.MessageBox.show({\n\t\t\ttext: \"Tem certeza que deseja remover o produto?<br><br>\" + documentoproduto.descricao + \"<span class='float-right'>\" + totalproduto + \"</span>\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\t\t\t\t\t\tlistaDocumentoProduto.splice(documentoproduto.i, 1);\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tlistaDocumentoProduto: listaDocumentoProduto\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"No\",\n\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\ttrocarOperacao(operacao){\n\t\tthis.setState({\n\t\t\toperacao: operacao\n\t\t});\n\t}\n\n\trender(){\n\t\tlet totalbruto = 0;\n\t\tlet totaldesconto = 0;\n\t\tlet totaldocumento = 0;\n\t\tthis.state.listaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\ttotalbruto += parseFloat(documentoproduto.preco * documentoproduto.quantidade);\n\t\t\ttotaldesconto += parseFloat(documentoproduto.totaldesconto);\n\t\t\ttotaldocumento += parseFloat(documentoproduto.totalproduto);\n\t\t});\n\n\t\tlet contentClassName = \"operacao-\" + this.state.operacao;\n\n\t\treturn (\n\t\t\t<Content className={contentClassName}>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"7\">\n\t\t\t\t\t\t<Row className=\"mb-4 mt-4\">\n\t\t\t\t\t\t\t<Col size=\"9\">\n\t\t\t\t\t\t\t\t<FormControl type=\"search\" id=\"pesquisa\" value={this.state.pesquisa} placeholder=\"Pesquise um produto...\" onKeyUp={this.onKeyUpPesquisa} onChange={this.onChangePesquisa} />\n\t\t\t\t\t\t\t\t<Icon name=\"cross\" id=\"pesquisa-limpar\" onClick={this.pesquisaLimpar} className={this.state.pesquisa.length > 0 ? null : \"d-none\"} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"3\" className=\"pl-0\">\n\t\t\t\t\t\t\t\t<Button text=\"Buscar\" icon=\"search\" color=\"green\" block={true} onClick={this.onClickBuscar} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<PainelRapido\n\t\t\t\t\t\t\tPool={this.Pool}\n\t\t\t\t\t\t\tpesquisa={this.state.pesquisaEfetiva}\n\t\t\t\t\t\t\tonSelectProduto={this.incluirProduto}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"5\" className=\"pr-0\">\n\t\t\t\t\t\t<VendaDetalhe\n\t\t\t\t\t\t\tabrirFinalizacao={this.abrirFinalizacao}\n\t\t\t\t\t\t\taumentarQuantidade={this.aumentarQuantidade}\n\t\t\t\t\t\t\tcancelarUltimaVenda={this.cancelarUltimaVenda}\n\t\t\t\t\t\t\tcancelarVendaAtual={this.cancelarVendaAtual}\n\t\t\t\t\t\t\tcarregarOrcamento={this.carregarOrcamento}\n\t\t\t\t\t\t\treimprimirCupom={this.reimprimirCupom}\n\t\t\t\t\t\t\tcpfcnpj={this.state.cpfcnpj}\n\t\t\t\t\t\t\tdiminuirQuantidade={this.diminuirQuantidade}\n\t\t\t\t\t\t\teditarProduto={this.editarProduto}\n\t\t\t\t\t\t\tinformarCPF={this.informarCPF}\n\t\t\t\t\t\t\tlistaDocumentoProduto={this.state.listaDocumentoProduto}\n\t\t\t\t\t\t\toperacao={this.state.operacao}\n\t\t\t\t\t\t\tremoverProduto={this.removerProduto}\n\t\t\t\t\t\t\ttrocarOperacao={this.trocarOperacao}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<VendaEditarProduto\n\t\t\t\t\tshow={this.state.showEditarProduto}\n\t\t\t\t\tdocumentoproduto={this.state.documentoproduto}\n\t\t\t\t\tatualizarDocumentoProduto={this.atualizarDocumentoProduto}\n\t\t\t\t\tbeforeClose={() => {this.setState({showEditarProduto: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaFinalizacao\n\t\t\t\t\tPool={this.Pool}\n\t\t\t\t\tshow={this.state.showVendaFinalizacao}\n\t\t\t\t\ttotaldocumento={totaldocumento}\n\t\t\t\t\taplicarAcrescimo={this.aplicarAcrescimo}\n\t\t\t\t\taplicarDesconto={this.aplicarDesconto}\n\t\t\t\t\tincluirDezPorcento={this.incluirDezPorcento}\n\t\t\t\t\tfinalizarVenda={this.finalizarVenda}\n\t\t\t\t\tlistaDocumentoPagamento={this.state.listaDocumentoPagamento}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaFinalizacao: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaFinalizacaoOrcamento\n\t\t\t\t\tnomeorcamento={this.state.nomeorcamento}\n\t\t\t\t\tcpfcnpj={this.state.cpfcnpj}\n\t\t\t\t\tfinalizarOrcamento={this.finalizarOrcamento}\n\t\t\t\t\tshow={this.state.showVendaFinalizacaoOrcamento}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaFinalizacaoOrcamento: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaAplicarDesconto\n\t\t\t\t\ttotalbruto={totalbruto}\n\t\t\t\t\tshow={this.state.showVendaAplicarDesconto}\n\t\t\t\t\taplicarDesconto={this.aplicarDesconto}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaAplicarDesconto: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaAplicarAcrescimo\n\t\t\t\t\ttotalbruto={totalbruto}\n\t\t\t\t\ttotaldesconto={totaldesconto}\n\t\t\t\t\tshow={this.state.showVendaAplicarAcrescimo}\n\t\t\t\t\taplicarAcrescimo={this.aplicarAcrescimo}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaAplicarAcrescimo: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaCancelarCupom\n\t\t\t\t\tPool={this.Pool}\n\t\t\t\t\tshow={this.state.showVendaCancelarCupom}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaCancelarCupom: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaReimprimirCupom\n\t\t\t\t\tPool={this.Pool}\n\t\t\t\t\tshow={this.state.showVendaReimprimirCupom}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaReimprimirCupom: false})}}\n\t\t\t\t/>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import {currentTimestamp} from \"../def/function.js\";\n\nexport default class Processo {\n\tconstructor(Pool, referencia){\n\t\tthis.Pool = Pool;\n\t\tthis.referencia = referencia;\n\t\tthis.dthrinicial = currentTimestamp();\n\t}\n\n\tasync atualizarProcesso(){\n\t\tlet sql = \"UPDATE processo SET dthrinicial = $2, dthrfinal = $3 WHERE referencia = $1\";\n\t\tlet values = [this.referencia, this.dthrinicial, currentTimestamp()];\n\t\tawait this.Pool.query(sql, values);\n\t}\n\n\tasync verificarIntervalo(){\n\t\tthis.dthrinicial = currentTimestamp();\n\n\t\tlet res = await this.Pool.query(\"SELECT status, dthrinicial, intervalo FROM processo WHERE referencia = $1\", [this.referencia]);\n\t\tlet row = res.rows[0];\n\n\t\tif(row.status !== \"A\"){\n\t\t\treturn false;\n\t\t}\n\t\tif(row.dthrinicial === null){\n\t\t\treturn true;\n\t\t}\n\t\tif(Date.now() >= row.dthrinicial.getTime() + row.intervalo * 60000){\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n}\n","import Processo from \"./Processo.js\";\nimport Servidor from \"./Servidor.js\";\n\nimport { isDev, serialNumber, temporaryDirectory, valorParametro } from \"../def/function.js\";\n\nconst fs = window.require(\"fs\");\nconst os = window.require(\"os\");\nconst ftp = window.require(\"ftp\");\nconst childProcess = window.require(\"child_process\");\n\nexport default class ProcessoAutomatico {\n\n\tconstructor(Pool){\n\t\tthis.Pool = Pool;\n\t\tthis.interval = null;\n\t\tthis.running = false;\n\n\t\twindow.ProcessoAutomatico = this;\n\n\t\tthis.executandoBackup = false;\n\t}\n\n\tasync iniciar(){\n\t\tthis.interval = setInterval(async () => { this.executar() }, 1000 * 60); // Cria o intervalo para executar a cada 1 minuto\n\t\tsetTimeout(async () => { this.executar() }, 1000 * 10); // Executa uma primeira vez 10s depois de iniciar\n\t}\n\n\tpausar(){\n\t\tclearInterval(this.interval);\n\t}\n\n\tasync executar(){\n\t\tif(this.running){\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tthis.running = true;\n\t\t\tawait this.executarRefreshView();\n\t\t\tawait this.executarVerificarDtVerificacao();\n\t\t\tawait this.executarVerificarTerminal();\n\t\t\tif(!isDev()){\n\t\t\t\tawait this.executarBackup();\n\t\t\t}\n\t\t}catch(err){\n\t\t\tthrow err;\n\t\t}finally{\n\t\t\tthis.running = false;\n\t\t}\n\t}\n\n\tasync executarBackup(){\n\t\t// Verifica se ja nao tem backup em execucao\n\t\tif(this.executandoBackup){\n\t\t\treturn;\n\t\t}\n\n\t\t// Carrega e verifica o processo\n\t\tlet processo = new Processo(this.Pool, \"BACKUP\");\n\t\tif(!await processo.verificarIntervalo()){\n\t\t\treturn;\n\t\t}\n\n\t\t// Carrega os modulos\n\t\tif(this.fs === undefined) this.fs = fs;\n\t\tif(this.os === undefined) this.os = os;\n\t\tif(this.ftp === undefined) this.ftp = ftp;\n\t\tif(this.childProcess === undefined) this.childProcess = childProcess;\n\n\t\t// Se macos, nao efetua backup\n\t\tif(this.os.platform() === \"darwin\"){\n\t\t\treturn;\n\t\t}\n\n\t\t// Captura os dados de conexao as FTP\n\t\tlet dadosFTP = null;\n\t\ttry{\n\t\t\tdadosFTP = {\n\t\t\t\thost: await valorParametro(this.Pool, \"BACKUP\", \"HOST\"),\n\t\t\t\tport: await valorParametro(this.Pool, \"BACKUP\", \"PORTA\"),\n\t\t\t\tuser: await valorParametro(this.Pool, \"BACKUP\", \"USUARIO\"),\n\t\t\t\tpassword: await valorParametro(this.Pool, \"BACKUP\", \"SENHA\")\n\t\t\t};\n\t\t}catch(err){\n\t\t\tconsole.log(\"Erro ao efetuar backup: no foi possvel carregar os parmetros do FTP.\");\n\t\t\treturn false;\n\t\t}\n\n\t\t// Define que esta executando backup\n\t\tthis.executandoBackup = true;\n\n\t\t// Define a localizacao do pg_dump\n\t\tlet pgDump = null;\n\t\tswitch(this.os.platform()){\n\t\t\tcase \"win32\":\n\t\t\t\tpgDump = \"C:/Program Files/PostgreSQL/14/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/13/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/12/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/11/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/10/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/9.6/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/9.3/bin/pg_dump.exe\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Define o diretorio de trabalho\n\t\tlet tempDir = temporaryDirectory();\n\n\t\t// Verifica se o diretorio existe\n\t\tif(!this.fs.existsSync(tempDir)){\n\t\t\tthis.fs.mkdirSync(tempDir);\n\t\t}\n\n\t\t// Limpa os backups do diretorio temporario\n\t\tlet files = this.fs.readdirSync(tempDir);\n\t\tfor(let file of files){\n\t\t\tif(file.substr(-7) === \".backup\"){\n\t\t\t\tthis.fs.unlinkSync(tempDir + \"/\" + file);\n\t\t\t}\n\t\t}\n\n\t\t// Executa o backup via pg_dump\n\t\tlet date = new Date();\n\t\tlet currTimeStr = date.getFullYear() + \"-\" + String(date.getMonth() + 1).lpad(2, \"0\") + \"-\" + String(date.getDate()).lpad(2, \"0\") + \"-\" + String(date.getHours()).lpad(2, \"0\") + \"-\" + String(date.getMinutes()).lpad(2, \"0\") + \"-\" + String(date.getSeconds()).lpad(2, \"0\");\n\t\tlet fileName = tempDir + \"/\" + currTimeStr + \".backup\";\n\t\tlet command = \"\\\"\" + pgDump + \"\\\" -F c -b -w -U postgres -f \\\"\" + fileName + \"\\\" satflex\";\n\t\tthis.childProcess.execSync(command);\n\n\t\t// Caputura o numero de serie do terminal\n\t\tif(this.serialNumber === undefined){\n\t\t\tthis.serialNumber = await serialNumber();\n\t\t}\n\n\t\t// Define o arquivo local e remoto\n\t\tlet localFile = fileName;\n\t\tlet remoteFile = \"/\" + this.serialNumber + \"/\" + currTimeStr + \".backup\";\n\n\t\t// Copia o arquivo para o servidor de backup\n\t\tlet client = new this.ftp();\n\t\tclient.on(\"ready\", () => {\n\t\t\tclient.cwd(\"/\", () => {\n\t\t\t\tclient.mkdir(this.serialNumber, true, (err) => {\n\t\t\t\t\tif(err){\n\t\t\t\t\t\tthis.executandoBackup = false;\n\t\t\t\t\t\tthrow err;\n\t\t\t\t\t}\n\t\t\t\t\tclient.put(localFile, remoteFile, false, (err) => {\n\t\t\t\t\t\tif(err) throw err;\n\t\t\t\t\t\tclient.end();\n\t\t\t\t\t\tprocesso.atualizarProcesso();\n\t\t\t\t\t\tthis.executandoBackup = false;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}).connect(dadosFTP);\n\t}\n\n\tasync executarRefreshView(){\n\t\t// Carrega e verifica o processo\n\t\tlet processo = new Processo(this.Pool, \"REFRESH_VIEW\");\n\t\tif(!await processo.verificarIntervalo()){\n\t\t\treturn;\n\t\t}\n\n\t\t// Atualiza as views materializadas\n\t\tlet views = [\"v_vendaprodutodiario\", \"v_vendapagamentodiario\"];\n\t\tfor(let view of views){\n\t\t\tawait this.Pool.query(\"REFRESH MATERIALIZED VIEW \" + view);\n\t\t}\n\n\t\t// Atualiza o processo no banco de dados\n\t\tawait processo.atualizarProcesso();\n\t}\n\n\tasync executarVerificarDtVerificacao(){\n\t\t// Carrega e verifica o processo\n\t\tlet processo = new Processo(this.Pool, \"VERIFICAR_DTVERIFICACAO\");\n\t\tif(!await processo.verificarIntervalo()){\n\t\t\treturn;\n\t\t}\n\n\t\t// Captura as datas para comparacao\n\t\tlet dtverificacao = await valorParametro(this.Pool, \"SISTEMA\", \"DTVERIFICACAO\");\n\t\tlet dtatual = new Date();\n\n\t\t// Verifica se ja passou mais de 10 dias sem comunicar com o servidor\n\t\tif(dtverificacao !== null && dtverificacao.length > 0){\n\t\t\tdtverificacao = new Date(dtverificacao);\n\t\t}else{\n\t\t\tdtverificacao = null;\n\t\t}\n\t\tif(dtverificacao === null || ((dtatual.getTime() - dtverificacao.getTime()) / (1000 * 3600 * 24)) > 10){\n\t\t\t// Atualiza status do sistema para: Bloqueado por falta de comunicacao\n\t\t\tlet sql = \"UPDATE parametro SET valor = $3 WHERE grupo = $1 AND nome = $2\";\n\t\t\tthis.Pool.query(sql, [\"SISTEMA\", \"STATUS\", \"0002\"]);\n\t\t}\n\n\t\t// Atualiza o processo no banco de dados\n\t\tawait processo.atualizarProcesso();\n\t}\n\n\tasync executarVerificarTerminal(){\n\t\t// Carrega e verifica o processo\n\t\tlet processo = new Processo(this.Pool, \"VERIFICAR_TERMINAL\");\n\t\tif(!await processo.verificarIntervalo()){\n\t\t\treturn;\n\t\t}\n\n\t\t// Verifica o terminal no servidor\n\t\tif(!this.servidor) this.servidor = new Servidor(this.Pool);\n\t\tlet status = await this.servidor.verificarTerminal();\n\t\tif(status === false){\n\t\t\tconsole.log(\"Houve uma falha ao verificar o terminal no servidor.\");\n\t\t}else{\n\t\t\t// Atualiza o status do terminal\n\t\t\tthis.Pool.query(\"UPDATE parametro SET valor = $3 WHERE grupo = $1 AND nome = $2\", [\"SISTEMA\", \"STATUS\", status]);\n\n\t\t\t// Atualiza a data de verificacao\n\t\t\tlet dtatual = new Date().toISOString().substr(0, 10);\n\t\t\tthis.Pool.query(\"UPDATE parametro SET valor = $3 WHERE grupo = $1 AND nome = $2\", [\"SISTEMA\", \"DTVERIFICACAO\", dtatual]);\n\t\t}\n\n\t\t// Atualiza o processo no banco de dados\n\t\tawait processo.atualizarProcesso();\n\t}\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { HashRouter, Route } from \"react-router-dom\";\n\nimport \"./lib/bootstrap-4.0.0/bootstrap.js\";\n\nimport Menu from \"./com/Menu.js\";\nimport { FastMessageEmitter, FastMessageModal } from \"./com/FastMessage.js\";\nimport { InformarValorEmitter, InformarValorModal } from \"./com/InformarValor.js\";\nimport { LoadingEmitter, LoadingElement } from \"./com/Loading.js\";\nimport { MessageBoxEmitter, MessageBoxModal } from \"./com/MessageBox.js\";\nimport Servidor from \"./com/Servidor.js\";\n\nimport Categoria from \"./view/Categoria.js\";\nimport Configuracoes from \"./view/Configuracoes.js\";\nimport Contador from \"./view/Contador.js\";\nimport Estatistica from \"./view/Estatistica.js\";\nimport Fechamento from \"./view/Fechamento.js\";\nimport Ferramentas from \"./view/Ferramentas.js\";\nimport Parametro from \"./view/Parametro.js\";\nimport Produto from \"./view/Produto.js\";\nimport Relatorios from \"./view/Relatorios.js\";\nimport RelOrcamento from \"./view/RelOrcamento.js\";\nimport Suporte from \"./view/Suporte.js\";\nimport Venda from \"./view/Venda.js\";\n\nimport { valorParametro } from \"./def/function.js\";\n\nimport ProcessoAutomatico from \"./com/ProcessoAutomatico.js\";\n\nimport \"./css/index.css\";\nimport \"./font/gotham/gotham.css\";\n\nimport { Pool } from \"./def/postgresql.js\";\n\nclass App extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\twindow.FastMessage = new FastMessageEmitter();\n\t\twindow.InformarValor = new InformarValorEmitter();\n\t\twindow.Loading = new LoadingEmitter();\n\t\twindow.MessageBox = new MessageBoxEmitter();\n\n\t\tthis.state = {\n\t\t\tFastMessage: window.FastMessage,\n\t\t\tInformarValor: window.InformarValor,\n\t\t\tLoading: window.Loading,\n\t\t\tMessageBox: window.MessageBox\n\t\t};\n\n\t\tthis.Pool = new Pool();\n\t\tthis.processoAutomatico = new ProcessoAutomatico(this.Pool);\n\t\twindow.processoAutomatico = this.processoAutomatico;\n\t\t\n\t\t// Utilizado apenas para debug\n\t\twindow.servidor = new Servidor(this.Pool);\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.processoAutomatico.iniciar();\n\t\twindow.addEventListener(\"keydown\", this.onKeyDown);\n\n\t\tthis.verificarTerminal();\n\t}\n\n\tcomponentWillUnmount(){\n        window.removeEventListener(\"keydown\", this.onKeyDown);\n    }\n\n\tonKeyDown(e){\n\t\tif(e.ctrlKey && e.keyCode === 73){\n\t\t\twindow.require('electron').ipcRenderer.sendSync(\"open-dev-tools\");\n\t\t}\n\t}\n\n\tasync verificarTerminal(){\n\t\tlet status = await valorParametro(this.Pool, \"SISTEMA\", \"STATUS\");\n\t\tlet telefone = await valorParametro(this.Pool, \"REVENDA\", \"TELEFONE\");\n\t\tswitch(status){\n\t\t\tcase \"0000\": // Ativo\n\t\t\t\tbreak;\n\t\t\tcase \"0001\": // Bloqueado\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Terminal bloqueado\",\n\t\t\t\t\ttext: \"Seu terminal foi bloqueado, para mais informaes, entre em contato com o suporte pelo nmero <b>\" + telefone + \"</b>.\",\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: \"Sair do SAT-Flex\",\n\t\t\t\t\t\t\tcolor: \"primary\",\n\t\t\t\t\t\t\tonClick: function(){\n\t\t\t\t\t\t\t\twindow.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"0002\": // Falta de comunicacao\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Terminal bloqueado\",\n\t\t\t\t\ttext: \"Seu terminal foi bloqueado por falta de comunicao com a Internet. Verifique sua conexo com a Internet e tente novamente.<br> Caso o problema persista, entre em contato com o suporte pelo nmero <b>\" + telefone + \"</b>.\",\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: \"Sair do SAT-Flex\",\n\t\t\t\t\t\t\tcolor: \"primary\",\n\t\t\t\t\t\t\tonClick: function(){\n\t\t\t\t\t\t\t\twindow.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<HashRouter>\n\t\t\t\t\t<Route path=\"/\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Menu />\n\t\t\t\t\t\t\t<div id=\"viewContainer\">\n\t\t\t\t\t\t\t\t<Route exact path=\"/\" component={Venda} />\n\t\t\t\t\t\t\t\t<Route exact path=\"/venda\" component={Venda} />\n\t\t\t\t\t\t\t\t<Route exact path=\"/venda/:id\" component={Venda} />\n\t\t\t\t\t\t\t\t<Route path=\"/categoria\" component={Categoria} />\n\t\t\t\t\t\t\t\t<Route path=\"/configuracao\" component={Configuracoes} />\n\t\t\t\t\t\t\t\t<Route path=\"/contador\" component={Contador} />\n\t\t\t\t\t\t\t\t<Route path=\"/estatistica\" component={Estatistica} />\n\t\t\t\t\t\t\t\t<Route path=\"/fechamento\" component={Fechamento} />\n\t\t\t\t\t\t\t\t<Route path=\"/ferramentas\" component={Ferramentas} />\n\t\t\t\t\t\t\t\t<Route path=\"/parametro\" component={Parametro} />\n\t\t\t\t\t\t\t\t<Route path=\"/produto\" component={Produto} />\n\t\t\t\t\t\t\t\t<Route path=\"/relatorio\" component={Relatorios} />\n\t\t\t\t\t\t\t\t<Route path=\"/relorcamento\" component={RelOrcamento} />\n\t\t\t\t\t\t\t\t<Route path=\"/suporte\" component={Suporte} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Route>\n\t\t\t\t</HashRouter>\n\t\t\t\t<FastMessageModal FastMessageEmitter={this.state.FastMessage} />\n\t\t\t\t<InformarValorModal InformarValorEmitter={this.state.InformarValor} />\n\t\t\t\t<LoadingElement LoadingEmitter={this.state.Loading} />\n\t\t\t\t<MessageBoxModal MessageBoxEmitter={this.state.MessageBox} />\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}