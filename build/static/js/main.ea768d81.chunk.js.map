{"version":3,"sources":["def/prototype.js","lib/bootstrap-4.0.0/lib/jquery.js","lib/bootstrap-4.0.0/lib/tether.js","lib/bootstrap-4.0.0/lib/popper.js","com/Icon.js","com/Menu.js","com/FastMessage.js","com/Button.js","com/Col.js","com/Modal.js","com/Row.js","com/InformarValor.js","com/Progress.js","com/Loading.js","com/MessageBox.js","def/function.js","com/Servidor.js","def/postgresql.js","com/Content.js","com/DataGrid.js","com/ColorInput.js","com/Select.js","com/FormControl.js","com/Label.js","com/FormGroup.js","com/Hr.js","com/ModalCategoria.js","com/Title.js","view/Categoria.js","com/Atualizacao.js","view/Configuracoes.js","com/Email.js","com/SubTitle.js","view/Contador.js","com/ButtonGroup.js","com/Center.js","view/Estatistica.js","com/EscPos.js","com/Printer.js","view/Fechamento.js","com/Importacao.js","view/Ferramentas.js","com/ListGroup.js","com/ListItem.js","view/Parametro.js","com/ModalProduto.js","view/Produto.js","view/Relatorios.js","view/RelOrcamento.js","com/Image.js","view/Suporte.js","com/PainelRapidoPesquisa.js","com/PainelRapidoPoucosProdutos.js","com/PainelRapidoMediosProdutos.js","com/PainelRapidoMuitosProdutos.js","com/PainelRapido.js","com/VendaAplicarAcrescimo.js","com/VendaAplicarDesconto.js","com/ComDLL.js","com/SAT.js","com/VendaCancelarCupom.js","com/VendaDetalhe.js","com/VendaEditarProduto.js","com/Card.js","com/VendaFinalizacao.js","com/VendaFinalizacaoOrcamento.js","com/VendaReimprimirCupom.js","view/Venda.js","com/Processo.js","com/ProcessoAutomatico.js","index.js"],"names":["Number","prototype","format","c","d","t","n","this","isNaN","Math","abs","undefined","s","i","String","parseInt","toFixed","j","length","substr","replace","slice","toFloat","byteList","text","split","map","charCodeAt","cpad","char","value","lpad","removeFormat","forEach","symbol","replaceAll","removeSpecial","oldChars","newChars","find","join","rpad","indexOf","parseFloat","window","jQuery","$","Tether","Popper","Icon","className","props","name","push","style","onClick","cursor","React","Component","Menu","id","MenuList","state","activeItem","changeActiveItem","bind","setState","icon","link","active","action","MessageBox","show","title","buttons","color","close","hide","listItem","item","key","pKey","MenuListItem","to","FastMessageEmitter","data","visible","callback","on","emit","Object","assign","element","get","removeListener","commitChange","settings","extend","EventEmitter","FastMessageModal","animateHide","animateShow","onChangeData","onDocumentClick","getData","stop","animate","opacity","top","innerHeight","currentTime","stages","progress","animateStages","stage","shift","animationTime","getElement","addChangeListener","document","addEventListener","removeChangeListener","removeEventListener","Button","innerButton","mlSize","size","iconPosition","dangerouslySetInnerHTML","__html","block","disabled","defaultProps","Col","offset","label","labelMargin","children","Modal","ReactDOM","findDOMNode","beforeOpen","afterOpen","beforeClose","afterClose","zIndex","css","setTimeout","not","addClass","nextProps","modal","data-backdrop","closeOnOutClick","Row","InformarValorEmitter","decimal","mask","money","success","fail","lastHide","Date","getTime","time","dif","InformarValorModal","backspace","cancelar","confirmar","drawButton","pressNumber","valorKeyDown","valorKeyUp","pristine","StringMask","focus","valor","val","InformarValor","maskedValue","pow","e","keyCode","number","apply","html","verificarTamanho","removeClass","displayClass","type","readOnly","onKeyDown","onKeyUp","Progress","round","background","width","LoadingEmitter","LoadingElement","MessageBoxEmitter","focusOnClose","MessageBoxModal","first","button","fs","require","os","path","childProcess","serialNumberFunc","isDev","applicationDirectory","resolve","currentDate","currentTimestamp","timezoneOffset","getTimezoneOffset","now","toISOString","decimaisQuantidade","quantidade","defaultMessageBoxError","err","message","console","log","stack","serialNumber","a","platform","stdout","execSync","toString","trim","splice","Promise","sleep","ms","temporaryDirectory","homedir","validarCNPJ","cnpj","tamanho","numeros","substring","digitos","soma","pos","charAt","resultado","validarCPF","cpf","add","rev","valorParametro","Pool","grupo","nome","query","rows","writeTemporary","filename","content","dirname","existsSync","mkdirSync","finalName","encode","writeFileSync","Servidor","dados","error","url","ajax","JSON","stringify","result","parse","requisicao","carregarDados","status","api","numeroserie","idrequisicao","referencia","resposta","serialnumber","terminal","pg","user","host","database","password","port","Content","DataGrid","calcBlankSpace","elementScroll","onClickHeadCell","onScroll","updateBlankSpace","updateReceivedProps","header","limit","blankSpace","bottom","scrollActive","longScroll","grid","referenceElement","eScroll","eRefTop","position","scrollTop","scrollHeight","firstUpdateBlankSpace","floatThead","table","tr","tr50","eq","floor","elem","parent","is","parentTop","parentBottom","height","elemTop","elemBottom","target","attr","cell","hIndex","hOrder","order","sort","b","currentScroll","datagrid","thead","bsFirst","bsLast","last","trFirst","next","trLast","prev","tr20","tr80","hTop","count","elementIsVisibleByScroll","currScroll","initialBlankSpace","trHeight","rowsHeight","reduce","align","row","isArray","DataGridBody","DataGridBodyCell","DataGridBodyRow","DataGridHead","DataGridHeadCell","cellkey","DataGridBlankSpace","border","padding","ColorInput","picker","onChange","event","persist","hex","parents","preventDefault","found","each","Select","options","getDBOptions","verifyComponentId","dbtable","dbcolumn","dbfilter","dbparent","getElementById","ajaxDBOptions","abort","rowMode","res","option","input","Array","optionsAux","clearable","onInputChange","placeholder","searchable","defaultValue","FormControl","onFocus","checked","htmlFor","Label","FormGroup","warning","inputClassName","Hr","ModalCategoria","showDiv","changeDiv","changeTitle","excluir","gravar","limpar","onChangeNcm","onChangeInput","onChangeSincTributacao","sincronizarTributacao","idcategoria","toLocaleString","descricao","updateShowState","carregar","input_descricao","FastMessage","columns","values","name2","idncm","num","sets","input_sinctributacao","input_codigoncm","input_cor","input_dthrcriacao","input_origem","input_cfop","input_csosn","input_aliqicms","input_cstpis","input_aliqpis","input_cstcofins","input_aliqcofins","input_codcontribsocial","input_cest","Title","model","Categoria","dataGrid","pesquisa","showModalCategoria","redirectToProduto","beforeCloseModal","loadDataGrid","novaCategoria","onChangePesquisa","onClickBtnProduto","onKeyUpPesquisa","pesquisaLimpar","end","codigoncm","produtos","dthrcriacao","carregarCategoria","electron","Atualizacao","atualizarAplicativoParcial","atualizarBancoDeDados","baixarAplicativoParcial","verificarAtualizacao","callBack","ftp","ftpReadSync","client","stream","Error","chunks","chunk","paramAtualizacaoInstrucaoSQL","list","arrArquivoSQL","file","arquivoSQL","instrucaoSQL","connect","__ignoreAppUpdate","exec","gitDir","spawn","shell","stderr","openExternal","fileName","version","Loading","baixarGit","app","remote","relaunch","exit","Configuracoes","redirect","versaoAtual","Email","nodemailer","_anexos","_destinatario","_titulo","_remetente","reverse","cid","random","corpo","_corpo","destinatario","transport","createTransport","secure","auth","pass","tls","rejectUnauthorized","from","subject","attachments","sendMail","info","remetente","titulo","SubTitle","Contador","atualizarEmailContador","carregarDocumentos","enviarEmail","carregarEmailContador","dtinicial","dtfinal","documentos","zip","nodeZip","documento","xml","chave","xmlcanc","chavecanc","zippedData","generate","base64","compression","zipfile","email","anexo","enviar","date","dtinical","getFullYear","getMonth","ButtonGroup","Center","Estatistica","carregarDadosCategoria","carregarDadosFormaPagamento","carregarDadosGeral","carregarDadosProduto","tabela","LineChart","chartJS","Line","queryDiario","resDiario","dadosDiario","prepararDados","querySemanal","resSemanal","dadosSemanal","queryMensal","resMensal","dadosMensal","queryAnual","resAnual","dadosAnual","diario","semanal","mensal","anual","tipoData","groups","labels","x","getDate","dataGroup","group","y","datasets","cor","rgb","fillColor","strokeColor","pointColor","pointStrokeColor","pointHighlightFill","pointHighlightStroke","legend","display","chartDiario","redraw","chartSemanal","chartMensal","chartAnual","EscPos","font","barcode","GS","fromCharCode","ESC","bool","lines","qrcode","len","pl","ph","bold","Printer","child_process","escpos","colunas","modelo","documentoprodutos","documentopagamentos","parametroImpressoraGuilhotina","parametroImpressoraModeloImpressao","linhas","carregarEscPos","feed","fonte","iddocumento","queryDocumentoProduto","queryDocumentoPagamento","release","getContent","drawer","cut","texto","conteudo","command","toUpperCase","nomefantasia","razaosocial","paramEmitenteEndereco","paramEmitenteNumero","paramEmitenteBairro","paramEmitenteMunicipio","paramEmitenteUF","paramEmitenteCNPJ","paramEmitenteIE","linha","reiniciar","carregarDadosDocumento","imprimirDocumentoAtivo","imprimirDocumentoCancelado","numerovias","informacoes","operacao","xmlJS","xml2json","compact","CFe","infCFe","infAdic","infCpl","_text","ide","assinaturaQRCODE","imprimirCabecalho","numero","dtcriacao","hrcriacao","getHours","getMinutes","getSeconds","cpfcnpj","nomeorcamento","idparceiro","parceiro","tipopessoa","inscricaoestadual","cidade","estado","cep","bairro","endereco","complemento","imprimirListaProdutosModelo01","imprimirListaProdutosModelo02","totaldocumento","repeat","alimentar","documentopagamento","totalpagamento","formapagamento","totaltroco","paramSatSerie","guilhotina","imprimir","paramSATSerie","qrcodecanc","orcamento","dthrcancelamento","dtcancelamento","hrcancelamento","documentoproduto","sequencial","totalproduto","preco","precisao","sigla","calculo","descricaoLength","totaldesconto","totalacrescimo","linha1","linha2","reset","Fechamento","tipo","ativarFechamentoRelatorio","ativarFechamentoResumo","gerar","arrOperacao","operacaoQuery","prepararImpressao","disabledImprimir","ativar","FechamentoRelatorio","tipoDescritivo","colDescricao","colQuantidade","colTotal","total","t_quantidade","t_total","FechamentoResumo","totalbruto","totalcancelado","qtdecancelado","totalativo","qtdeativo","totalorcamento","colResumo2","colResumo1","Importacao","cores","categoria","corAleatoria","produto","balanca","precovariavel","aliqicms","aliqpis","aliqcofins","idunidade","cest","cfop","csosn","cstpis","cstcofins","sinctributacao","idcateogria","incluirCategoria","keys","references","sql","importados","planilha","xlsx","codigoean","origem","codcontribsocial","incluirProduto","dialog","showOpenDialog","filters","extensions","filePaths","processarPlanilha","Ferramentas","descobrirPortaImpressora","importarPlanilha","getCurrentWebContents","openDevTools","printer","then","selecionarPlanilha","consoleDesenvolvedor","ListGroup","ListItem","Parametro","listaGrupo","listaParametro","grupoAtivo","parametroAtivo","idparametro","observacao","ajustarAltura","carregarListaGrupo","carregarListaParametro","carregarParametro","onChangeValor","ModalProduto","onChangeCategoria","idproduto","input_idcategoria","input_codigoean","input_idunidade","input_precovariavel","input_preco","input_status","Produto","showModalProduto","redirectToCategoria","novoProduto","onClickBtnCategoria","carregarProduto","Relatorios","RelOrcamento","acaoOrcamento","totalquantidade","RelOrcamentoRelatorio","colNomeOrcamento","colIdDocumento","colTotalQuantidade","colTotalDocumento","t_totalquantidade","t_totaldocumento","Image","src","ext","readFileSync","alt","Suporte","logotipo","informativo","telefone","toLowerCase","PainelRapidoPesquisa","carregarProdutos","where","layoutVendas","selecionarProduto","onSelectProduto","borderColor","PainelRapidoPoucosProdutos","categorias","carregarCategorias","trocarCategoria","backgroundColor","PainelRapidoMediosProdutos","PainelRapidoMuitosProdutos","voltarCategoria","painelRapidoCategoria","painelRapidoProduto","PainelRapido","VendaEditarProduto","acrescimovalor","acrescimopercentual","onChangeAcrescimoPercentual","onChangeAcrescimoValor","onChangeTotalLiquido","aplicarAcrescimo","descontovalor","descontopercentual","onChangeDescontoPercentual","onChangeDescontoValor","aplicarDesconto","ComDLL","appPath","srcPath","comDLLPath","dllPath","method","args","commandExec","commandArgs","concat","xmlFile","returnFile","unlinkSync","execFileSync","timeout","code","SAT","jsontoxml","paramSATModelo","paramSATAtivacao","xmlEntrada","gerarXMLCancelamento","retorno","arrRetorno","execute","validarRetorno","xmlSaida","atob","objectName","constructor","paramDesenvolvedoraCNPJ","paramDesenvolvedoraAssinatura","paramSATCaixa","attrs","finalXML","paramEmitenteImpostoFederal","paramEmitenteImpostoEstadual","destChildren","destCPFCNPJ","dest","dets","prod","ICMS","PIS","basepis","COFINS","basecofins","pgtoChildren","especie","pgto","impostoFederal","impostoEstadual","infCFeChildren","gerarXMLDocumento","sucesso","VendaCancelarCupom","atualizarState","carregarUltimoDocumento","outroCupom","localizarNumero","rowCount","cancelarDocumento","ini","numeroVias","cancelamento","imprimirDocumento","carregarDocumento","VendaDetalhe","cancelarUltimaVenda","cancelarVendaAtual","carregarOrcamento","listaDocumentoProduto","reimprimirCupom","trocarOperacao","aumentarQuantidade","diminuirQuantidade","editarProduto","removerProduto","abrirFinalizacao","informarCPF","VendaDetalheCabecalho","alternarOrcamento","alternarVenda","efetivarOrcamento","onClickDocument","onClickIcon","exibindoOpcoes","opcoes","iconClicked","contains","fecharOpcoes","abrirOpcoes","countLista","ref","VendaDetalheCorpo","scrollToBottom","VendaDetalheCorpoItem","descontounitario","acrescimounitario","stopPropagation","VendaDetalheRodape","calcularTotais","onChangeAcrescimoUnitario","onChangeDescontoUnitario","onChangePreco","onChangeQuantidade","onChangeTotalAcrescimo","onChangeTotalDesconto","atualizarDocumentoProduto","decimalQuantidade","Card","VendaFinalizacao","listaDocumentoPagamento","formaspagamento","finalizarVenda","removerPagamento","totalpago","totalrestante","carregarFormasPagamento","idformapagamento","iconEspecie","incluirPagamento","incluirDezPorcento","VendaFinalizacaoListaPagamentos","VendaFinalizacaoOrcamento","onChangeCpfCnpj","onChangeNomeOrcamento","onFocusCpfCnpj","finalizarOrcamento","VendaReimprimirCupom","listaUltimosDocumentos","carregarUltimosDocumentos","Venda","criarObjetoDocumentoProduto","iddocumentoorcamento","pesquisaEfetiva","showEditarProduto","showVendaAplicarDesconto","showVendaAplicarAcrescimo","showVendaCancelarCupom","showVendaFinalizacao","showVendaFinalizacaoOrcamento","showVendaReimprimirCupom","carregarTemporario","finalizarDocumento","gravarTemporario","onClickBuscar","temporaryFileName","calcularDocumentoProduto","descontoproduto","calcularDiferenca","t_descontoproduto","diferenca","index","resDocumento","resDocumentoProduto","unidade","match","params","nextState","sqlInsertDocumento","listaIdProduto","queryProduto","resProduto","listaProdutos","sqlInsertDocumentoProduto","sqlInsertDocumentoPagamento","sat","transmitirDocumento","venda","informarPeso","incluirProdutoDefinitivo","documentoproduto2","documentoprodutoComp1","documentoprodutoComp2","contentClassName","Processo","dthrinicial","intervalo","ProcessoAutomatico","interval","running","executandoBackup","setInterval","executar","clearInterval","executarRefreshView","executarVerificarDtVerificacao","executarVerificarTerminal","executarBackup","processo","verificarIntervalo","dadosFTP","pgDump","tempDir","files","readdirSync","currTimeStr","localFile","remoteFile","cwd","mkdir","put","atualizarProcesso","view","dtverificacao","dtatual","servidor","verificarTerminal","App","processoAutomatico","iniciar","ctrlKey","toggleDevTools","exact","component","render"],"mappings":"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","file":"static/js/main.ea768d81.chunk.js","sourcesContent":["// Metodo para formatar um numero\n// Ex: (999999.9999).format(2,\",\",\".\")  =>  \"1.000.000,00\"\nNumber.prototype.format = function(c, d, t){\n\tlet n = this;\n\n\tc = (isNaN(c = Math.abs(c)) ? 2 : c);\n\td = (d === undefined ? \",\" : d);\n\tt = (t === undefined ? \".\" : t);\n\n\tlet s = (n < 0 ? \"-\" : \"\");\n\tlet i = String(parseInt(n = Math.abs(+n || 0).toFixed(c), 10));\n\tlet j = (i.length > 3 ? i.length % 3 : 0);\n\n\treturn s + (j ? i.substr(0, j) + t : \"\") + i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : \"\");\n};\n\n// Tranforma uma string em um numero\n// (nessa caso eh apenas para evitar erro quando a variavel ja for float)\nNumber.prototype.toFloat = function(){\n\treturn this;\n}\n\n// Retorna um array com o codigo de cada caracter do texto\nString.prototype.byteList = function(text){\n\treturn text.split(\"\").map(function(c){\n\t\treturn c.charCodeAt(0);\n\t});\n};\n\n\n// Preenche com o caracter desejado centralizando o texto\nString.prototype.cpad = function(length, char){\n    let value = this;\n\tlet i = 0;\n    while(value.length < length){\n\t\tif(i++ % 2 === 0){\n\t\t\tvalue = value + char;\n\t\t}else{\n\t\t\tvalue = char + value;\n\t\t}\n\t}\n    return String(value);\n}\n\n// Executa o \"format\" do tipo Number, porem esse metodo ja identifica a formatacao do numero\nString.prototype.format = function(c, d, t){\n\treturn this.toFloat().format(c, d, t);\n};\n\n// Preenche com o caracter desejado a esquerda do texto\nString.prototype.lpad = function(length, char){\n    let value = this;\n    while(value.length < length){\n\t\tvalue = char + value;\n\t}\n    return String(value);\n}\n\n// Remove a formatacao de textos\n// Ex: (\"(11) 99565-3470\").removeFormat() => \"11995653470\"\nString.prototype.removeFormat = function(){\n\tlet value = this;\n\tlet symbols = [\" \", \".\", \",\", \"-\", \"/\", \"\\\\\", \"(\", \")\"];\n\tsymbols.forEach((symbol) => {\n\t\tvalue = value.replaceAll(symbol, \"\");\n\t});\n\treturn value;\n};\n\n// Remove caracteres especiais\nString.prototype.removeSpecial = function(){\n\tlet oldChars = [\"á\", \"à\", \"ã\", \"â\", \"é\", \"è\", \"ê\", \"í\", \"ì\", \"î\", \"ó\", \"ò\", \"õ\", \"ô\", \"ú\", \"ù\", \"û\", \"ü\", \"ç\", \"Á\", \"À\", \"Ã\", \"Â\", \"É\", \"È\", \"Ê\", \"Í\", \"Ì\", \"Î\", \"Ó\", \"Ò\", \"Õ\", \"Ô\", \"Ú\", \"Ù\", \"Û\", \"Ü\", \"Ç\", \"ª\", \"º\"];\n\tlet newChars = [\"a\", \"a\", \"a\", \"a\", \"e\", \"e\", \"e\", \"i\", \"i\", \"i\", \"o\", \"o\", \"o\", \"o\", \"u\", \"u\", \"u\", \"u\", \"c\", \"A\", \"A\", \"A\", \"A\", \"E\", \"E\", \"E\", \"I\", \"I\", \"I\", \"O\", \"O\", \"O\", \"O\", \"U\", \"U\", \"U\", \"U\", \"C\", \"a\", \"o\"];\n\tlet value = this;\n\tfor(let i = 0; i < oldChars.length; i++){\n\t\tvalue = value.replaceAll(oldChars[i], newChars[i]);\n\t}\n\treturn value;\n};\n\n// Metodo para substituir todas as ocorrencias em uma string\nString.prototype.replaceAll = function(find, replace){\n\treturn this.split(find).join(replace);\n};\n\n// Preenche com o caracter desejado a direita do texto\nString.prototype.rpad = function(length, char){\n    let value = this;\n    while(value.length < length){\n\t\tvalue = value + char;\n\t}\n    return String(value);\n}\n\n// Tranforma uma string em um numero\n// Exemplo: 1.200,85 => 1200.85\nString.prototype.toFloat = function(){\n\tvar value = this;\n\tif(value.indexOf(\".\") === -1 && value.indexOf(\",\") > -1){ // 1200,85\n\t\tvalue = value.replace(\",\", \".\");\n\t}else if(value.indexOf(\".\") > -1 && value.indexOf(\",\") > -1){ // 1.200,85 ou 1,200.85\n\t\tif(value.indexOf(\".\") < value.indexOf(\",\")){ // 1.200,85\n\t\t\tvalue = value.replace(\".\", \"\").replace(\",\", \".\");\n\t\t}else if(value.indexOf(\".\") > value.indexOf(\",\")){ // 1,200.85\n\t\t\tvalue = value.replace(\",\", \"\");\n\t\t}\n\t}\n\treturn parseFloat(value);\n};\n","import * as $ from \"jquery\"\nwindow.jQuery = window.$ = $","import Tether from 'tether'\nwindow.Tether = Tether","import Popper from 'popper.js'\nwindow.Popper = Popper","import React from \"react\";\nimport \"./../lib/metro-icons-3.0.15/css/metro-icons.min.css\";\n\nexport default class Icon extends React.Component {\n\trender(){\n\t\tvar className = [\n\t\t\t\"icon\",\n\t\t\t\"mif-\" + this.props.name\n\t\t];\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\n\t\tvar style = {};\n\t\tif(this.props.onClick){\n\t\t\tstyle.cursor = \"pointer\";\n\t\t}\n\n\t\treturn (\n\t\t\t<span {...this.props} className={className.join(\" \")} style={style}></span>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Icon from \"./Icon.js\";\n\nimport \"../css/Menu.css\";\n\nexport default class Menu extends React.Component {\n\trender(){\n\t\treturn(\n\t\t\t<div id=\"menu\">\n\t\t\t\t<MenuList />\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass MenuList extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tactiveItem: \"Vender\"\n\t\t};\n\n\t\tthis.changeActiveItem = this.changeActiveItem.bind(this);\n\t}\n\n\tchangeActiveItem(text){\n\t\tthis.setState({\n\t\t\tactiveItem: text\n\t\t});\n\t}\n\n\tlistItem(){\n\t\treturn [\n\t\t\t{\n\t\t\t\ttext: \"Vender\",\n\t\t\t\ticon: \"shop\",\n\t\t\t\tlink: \"/\"\n\t\t\t},/*\n\t\t\t{\n\t\t\t\ttext: \"Notas fiscais\",\n\t\t\t\ticon: \"clipboard\",\n\t\t\t\tlink: \"/notafiscal\",\n\t\t\t\tactive: false\n\t\t\t},*/\n\t\t\t{\n\t\t\t\ttext: \"Cadastros\",\n\t\t\t\ticon: \"stack\",\n\t\t\t\tlink: \"/produto\",\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"Relatórios\",\n\t\t\t\ticon: \"chart-line\",\n\t\t\t\tlink: \"/relatorio\",\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"Contador\",\n\t\t\t\ticon: \"suitcase\",\n\t\t\t\tlink: \"/contador\",\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"Configurações\",\n\t\t\t\ticon: \"cogs\",\n\t\t\t\tlink: \"/configuracao\",\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"Suporte\",\n\t\t\t\ticon: \"help\",\n\t\t\t\tlink: \"/suporte\",\n\t\t\t\tactive: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: \"Sair\",\n\t\t\t\ticon: \"exit\",\n\t\t\t\tactive: false,\n\t\t\t\taction: () => {\n\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\ttitle: \"Sair do SAT-Flex\",\n\t\t\t\t\t\ttext: \"Você tem certeza que deseja encerrar o SAT-Flex agora?\",\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\twindow.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: \"Não\",\n\t\t\t\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t]\n\t}\n\n\trender(){\n\t\treturn <div className=\"menu-list\">\n\t\t\t<ul>\n\t\t\t\t{this.listItem().map((item, i) => {\n\t\t\t\t\treturn <MenuListItem key={i} pKey={i} item={item} activeItem={this.state.activeItem} changeActiveItem={this.changeActiveItem} />\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t</div>\n\t}\n}\n\nclass MenuListItem extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(){\n\t\tif(this.props.item.link){\n\t\t\tthis.props.changeActiveItem(this.props.item.text);\n\t\t}\n\t\tif(this.props.item.action){\n\t\t\tthis.props.item.action();\n\t\t}\n\t}\n\n\trender(){\n\t\tlet className = null;\n\t\tif(this.props.activeItem === this.props.item.text){\n\t\t\tclassName = \"active\";\n\t\t}\n\n\t\tif(this.props.item.link){\n\t\t\treturn (\n\t\t\t\t<Link to={this.props.item.link} onClick={this.onClick} className={className}>\n\t\t\t\t\t<Icon name={this.props.item.icon} />\n\t\t\t\t\t<span>{this.props.item.text}</span>\n\t\t\t\t</Link>\n\t\t\t);\n\t\t}else{\n\t\t\treturn (\n\t\t\t\t<a onClick={this.onClick} className={className}>\n\t\t\t\t\t<Icon name={this.props.item.icon} />\n\t\t\t\t\t<span>{this.props.item.text}</span>\n\t\t\t\t</a>\n\t\t\t);\n\t\t}\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport {EventEmitter} from \"events\";\n\nimport Icon from \"./Icon.js\";\n\nimport \"../css/FastMessage.css\";\n\nexport class FastMessageEmitter extends EventEmitter  {\n\tconstructor(){\n\t\tsuper();\n\n\t\tthis.data = {\n\t\t\ticon: null,\n\t\t\ttext: null,\n\t\t\tvisible: false\n\t\t}\n\t}\n\n\t// Adiciona um metodo a ser executado quando houver uma mudanca\n\taddChangeListener(callback){\n\t\tthis.on(\"change\", callback);\n\t}\n\n\t// Metodo responsavel em propagar as mudancas dos dados\n\tcommitChange(){\n\t\tthis.emit(\"change\");\n\t}\n\n\t// Captura os dados atuais da classe\n\tgetData(){\n\t\treturn Object.assign({}, this.data);\n\t}\n\n\t// Retorna o elemento modal da caixa de mensagem\n\tgetElement(){\n\t\tif(this.element === undefined){\n\t\t\tthis.element = $(\"#FastMessage\").get(0);\n\t\t}\n\t\treturn this.element;\n\t}\n\n\t// Remove um metodo a ser executado quando houver uma mudanca\n\tremoveChangeListener(callback){\n\t\tthis.removeListener(\"change\", callback);\n\t}\n\n\t// Esconde a caixa de mensagem\n\thide(){\n\t\tthis.data.visible = false;\n\t\tthis.commitChange();\n\t}\n\n\t// Exibe a caixa de mensagem\n\tshow(settings){\n\t\tif(typeof settings === \"string\"){\n\t\t\tsettings = {text: settings};\n\t\t}\n\n\t\tsettings = $.extend({\n\t\t\ticon: null,\n\t\t\ttext: null,\n\t\t\tvisible: true\n\t\t}, settings);\n\n\t\tthis.data = $.extend(this.data, settings);\n\t\tthis.commitChange();\n\t}\n}\n\nexport class FastMessageModal extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.animateHide = this.animateHide.bind(this);\n\t\tthis.animateShow = this.animateShow.bind(this);\n\t\tthis.onChangeData = this.onChangeData.bind(this);\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\n\n\t\tthis.state = props.FastMessageEmitter.getData();\n\t}\n\n\tanimateHide(){\n\t\tif(!this.state.visible){\n\t\t\treturn true;\n\t\t}\n\t\t$(this.element).stop().animate({\n\t\t\topacity: 0,\n\t\t\ttop: window.innerHeight\n\t\t}, 180, () => {\n\t\t\tthis.setState({\n\t\t\t\tvisible: false\n\t\t\t});\n\t\t});\n\t}\n\n\tanimateShow(){\n\t\t$(this.element).show();\n\n\t\tlet totalTime = 3000;\n\t\tlet currentTime = 0;\n\n\t\tlet stages = [\n\t\t\t{progress: 0,    opacity: 0, top: 0},\n\t\t\t{progress: 0.05, opacity: 1, top: 0.3},\n\t\t\t{progress: 0.95, opacity: 1, top: 0.35},\n\t\t\t{progress: 1,    opacity: 0, top: 1}\n\t\t];\n\n\t\tlet animateStages = () => {\n\t\t\tlet stage = stages.shift();\n\n\t\t\tlet animationTime = (totalTime * stage.progress) - currentTime;\n\t\t\tcurrentTime += animationTime;\n\n\t\t\t$(this.element).stop().animate({\n\t\t\t\topacity: stage.opacity,\n\t\t\t\ttop: (window.innerHeight * stage.top)\n\t\t\t}, animationTime, () => {\n\t\t\t\tif(stages.length > 0){\n\t\t\t\t\tanimateStages();\n\t\t\t\t}else{\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tvisible: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tanimateStages();\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.element = this.props.FastMessageEmitter.getElement();\n\t\tthis.props.FastMessageEmitter.addChangeListener(this.onChangeData);\n\t\tdocument.addEventListener(\"click\", this.onDocumentClick);\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.props.FastMessageEmitter.removeChangeListener(this.onChangeData);\n\t\tdocument.removeEventListener(\"click\", this.onDocumentClick);\n\t}\n\n\tonChangeData(){\n\t\tlet data = this.props.FastMessageEmitter.getData();\n\t\tif(data.visible !== this.state.visible){\n\t\t\tif(data.visible){\n\t\t\t\tthis.animateShow();\n\t\t\t}else{\n\t\t\t\tthis.animateHide();\n\t\t\t}\n\t\t}\n\t\tthis.setState(data);\n\t}\n\n\tonDocumentClick(){\n\t\tif(this.state.visible){\n\t\t\tthis.animateHide();\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div id=\"FastMessage\">\n\t\t\t\t{this.state.icon ? <Icon name={this.state.icon} /> : null}\n\t\t\t\t<span>{this.state.text}</span>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport Icon from \"./Icon.js\";\nimport \"../css/Button.css\";\n\nexport default class Button extends React.Component {\n\tstatic defaultProps = {\n\t\tactive: false,\n\t\tblock: false,\n\t\tdisabled: false,\n\t\ticonPosition: \"left\",\n\t\tsize: \"md\",\n\t\tcolor: \"blue\"\n\t}\n\n\trender(){\n\t\tvar innerButton = null;\n\t\tif(this.props.icon){\n\t\t\tif(this.props.text){\n\t\t\t\tlet mlSize = (this.props.size === \"lg\" ? \"3\" : \"2\");\n\n\t\t\t\tswitch(this.props.iconPosition){\n\t\t\t\t\tdefault:\n\t\t\t\t\tcase \"left\":\n\t\t\t\t\t\tinnerButton = [\n\t\t\t\t\t\t\t<Icon name={this.props.icon} key=\"0\" />,\n\t\t\t\t\t\t\t<span className={\"ml-\" + mlSize} key=\"1\" dangerouslySetInnerHTML={{__html: this.props.text}}></span>\n\t\t\t\t\t\t];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\tinnerButton = [\n\t\t\t\t\t\t\t<span className=\"mr-2\" key=\"0\" dangerouslySetInnerHTML={{__html: this.props.text}}></span>,\n\t\t\t\t\t\t\t<Icon name={this.props.icon} key=\"1\" />\n\t\t\t\t\t\t];\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tinnerButton = <Icon name={this.props.icon} />;\n\t\t\t}\n\t\t}else{\n\t\t\tinnerButton = <span dangerouslySetInnerHTML={{__html: this.props.text}}></span>;\n\t\t}\n\n\t\tvar className = [\n\t\t\t\"btn\",\n\t\t\t\"btn-primary\",\n\t\t\t\"btn-\" + this.props.size,\n\t\t\t\"btn-color-\" + this.props.color,\n\t\t];\n\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\t\tif(this.props.active){\n\t\t\tclassName.push(\"active\");\n\t\t}\n\t\tif(this.props.block){\n\t\t\tclassName.push(\"btn-block\");\n\t\t}\n\n\t\treturn (\n\t\t\t<button className={className.join(\" \")} onClick={this.props.onClick} disabled={this.props.disabled}>\n\t\t\t\t{innerButton}\n\t\t\t</button>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nexport default class Col extends React.Component {\n\trender(){\n\t\tlet size = (this.props.size === undefined ? 1 : this.props.size);\n\t\tlet className = [\"col-\" + size];\n\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\n\t\tif(this.props.offset){\n\t\t\tclassName.push(\"offset-\" + this.props.offset);\n\t\t}\n\n\t\tlet label = null;\n\t\tif(this.props.labelMargin){\n\t\t\tlabel = <label>&nbsp;</label>;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{label}\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport $ from \"jquery\";\n\nimport \"../css/Modal.css\";\n\nclass Modal extends React.Component {\n\n\tcomponentDidMount(){\n\t\tthis.element = ReactDOM.findDOMNode(this);\n\n\t\t$(this.element).on(\"show.bs.modal\", this.props.beforeOpen);\n\t\t$(this.element).on(\"shown.bs.modal\", this.props.afterOpen);\n\t\t$(this.element).on(\"hide.bs.modal\", this.props.beforeClose);\n\t\t$(this.element).on(\"hidden.bs.modal\", this.props.afterClose);\n\n\t\t$(this.element).on(\"show.bs.modal\", () => {\n\t\t\tlet zIndex = 1040 + (10 * $(\".modal:visible\").length);\n\t\t\t$(this.element).css(\"z-index\", zIndex);\n\t\t\tsetTimeout(() => {\n\t\t\t\t$(\".modal-backdrop\").not(\".modal-stack\").css(\"z-index\", zIndex - 1).addClass(\"modal-stack\");\n\t\t\t}, 0);\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tif(nextProps.show !== this.props.show){\n\t\t\tif(nextProps.show){\n\t\t\t\t$(this.element).modal(\"show\");\n\t\t\t}else{\n\t\t\t\t$(this.element).modal(\"hide\");\n\t\t\t}\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps){\n\t\treturn (\n\t\t\tnextProps.size !== this.props.size ||\n\t\t\tnextProps.title !== this.props.title ||\n\t\t\tnextProps.children !== this.props.children\n\t\t);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div id={this.props.id} className=\"modal fade\" data-backdrop={this.props.closeOnOutClick ? true : \"static\"}>\n\t\t\t\t<div className={\"modal-dialog modal-\" + this.props.size}>\n\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t{this.props.title}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"modal-body\">\n\t\t\t\t\t\t\t{this.props.children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nModal.defaultProps = {\n\tcloseOnOutClick: true,\n\tid: null,\n\tsize: \"md\",\n\ttitle: null\n};\n\nexport default Modal;\n","import React from \"react\";\n\nexport default class Row extends React.Component {\n\trender(){\n\t\tlet className = [\"row\"];\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\n\t\tlet props = Object.assign({}, this.props);\n\t\tdelete props.className;\n\n\t\treturn (\n\t\t\t<div {...props} className={className.join(\" \")}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport {EventEmitter} from \"events\";\nimport StringMask from \"string-mask\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport Icon from \"./Icon.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport \"../css/InformarValor.css\";\n\nexport class InformarValorEmitter extends EventEmitter {\n\tconstructor(){\n\t\tsuper();\n\n\t\tthis.data = {\n\t\t\tdecimal: 0, // Quantidade de casas decimais\n\t\t\tmask: null, // Mascara de entrada\n\t\t\tmoney: false, // Simbolo monetario a frente do valor\n\t\t\ttitle: null, // Titulo da janela\n\t\t\tvalue: \"\", // Valor pre-informado\n\t\t\tvisible: false, // Define se o modal esta visivel\n\t\t\tsuccess: () => {}, // Metodo executado ao confirmar valor\n\t\t\tfail: () => {} // Metodo executado ao cancelar\n\t\t};\n\n\t\tthis.lastHide = new Date().getTime();\n\t}\n\n\t// Adiciona um metodo a ser executado quando houver uma mudanca\n\taddChangeListener(callback){\n\t\tthis.on(\"change\", callback);\n\t}\n\n\t// Metodo responsavel em propagar as mudancas dos dados\n\tcommitChange(){\n\t\tthis.emit(\"change\");\n\t}\n\n\t// Captura os dados atuais da classe\n\tgetData(){\n\t\treturn Object.assign({}, this.data);\n\t}\n\n\t// Retorna o elemento modal da caixa de mensagem\n\tgetElement(){\n\t\tif(this.element === undefined){\n\t\t\tthis.element = $(\"#informarvalor\").get(0);\n\t\t}\n\t\treturn this.element;\n\t}\n\n\t// Remove um metodo a ser executado quando houver uma mudanca\n\tremoveChangeListener(callback){\n\t\tthis.removeListener(\"change\", callback);\n\t}\n\n\t// Escone a caixa de mensagem\n\thide(){\n\t\tthis.lastHide = new Date().getTime();\n\t\tthis.data.visible = false;\n\t\tthis.commitChange();\n\t}\n\n\t// Exibe a caixa de mensagem\n\tshow(settings){\n\t\tsettings = $.extend({\n\t\t\tdecimal: 0, // Quantidade de casas decimais\n\t\t\tmask: null, // Mascara de entrada\n\t\t\tmoney: false, // Simbolo monetario a frente do valor\n\t\t\ttitle: \"Informe o valor\", // Titulo da janela\n\t\t\tvalue: \"\", // Valor pre-informado\n\t\t\tvisible: true, // Define se o modal esta visivel\n\t\t\tsuccess: () => {}, // Metodo executado ao confirmar valor\n\t\t\tfail: () => {} // Metodo executado ao cancelar\n\t\t}, settings);\n\n\t\tlet time = 0;\n\t\tlet minTime = 750;\n\t\tlet dif = new Date().getTime() - this.lastHide;\n\t\tif(dif < minTime){\n\t\t\ttime = minTime - dif;\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tthis.data = $.extend(this.data, settings);\n\t\t\tthis.commitChange();\n\t\t}, time);\n\t}\n}\n\nexport class InformarValorModal extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdecimal: 0, // Quantidade de casas decimais\n\t\t\tmask: null, // Mascara de entrada\n\t\t\tmoney: false, // Simbolo monetario a frente do valor\n\t\t\ttitle: null, // Titulo da janela\n\t\t\tvalue: \"\", // Valor pre-informado\n\t\t\tvisible: false, // Define se o modal esta visivel\n\t\t\tsuccess: () => {}, // Metodo executado ao confirmar valor\n\t\t\tfail: () => {} // Metodo executado ao cancelar\n\t\t};\n\n\t\tthis.backspace = this.backspace.bind(this);\n\t\tthis.beforeClose = this.beforeClose.bind(this);\n\t\tthis.beforeOpen = this.beforeOpen.bind(this);\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.drawButton = this.drawButton.bind(this);\n\t\tthis.onChangeData = this.onChangeData.bind(this);\n\t\tthis.pressNumber = this.pressNumber.bind(this);\n\t\tthis.valorKeyDown = this.valorKeyDown.bind(this);\n\t\tthis.valorKeyUp = this.valorKeyUp.bind(this);\n\n\t\tthis.pristine = true;\n\t\tthis.visible = false;\n\n\t\tthis.StringMask = StringMask;\n\t}\n\n\tafterOpen(){\n\t\t$(\"#informarvalor-valor\").focus();\n\t}\n\n\tbackspace(){\n\t\tlet valor = $(\"#informarvalor-valor\").val();\n\t\t$(\"#informarvalor-valor\").val(valor.substr(0, valor.length - 1));\n\t\tthis.valorKeyUp();\n\t}\n\n\tbeforeClose(){\n\t\tthis.visible = false;\n\t}\n\n\tbeforeOpen(){\n\t\tthis.visible = true;\n\t}\n\n\tcancelar(){\n\t\twindow.InformarValor.hide();\n\t\tthis.state.fail();\n\t}\n\n\tconfirmar(){\n\t\twindow.InformarValor.hide();\n\n\t\tlet valor = $(\"#informarvalor-valor\").val();\n\t\tif(typeof this.state.mask === \"string\"){\n\t\t\tvalor = this.maskedValue(valor);\n\t\t}else{\n\t\t\tvalor = valor / Math.pow(10, this.state.decimal);\n\t\t\tvalor = valor.format(this.state.decimal, \",\", \".\");\n\t\t}\n\n\t\tthis.state.success(valor);\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.props.InformarValorEmitter.addChangeListener(this.onChangeData);\n\t\tthis.element = this.props.InformarValorEmitter.getElement();\n\n\t\tdocument.addEventListener(\"keyup\", (e) => {\n\t\t\tif(this.visible){\n\t\t\t\tswitch(e.keyCode){\n\t\t\t\t\tcase 8: this.backspace(); return;\n\t\t\t\t\tcase 48: this.pressNumber(0); return;\n\t\t\t\t\tcase 49: this.pressNumber(1); return;\n\t\t\t\t\tcase 50: this.pressNumber(2); return;\n\t\t\t\t\tcase 51: this.pressNumber(3); return;\n\t\t\t\t\tcase 52: this.pressNumber(4); return;\n\t\t\t\t\tcase 53: this.pressNumber(5); return;\n\t\t\t\t\tcase 54: this.pressNumber(6); return;\n\t\t\t\t\tcase 55: this.pressNumber(7); return;\n\t\t\t\t\tcase 56: this.pressNumber(8); return;\n\t\t\t\t\tcase 57: this.pressNumber(9); return;\n\t\t\t\t\tcase 96: this.pressNumber(0); return;\n\t\t\t\t\tcase 97: this.pressNumber(1); return;\n\t\t\t\t\tcase 98: this.pressNumber(2); return;\n\t\t\t\t\tcase 99: this.pressNumber(3); return;\n\t\t\t\t\tcase 100: this.pressNumber(4); return;\n\t\t\t\t\tcase 101: this.pressNumber(5); return;\n\t\t\t\t\tcase 102: this.pressNumber(6); return;\n\t\t\t\t\tcase 103: this.pressNumber(7); return;\n\t\t\t\t\tcase 104: this.pressNumber(8); return;\n\t\t\t\t\tcase 105: this.pressNumber(9); return;\n\t\t\t\t\tdefault: return;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.props.InformarValorEmitter.removeChangeListener(this.onChangeData);\n\t}\n\n\tdrawButton(number, i){\n\t\treturn (\n\t\t\t<Col size=\"4\" key={i}>\n\t\t\t\t<Button text={number} block={true} color=\"blue\" onClick={() => {this.pressNumber(number)}} />\n\t\t\t</Col>\n\t\t);\n\t}\n\n\tmaskedValue(value){\n\t\tlet mask = new this.StringMask(this.state.mask);\n\t\treturn mask.apply(value);\n\t}\n\n\tonChangeData(){\n\t\tlet data = this.props.InformarValorEmitter.getData();\n\n\t\tif(data.visible){\n\t\t\t$(this.element).modal(\"show\");\n\t\t}else{\n\t\t\t$(this.element).modal(\"hide\");\n\t\t}\n\n\t\tif(data.value !== undefined && data.value.length > 0){\n\t\t\tdata.value = data.value.toFloat().format(data.decimal, \"\", \"\");\n\t\t}\n\n\t\tthis.setState(data, () => {\n\t\t\tthis.pristine = false;\n\t\t\t$(\"#informarvalor-valor\").val(data.value);\n\t\t\tthis.valorKeyUp();\n\t\t\tthis.pristine = true;\n\t\t});\n\t}\n\n\tpressNumber(number){\n\t\t$(\"#informarvalor-valor\").val($(\"#informarvalor-valor\").val() + number);\n\t\tthis.valorKeyUp();\n\t}\n\n\tvalorKeyDown(e){\n\t\tif([8, 13, 27, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57].indexOf(e.keyCode) === -1){\n\t\t\treturn false;\n\t\t}\n\t\tif(e.keyCode === 13){\n\t\t\tthis.confirmar();\n\t\t}\n\t}\n\n\tvalorKeyUp(){\n\t\tif(this.pristine){\n\t\t\tthis.pristine = false;\n\t\t\t$(\"#informarvalor-valor\").val($(\"#informarvalor-valor\").val().substr(-1));\n\t\t}\n\n\t\tlet valor = $(\"#informarvalor-valor\").val();\n\t\tif(typeof this.state.mask === \"string\"){\n\t\t\tvalor = this.maskedValue(valor);\n\t\t}else{\n\t\t\tif(valor.length === 0){\n\t\t\t\t$(\"#informarvalor-valor\").val(0);\n\t\t\t}\n\t\t\tvalor = valor / Math.pow(10, this.state.decimal);\n\t\t\tvalor = valor.format(this.state.decimal, \",\", \".\");\n\t\t}\n\t\t$(\"#informarvalor-display\").html(valor);\n\t\tthis.verificarTamanho();\n\n\t\tif(valor.length > 0){\n\t\t\t$(\"#informarvalor-backspace\").show();\n\t\t}else{\n\t\t\t$(\"#informarvalor-backspace\").hide();\n\t\t}\n\n\t\t$(\"#informarvalor-valor\").focus();\n\t}\n\n\tverificarTamanho(){\n\t\tif($(\"#informarvalor-display\").text().length < 10){\n\t\t\t$(\"#informarvalor-display\").removeClass(\"informarvalor-display-sm\");\n\t\t}else{\n\t\t\t$(\"#informarvalor-display\").addClass(\"informarvalor-display-sm\");\n\t\t}\n\t}\n\n\trender(){\n\t\tlet numbers = [7, 8, 9, 4, 5, 6, 1, 2, 3];\n\t\tlet displayClass = (this.state.money ? \"informarvalor-display-money\" : \"\");\n\n\t\treturn (\n\t\t\t<Modal id=\"informarvalor\" size=\"sm\" title={this.state.title} afterOpen={this.afterOpen} beforeOpen={this.beforeOpen} beforeClose={this.beforeClose}>\n\t\t\t\t<input type=\"text\" id=\"informarvalor-valor\" readOnly={true} onKeyDown={this.valorKeyDown} onKeyUp={this.valorKeyUp} />\n\t\t\t\t<div id=\"informarvalor-display-parent\">\n\t\t\t\t\t<div id=\"informarvalor-display\" className={displayClass}></div>\n\t\t\t\t\t<Icon id=\"informarvalor-backspace\" name=\"chevron-left\" onClick={this.backspace} />\n\t\t\t\t</div>\n\t\t\t\t<Row id=\"informarvalor-keyboard\">\n\t\t\t\t\t{numbers.map(this.drawButton)}\n\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t<Button icon=\"cross\" block={true} color=\"red\" onClick={this.cancelar} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t{this.drawButton(0)}\n\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t<Button icon=\"checkmark\" block={true} color=\"green\" onClick={this.confirmar} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nexport default class Progress extends React.Component {\n\trender(){\n\t\tlet value = Math.round(this.props.value) + \"%\";\n\t\tlet background = null;\n\t\tswitch(this.props.color){\n\t\t\tcase \"green\":\n\t\t\t\tbackground = \"bg-success\";\n\t\t\t\tbreak;\n\t\t\tcase \"yellow\":\n\t\t\t\tbackground = \"bg-warning\";\n\t\t\t\tbreak;\n\t\t\tcase \"red\":\n\t\t\t\tbackground = \"bg-danger\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbackground = \"bg-primary\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\tlet className = \"progress\";\n\t\tif(this.props.className){\n\t\t\tclassName += \" \" + this.props.className;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={className}>\n\t\t\t\t<div className={\"progress-bar progress-bar-striped progress-bar-animated \" + background} style={{width: value}}>\n\t\t\t\t\t{value}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport {EventEmitter} from \"events\";\n\nimport Progress from \"./Progress.js\";\n\nimport \"../css/Loading.css\";\n\nexport class LoadingEmitter extends EventEmitter  {\n\tconstructor(){\n\t\tsuper();\n\n\t\tthis.data = {\n\t\t\tvisible: false,\n\t\t\tprogress: null\n\t\t}\n\t}\n\n\t// Adiciona um metodo a ser executado quando houver uma mudanca\n\taddChangeListener(callback){\n\t\tthis.on(\"change\", callback);\n\t}\n\n\t// Metodo responsavel em propagar as mudancas dos dados\n\tcommitChange(){\n\t\tthis.emit(\"change\");\n\t}\n\n\t// Captura os dados atuais da classe\n\tgetData(){\n\t\treturn Object.assign({}, this.data);\n\t}\n\n\t// Retorna o elemento modal da caixa de mensagem\n\tgetElement(){\n\t\tif(this.element === undefined){\n\t\t\tthis.element = $(\"#Loading\").get(0);\n\t\t}\n\t\treturn this.element;\n\t}\n\n\t// Remove um metodo a ser executado quando houver uma mudanca\n\tremoveChangeListener(callback){\n\t\tthis.removeListener(\"change\", callback);\n\t}\n\n\t// Esconde a caixa de mensagem\n\tasync hide(){\n\t\tthis.data.visible = false;\n\t\tthis.commitChange();\n\t}\n\n\t// Exibe a caixa de mensagem\n\tasync show(){\n\t\tthis.data.visible = true;\n\t\tthis.data.progress = null;\n\t\tthis.commitChange();\n\t}\n\n\t// Exibe a barra de progresso\n\tasync progress(value){\n\t\tthis.data.progress = value;\n\t\tthis.commitChange();\n\t}\n}\n\nexport class LoadingElement extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onChangeData = this.onChangeData.bind(this);\n\n\t\tthis.state = props.LoadingEmitter.getData();\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.element = this.props.LoadingEmitter.getElement();\n\t\tthis.props.LoadingEmitter.addChangeListener(this.onChangeData);\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.props.LoadingEmitter.removeChangeListener(this.onChangeData);\n\t}\n\n\tonChangeData(){\n\t\tlet data = this.props.LoadingEmitter.getData();\n\t\tthis.setState(data);\n\t}\n\n\trender(){\n\t\tif(!this.state.visible){\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"Loading\">\n\t\t\t\t<div className=\"Loading-Spinner\"></div>\n\t\t\t\t<Progress value={this.state.progress} color=\"green\" className={this.state.progress === null ? \"d-none\" : null} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport {EventEmitter} from \"events\";\n\nimport Button from \"./Button.js\";\n\nexport class MessageBoxEmitter extends EventEmitter {\n\n\tconstructor(){\n\t\tsuper();\n\n\t\tthis.data = {\n\t\t\tbuttons: [],\n\t\t\tfocusOnClose: null,\n\t\t\tsize: \"md\",\n\t\t\ttext: null,\n\t\t\ttitle: null,\n\t\t\tvisible: false\n\t\t}\n\n\t\tthis.lastHide = new Date().getTime();\n\t}\n\n\t// Adiciona um metodo a ser executado quando houver uma mudanca\n\taddChangeListener(callback){\n\t\tthis.on(\"change\", callback);\n\t}\n\n\t// Metodo responsavel em propagar as mudancas dos dados\n\tcommitChange(){\n\t\tthis.emit(\"change\");\n\t}\n\n\t// Captura os dados atuais da classe\n\tgetData(){\n\t\treturn Object.assign({}, this.data);\n\t}\n\n\t// Retorna o elemento modal da caixa de mensagem\n\tgetElement(){\n\t\tif(this.element === undefined){\n\t\t\tthis.element = $(\"#__messagebox\").get(0);\n\t\t}\n\t\treturn this.element;\n\t}\n\n\t// Remove um metodo a ser executado quando houver uma mudanca\n\tremoveChangeListener(callback){\n\t\tthis.removeListener(\"change\", callback);\n\t}\n\n\t// Esconde a caixa de mensagem\n\thide(){\n\t\tthis.lastHide = new Date().getTime();\n\t\tthis.data.visible = false;\n\t\tthis.commitChange();\n\t}\n\n\t// Exibe a caixa de mensagem\n\tshow(settings){\n\t\tsettings = $.extend({\n\t\t\ttitle: null,\n\t\t\ttext: null,\n\t\t\tfocusOnClose: null,\n\t\t\tsize: \"md\",\n\t\t\tvisible: true,\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Ok\",\n\t\t\t\t\tcolor: \"blue\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t}, settings);\n\n\t\tlet time = 0;\n\t\tlet minTime = 750;\n\t\tlet dif = new Date().getTime() - this.lastHide;\n\t\tif(dif < minTime){\n\t\t\ttime = minTime - dif;\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tthis.data = $.extend(this.data, settings);\n\t\t\tthis.commitChange();\n\t\t}, time);\n\t}\n}\n\nexport class MessageBoxModal extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onChangeData = this.onChangeData.bind(this);\n\n\t\tthis.state = props.MessageBoxEmitter.getData();\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.props.MessageBoxEmitter.addChangeListener(this.onChangeData);\n\n\t\tlet element = this.props.MessageBoxEmitter.getElement();\n\t\t$(element).on(\"shown.bs.modal\", () => {\n\t\t\t$(element).find(\".btn\").first().focus();\n\t\t});\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.props.MessageBoxEmitter.removeChangeListener(this.onChangeData);\n\t}\n\n\tonChangeData(){\n\t\tlet data = this.props.MessageBoxEmitter.getData();\n\t\tif(data.visible !== this.state.visible){\n\t\t\tlet element = this.props.MessageBoxEmitter.getElement();\n\t\t\tif(data.visible){\n\t\t\t\t$(element).modal(\"show\");\n\t\t\t}else{\n\t\t\t\t$(element).modal(\"hide\");\n\t\t\t}\n\t\t}\n\t\tthis.setState(data);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div id=\"__messagebox\" className=\"messagebox modal fade\" data-backdrop=\"static\">\n\t\t\t\t<div className={\"modal-dialog modal-\" + this.state.size}>\n\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t<h4 className=\"modal-title\">{this.state.title}</h4>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"modal-body\" dangerouslySetInnerHTML={{__html: this.state.text}}></div>\n\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t{this.state.buttons.map(function(button, i){\n\t\t\t\t\t\t\t\treturn <Button key={i} color={button.color} text={button.text} icon={button.icon} onClick={button.onClick} />\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\n\n/*\nwindow.MessageBox.show({\n\t\ttext: \"Texto 1\",\n\t\tbuttons: [\n\t\t\t{\n\t\t\t\ttext: \"Ok\",\n\t\t\t\tonClick: () => {\n\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\ttext: \"Texto 2\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t]\n});\n*/\n","const fs = window.require(\"fs\");\nconst os = window.require(\"os\");\nconst path = window.require(\"path\");\nconst childProcess = window.require(\"child_process\");\nconst serialNumberFunc = window.require(\"serial-number\");\nconst isDev = window.require(\"electron-is-dev\");\n\nexport function applicationDirectory(){\n\tif(isDev){\n\t\treturn path.resolve();\n\t}else{\n\t\treturn \"C:/SAT-Flex/resources/app/\";\n\t}\n}\n\nexport function currentDate(){\n\treturn currentTimestamp().split(\"T\")[0];\n}\n\nexport function currentTimestamp(){\n\tlet timezoneOffset = (new Date()).getTimezoneOffset() * 60000;\n\tlet localISOTimestamp = (new Date(Date.now() - timezoneOffset)).toISOString();\n\treturn localISOTimestamp;\n};\n\n// Calcula quantas casas deve usar para formatar um valor referente a quantidade\nexport function decimaisQuantidade(quantidade){\n\tlet decimal = String(quantidade).split(\".\")[1];\n\tif(decimal === undefined || decimal.length === 0 || parseInt(decimal, 10) === 0){\n\t\treturn 0;\n\t}else{\n\t\treturn 3;\n\t}\n}\n\nexport function defaultMessageBoxError(err){\n\tlet text = null;\n\tif(err === undefined || err === null){\n\t\ttext = \"Erro não identificado.\";\n\t}else if(typeof err === \"string\"){\n\t\ttext = err;\n\t}else{\n\t\ttext = err.message;\n\t\tconsole.log(err.stack);\n\t}\n\twindow.MessageBox.show({\n\t\ttitle: \"Houve uma falha\",\n\t\ttext: text\n\t});\n}\n\nexport async function serialNumber(){\n\tif(os.platform() === \"win32\"){\n\t\tlet command = \"wmic diskdrive get SerialNumber\";\n\t\tlet stdout = childProcess.execSync(command).toString();\n\t\tstdout = stdout.trim().split(\" \").splice(-1)[0].trim();\n\t\treturn stdout;\n\t}else{\n\t\treturn new Promise((resolve) => {\n\t\t\tserialNumberFunc((err, value) => {\n\t\t\t\tresolve(value);\n\t\t\t});\n\t\t});\n\t}\n}\n\nexport function sleep(ms){\n\treturn new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport function temporaryDirectory(){\n\tlet dirname = os.homedir() + \"/SAT-Flex/\";\n\treturn dirname;\n}\n\nexport function validarCNPJ(cnpj){\n\tcnpj = cnpj.replace(/[^\\d]+/g, \"\");\n\tif(cnpj === \"\"){\n\t\treturn false;\n\t}\n\tif(cnpj.length !== 14){\n\t\treturn false;\n\t}\n\tif(cnpj === \"00000000000000\" || cnpj === \"11111111111111\" || cnpj === \"22222222222222\" || cnpj === \"33333333333333\" || cnpj === \"44444444444444\" || cnpj === \"55555555555555\" || cnpj === \"66666666666666\" || cnpj === \"77777777777777\" || cnpj === \"88888888888888\" || cnpj === \"99999999999999\"){\n\t\treturn false;\n\t}\n\tvar tamanho = cnpj.length - 2;\n\tvar numeros = cnpj.substring(0, tamanho);\n\tvar digitos = cnpj.substring(tamanho);\n\tvar soma = 0;\n\tvar pos = tamanho - 7;\n\tfor(let i = tamanho; i >= 1; i--){\n\t\tsoma += numeros.charAt(tamanho - i) * pos--;\n\t\tif(pos < 2){\n\t\t\tpos = 9;\n\t\t}\n\t}\n\tvar resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\n\tif(parseInt(resultado, 10) !== parseInt(digitos.charAt(0), 10)){\n\t\treturn false;\n\t}\n\ttamanho = tamanho + 1;\n\tnumeros = cnpj.substring(0, tamanho);\n\tsoma = 0;\n\tpos = tamanho - 7;\n\tfor(let i = tamanho; i >= 1; i--){\n\t\tsoma += numeros.charAt(tamanho - i) * pos--;\n\t\tif(pos < 2){\n\t\t\tpos = 9;\n\t\t}\n\t}\n\tresultado = soma % 11 < 2 ? 0 : 11 - soma % 11;\n\tif(parseInt(resultado, 10) !== parseInt(digitos.charAt(1), 10)){\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nexport function validarCPF(cpf){\n\tcpf = cpf.replace(/[^\\d]+/g, \"\");\n\tif(cpf === \"\"){\n\t\treturn false;\n\t}\n\tif(cpf.length !== 11 || cpf === \"00000000000\" || cpf === \"11111111111\" || cpf === \"22222222222\" || cpf === \"33333333333\" || cpf === \"44444444444\" || cpf === \"55555555555\" || cpf === \"66666666666\" || cpf === \"77777777777\" || cpf === \"88888888888\" || cpf === \"99999999999\"){\n\t\treturn false;\n\t}\n\tvar add = 0;\n\tfor(let i = 0; i < 9; i++){\n\t\tadd += parseInt(cpf.charAt(i), 10) * (10 - i);\n\t}\n\tvar rev = 11 - (add % 11);\n\tif(rev === 10 || rev === 11){\n\t\trev = 0;\n\t}\n\tif(parseInt(rev, 10) !== parseInt(cpf.charAt(9), 10)){\n\t\treturn false;\n\t}\n\tadd = 0;\n\tfor(let i = 0; i < 10; i++){\n\t\tadd += parseInt(cpf.charAt(i), 10) * (11 - i);\n\t}\n\trev = 11 - (add % 11);\n\tif(rev === 10 || rev === 11){\n\t\trev = 0;\n\t}\n\tif(parseInt(rev, 10) !== parseInt(cpf.charAt(10), 10)){\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nexport async function valorParametro(Pool, grupo, nome, callback){\n\tlet {rows} = await Pool.query(\"SELECT valor FROM parametro WHERE grupo = $1 AND nome = $2\", [grupo, nome]);\n\tif(rows.length === 0){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Banco de dados desatualizado\",\n\t\t\ttext: \"Seu banco de dados está desatualizado para trabalhar com o aplicativo atual.<br>Atualize o banco de dados para continuar.\"\n\t\t});\n\t\treturn false;\n\t}\n\tlet valor = rows[0].valor;\n\tif(typeof callback === \"function\"){\n\t\tcallback(valor);\n\t}\n\treturn valor;\n}\n\nexport function writeTemporary(filename, content){\n\tlet dirname = temporaryDirectory();\n\tif(!fs.existsSync(dirname)){\n\t\tfs.mkdirSync(dirname);\n\t}\n\n\tlet finalName = dirname + filename;\n\n\tlet encode = undefined;\n\tif(filename.substr(-4) === \".zip\"){\n\t\tencode = \"binary\";\n\t}\n\n\tfs.writeFileSync(finalName, content, encode);\n\treturn finalName;\n}\n","import $ from \"jquery\";\nimport {serialNumber, valorParametro} from \"../def/function\";\n\nexport default class Servidor {\n\n   constructor(Pool){\n      this.Pool = Pool;\n\n      this.cnpj = null;\n      this.serialNumber = null;\n   }\n\n   async api(nome, dados = {}, success = ()=>{}, error = ()=>{}){\n      let url = \"http://server.satflex.com.br/serv/terminal/\" + nome + \".php\";\n\n      $.ajax({\n         url: url,\n         type: \"POST\",\n         data: JSON.stringify(dados),\n         success: (result) => {\n            success(JSON.parse(result))\n         },\n         error: error\n      });\n   }\n\n   async atualizarRequisicao(requisicao, success, fail){\n      await this.carregarDados();\n\n      let status = null;\n      switch(requisicao.status){\n         case \"0\":\n\t\t\t\tstatus = \"1\";\n\t\t\t\tbreak;\n\t\t\tcase \"1\":\n\t\t\tcase \"2\":\n\t\t\t\tstatus = \"2\";\n\t\t\t\tbreak;\n         default:\n            break;\n      }\n\n      this.api(\"atualizar_requisicao\", {\n         numeroserie: this.serialNumber,\n         cnpj: this.cnpj,\n         requisicao: {\n\t\t\t\tidrequisicao: requisicao.referencia,\n\t\t\t\tstatus: status,\n\t\t\t\tresposta: requisicao.resposta\n         }\n      }, (result) => {\n         switch(result.status){\n            case \"0\":\n               success();\n               break;\n            case \"2\":\n               fail(result.message);\n               break;\n            default:\n               break;\n         }\n      }, () => {\n         fail(\"Houve uma falha na conexão com o servidor.\");\n      });\n\t}\n\n   async carregarDados(){\n      if(!this.cnpj || !this.serialnumber){\n         this.cnpj = await valorParametro(this.Pool, \"EMITENTE\", \"CNPJ\");\n         this.serialNumber = await serialNumber();\n      }\n   }\n\n   async verificarRequisicao(success, fail){\n      await this.carregarDados();\n\n      this.api(\"verificar_requisicao\", {\n         numeroserie: this.serialNumber,\n         cnpj: this.cnpj\n      }, (result) => {\n         switch(result.status){\n            case \"0\":\n               success(result.requisicao);\n               break;\n            case \"2\":\n               fail(result.message);\n               break;\n            default:\n               break;\n         }\n      }, () => {\n         fail(\"Houve uma falha na conexão com o servidor.\");\n      });\n\t}\n\n\tasync verificarTerminal(){\n      return await new Promise(async (resolve) => {\n         await this.carregarDados();\n\n         this.api(\"verificar_terminal\", {\n            numeroserie: this.serialNumber,\n            cnpj: this.cnpj\n         }, (result) => {\n            switch(result.status){\n               case \"0\":\n                  resolve(result.terminal.status);\n                  break;\n               case \"2\":\n                  resolve(false);\n                  break;\n               default:\n                  break;\n            }\n         }, () => {\n            resolve(false);\n         });\n      });\n\t}\n\n}\n","const pg = window.require(\"pg\");\n\nexport function Client(){\n\treturn pg.Client(Configuration());\n}\n\nexport function Pool(){\n\treturn new pg.Pool(Configuration());\n}\n\nfunction Configuration(){\n\treturn {\n\t\tuser: \"postgres\",\n\t\thost: \"127.0.0.1\",\n\t\tdatabase: \"satflex\",\n\t\tpassword: \"postgres\",\n\t\tport: 5432\n\t};\n}\n","import React from \"react\";\nimport \"../css/Content.css\";\n\nexport default class Content extends React.Component {\n\n\trender(){\n\t\treturn (\n\t\t\t<div id=\"content\" {...this.props}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport $ from \"jquery\";\nimport \"floatthead\";\n\nimport \"../css/DataGrid.css\";\n\nexport default class DataGrid extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.calcBlankSpace = this.calcBlankSpace.bind(this);\n\t\tthis.elementScroll = this.elementScroll.bind(this);\n\t\tthis.onClickHeadCell = this.onClickHeadCell.bind(this);\n\t\tthis.onScroll = this.onScroll.bind(this);\n\t\tthis.updateBlankSpace = this.updateBlankSpace.bind(this);\n\t\tthis.updateReceivedProps = this.updateReceivedProps.bind(this);\n\n\t\tvar nextProps = this.updateReceivedProps(props.header, props.data);\n\n\t\tthis.state = {\n\t\t\tdata: nextProps.data,\n\t\t\theader: nextProps.header,\n\t\t\tlimit: 100,\n\t\t\toffset: 0,\n\t\t\tblankSpace: {\n\t\t\t\tbottom: 0,\n\t\t\t\ttop: 0\n\t\t\t}\n\t\t};\n\n\t\tthis.scrollActive = true;\n\t\tthis.longScroll = false;\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.elementScroll().addEventListener(\"scroll\", this.onScroll);\n\t\tthis.element = ReactDOM.findDOMNode(this);\n\t\twindow.grid = this.element;\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.elementScroll().removeEventListener(\"scroll\", this.onScroll);\n\t}\n\n\tcomponentDidUpdate(){\n\t\tif(this.referenceElement && !this.longScroll){\n\t\t\tvar eScroll = this.elementScroll();\n\t\t\tvar eRefTop = $(this.referenceElement.element).position().top;\n\t\t\tthis.scrollActive = false;\n\n\t\t\tvar scrollTop = $(eScroll).scrollTop() - (eRefTop - this.referenceElement.top);\n\t\t\tif(scrollTop > this.element.scrollHeight){\n\t\t\t\tscrollTop = this.element.scrollHeight;\n\t\t\t}\n\n\t\t\t$(eScroll).scrollTop(scrollTop);\n\t\t\tthis.scrollActive = true;\n\t\t}\n\n\t\tif(this.firstUpdateBlankSpace !== true){\n\t\t\tthis.firstUpdateBlankSpace = true;\n\t\t\tthis.updateBlankSpace();\n\t\t}\n\n\t\t$(this.element).children(\"table\").floatThead();\n\t\t$(this.element).children(\"table\").floatThead(\"reflow\");\n\t}\n\n\tcomponentWillUpdate(){\n\t\tvar table = $(this.element).children(\"table\"); // Corpo da grade\n\t\tvar tr = $(table).children(\"tbody\").children(); // Lista com todas as linhas da grade, inclusive o BlankSpace\n\t\tvar tr50 = $(tr).eq(Math.floor(this.state.limit * 0.5));\n\t\tif($(tr50).length > 0){\n\t\t\tthis.referenceElement = {\n\t\t\t\telement: tr50,\n\t\t\t\ttop: $(tr50).position().top\n\t\t\t};\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\t// Trata os dados recebidos\n\t\tnextProps = this.updateReceivedProps(nextProps.header, nextProps.data);\n\n\t\t// Atualiza os dados\n\t\tthis.setState({\n\t\t\theader: nextProps.header,\n\t\t\tdata: nextProps.data\n\t\t});\n\n\t\t// Atualiza o tamanho dos BlankSpaces\n\t\tthis.firstUpdateBlankSpace = false;\n\t}\n\n\telementIsVisibleByScroll(elem, parent){\n\t\tif(!$(this.element).is(\":visible\")){\n\t\t\treturn false;\n\t\t}\n\n\t\tparent = (parent === undefined ? window : parent);\n\n\t\tvar parentTop = $(parent).scrollTop();\n\t\tvar parentBottom = parentTop + $(parent).height();\n\n\t\tvar elemTop = (parent === window ? $(elem).offset().top : $(elem).position().top);\n\t\tvar elemBottom = elemTop + $(elem).height();\n\n\t\tif(elemTop < parentTop && elemBottom > parentTop){\n\t\t\treturn true;\n\t\t}else if(elemTop > parentTop && elemBottom < parentBottom){\n\t\t\treturn true;\n\t\t}else if(elemTop < parentBottom && elemBottom > parentBottom){\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n\n\telementScroll(){\n\t\tif(this.props.height === undefined){\n\t\t\treturn window;\n\t\t}else{\n\t\t\treturn ReactDOM.findDOMNode(this);\n\t\t}\n\t}\n\n\tonClickHeadCell(e){\n\t\t// Captura a chave do elemento clicado\n\t\tvar key = $(e.target).attr(\"cellkey\");\n\n\t\t// Atualiza a ordenacao no grid\n\t\tvar cell = null;\n\t\tvar hIndex = null;\n\t\tvar hOrder = null;\n\t\tvar header = this.state.header;\n\t\tfor(var i in header){\n\t\t\tcell = header[i];\n\t\t\tif(cell.key === key){\n\t\t\t\thIndex = i;\n\t\t\t\thOrder = (cell.order === 1 ? -1 : 1);\n\t\t\t\tcell.order = hOrder;\n\t\t\t}else{\n\t\t\t\tcell.order = 0;\n\t\t\t}\n\t\t\theader[i] = cell;\n\t\t}\n\n\t\t// Atualiza a ordem dos dados\n\t\tvar data = this.state.data;\n\t\tdata.sort(function(a, b){\n\t\t\tif(a[\"data\"][hIndex][\"text\"] < b[\"data\"][hIndex][\"text\"])\n\t\t\t\treturn (hOrder === 1 ? -1 : 1);\n\t\t\tif(a[\"data\"][hIndex][\"text\"] > b[\"data\"][hIndex][\"text\"])\n\t\t\t\treturn (hOrder === 1 ? 1 : -1);\n\t\t\treturn 0;\n\t\t});\n\n\t\t// Atualiza o header no state\n\t\tthis.setState({\n\t\t\theader: header,\n\t\t\tdata: data\n\t\t});\n\t}\n\n\tonScroll(){\n\t\tif(!this.scrollActive){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(!$(this.element).is(\":visible\")){\n\t\t\treturn true;\n\t\t}\n\n\t\tvar eScroll = this.elementScroll(); // Elemento que esta controlando o Scroll (window, ou div principal da grade)\n\t\tif(this.currentScroll === undefined || Math.abs(this.currentScroll - $(eScroll).scrollTop()) > 50){\n\t\t\tthis.currentScroll = $(eScroll).scrollTop();\n\t\t}else{\n\t\t\treturn true;\n\t\t}\n\n\t\tvar datagrid = this.element; // Elemento principal da grade (div)\n\t\tvar table = $(datagrid).children(\"table\"); // Tabela da grade\n\t\tvar thead = $(table).children(\"thead\"); // Header da grade\n\t\tvar tr = $(table).children(\"tbody\").children(); // Lista com todas as linhas da grade, inclusive o BlankSpace\n\t\tvar bsFirst = $(tr).first(); // BlankSpace superior\n\t\tvar bsLast = $(tr).last(); // BlankSpace inferior\n\t\tvar trFirst = $(bsFirst).next(); // Primeira linha da grade, ignorando o BlankSpace\n\t\tvar trLast = $(bsLast).prev(); // Ultima linha da grade, ignorando o BlankSpace\n\t\tvar tr20 = $(tr).eq(Math.floor(this.state.limit * 0.2)); // Linha de posicao equivalente a 20% do total de linhas\n\t\tvar tr80 = $(tr).eq(Math.floor(this.state.limit * 0.8)); // Linha de posicao equivalente a 80% do total de linhas\n\n\t\tvar hTop = ($(thead).position().top - $(eScroll).scrollTop()) * -1;\n\t\tif(hTop < 0){\n\t\t\thTop = 0;\n\t\t}\n\n\t\tvar limit = this.state.limit;\n\t\tvar offset = this.state.offset;\n\t\tvar count = this.state.data.length;\n\n\t\tthis.longScroll = false;\n\n\t\tif(offset > 0 && (this.elementIsVisibleByScroll(trFirst, eScroll) || this.elementIsVisibleByScroll(tr20, eScroll))){\n\t\t\toffset = offset - Math.floor(limit / 2);\n\t\t\tif(offset < 0){\n\t\t\t\toffset = 0;\n\t\t\t}\n\t\t}else if(offset + limit < count && (this.elementIsVisibleByScroll(trLast, eScroll) || this.elementIsVisibleByScroll(tr80, eScroll))){\n\t\t\toffset = offset + Math.floor(limit / 2);\n\t\t}else if((this.elementIsVisibleByScroll(bsFirst, eScroll) || this.elementIsVisibleByScroll(bsLast, eScroll)) && (!this.elementIsVisibleByScroll(trFirst, eScroll) && !this.elementIsVisibleByScroll(trLast, eScroll))){\n\t\t\tvar currScroll = null;\n\t\t\tif(eScroll === window){\n\t\t\t\tcurrScroll = ($(eScroll).scrollTop() - $(datagrid).offset().top) / $(datagrid).height();\n\t\t\t}else{\n\t\t\t\tcurrScroll = $(eScroll).scrollTop() / $(table).height();\n\t\t\t}\n\t\t\toffset = Math.round(this.state.data.length * currScroll);\n\t\t\tthis.longScroll = true;\n\t\t}\n\n\t\tif(offset > count - limit){\n\t\t\toffset = count - limit;\n\t\t}\n\t\tif(offset < 0){\n\t\t\toffset = 0;\n\t\t}\n\n\t\tif(offset !== this.state.offset){\n\t\t\tvar blankSpace = this.calcBlankSpace(offset);\n\n\t\t\tif(this.initialBlankSpace === undefined){\n\t\t\t\tthis.initialBlankSpace = blankSpace;\n\t\t\t\tthis.initialBlankSpace.height = blankSpace.top + blankSpace.bottom;\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\toffset: offset,\n\t\t\t\tblankSpace: blankSpace\n\t\t\t});\n\t\t}\n\t}\n\n\tcalcBlankSpace(offset){\n\t\toffset = (offset === undefined ? this.state.offset : offset);\n\n\t\tvar data = this.state.data;\n\t\tvar limit = this.state.limit;\n\n\t\tvar table = $(this.element).children(\".table\"); // Tabela da grade\n\t\tvar tr = $(table).children(\"tbody\").children(); // Lista com todas as linhas da grade, inclusive o BlankSpace\n\t\tvar bsFirst = $(tr).first(); // BlankSpace superior\n\t\tvar trFirst = $(bsFirst).next(); // Primeira linha da grade, ignorando o BlankSpace\n\t\tvar trHeight = $(trFirst).height() - 5;\n\n\t\tvar top = offset * trHeight;\n\t\tvar bottom = (data.length - offset - limit) * trHeight;\n\n\t\tif(this.longScroll && this.initialBlankSpace !== undefined){\n\t\t\tvar eScroll = this.elementScroll();\n\n\t\t\tvar rowsHeight = $(tr).not(\":first, :last\").map(function(){\n\t\t\t\treturn $(this).height();\n\t\t\t}).get().reduce(((a, b) => a + b), 0);\n\n\t\t\ttop = $(eScroll).scrollTop() - (trHeight * 10);\n\t\t\tbottom = $(table).height() - rowsHeight - top;\n\n\t\t\tif(top > this.initialBlankSpace.height){\n\t\t\t\ttop = this.initialBlankSpace.height;\n\t\t\t}\n\t\t\tif(bottom > this.initialBlankSpace.height){\n\t\t\t\tbottom = this.initialBlankSpace.height;\n\t\t\t}\n\t\t}\n\n\t\tif(top < 0){\n\t\t\ttop = 0;\n\t\t}\n\t\tif(bottom < 0){\n\t\t\tbottom = 0;\n\t\t}\n\n\t\treturn {\n\t\t\ttop: top,\n\t\t\tbottom: bottom\n\t\t};\n\t}\n\n\tupdateBlankSpace(){\n\t\tthis.setState({\n\t\t\tblankSpace: this.calcBlankSpace()\n\t\t});\n\t}\n\n\tupdateReceivedProps(header, data){\n\t\theader = (header === undefined ? this.state.header : header);\n\t\tdata = (data === undefined ? this.state.data : data);\n\n\t\t// Trata os dados do cabecalho\n\t\tfor(let i in header){\n\t\t\tlet cell = header[i];\n\n\t\t\tif(typeof cell === \"string\"){\n\t\t\t\tcell = {\n\t\t\t\t\t\"text\": cell\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcell = $.extend({\n\t\t\t\talign: \"left\",\n\t\t\t\tkey: i,\n\t\t\t\torder: 0,\n\t\t\t\ttext: \"\"\n\t\t\t}, cell);\n\n\t\t\theader[i] = cell;\n\t\t}\n\n\t\t// Trata os dados principais da grade\n\t\tvar key = 0;\n\t\tfor(let i in data){\n\t\t\tlet row = data[i];\n\n\t\t\tif($.isArray(row)){\n\t\t\t\trow = {\n\t\t\t\t\tdata: row\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tdata[i] = row;\n\n\t\t\tfor(let j in data[i].data){\n\t\t\t\tlet cell = data[i].data[j];\n\n\t\t\t\tif(typeof cell === \"string\"){\n\t\t\t\t\tcell = {\n\t\t\t\t\t\t\"text\": cell\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tcell = $.extend({\n\t\t\t\t\talign: \"left\",\n\t\t\t\t\tkey: key++,\n\t\t\t\t\ttext: \"\",\n\t\t\t\t\twidth: null\n\t\t\t\t}, cell);\n\n\t\t\t\tdata[i].data[j] = cell;\n\t\t\t}\n\t\t}\n\n\t\treturn {header: header, data: data};\n\t}\n\n\trender(){\n\t\tvar data = this.state.data.slice(this.state.offset, (this.state.offset + this.state.limit));\n\t\treturn (\n\t\t\t<div className=\"DataGrid\" style={{height: this.props.height}}>\n\t\t\t\t<table className={\"DataGridTable table table-striped table-hover \" + this.props.className}>\n\t\t\t\t\t<DataGridHead header={this.state.header} onClickHeadCell={this.onClickHeadCell} />\n\t\t\t\t\t<DataGridBody data={data} blankSpace={this.state.blankSpace} />\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass DataGridBody extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<tbody>\n\t\t\t\t<DataGridBlankSpace height={this.props.blankSpace.top} />\n\t\t\t\t\t{this.props.data.map(function(row, i){\n\t\t\t\t\t\treturn <DataGridBodyRow row={row} key={i} />\n\t\t\t\t\t})}\n\t\t\t\t<DataGridBlankSpace height={this.props.blankSpace.bottom} />\n\t\t\t</tbody>\n\t\t)\n\t}\n}\n\nclass DataGridBodyCell extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<td className={\"text-\" + this.props.cell.align} onClick={this.props.cell.onClick} style={{width: this.props.cell.width}}>{this.props.cell.text}</td>\n\t\t)\n\t}\n}\n\nclass DataGridBodyRow extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<tr onClick={this.props.row.onClick}>\n\t\t\t\t{this.props.row.data.map(function(cell, i){\n\t\t\t\t\treturn <DataGridBodyCell cell={cell} key={i} />\n\t\t\t\t})}\n\t\t\t</tr>\n\t\t)\n\t}\n}\n\nclass DataGridHead extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t{this.props.header.map((cell, i) => {\n\t\t\t\t\t\treturn <DataGridHeadCell cell={cell} onClick={this.props.onClickHeadCell} key={i} />\n\t\t\t\t\t})}\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t)\n\t}\n\n}\n\nclass DataGridHeadCell extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<th className={\"text-\"+this.props.cell.align + \" DataGridHeadCellOrder-\"+this.props.cell.order} onClick={this.props.onClick} cellkey={this.props.cell.key}>\n\t\t\t\t{this.props.cell.text}\n\t\t\t</th>\n\t\t)\n\t}\n}\n\nclass DataGridBlankSpace extends React.Component {\n\trender(){\n\t\tvar height = (this.props.height === undefined ? 0 : this.props.height);\n\n\t\treturn (\n\t\t\t<tr>\n\t\t\t\t<td style={{border: 0, height: height, padding: 0}}></td>\n\t\t\t</tr>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {SwatchesPicker} from \"react-color\";\nimport $ from \"jquery\";\n\nimport \"../css/ColorInput.css\";\n\nexport default class ColorInput extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpicker: false,\n\t\t\tvalue: props.value\n\t\t};\n\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.onClick = this.onClick.bind(this);\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tvalue: nextProps.value\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tdocument.addEventListener(\"click\", this.onDocumentClick);\n\t\tthis.element = ReactDOM.findDOMNode(this);\n\t}\n\n\tcomponentWillUnmount(){\n\t\tdocument.removeEventListener(\"click\", this.onDocumentClick);\n\t}\n\n\tonChange(color, event){\n\t\tevent.persist();\n\n\t\tthis.setState({\n\t\t\tpicker: false,\n\t\t\tvalue: color.hex\n\t\t}, () => {\n\t\t\tif(this.props.onChange){\n\t\t\t\tlet target = $(event.target).parents(\"[class*='-picker']\").first().prev().get(0);\n\t\t\t\tevent.target = target;\n\t\t\t\tthis.props.onChange(event);\n\t\t\t}\n\t\t});\n\t}\n\n\tonClick(event){\n\t\tthis.setState({\n\t\t\tpicker: true\n\t\t});\n\t\tevent.preventDefault();\n\t}\n\n\tonDocumentClick(event){\n\t\tif(this.state.picker){\n\t\t\tlet found = false;\n\t\t\t$(this.element).find(\"*\").each((i, element) => {\n\t\t\t\tif(event.target === element){\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(!found){\n\t\t\t\tthis.setState({\n\t\t\t\t\tpicker: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\trender(){\n\t\tlet props = Object.assign({}, this.props);\n\n\t\tdelete props.value;\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<input {...props} value={this.state.value} onClick={this.onClick} />\n\t\t\t\t<SwatchesPicker value={this.state.value} onChange={this.onChange} className={this.state.picker ? null : \"d-none\"} />\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport $ from \"jquery\";\n\nimport ReactSelect from \"react-select\";\n//import \"react-select/dist/react-select.css\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class Select extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\toptions: (props.options === undefined ? [] : props.options),\n\t\t\tvalue: (props.value === undefined ? \"\" : props.value)\n\t\t};\n\n\t\tthis.getDBOptions = this.getDBOptions.bind(this);\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.verifyComponentId = this.verifyComponentId.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.element = ReactDOM.findDOMNode(this);\n\t\tthis.verifyComponentId();\n\t\tthis.getDBOptions();\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.getDBOptions(nextProps);\n\n\t\tif(nextProps.value !== this.props.value){\n\t\t\tthis.setState({\n\t\t\t\tvalue: nextProps.value\n\t\t\t});\n\t\t}\n\t}\n\n\tgetDBOptions(props){\n\t\tprops = (props === undefined ? this.props : props);\n\n\t\tif(props.dbtable === undefined){\n\t\t\treturn true;\n\t\t}\n\n\t\tvar dbtable = props.dbtable;\n\t\tvar dbcolumn = props.dbcolumn;\n\t\tvar dbfilter = props.dbfilter;\n\t\tvar dbparent = props.dbparent;\n\n\t\tif(dbcolumn === undefined){\n\t\t\tdbcolumn = \"descricao\";\n\t\t}\n\t\tif(dbfilter === undefined && dbparent !== undefined){\n\t\t\tlet parent = document.getElementById(dbparent);\n\t\t\tdbfilter = \"id\" + $(parent).attr(\"dbtable\") + \"=\" + $(parent).val();\n\t\t}\n\n\t\tif(this.ajaxDBOptions !== null && this.ajaxDBOptions !== undefined){\n\t\t\tthis.ajaxDBOptions.abort();\n\t\t\tthis.ajaxDBOptions = null;\n\t\t}\n\n\t\tlet query = \"SELECT id\"+dbtable+\", \"+dbcolumn+\" FROM \"+dbtable+\" ORDER BY 2\";\n\n\t\tthis.props.Pool.query({text: query, rowMode: \"array\"}, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet options = [];\n\t\t\tfor(let i in res.rows){\n\t\t\t\tlet row = res.rows[i];\n\t\t\t\toptions.push({value: row[0], label: row[1]});\n\t\t\t}\n\t\t\tif(this.state.options !== options){\n\t\t\t\tthis.setState({\n\t\t\t\t\toptions: options\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tonChange(option){\n\t\tlet value = (option ? option.value : null);\n\t\tthis.setState({\n\t\t\tvalue: value\n\t\t});\n\n\t\tif(this.props.onChange){\n\t\t\tlet event = {target: {id: this.props.id, value: value}};\n\t\t\tthis.props.onChange(event);\n\t\t}\n\t}\n\n\tverifyComponentId(){\n\t\tif(this.props.id){\n\t\t\tlet input = $(\"[name='\" + this.props.id + \"']\");\n\t\t\tif(input.length > 0){\n\t\t\t\tinput.attr(\"id\", $(input).attr(\"name\"));\n\t\t\t}\n\t\t}\n\t}\n\n\trender(){\n\t\t// Captura as opcoes enviadas\n\t\tvar options = this.state.options;\n\n\t\t// Verifica se as opcoes estao no formato JSON e converte para array de JSON\n\t\tif(!Array.isArray(options)){\n\t\t\tvar optionsAux = [];\n\t\t\tfor(var value in options){\n\t\t\t\t// Estrutura padrao das opcoes do Select\n\t\t\t\toptionsAux.push({\n\t\t\t\t\tvalue: value,\n\t\t\t\t\tlabel: options[value]\n\t\t\t\t});\n\t\t\t}\n\t\t\toptions = optionsAux;\n\t\t}\n\n\t\t// Se nao foi passado um array como opcao, criar um array em branco\n\t\tif(!Array.isArray(options)){\n\t\t\toptions = [];\n\t\t}\n\n\t\treturn (\n\t\t\t<ReactSelect\n\t\t\t\tclearable={false}\n\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\tid={this.props.id}\n\t\t\t\tname={this.props.id}\n\t\t\t\tonChange={this.onChange}\n\t\t\t\tonInputChange={this.verifyComponentId}\n\t\t\t\toptions={options}\n\t\t\t\tplaceholder=\"\"\n\t\t\t\tsearchable={false}\n\t\t\t\tvalue={(this.state.value ? this.state.value : this.props.defaultValue)}\n\t\t\t/>\n\t\t);\n\t}\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport $ from \"jquery\";\n\nimport ColorInput from \"./ColorInput.js\";\nimport Select from \"./Select.js\";\n\nimport \"../css/FormControl.css\";\n\nexport default class FormControl extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onFocus = this.onFocus.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.element = ReactDOM.findDOMNode(this);\n\t}\n\n\tonFocus(){\n\t\tif(this.props.InformarValor){\n\t\t\tlet settings = this.props.InformarValor;\n\t\t\tif(settings.success === undefined){\n\t\t\t\tsettings.success = (valor) => {\n\t\t\t\t\t$(this.element).val(valor);\n\t\t\t\t\tif(this.props.onChange){\n\t\t\t\t\t\tlet event = {target: {id: this.props.id, value: valor}};\n\t\t\t\t\t\tthis.props.onChange(event);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\twindow.InformarValor.show(settings);\n\t\t}\n\t}\n\n\trender(){\n\t\tlet props = Object.assign({}, this.props);\n\n\t\tdelete props.InformarValor;\n\n\t\tlet value = props.value;\n\t\tif(value === null){\n\t\t\tvalue = \"\";\n\t\t}\n\n\t\t// Tratamento feito para para os modais de cadastro de produto e categoria\n\t\tif(value === undefined && props.id && props.id.substr(0, 5) === \"modal\"){\n\t\t\tvalue = \"\";\n\t\t}\n\n\t\tlet className = (props.className ? props.className.split(\" \") : []);\n\t\tclassName.push(\"form-control\");\n\n\t\tif(props.size){\n\t\t\tclassName.push(\"form-control-\" + props.size);\n\t\t}\n\n\t\tif(props.type === \"date\"){\n\t\t\tclassName.push(\"text-center\");\n\t\t}\n\n\t\tprops.className = className.join(\" \");\n\t\tprops.value = value;\n\n\t\tif(this.props.onFocus === undefined){\n\t\t\tprops.onFocus = this.onFocus;\n\t\t}\n\n\t\tswitch(props.type){\n\t\t\t// Se o componente for do tipo Checkbox\n\t\t\tcase \"checkbox\":\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"form-check\">\n\t\t\t\t\t\t<input type=\"checkbox\" id={this.props.id} className=\"form-check-input\" checked={value === \"S\"} defaultValue={this.props.defaultValue} disabled={this.props.disabled} onChange={this.props.onChange} onClick={this.props.onClick} />\n\t\t\t\t\t\t<label className=\"form-check-label\" htmlFor={this.props.id}>{this.props.label}</label>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\n\t\t\t// Se o componente for do tipo Color\n\t\t\tcase \"color\":\n\t\t\t\treturn (\n\t\t\t\t\t<ColorInput {...props} />\n\t\t\t\t)\n\n\t\t\t// Se o componente for do tipo Select\n\t\t\tcase \"select\":\n\t\t\t\tdelete props.type;\n\t\t\t\treturn (\n\t\t\t\t\t<Select {...props} />\n\t\t\t\t)\n\n\t\t\t// Se o componente for do tipo Select\n\t\t\tcase \"textarea\":\n\t\t\t\tdelete props.type;\n\t\t\t\treturn (\n\t\t\t\t\t<textarea {...props}></textarea>\n\t\t\t\t)\n\n\t\t\t// Se o componente for algum input padrao que nao necessita ser personalizado\n\t\t\tdefault:\n\t\t\t\treturn (\n\t\t\t\t\t<input {...props} />\n\t\t\t\t)\n\t\t}\n\t}\n}\n","import React from \"react\";\nimport \"../css/Label.css\";\n\nexport default class Label extends React.Component {\n\n\trender(){\n\t\treturn (\n\t\t\t<label {...this.props}>\n\t\t\t\t{this.props.children}\n\t\t\t</label>\n\t\t);\n\t}\n\n}\n","import React from \"react\";\nimport FormControl from \"./FormControl.js\";\nimport Label from \"./Label.js\";\nimport \"../css/FormGroup.css\";\n\nexport default class FormGroup extends React.Component {\n\n\trender(){\n\t\tlet props = Object.assign({}, this.props);\n\n\t\tlet className = [\"form-group\"];\n\t\tif(props.className){\n\t\t\tclassName.push(props.className);\n\t\t}\n\t\tif(props.warning){\n\t\t\tclassName.push(\"form-group-warning\");\n\t\t\tdelete props.warning;\n\t\t}\n\n\t\tif(props.InformarValor){\n\t\t\tif(props.InformarValor.title === undefined){\n\t\t\t\tprops.InformarValor.title = this.props.label;\n\t\t\t}\n\t\t}\n\n\t\tprops.className = props.inputClassName;\n\t\tdelete props.inputClassName;\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{[\"checkbox\"].indexOf(this.props.type) > -1 ? null : <Label htmlFor={this.props.id}>{this.props.label}</Label>}\n\t\t\t\t<FormControl {...props} />\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nexport default class Hr extends React.Component {\n\trender(){\n\t\treturn (\n\t\t\t<hr {...this.props} />\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport FormGroup from \"../com/FormGroup.js\";\nimport Hr from \"../com/Hr.js\";\nimport Modal from \"../com/Modal.js\";\nimport Row from \"../com/Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class ModalCategoria extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tshow: this.props.show,\n\t\t\tshowDiv: \"principal\",\n\t\t\ttitle: null\n\t\t};\n\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.changeDiv = this.changeDiv.bind(this);\n\t\tthis.changeTitle = this.changeTitle.bind(this);\n\t\tthis.excluir = this.excluir.bind(this);\n\t\tthis.gravar = this.gravar.bind(this);\n\t\tthis.limpar = this.limpar.bind(this);\n\t\tthis.onChangeNcm = this.onChangeNcm.bind(this);\n\t\tthis.onChangeInput = this.onChangeInput.bind(this);\n\t\tthis.onChangeSincTributacao = this.onChangeSincTributacao.bind(this);\n\t\tthis.sincronizarTributacao = this.sincronizarTributacao.bind(this);\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tcarregar(idcategoria, callback){\n\t\tlet query = [\n\t\t\t\"SELECT categoria.descricao, categoria.dthrcriacao, categoria.cor,\",\n\t\t\t\"  categoria.sinctributacao, ncm.codigoncm, categoria.origem,\",\n\t\t\t\"  categoria.cfop, categoria.csosn, categoria.aliqicms, \",\n\t\t\t\"  categoria.cstpis, categoria.aliqpis, categoria.cstcofins, \",\n\t\t\t\"  categoria.aliqcofins, categoria.codcontribsocial, categoria.cest\",\n\t\t\t\"FROM categoria\",\n\t\t\t\"LEFT JOIN ncm USING (idncm)\",\n\t\t\t\"WHERE categoria.idcategoria = $1\"\n\t\t].join(\" \");\n\n\t\tthis.props.Pool.query(query, [idcategoria], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(res.rows.length === 0){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Categoria não encontrada\",\n\t\t\t\t\ttext: \"A categoria selecionada não pôde ser encontrada.\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet state = {};\n\t\t\tlet row = res.rows[0];\n\n\t\t\tfor(let id in row){\n\t\t\t\tlet value = row[id];\n\t\t\t\tswitch(id){\n\t\t\t\t\tcase \"dthrcriacao\":\n\t\t\t\t\t\tvalue = value.toLocaleString();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tvalue = value.format(2, \",\", \".\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tstate[\"input_\" + id] = value;\n\t\t\t}\n\t\t\tthis.setState(state);\n\n\t\t\tif(typeof callback === \"function\"){\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t}\n\n\tchangeDiv(name){\n\t\tthis.setState({\n\t\t\tshowDiv: name\n\t\t});\n\t}\n\n\tchangeTitle(props){\n\t\tif(props.idcategoria){\n\t\t\tprops.Pool.query(\"SELECT descricao FROM categoria WHERE idcategoria = $1\", [props.idcategoria], (err, res) => {\n\t\t\t\tif(err){\n\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\ttitle: \"Alterando categoria: \" + res.rows[0].descricao\n\t\t\t\t});\n\t\t\t});\n\t\t}else{\n\t\t\tthis.setState({\n\t\t\t\ttitle: \"Criando nova categoria\"\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tif(!nextProps.show){\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.changeTitle(nextProps);\n\n\t\tlet updateShowState = () => {\n\t\t\tthis.setState({\n\t\t\t\tshow: nextProps.show\n\t\t\t});\n\t\t};\n\n\t\tif(nextProps.idcategoria){\n\t\t\tthis.carregar(nextProps.idcategoria, updateShowState);\n\t\t}else{\n\t\t\tthis.limpar();\n\t\t\tupdateShowState();\n\t\t}\n\t}\n\n\texcluir(){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Excluír categoria\",\n\t\t\ttext: \"Tem certeza que deseja excluír a categoria <b>\" + this.state.input_descricao + \"</b>?\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tthis.props.Pool.query(\"DELETE FROM categoria WHERE idcategoria = $1\", [this.props.idcategoria], (err, res) => {\n\t\t\t\t\t\t\tif(err){\n\t\t\t\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tshow: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\twindow.FastMessage.show(\"Categoria excluída com sucesso.\");\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Não\",\n\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t})\n\t}\n\n\tasync gravar(){\n\t\tlet query = null;\n\n\t\tlet columns = [];\n\t\tlet values = [];\n\t\tfor(let name in this.state){\n\t\t\tif(name.substr(0, 6) === \"input_\"){\n\t\t\t\tlet name2 = name.replace(\"input_\", \"\");\n\t\t\t\tlet value = this.state[name];\n\n\t\t\t\tif(name2 === \"codigoncm\" && value){\n\t\t\t\t\ttry{\n\t\t\t\t\t\tlet res = await this.props.Pool.query(\"SELECT idncm FROM ncm WHERE codigoncm = $1\", [value]);\n\t\t\t\t\t\tif(res.rows.length === 0){\n\t\t\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\t\t\ttitle: \"NCM inexistente\",\n\t\t\t\t\t\t\t\ttext: \"O código de NCM \" + value + \" não pôde ser encontrado.<br>Verifique se foi informado corretamente.\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tname2 = \"idncm\";\n\t\t\t\t\t\tvalue = res.rows[0].idncm;\n\t\t\t\t\t}catch(err) {\n\t\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif([\"idcategoria\", \"dthrcriacao\"].indexOf(name2) > -1){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tswitch(name2){\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tif(value){\n\t\t\t\t\t\t\tvalue = value.toFloat();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcolumns.push(name2);\n\t\t\t\tvalues.push(value);\n\t\t\t}\n\t\t}\n\n\t\tif(this.props.idcategoria){\n\t\t\tlet num = 1;\n\t\t\tlet sets = [];\n\t\t\tfor(let i in columns){\n\t\t\t\tsets.push(columns[i] + \" = $\" + num++);\n\t\t\t}\n\t\t\tquery = \"UPDATE categoria SET \" + sets.join(\", \") + \" WHERE idcategoria = \" + this.props.idcategoria;\n\t\t}else{\n\t\t\tlet sets = [];\n\t\t\tfor(let i = 0; i < columns.length; i++){\n\t\t\t\tsets.push(\"$\" + (i + 1));\n\t\t\t}\n\t\t\tquery = \"INSERT INTO categoria (\" + columns.join(\", \") + \") VALUES (\" + sets.join(\", \") + \")\";\n\t\t}\n\n\t\tthis.props.Pool.query(query, values, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.FastMessage.show(\"Categoria gravada com sucesso.\");\n\t\t});\n\t}\n\n\tlimpar(){\n\t\tlet state = {};\n\t\tfor(let name in this.state){\n\t\t\tif(name.substr(0, 6) === \"input_\"){\n\t\t\t\tstate[name] =  null;\n\t\t\t}\n\t\t}\n\t\tthis.setState(state);\n\t}\n\n\tonChangeInput(event, callback){\n\t\tlet element = event.target;\n\t\tlet id = element.id.replace(\"modalcategoria-\", \"\");\n\t\tlet value = element.value;\n\t\tif(element.type === \"checkbox\"){\n\t\t\tvalue = (element.checked ? \"S\" : \"N\");\n\t\t}\n\n\t\tthis.setState({\n\t\t\t[\"input_\" + id]: value\n\t    }, callback);\n\t}\n\n\tonChangeNcm(event){\n\t\tthis.onChangeInput(event, () => {\n\t\t\tthis.sincronizarTributacao();\n\t\t});\n\t}\n\n\tonChangeSincTributacao(event){\n\t\tthis.onChangeInput(event, () => {\n\t\t\tthis.sincronizarTributacao();\n\t\t});\n\t}\n\n\tsincronizarTributacao(){\n\t\tif(this.state.input_sinctributacao !== \"S\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tlet query = [\n\t\t\t\"SELECT origem, cfop, csosn, aliqicms, cstpis, aliqpis, \",\n\t\t\t\"  cstcofins, aliqcofins, codcontribsocial, cest\",\n\t\t\t\"FROM ncm\",\n\t\t\t\"WHERE codigoncm = $1\"\n\t\t].join(\" \");\n\n\t\tthis.props.Pool.query(query, [this.state.input_codigoncm], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(res.rows.length === 0){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"NCM não encontrado\",\n\t\t\t\t\ttext: \"O NCM informado na categoria não pôde ser encontrado.\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet state = {};\n\t\t\tlet row = res.rows[0];\n\t\t\tfor(let id in row){\n\t\t\t\tlet value = row[id];\n\t\t\t\tswitch(id){\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tvalue = value.format(2, \",\", \".\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tstate[\"input_\" + id] = value;\n\t\t\t}\n\t\t\tthis.setState(state);\n\t\t});\n\t}\n\n\tshouldComponentUpdate(nextProps){\n\t\treturn nextProps.show;\n\t}\n\n\trender(){\n\t\tlet origemOptions = {\n\t\t\t\"0\": \"0 - Nacional, exceto as indicadas nos códigos 3, 4, 5 e 8\",\n\t\t\t\"1\": \"1 - Estrangeira - Importação direta, exceto a indicada no código 6\",\n\t\t\t\"2\": \"2 - Estrangeira - Adquirida no mercado interno, exceto a indicada no código 7\",\n\t\t\t\"3\": \"3 - Nacional, mercadoria ou bem com Conteúdo de Importação superior a 40% e inferior ou igual a 70%\",\n\t\t\t\"4\": \"4 - Nacional, cuja produção tenha sido feita em conformidade com os processos produtivos básicos de que tratam o Decreto-Lei nº 288/67, e as Leis nºs 8.248/91, 8.387/91, 10.176/01 e 11.484/ 07\",\n\t\t\t\"5\": \"5 - Nacional, mercadoria ou bem com Conteúdo de Importação inferior ou igual a 40%\",\n\t\t\t\"6\": \"6 - Estrangeira - Importação direta, sem similar nacional, constante em lista da Resolução CAMEX nº 79/2012 e gás natural\",\n\t\t\t\"7\": \"7 - Estrangeira - Adquirida no mercado interno, sem similar nacional, constante em lista da Resolução CAMEX nº 79/2012 e gás natural\",\n\t\t\t\"8\": \"8 - Nacional, mercadoria ou bem com Conteúdo de Importação superior a 70%\"\n\t\t};\n\n\t\treturn (\n\t\t\t<Modal title={this.state.title} size=\"lg\" show={this.state.show} beforeClose={this.props.beforeClose} afterClose={this.props.afterClose} closeOnOutClick={false}>\n\t\t\t\t<Row>\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-descricao\" className=\"col-5\" label=\"Descrição\" value={this.state.input_descricao} onChange={this.onChangeInput} />\n\t\t\t\t\t<FormGroup type=\"color\" id=\"modalcategoria-cor\" className=\"col-3\" label=\"Cor representativa\" value={this.state.input_cor} onChange={this.onChangeInput} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-dthrcriacao\" className=\"col-4\" label=\"Criado em\" readOnly={true} value={this.state.input_dthrcriacao} onChange={this.onChangeInput} disabled={true} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-codigoncm\" label=\"NCM da categoria\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"9999.99.99\"}} value={this.state.input_codigoncm} onChange={this.onChangeNcm} />\n\t\t\t\t\t<FormGroup type=\"checkbox\" id=\"modalcategoria-sinctributacao\" label=\"Usar as mesmas tributações da categoria\" className=\"col-9\" value={this.state.input_sinctributacao} onChange={this.onChangeSincTributacao} />\n\t\t\t\t\t<FormGroup type=\"select\" id=\"modalcategoria-origem\" className=\"col-6\" label=\"Origem do categoria\" options={origemOptions} value={this.state.input_origem} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-cfop\" label=\"CFOP\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"9.999\"}} value={this.state.input_cfop} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"select\" id=\"modalcategoria-csosn\" className=\"col-3\" inputClassName=\"text-center\" label=\"CSOSN\" options={{\"102\": \"102\", \"300\": \"300\", \"400\": \"400\", \"500\": \"500\"}} value={this.state.input_csosn} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-aliqicms\" label=\"Alíquota de ICMS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqicms} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-cstpis\" label=\"CST do PIS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_cstpis} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-aliqpis\" label=\"Alíquota de PIS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqpis} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-cstcofins\" label=\"CST do Cofins\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_cstcofins} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-aliqcofins\" label=\"Alíquota de Cofins\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqcofins} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-codcontribsocial\" label=\"Contribuição social\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_codcontribsocial} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t<FormGroup type=\"text\" id=\"modalcategoria-cest\" label=\"CEST\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99.999.99\"}} value={this.state.input_cest} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t</Row>\n\t\t\t\t<Hr className=\"mt-0\" />\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Button text=\"Excluír\" icon=\"bin\" color=\"red\" onClick={this.excluir} className={this.props.idcategoria ? \"\" : \"d-none\"} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\" className=\"text-right\">\n\t\t\t\t\t\t<Button text=\"Cancelar\" icon=\"undo\" color=\"red\" onClick={this.cancelar} />\n\t\t\t\t\t\t<Button text=\"Gravar categoria\" icon=\"thumbs-up\" color=\"green\" className=\"ml-2\" onClick={this.gravar} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport \"../css/Title.css\";\n\nexport default class Title extends React.Component {\n\trender(){\n\t\tlet text = (this.props.text !== undefined ? this.props.text : this.props.children);\n\t\tlet model = (this.props.model !== undefined ? this.props.model : 1);\n\n\t\treturn (\n\t\t\t<h1 className={\"title-model-\" + model}>\n\t\t\t\t{text}\n\t\t\t</h1>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport {Redirect} from \"react-router\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport DataGrid from \"../com/DataGrid.js\";\nimport FormControl from \"../com/FormControl.js\";\nimport Icon from \"../com/Icon.js\";\nimport ModalCategoria from \"../com/ModalCategoria.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/Categoria.css\";\n\nexport default class Categoria extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdataGrid: [],\n\t\t\tpesquisa: \"\",\n\t\t\tidcategoria: null,\n\t\t\tshowModalCategoria: false,\n\t\t\tredirectToProduto: false\n\t\t};\n\n\t\tthis.beforeCloseModal = this.beforeCloseModal.bind(this);\n\t\tthis.loadDataGrid = this.loadDataGrid.bind(this);\n\t\tthis.novaCategoria = this.novaCategoria.bind(this);\n\t\tthis.onChangePesquisa = this.onChangePesquisa.bind(this);\n\t\tthis.onClickBtnProduto = this.onClickBtnProduto.bind(this);\n\t\tthis.onKeyUpPesquisa = this.onKeyUpPesquisa.bind(this);\n\t\tthis.pesquisaLimpar = this.pesquisaLimpar.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tbeforeCloseModal(){\n\t\tthis.setState({\n\t\t\tshowModalCategoria: false\n\t\t}, () => {\n\t\t\tthis.loadDataGrid();\n\t\t});\n\t}\n\n\tcarregarCategoria(idcategoria){\n\t\tthis.setState({\n\t\t\tshowModalCategoria: true,\n\t\t\tidcategoria: idcategoria\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.loadDataGrid();\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.Pool.end();\n\t}\n\n\tloadDataGrid(){\n\t\tlet query = [\n\t\t\t\"SELECT categoria.idcategoria, categoria.descricao, \",\n\t\t\t\"  ncm.codigoncm AS codigoncm, categoria.dthrcriacao,\",\n\t\t\t\"  (SELECT COUNT(idproduto) FROM produto WHERE idcategoria = categoria.idcategoria) AS produtos\",\n\t\t\t\"FROM categoria\",\n\t\t\t\"LEFT JOIN ncm USING (idncm)\",\n\t\t\t\"WHERE categoria.descricao ILIKE '%'||$1||'%'\",\n\t\t\t\"ORDER BY categoria.descricao\"\n\t\t].join(\" \");\n\n\t\tthis.Pool.query(query, [this.state.pesquisa], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tlet data = [];\n\t\t\t\tfor(let i in res.rows){\n\t\t\t\t\tlet row = res.rows[i];\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{text: row.descricao, align: \"left\"},\n\t\t\t\t\t\t\t{text: row.codigoncm, align: \"center\"},\n\t\t\t\t\t\t\t{text: row.produtos, align: \"center\"},\n\t\t\t\t\t\t\t{text: row.dthrcriacao.toLocaleString(), align: \"center\"}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\tthis.carregarCategoria(row.idcategoria);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tdataGrid: data\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tnovaCategoria(){\n\t\tthis.setState({\n\t\t\tshowModalCategoria: true,\n\t\t\tidcategoria: null\n\t\t});\n\t}\n\n\tonChangePesquisa(event){\n\t\tthis.setState({\n\t\t\tpesquisa: event.target.value\n\t\t});\n\t}\n\n\tonClickBtnProduto(){\n\t\tthis.setState({\n\t\t\tredirectToProduto: true\n\t\t});\n\t}\n\n\tonKeyUpPesquisa(event){\n\t\tif(event.keyCode === 13){\n\t\t\tthis.loadDataGrid();\n\t\t}\n\t}\n\n\tpesquisaLimpar(){\n\t\tthis.setState({\n\t\t\tpesquisa: \"\"\n\t\t}, () => {\n\t\t\tthis.loadDataGrid();\n\t\t});\n\t}\n\n\trender(){\n\t\tif(this.state.redirectToProduto){\n\t\t\treturn <Redirect to=\"/produto\" />\n\t\t}\n\n\t\tlet dataGridHeader = [\n\t\t\t{text: \"Descrição\", align: \"left\"},\n\t\t\t{text: \"NCM\", align: \"center\"},\n\t\t\t{text: \"Produtos\", align: \"center\"},\n\t\t\t{text: \"Criado em\", align: \"center\"}\n\t\t];\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title model=\"2\">Cadastro de <b>Categorias</b></Title>\n\t\t\t\t<Row className=\"mb-4\">\n\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t<FormControl type=\"search\" id=\"pesquisa\" value={this.state.pesquisa} placeholder=\"Pesquise uma categoria...\" onKeyUp={this.onKeyUpPesquisa} onChange={this.onChangePesquisa} />\n\t\t\t\t\t\t<Icon name=\"cross\" id=\"pesquisa-limpar\" onClick={this.pesquisaLimpar} className={this.state.pesquisa.length > 0 ? null : \"d-none\"} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"2\" className=\"pl-0\">\n\t\t\t\t\t\t<Button text=\"Buscar\" icon=\"search\" color=\"green\" onClick={this.loadDataGrid} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\" className=\"text-right\">\n\t\t\t\t\t\t<Button text=\"Produtos\" icon=\"layers\" color=\"blue\" className=\"mr-3\" onClick={this.onClickBtnProduto} />\n\t\t\t\t\t\t<Button text=\"Nova categoria\" icon=\"plus\" color=\"green\" onClick={this.novaCategoria} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<DataGrid header={dataGridHeader} data={this.state.dataGrid} />\n\t\t\t\t<ModalCategoria Pool={this.Pool} show={this.state.showModalCategoria} idcategoria={this.state.idcategoria} beforeClose={this.beforeCloseModal} />\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import ftp from \"ftp\";\nimport childProcess from \"child_process\";\nimport { applicationDirectory, defaultMessageBoxError, valorParametro } from \"../def/function.js\";\n\nconst fs = window.require(\"fs\");\nconst electron = window.require(\"electron\");\n\nexport default class Atualizacao {\n\n\tconstructor(Pool){\n\t\tthis.Pool = Pool;\n\n\t\tthis.atualizarAplicativoParcial = this.atualizarAplicativoParcial.bind(this);\n\t\tthis.atualizarBancoDeDados = this.atualizarBancoDeDados.bind(this);\n\t\tthis.baixarAplicativoParcial = this.baixarAplicativoParcial.bind(this);\n\t\tthis.verificarAtualizacao = this.verificarAtualizacao.bind(this);\n\n\t\tthis.fs = fs;\n\t}\n\n\tasync atualizarAplicativoParcial(callBack){\n\t\tthis.baixarAplicativoParcial(async (err) => {\n\t\t\tif(err) return callBack(err);\n\t\t\tawait this.atualizarBancoDeDados((err) => {\n\t\t\t\tif(err) return callBack(err);\n\n\t\t\t\t// Sucesso\n\t\t\t\tcallBack();\n\t\t\t});\n\t\t});\n\t}\n\n\tasync atualizarBancoDeDados(callBack){\n\t\tif(this.ftp === undefined){\n\t\t\tthis.ftp = ftp;\n\t\t}\n\n\t\t// Funcao usada para ler um arquivo no FTP sem necessitar de callback\n\t\tlet ftpReadSync = async (client, filename) => {\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tclient.get(filename, false, (err, stream) => {\n\t\t\t\t\tif(err) throw new Error(err);\n\n\t\t\t\t\tlet chunks = [];\n\t\t\t\t\tstream.on(\"data\", (chunk) => {\n\t\t\t\t\t\tchunks.push(chunk.toString());\n\t\t\t\t\t}).on(\"end\", () => {\n\t\t\t\t\t\tresolve(chunks.join(\"\"));\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\t// Verifica ultima instrucao executada\n\t\tlet paramAtualizacaoInstrucaoSQL = parseInt(await valorParametro(this.Pool, \"ATUALIZACAO\", \"INSTRUCAOSQL\"), 10);\n\n\t\ttry{\n\t\t\t// Conecta no servidor FTP\n\t\t\tlet client = new this.ftp();\n\t\t\tclient.on(\"ready\", () => {\n\t\t\t\tclient.list(\"/sql\", false, async (err, list) => {\n\t\t\t\t\tif(err) return callBack(err);\n\n\t\t\t\t\t// Verifica quais instrucoes devem ser executadas\n\t\t\t\t\tlet arrArquivoSQL = [];\n\t\t\t\t\tfor(let file of list){\n\t\t\t\t\t\tlet numeroInstrucaoSQL = parseInt(file.name.replace(\".sql\", \"\"), 10);\n\t\t\t\t\t\tif(numeroInstrucaoSQL > paramAtualizacaoInstrucaoSQL){\n\t\t\t\t\t\t\tarrArquivoSQL.push(file.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tarrArquivoSQL.sort();\n\n\t\t\t\t\t// Abre os arquivos e atualiza o banco de dados\n\t\t\t\t\ttry{\n\t\t\t\t\t\tfor(let i in arrArquivoSQL){\n\t\t\t\t\t\t\tlet arquivoSQL = arrArquivoSQL[i];\n\t\t\t\t\t\t\tlet instrucaoSQL = await ftpReadSync(client, \"/sql/\" + arquivoSQL);\n\t\t\t\t\t\t\tconsole.log(\"Executar SQL: \\n\"+instrucaoSQL);\n\t\t\t\t\t\t\tawait this.Pool.query(instrucaoSQL);\n\t\t\t\t\t\t\tconsole.log(\"SQL Finalizada\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcallBack();\n\t\t\t\t\t}catch(err){\n\t\t\t\t\t\tconsole.log(\"Erro ao atualizar BD: \" + err.message);\n\t\t\t\t\t\tcallBack(err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).connect({\n\t\t\t\thost: \"websac.net\",\n\t\t\t\tport: \"21\",\n\t\t\t\tuser: \"satflex-update\",\n\t\t\t\tpassword: \"automacao\"\n\t\t\t});\n\t\t}catch(err){\n\t\t\tcallBack(err);\n\t\t}\n\t}\n\n\tbaixarAplicativoParcial(callBack){\n\t\tif(window.__ignoreAppUpdate === true){\n\t\t\treturn callBack();\n\t\t}\n\n\t\tif(this.childProcess === undefined){\n\t\t\tthis.childProcess = childProcess;\n\t\t}\n\n\t\tthis.childProcess.exec(\"git --version\", [], (err) => {\n\t\t\tif(err) return callBack(new Error(\"git-not-found\"));\n\n\t\t\tlet gitDir = applicationDirectory() + \"/.git\";\n\t\t\tconsole.log(\"Diretório .git: \" + gitDir);\n\n\t\t\ttry{\n\t\t\t\tthis.childProcess.execSync(\"git config --global git.user \\\"satflex@controlware.com.br\\\"\");\n\t\t\t}catch(err){\n\t\t\t\treturn callBack(err);\n\t\t\t}\n\n\t\t\tlet spawn = this.childProcess.spawn(\"cd \\\"\" + applicationDirectory() + \"\\\" && git pull\", {shell: true});\n\t\t\tspawn.stdout.on(\"data\", (data) => {\n\t\t\t\tconsole.log(\"stdout: \" + data.toString());\n\t\t\t});\n\t\t\tspawn.stderr.on(\"data\", (data) => {\n\t\t\t\tconsole.log(\"stderr: \" + data.toString());\n\t\t\t});\n\t\t\tspawn.on(\"close\", (data) => {\n\t\t\t\tconsole.log(\"exit: \" + data.toString());\n\t\t\t\tcallBack();\n\t\t\t});\n\t\t\t/*\n\t\t\tthis.childProcess.exec(commands.join(\" && \"), [], (err) => {\n\t\t\t\tif(err){\n\t\t\t\t\tcallBack(err);\n\t\t\t\t}else{\n\t\t\t\t\tcallBack();\n\t\t\t\t}\n\t\t\t});\n\t\t\t*/\n\t\t});\n\t}\n\n\tbaixarGit(){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Git não está instalado\",\n\t\t\ttext: \"Para atualizar o SAT-Flex, é necessário que o Git esteja instalado.\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Baixar o Git\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\ticon: \"github\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tlet shell = electron.shell;\n\t\t\t\t\t\tshell.openExternal(\"ftp://instalacao:123@websac.net/SATFlex/Git-2.18.0-32-bit.exe\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Mais tarde...\",\n\t\t\t\t\tcolor: \"blue\",\n\t\t\t\t\ticon: \"undo\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tversaoAtual(){\n\t\tlet fileName = applicationDirectory() + \"/package.json\";\n\t\treturn window.require(fileName).version;\n\t}\n\n\tverificarAtualizacao(){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Atualização do SAT-Flex\",\n\t\t\ttext: \"Deseja iniciar a atualização do SAT-Flex agora?<br>Isso pode levar alguns minutos.\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\twindow.Loading.show();\n\t\t\t\t\t\tconsole.log(\"Inicio da atualização: \" + new Date().toLocaleString());\n\t\t\t\t\t\tthis.atualizarAplicativoParcial((err) => {\n\t\t\t\t\t\t\tconsole.log(\"Fim da atualização: \" + new Date().toLocaleString());\n\t\t\t\t\t\t\twindow.Loading.hide();\n\n\t\t\t\t\t\t\tif(err){\n\t\t\t\t\t\t\t\tif(err.message === \"git-not-found\"){\n\t\t\t\t\t\t\t\t\tthis.baixarGit();\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\t\t\ttitle: \"Atualizado com sucesso!\",\n\t\t\t\t\t\t\t\ttext: \"O seu SAT-Flex foi atualizado com sucesso!<br>A aplicação será reinciada.\",\n\t\t\t\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\t\t\t\ttext: \"Ok\",\n\t\t\t\t\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\tif(this.electron === undefined){\n\t\t\t\t\t\t\t\t\t\t\tthis.electron = electron;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tlet app = this.electron.remote.app;\n\t\t\t\t\t\t\t\t\t\tapp.relaunch();\n\t\t\t\t\t\t\t\t\t\tapp.exit();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Não\",\n\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n}\n","import React from \"react\";\nimport {Redirect} from \"react-router\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport Icon from \"../com/Icon.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport Atualizacao from \"../com/Atualizacao.js\";\n\nimport {serialNumber} from \"../def/function.js\";\n\nimport \"../css/Configuracoes.css\";\n\nexport default class Configuracoes extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tredirect: null,\n\t\t\tserialnumber: null,\n\t\t\tversaoAtual: null\n\t\t};\n\n\t\tthis.verificarAtualizacao = this.verificarAtualizacao.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t\tthis.Atualizacao = new Atualizacao(this.Pool);\n\t}\n\n\tcomponentDidMount(){\n\t\t(async () => {\n\t\t\tthis.setState({\n\t\t\t\tserialnumber: await serialNumber()\n\t\t\t});\n\t\t})();\n\t}\n\n\tverificarAtualizacao(){\n\t\tthis.Atualizacao.verificarAtualizacao();\n\t}\n\n\trender(){\n\t\tif(this.state.redirect){\n\t\t\treturn <Redirect to={this.state.redirect} />\n\t\t}\n\n\t\tlet versaoAtual = this.Atualizacao.versaoAtual();\n\n\t\tlet serialnumber = null;\n\t\tif(this.state.serialnumber){\n\t\t\tserialnumber = <b>{this.state.serialnumber}</b>;\n\t\t}else{\n\t\t\tserialnumber = <Icon name=\"spinner3\" className=\"ani-spin\" />\n\t\t}\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Configurações</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"8\" offset=\"2\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text={\"Verificar atualização<br><small>versão atual: \"+versaoAtual+\"</small>\"} icon=\"safari\" size=\"xxl\" block={true} onClick={this.verificarAtualizacao} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text=\"Parâmetros<br>do sistema\" icon=\"widgets\" size=\"xxl\" block={true} onClick={() => {this.setState({redirect: \"/parametro\"})}} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text=\"Ferramentas\" icon=\"tools\" size=\"xxl\" block={true} onClick={() => {this.setState({redirect: \"/ferramentas\"})}} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<div className=\"serialnumber\">\n\t\t\t\t\t<small>Número de série</small><br />\n\t\t\t\t\t{serialnumber}\n\t\t\t\t</div>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import nodemailer from \"nodemailer\";\n\nexport default class Email {\n\n\tconstructor(){\n\t\tthis.nodemailer = nodemailer;\n\n\t\tthis._anexos = [];\n\t\tthis._destinatario = null;\n\t\tthis._titulo = null;\n\t\tthis._remetente = null;\n\t}\n\n\tanexo(filename){\n\t\tthis._anexos.push({\n\t\t\tfilename: filename.split(\"/\").reverse()[0],\n\t\t\tpath: filename,\n\t\t\tcid: String(Math.random())\n\t\t});\n\t}\n\n\tcorpo(corpo){\n\t\tthis._corpo = corpo;\n\t}\n\n\tdestinatario(destinatario){\n\t\tif(Array.isArray(destinatario)){\n\t\t\tdestinatario = destinatario.join(\", \");\n\t\t}\n\t\tthis._destinatario = destinatario;\n\t}\n\n\tenviar(success, fail){\n\t\t/*\n\t\tlet transport = this.nodemailer.createTransport({\n\t\t\thost: \"smtplw.com.br\",\n\t\t\tport: 587,\n\t\t\tsecure: false,\n\t\t\tauth: {\n\t\t\t\tuser: \"controlwareemail\",\n\t\t\t\tpass: \"alphadata1987\"\n\t\t\t},\n\t\t\ttls: {\n\t\t\t\trejectUnauthorized: false\n\t\t\t}\n\t\t});\n\t\t*/\n\n\t\tlet transport = this.nodemailer.createTransport({\n\t\t\thost: \"smtp-relay.sendinblue.com\",\n\t\t\tport: 587,\n\t\t\tsecure: false,\n\t\t\tauth: {\n\t\t\t\tuser: \"murilo@controlware.com.br\",\n\t\t\t\tpass: \"2xhH64OnTwBPYvKF\"\n\t\t\t},\n\t\t\ttls: {\n\t\t\t\trejectUnauthorized: false\n\t\t\t}\n\t\t});\n\n\t\tlet message = {\n\t\t\tfrom: '\"'+this._remetente+'\" <satflex@controlware.com.br>',\n\t\t\tto: this._destinatario,\n\t\t\tsubject: this._titulo,\n\t\t\thtml: this._corpo,\n\t\t\tattachments: this._anexos\n\t\t};\n\n\t\ttransport.sendMail(message, (err, info) => {\n\t\t\tif(err){\n\t\t\t\tfail(err);\n\t\t\t\treturn err;\n\t\t\t}\n\t\t\tsuccess();\n\t\t\treturn true;\n\t\t});\n\t}\n\n\tremetente(remetente){\n\t\tthis._remetente = remetente;\n\t}\n\n\ttitulo(titulo){\n\t\tthis._titulo = titulo;\n\t}\n\n}\n","import React from \"react\";\nimport \"../css/SubTitle.css\";\n\nexport default class SubTitle extends React.Component {\n\trender(){\n\t\tlet text = (this.props.text !== undefined ? this.props.text : this.props.children);\n\t\tlet model = (this.props.model !== undefined ? this.props.model : 1);\n\n\t\treturn (\n\t\t\t<h3 className={\"subtitle-model-\" + model}>\n\t\t\t\t{text}\n\t\t\t</h3>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport nodeZip from \"node-zip\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport Email from \"../com/Email.js\";\nimport FormGroup from \"../com/FormGroup.js\";\nimport Row from \"../com/Row.js\";\nimport SubTitle from \"../com/SubTitle.js\";\nimport Title from \"../com/Title.js\";\n\nimport {valorParametro, writeTemporary} from \"./../def/function.js\";\n\nexport default class Contador extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.atualizarEmailContador = this.atualizarEmailContador.bind(this);\n\t\tthis.carregarDocumentos = this.carregarDocumentos.bind(this);\n\t\tthis.enviarEmail = this.enviarEmail.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tasync atualizarEmailContador(){\n\t\tawait this.Pool.query(\"UPDATE parametro SET valor = $1 WHERE grupo = $2 AND nome = $3\", [$(\"#email\").val(), \"CONTADOR\", \"EMAIL\"]);\n\t}\n\n\tasync carregarDocumentos(){\n\t\tlet query = [\n\t\t\t\"SELECT chave, xml, chavecanc, xmlcanc\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE xml IS NOT NULL\",\n\t\t\t\"  AND chave IS NOT NULL\",\n\t\t\t\"  AND dthrcriacao::DATE BETWEEN $1 AND $2\",\n\t\t\t\"ORDER BY dthrcriacao\"\n\t\t].join(\" \");\n\t\tlet res = await this.Pool.query(query, [$(\"#dtinicial\").val(), $(\"#dtfinal\").val()]);\n\t\treturn res.rows;\n\t}\n\n\tcarregarEmailContador(){\n\t\tvalorParametro(this.Pool, \"CONTADOR\", \"EMAIL\", (valor) => {\n\t\t\t$(\"#email\").val(valor);\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarEmailContador();\n\t}\n\n\tasync enviarEmail(){\n\t\tlet destinatario = $(\"#email\").val();\n\t\tlet dtinicial = $(\"#dtinicial\").val();\n\t\tlet dtfinal = $(\"#dtfinal\").val();\n\n\t\t// Verifica se os campos foram preenchidos\n\t\tif(destinatario.length === 0){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Informe o e-mail do contador antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\tif(dtinicial.length === 0){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Informe a data inicial antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\tif(dtfinal.length === 0){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Informe a data final antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\t// Abre o loading\n\t\twindow.Loading.show();\n\n\t\t// Carrega o nome fantasia do cliente\n\t\tlet remetente = await valorParametro(this.Pool, \"EMITENTE\", \"NOMEFANTASIA\");\n\n\t\t// Reformata as datas de 'Y-m-d' para 'd/m/Y'\n\t\tdtinicial = dtinicial.split(\"-\").reverse().join(\"/\");\n\t\tdtfinal = dtfinal.split(\"-\").reverse().join(\"/\");\n\n\t\t// Atualiza o email do contador\n\t\tawait this.atualizarEmailContador();\n\n\t\t// Carrega os documentos\n\t\tlet documentos = await this.carregarDocumentos();\n\n\t\t// Verifica se existe algum documento para ser enviado\n\t\tif(documentos.length === 0){\n\t\t\twindow.Loading.hide();\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Nenhum documento fiscal foi encontrado no período especificado.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\t// Cria o arquivo ZIP\n\t\tlet zip = new nodeZip();\n\t\tdocumentos.forEach((documento) => {\n\t\t\tif(documento.xml){\n\t\t\t\tzip.file(documento.chave + \".xml\", documento.xml);\n\t\t\t}\n\t\t\tif(documento.xmlcanc){\n\t\t\t\tzip.file(documento.chavecanc + \".xml\", documento.xmlcanc);\n\t\t\t}\n\t\t});\n\t\tlet zippedData = zip.generate({\n\t\t\tbase64: false,\n\t\t\tcompression: \"DEFLATE\"\n\t\t});\n\t\tlet filename = new Date().toISOString().substr(0, 10) + \".zip\";\n\t\tlet zipfile = writeTemporary(filename, zippedData);\n\n\t\t// Envia o email\n\t\tlet email = new Email();\n\t\temail.remetente(remetente);\n\t\temail.destinatario(destinatario);\n\t\temail.titulo(\"SAT-Flex: XMLs de \" + dtinicial + \" até \" + dtfinal);\n\t\temail.anexo(zipfile);\n\t\temail.corpo(\"Seguem os XMLs do período de \" + dtinicial + \" até \" + dtfinal + \" anexados ao e-mail.\");\n\t\temail.enviar(() => {\n\t\t\t// Fecha o loading\n\t\t\twindow.Loading.hide();\n\n\t\t\t// Mensagem de sucesso\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Enviado com sucesso\",\n\t\t\t\ttext: \"O e-mail contendo os XMLs no período especificado foi enviado com sucesso para o e-mail do contador.\"\n\t\t\t});\n\t\t}, (err) => {\n\t\t\t// Fecha o loading\n\t\t\twindow.Loading.hide();\n\n\t\t\t// Mensagem de erro\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Houve uma falha\",\n\t\t\t\ttext: err.message\n\t\t\t});\n\t\t});\n\t}\n\n\trender(){\n\t\tlet date = new Date();\n\t\tlet dtinical = new Date(date.getFullYear(), date.getMonth() - 1, 1).toISOString().substr(0, 10);\n\t\tlet dtfinal = new Date(date.getFullYear(), date.getMonth(), 0).toISOString().substr(0, 10);\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Módulo do contador</Title>\n\t\t\t\t<SubTitle>Enviar arquivos fiscais por e-mail</SubTitle>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\" offset=\"3\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<FormGroup type=\"email\" id=\"email\" label=\"E-mail do contador\" className=\"col-12\" size=\"lg\" />\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtinicial\" label=\"Data inicial\" className=\"col-6\" size=\"lg\" defaultValue={dtinical} />\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtfinal\" label=\"Data final\" className=\"col-6\" size=\"lg\" defaultValue={dtfinal} />\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<div className=\"text-center mt-2\">\n\t\t\t\t\t\t\t<Button text=\"Enviar arquivos por e-mail\" icon=\"mail-read\" size=\"lg\" onClick={this.enviarEmail} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nexport default class ButtonGroup extends React.Component {\n\trender(){\n\n\t\tvar className = [\n\t\t\t\"btn-group\",\n\t\t\t\"btn-group-\" + this.props.size\n\t\t];\n\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nButtonGroup.defaultProps = {\n\tsize: \"md\"\n};\n","import React from \"react\";\n\nexport default class Center extends React.Component {\n\n\trender(){\n\t\tlet className = [this.props.className];\n\t\tclassName.push(\"text-center\");\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport chartJS from \"react-chartjs\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport ButtonGroup from \"../com/ButtonGroup.js\";\nimport Center from \"../com/Center.js\";\nimport Content from \"../com/Content.js\";\nimport SubTitle from \"../com/SubTitle.js\";\nimport Title from \"../com/Title.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/Estatistica.css\";\n\nexport default class Estatistica extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.carregarDados = this.carregarDados.bind(this);\n\t\tthis.carregarDadosCategoria = this.carregarDadosCategoria.bind(this);\n\t\tthis.carregarDadosFormaPagamento = this.carregarDadosFormaPagamento.bind(this);\n\t\tthis.carregarDadosGeral = this.carregarDadosGeral.bind(this);\n\t\tthis.carregarDadosProduto = this.carregarDadosProduto.bind(this);\n\n\t\tthis.state = {\n\t\t\ttabela: null,\n\t\t\tdados: null\n\t\t};\n\n\t\tthis.LineChart = chartJS.Line;\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tasync carregarDados(tabela){\n\t\ttry{\n\t\t\twindow.Loading.show();\n\n\t\t\tlet dados = null;\n\t\t\tswitch(tabela){\n\t\t\t\tcase \"categoria\":\n\t\t\t\t\tdados = await this.carregarDadosCategoria();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"formapagamento\":\n\t\t\t\t\tdados = await this.carregarDadosFormaPagamento();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"produto\":\n\t\t\t\t\tdados = await this.carregarDadosProduto();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tdados = await this.carregarDadosGeral();\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\ttabela: tabela,\n\t\t\t\tdados: dados\n\t\t\t});\n\t\t}catch(err){\n\t\t\tdefaultMessageBoxError(err);\n\t\t}finally{\n\t\t\twindow.Loading.hide();\n\t\t}\n\t}\n\n\tasync carregarDadosCategoria(){\n\t\tlet queryDiario = [\n\t\t\t\"SELECT categoria.descricao AS a,\",\n\t\t\t\"  v_vendaprodutodiario.dtvenda AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"LEFT JOIN categoria USING (idcategoria)\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '30 days'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resDiario = await this.Pool.query(queryDiario);\n\t\tlet dadosDiario = this.prepararDados(resDiario.rows, \"D\");\n\n\t\tlet querySemanal = [\n\t\t\t\"SELECT categoria.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"LEFT JOIN categoria USING (idcategoria)\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '6 months'::INTERVAL\",\n\t\t\t\"  AND EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda) != 0\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resSemanal = await this.Pool.query(querySemanal);\n\t\tlet dadosSemanal = this.prepararDados(resSemanal.rows, \"S\");\n\n\t\tlet queryMensal = [\n\t\t\t\"SELECT categoria.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(MONTH FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"LEFT JOIN categoria USING (idcategoria)\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '2 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resMensal = await this.Pool.query(queryMensal);\n\t\tlet dadosMensal = this.prepararDados(resMensal.rows, \"M\");\n\n\t\tlet queryAnual = [\n\t\t\t\"SELECT categoria.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda)) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"LEFT JOIN categoria USING (idcategoria)\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '10 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resAnual = await this.Pool.query(queryAnual);\n\t\tlet dadosAnual = this.prepararDados(resAnual.rows, \"Y\");\n\n\t\treturn {\n\t\t\tdiario: dadosDiario,\n\t\t\tsemanal: dadosSemanal,\n\t\t\tmensal: dadosMensal,\n\t\t\tanual: dadosAnual\n\t\t};\n\t}\n\n\tasync carregarDadosFormaPagamento(){\n\t\tlet queryDiario = [\n\t\t\t\"SELECT formapagamento.descricao AS a,\",\n\t\t\t\"  v_vendapagamentodiario.dtvenda AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendapagamentodiario, formapagamento\",\n\t\t\t\"WHERE (v_vendapagamentodiario.idformapagamento IS NULL OR v_vendapagamentodiario.idformapagamento = formapagamento.idformapagamento)\",\n\t\t\t\"  AND (formapagamento.status IS NULL OR formapagamento.status = 'A')\",\n\t\t\t\"  AND v_vendapagamentodiario.dtvenda >= CURRENT_DATE - '30 days'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resDiario = await this.Pool.query(queryDiario);\n\t\tlet dadosDiario = this.prepararDados(resDiario.rows, \"D\");\n\n\t\tlet querySemanal = [\n\t\t\t\"SELECT formapagamento.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendapagamentodiario.dtvenda) || '-' || LPAD(EXTRACT(WEEK FROM v_vendapagamentodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendapagamentodiario, formapagamento\",\n\t\t\t\"WHERE (v_vendapagamentodiario.idformapagamento IS NULL OR v_vendapagamentodiario.idformapagamento = formapagamento.idformapagamento)\",\n\t\t\t\"  AND (formapagamento.status IS NULL OR formapagamento.status = 'A')\",\n\t\t\t\"  AND v_vendapagamentodiario.dtvenda >= CURRENT_DATE - '6 months'::INTERVAL\",\n\t\t\t\"  AND EXTRACT(WEEK FROM v_vendapagamentodiario.dtvenda) != 0\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resSemanal = await this.Pool.query(querySemanal);\n\t\tlet dadosSemanal = this.prepararDados(resSemanal.rows, \"S\");\n\n\t\tlet queryMensal = [\n\t\t\t\"SELECT formapagamento.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendapagamentodiario.dtvenda) || '-' || LPAD(EXTRACT(MONTH FROM v_vendapagamentodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendapagamentodiario, formapagamento\",\n\t\t\t\"WHERE (v_vendapagamentodiario.idformapagamento IS NULL OR v_vendapagamentodiario.idformapagamento = formapagamento.idformapagamento)\",\n\t\t\t\"  AND (formapagamento.status IS NULL OR formapagamento.status = 'A')\",\n\t\t\t\"  AND v_vendapagamentodiario.dtvenda >= CURRENT_DATE - '2 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resMensal = await this.Pool.query(queryMensal);\n\t\tlet dadosMensal = this.prepararDados(resMensal.rows, \"M\");\n\n\t\tlet queryAnual = [\n\t\t\t\"SELECT formapagamento.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendapagamentodiario.dtvenda)) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendapagamentodiario, formapagamento\",\n\t\t\t\"WHERE (v_vendapagamentodiario.idformapagamento IS NULL OR v_vendapagamentodiario.idformapagamento = formapagamento.idformapagamento)\",\n\t\t\t\"  AND (formapagamento.status IS NULL OR formapagamento.status = 'A')\",\n\t\t\t\"  AND v_vendapagamentodiario.dtvenda >= CURRENT_DATE - '10 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resAnual = await this.Pool.query(queryAnual);\n\t\tlet dadosAnual = this.prepararDados(resAnual.rows, \"Y\");\n\n\t\treturn {\n\t\t\tdiario: dadosDiario,\n\t\t\tsemanal: dadosSemanal,\n\t\t\tmensal: dadosMensal,\n\t\t\tanual: dadosAnual\n\t\t};\n\t}\n\n\tasync carregarDadosGeral(){\n\t\tlet queryDiario = [\n\t\t\t\"SELECT 'Venda' AS a,\",\n\t\t\t\"  v_vendaprodutodiario.dtvenda AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario\",\n\t\t\t\"WHERE v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '30 days'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resDiario = await this.Pool.query(queryDiario);\n\t\tlet dadosDiario = this.prepararDados(resDiario.rows, \"D\");\n\n\t\tlet querySemanal = [\n\t\t\t\"SELECT 'Venda' AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario\",\n\t\t\t\"WHERE v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '6 months'::INTERVAL\",\n\t\t\t\"  AND EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda) != 0\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resSemanal = await this.Pool.query(querySemanal);\n\t\tlet dadosSemanal = this.prepararDados(resSemanal.rows, \"S\");\n\n\t\tlet queryMensal = [\n\t\t\t\"SELECT 'Venda' AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(MONTH FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario\",\n\t\t\t\"WHERE v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '2 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resMensal = await this.Pool.query(queryMensal);\n\t\tlet dadosMensal = this.prepararDados(resMensal.rows, \"M\");\n\n\t\tlet queryAnual = [\n\t\t\t\"SELECT 'Venda' AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda)) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario\",\n\t\t\t\"WHERE v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '10 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resAnual = await this.Pool.query(queryAnual);\n\t\tlet dadosAnual = this.prepararDados(resAnual.rows, \"Y\");\n\n\t\treturn {\n\t\t\tdiario: dadosDiario,\n\t\t\tsemanal: dadosSemanal,\n\t\t\tmensal: dadosMensal,\n\t\t\tanual: dadosAnual\n\t\t};\n\t}\n\n\tasync carregarDadosProduto(){\n\t\tlet queryDiario = [\n\t\t\t\"SELECT produto.descricao AS a,\",\n\t\t\t\"  v_vendaprodutodiario.dtvenda AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '30 days'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resDiario = await this.Pool.query(queryDiario);\n\t\tlet dadosDiario = this.prepararDados(resDiario.rows, \"D\");\n\n\t\tlet querySemanal = [\n\t\t\t\"SELECT produto.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '6 months'::INTERVAL\",\n\t\t\t\"  AND EXTRACT(WEEK FROM v_vendaprodutodiario.dtvenda) != 0\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resSemanal = await this.Pool.query(querySemanal);\n\t\tlet dadosSemanal = this.prepararDados(resSemanal.rows, \"S\");\n\n\t\tlet queryMensal = [\n\t\t\t\"SELECT produto.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda) || '-' || LPAD(EXTRACT(MONTH FROM v_vendaprodutodiario.dtvenda)::TEXT, 2, '0')) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '2 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resMensal = await this.Pool.query(queryMensal);\n\t\tlet dadosMensal = this.prepararDados(resMensal.rows, \"M\");\n\n\t\tlet queryAnual = [\n\t\t\t\"SELECT produto.descricao AS a,\",\n\t\t\t\"  (EXTRACT(YEAR FROM v_vendaprodutodiario.dtvenda)) AS x,\",\n\t\t\t\"  SUM(COALESCE(valor, 0)) AS y\",\n\t\t\t\"FROM v_vendaprodutodiario, produto\",\n\t\t\t\"WHERE (v_vendaprodutodiario.idproduto IS NULL OR v_vendaprodutodiario.idproduto = produto.idproduto)\",\n\t\t\t\"  AND v_vendaprodutodiario.dtvenda >= CURRENT_DATE - '10 years'::INTERVAL\",\n\t\t\t\"GROUP BY a, x\",\n\t\t\t\"ORDER BY x, a\"\n\t\t].join(\" \");\n\t\tlet resAnual = await this.Pool.query(queryAnual);\n\t\tlet dadosAnual = this.prepararDados(resAnual.rows, \"Y\");\n\n\t\treturn {\n\t\t\tdiario: dadosDiario,\n\t\t\tsemanal: dadosSemanal,\n\t\t\tmensal: dadosMensal,\n\t\t\tanual: dadosAnual\n\t\t};\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarDados(\"categoria\");\n\t}\n\n\tprepararDados(rows, tipoData){\n\t\tlet groups = [];\n\t\tlet labels = [];\n\t\tfor(let i in rows){\n\t\t\tlet row = rows[i];\n\t\t\tswitch(tipoData){\n\t\t\t\tcase \"D\": // Diario (recebe 'Y-m-d')\n\t\t\t\t\trow.x = String(row.x.getDate()).lpad(2, \"0\") + \"/\" + String(row.x.getMonth() + 1).lpad(2, \"0\") + \"/\" + (row.x.getFullYear());\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"S\": // Mensal (recebe 'Y-w')\n\t\t\t\t\trow.x = row.x.split(\"-\").reverse().join(\"/\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"M\": // Mensal (recebe 'Y-m')\n\t\t\t\t\trow.x = row.x.split(\"-\").reverse().join(\"/\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Y\": // Anual (recebe 'Y')\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\trows[i].x = row.x;\n\t\t\tif(labels.indexOf(row.x) === -1){\n\t\t\t\tlabels.push(row.x);\n\t\t\t}\n\t\t\tif(groups.indexOf(row.a) === -1){\n\t\t\t\tgroups.push(row.a);\n\t\t\t}\n\t\t}\n\n\t\tlet dataGroup = {};\n\t\tfor(let label of labels){\n\t\t\tfor(let group of groups){\n\t\t\t\tif(dataGroup[group] === undefined) dataGroup[group] = [];\n\n\t\t\t\tlet found = false;\n\t\t\t\tfor(let row of rows){\n\t\t\t\t\tif(row.a === group && row.x === label){\n\t\t\t\t\t\tdataGroup[group].push(row.y);\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(!found) dataGroup[group].push(0);\n\t\t\t}\n\t\t}\n\n\t\tlet datasets = [];\n\t\tfor(let group in dataGroup){\n\t\t\t// Gera um RGB aleatorio caso seja do tipo Diario\n\t\t\t// O outros tipos de datas utilizam o mesmo gerado pelo Diario\n\t\t\tif(this.cor === undefined) this.cor = {};\n\t\t\tif(tipoData === \"D\") this.cor[group] = Math.round(Math.random() * 255) + \",\" + Math.round(Math.random() * 255) + \",\" + Math.round(Math.random() * 255);\n\t\t\tlet rgb = this.cor[group];\n\n\t\t\t// Cria o dataset\n\t\t\tdatasets.push({\n\t\t\t\tlabel: group,\n\t\t\t\tfillColor: \"rgba(\"+rgb+\",0.2)\",\n\t\t\t\tstrokeColor: \"rgba(\"+rgb+\",1)\",\n\t\t\t\tpointColor: \"rgba(\"+rgb+\",1)\",\n\t\t\t\tpointStrokeColor: \"#fff\",\n\t\t\t\tpointHighlightFill: \"#fff\",\n\t\t\t\tpointHighlightStroke: \"rgba(\"+rgb+\",1)\",\n\t\t\t\tdata: dataGroup[group]\n\t\t\t});\n\t\t}\n\n\t\treturn {\n\t\t\tlabels: labels,\n\t\t\tdatasets: datasets\n\t\t};\n\t}\n\n\trender(){\n\t\tlet options = {\n\t\t\tlegend: {\n\t\t\t\tdisplay: true\n\t\t\t}\n\t\t};\n\n\t\tlet chartHeight = \"300px\";\n\t\tlet chartWidth = \"900px\";\n\n\t\tlet chartDiario = null;\n\t\tif(this.state.dados !== null){\n\t\t\tchartDiario = <this.LineChart data={this.state.dados.diario} options={options} height={chartHeight} width={chartWidth} redraw />\n\t\t}\n\n\t\tlet chartSemanal = null;\n\t\tif(this.state.dados !== null){\n\t\t\tchartSemanal = <this.LineChart data={this.state.dados.semanal} options={options} height={chartHeight} width={chartWidth} redraw />\n\t\t}\n\n\t\tlet chartMensal = null;\n\t\tif(this.state.dados !== null){\n\t\t\tchartMensal = <this.LineChart data={this.state.dados.mensal} options={options} height={chartHeight} width={chartWidth} redraw />\n\t\t}\n\n\t\tlet chartAnual = null;\n\t\tif(this.state.dados !== null){\n\t\t\tchartAnual = <this.LineChart data={this.state.dados.anual} options={options} height={chartHeight} width={chartWidth} redraw />\n\t\t}\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Estatísticas</Title>\n\t\t\t\t<Center className=\"mb-5\">\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button text=\"Geral\" color=\"green\" size=\"lg\" active={this.state.tabela === null} onClick={() => {this.carregarDados(null)}} />\n\t\t\t\t\t\t<Button text=\"Finalizadora\" color=\"green\" size=\"lg\" active={this.state.tabela === \"formapagamento\"} onClick={() => {this.carregarDados(\"formapagamento\")}} />\n\t\t\t\t\t\t<Button text=\"Categoria\" color=\"green\" size=\"lg\" active={this.state.tabela === \"categoria\"} onClick={() => {this.carregarDados(\"categoria\")}} />\n\t\t\t\t\t\t<Button text=\"Produto\" color=\"green\" size=\"lg\" active={this.state.tabela === \"produto\"} onClick={() => {this.carregarDados(\"produto\")}} />\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t<SubTitle model=\"2\">Venda diária nos últimos 30 dias</SubTitle>\n\t\t\t\t\t{chartDiario}\n\t\t\t\t\t<SubTitle model=\"2\">Venda semanal nos últimos 6 meses</SubTitle>\n\t\t\t\t\t{chartSemanal}\n\t\t\t\t\t<SubTitle model=\"2\">Venda mensal nos últimos 2 anos</SubTitle>\n\t\t\t\t\t{chartMensal}\n\t\t\t\t\t<SubTitle model=\"2\">Venda anual nos últimos 10 anos</SubTitle>\n\t\t\t\t\t{chartAnual}\n\t\t\t\t</Center>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","const LF = \"\\x0a\";\nconst ESC = \"\\x1b\";\nconst GS = \"\\x1d\";\n\nexport default class EscPos {\n\n\t// Metodo construtor\n\t// O parametro \"font\" representa a fonte a ser utilizada (vem dos parametros do sistema)\n\tconstructor(font){\n\t\tthis.font = font;\n\t\tthis.content = [];\n\t}\n\n\t// Imprime um codigo de barras\n\tbarcode(barcode, height, width){\n\t\theight = (height === undefined ? 50 : height);\n\t\twidth = (width === undefined ? 1 : width);\n\n\t\t// Descobre o tipo de codigo de barras\n\t\tlet type = null;\n\t\tswitch(barcode.length){\n\t\t\tcase 7: // EAN7\n\t\t\tcase 8: // EAN8\n\t\t\t\ttype = 68;\n\t\t\t\tbreak;\n\t\t\tcase 12: // EAN12\n\t\t\tcase 13: // EAN13\n\t\t\t\ttype = 67;\n\t\t\t\tbreak;\n\t\t\tdefault: // ITF\n\t\t\t\ttype = 70;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Define a altura do codigo de barras\n\t\tthis.content.push(GS + \"h\" + String.fromCharCode(height));\n\n\t\t// Define a largura das barras do codigo de barras\n\t\tthis.content.push(GS + \"w\" + String.fromCharCode(width));\n\n\t\t// Centraliza a impressao\n\t\tthis.content.push(ESC + \"a\" + String.fromCharCode(1));\n\n\t\t// Imprime o codigo de barras\n\t\tthis.content.push(GS + \"k\" + String.fromCharCode(type) + String.fromCharCode(barcode.length) + barcode);\n\n\t\t// Alinha a impressao a esquerda\n\t\tthis.content.push(ESC + \"a\" + String.fromCharCode(0));\n\n\t}\n\n\t// Liga ou desliga o texto em negrito\n\tbold(bool){\n\t\tthis.content.push(ESC + \"G\" + String.fromCharCode(bool ? 1 : 0));\n\t}\n\n\t// Aciona a guilhotina\n\tcut(){\n\t\tthis.content.push(GS + \"V\" + String.fromCharCode(1));\n\t}\n\n\t// Abre gaveta\n\tdrawer(){\n\t\tthis.content.push(ESC + \"p\" + String.fromCharCode(0) + String.fromCharCode(13) + String.fromCharCode(10));\n\t}\n\n\t// Alimenta o papel (medida em linhas)\n\tfeed(lines){\n\t\tthis.content.push(ESC + \"d\" + String.fromCharCode(lines));\n\t}\n\n\t// Retorna o conteudo a ser impresso\n\tgetContent(){\n\t\treturn this.content.join(\"\");\n\t}\n\n\t// Reinicia as configuracoes para os valores padroes\n\treset(){\n\t\tthis.content = [];\n\t\tthis.content.push(ESC + String.fromCharCode(0)); // Espaco entre linhas no tamanho padrao\n\t\tthis.content.push(ESC + \" \" + String.fromCharCode(0)); // Espaco entre os caracteres\n\t\tthis.content.push(ESC + \"M\" + String.fromCharCode(this.font)); // Estilo da fonte\n\t\tthis.content.push(GS + \"!\" + String.fromCharCode(0)); // Tamanho da fonte\n\t\tthis.content.push(ESC + \"t\" + String.fromCharCode(3)); // Tabela de codigo de caracter (Portugues)\n\t\tthis.content.push(ESC + \"R\" + String.fromCharCode(12)); // Caracteres internacionais (America Latina)\n\t\tthis.content.push(GS + \"B\" + String.fromCharCode(0)); // Desliga o fundo pintado (cores invertidas)\n\t\tthis.content.push(ESC + \"G\" + String.fromCharCode(0)); // Desliga o negrito\n\t\tthis.content.push(ESC + \"a\" + String.fromCharCode(0)); // Alinha a impressao a esquerda\n\t}\n\n\t// Imprime um QR Code\n\tqrcode(qrcode){\n\t\tlet len = qrcode.length + 3;\n\t\tlet pl = len % 256;\n\t\tlet ph = len / 256;\n\n\t\t// Centraliza a impressao\n\t\tthis.content.push(ESC + \"a\" + String.fromCharCode(1));\n\n\t\t// Columns function (65)\n\t\tthis.content.push(GS + \"(k\" + String.fromCharCode(4) + String.fromCharCode(0) + String.fromCharCode(49) + String.fromCharCode(65) + String.fromCharCode(50) + String.fromCharCode(0))\n\n\t\t// Size function (67)\n\t\tthis.content.push(GS + \"(k\" + String.fromCharCode(3) + String.fromCharCode(0) + String.fromCharCode(49) + String.fromCharCode(67) + String.fromCharCode(3));\n\n\t\t// Error correction function (69)\n\t\tthis.content.push(GS + \"(k\" + String.fromCharCode(3) + String.fromCharCode(0) + String.fromCharCode(49) + String.fromCharCode(69) + String.fromCharCode(51));\n\n\t\t// Save data function (80)\n\t\tthis.content.push(GS + \"(k\" + String.fromCharCode(pl) + String.fromCharCode(ph) + String.fromCharCode(49) + String.fromCharCode(80) + String.fromCharCode(48) + qrcode);\n\n\t\t// Print function (81)\n\t\tthis.content.push(GS + \"(k\" + String.fromCharCode(3) + String.fromCharCode(0) + String.fromCharCode(49) + String.fromCharCode(81) + String.fromCharCode(48));\n\n\t\t// Alinha impressao a esquerda\n\t\tthis.content.push(ESC + \"a\" + String.fromCharCode(0));\n\t}\n\n\t// Imprime um texto\n\ttext(text, bold){\n\t\ttext = text.removeSpecial();\n\t\ttext = text.replaceAll(\"|\", String.fromCharCode(179));\n\t\tif(bold) this.bold(true);\n\t\tthis.content.push(text + LF);\n\t\tif(bold) this.bold(false);\n\t}\n\n}\n","//import RNFS from \"react-native-fs\";\nimport os from \"os\";\nimport xmlJS from \"xml-js\";\nimport child_process from \"child_process\";\nimport EscPos from \"./EscPos.js\";\nimport {valorParametro, writeTemporary} from \"../def/function.js\";\n\nexport default class Printer {\n\n\tconstructor(Pool){\n\t\tthis.Pool = Pool;\n\t\tthis.os = os;\n\t\tthis.childProcess = child_process;\n\n\t\t// Usar o metodo \"carregarEscPos\" para utilizar essa variavel\n\t\t// Nunca usar assim:   let escpos = this.escpos\n\t\t// Sempre usar assim:  let escpos = await this.carregarEscPos()\n\t\tthis.escpos = null;\n\n\t\tthis.colunas = null;\n\t\tthis.nome = null;\n\t\tthis.modelo = null;\n\n\t\tthis.documento = null;\n\t\tthis.documentoprodutos = null;\n\t\tthis.documentopagamentos = null;\n\n\t\tthis.parametroImpressoraGuilhotina = null;\n\t\tthis.parametroImpressoraModeloImpressao = null;\n\t}\n\n\t// Alimenta o papel (medida em linhas)\n\tasync alimentar(linhas){\n\t\tlinhas = (linhas === undefined ? 1 : linhas);\n\n\t\tlet escpos = await this.carregarEscPos();\n\t\tescpos.feed(linhas);\n\t}\n\n\t// Imprime um codigo de barras\n\tasync barcode(barcode){\n\t\tlet escpos = await this.carregarEscPos();\n\t\tescpos.barcode(barcode);\n\t}\n\n\tasync carregarEscPos(){\n\t\tif(this.escpos === null){\n\t\t\tlet fonte = (this.colunas > 48 ? \"1\" : \"0\");\n\t\t\tthis.escpos = new EscPos(fonte);\n\t\t}\n\t\treturn this.escpos;\n\t}\n\n\tasync carregarDadosDocumento(iddocumento){\n\t\tlet documento, documentoprodutos,documentopagamentos;\n\n\t\tconst client = await this.Pool.connect();\n\n\t\ttry{\n\t\t\tlet res = await client.query(\"SELECT * FROM documento WHERE iddocumento = $1\", [iddocumento]);\n\t\t\tif(res.rows.length === 0){\n\t\t\t\tthrow new Error(\"Nenhum documento foi encontrado.\");\n\t\t\t}\n\t\t\tdocumento = res.rows[0];\n\n\t\t\tlet queryDocumentoProduto = [\n\t\t\t\t\"SELECT documentoproduto.*, unidade.precisao, unidade.sigla\",\n\t\t\t\t\"FROM documentoproduto\",\n\t\t\t\t\"LEFT JOIN produto USING (idproduto)\",\n\t\t\t\t\"LEFT JOIN unidade USING (idunidade)\",\n\t\t\t\t\"WHERE documentoproduto.iddocumento = $1\",\n\t\t\t\t\"ORDER BY documentoproduto.sequencial\"\n\t\t\t].join(\" \");\n\t\t\tres = await client.query(queryDocumentoProduto, [iddocumento]);\n\t\t\tdocumentoprodutos = res.rows;\n\n\t\t\tlet queryDocumentoPagamento = [\n\t\t\t\t\"SELECT documentopagamento.*, formapagamento.descricao AS formapagamento\",\n\t\t\t\t\"FROM documentopagamento\",\n\t\t\t\t\"LEFT JOIN formapagamento USING (idformapagamento)\",\n\t\t\t\t\"WHERE documentopagamento.iddocumento = $1\"\n\t\t\t].join(\" \");\n\t\t\tres = await client.query(queryDocumentoPagamento, [iddocumento]);\n\t\t\tdocumentopagamentos = res.rows;\n\t\t}catch(e){\n\t\t\tthrow e;\n\t\t}finally{\n\t\t\tclient.release();\n\t\t}\n\n\t\tthis.documento = documento;\n\t\tthis.documentoprodutos = documentoprodutos;\n\t\tthis.documentopagamentos = documentopagamentos;\n\t}\n\n\t// Retorna o conteudo a ser enviado para a impressora\n\tasync conteudo(){\n\t\tlet escpos = await this.carregarEscPos();\n\t\treturn escpos.getContent();\n\t}\n\n\t// Abre gaveta\n\tasync gaveta(){\n\t\tlet escpos = await this.carregarEscPos();\n\t\tescpos.drawer();\n\t}\n\n\t// Aciona a guilhotina\n\tasync guilhotina(){\n\t\tif(this.parametroImpressoraGuilhotina === null){\n\t\t\tthis.parametroImpressoraGuilhotina = await valorParametro(this.Pool, \"IMPRESSORA\", \"GUILHOTINA\");\n\t\t}\n\t\tif(this.parametroImpressoraGuilhotina === \"S\"){\n\t\t\tlet escpos = await this.carregarEscPos();\n\t\t\tescpos.cut();\n\t\t}\n\t}\n\n\t// Imprime um texto em uma impressora\n\tasync imprimir(texto, nome, modelo){\n\t\tif(texto === undefined || texto === null){\n\t\t\ttexto = await this.conteudo();\n\t\t}\n\n\t\tif(modelo === undefined){\n\t\t\tif(this.modelo === null){\n\t\t\t\tmodelo = await valorParametro(this.Pool, \"IMPRESSORA\", \"MODELO\");\n\t\t\t}else{\n\t\t\t\tmodelo = this.modelo;\n\t\t\t}\n\t\t}\n\t\tif(modelo === \"nenhum\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tlet filename = writeTemporary(\"printer.txt\", texto);\n\t\tif(true || this.os.platform() === \"win32\"){\n\t\t\tnome = (nome === undefined ? this.nome : nome);\n\n\t\t\tconst execSync = (this.childProcess.execSync || window.require(\"child_process\").execSync);\n\t\t\t\n\t\t\tlet command = \"copy \\\"\" + filename + \"\\\" \" + nome.toUpperCase();\n\t\t\tcommand = command.replaceAll(\"/\", \"\\\\\");\n\t\t\texecSync(command);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t// Imprimir o cabecalho nos documentos\n\tasync imprimirCabecalho(){\n\t\t// Nome da loja\n\t\tlet nomefantasia = await valorParametro(this.Pool, \"EMITENTE\", \"NOMEFANTASIA\");\n\t\tawait this.texto(nomefantasia, \"center\", true);\n\n\t\t// Razao social\n\t\tlet razaosocial = await valorParametro(this.Pool, \"EMITENTE\", \"RAZAOSOCIAL\");\n\t\tif(razaosocial !== nomefantasia){\n\t\t\tawait this.texto(razaosocial, \"center\", true);\n\t\t}\n\n\t\t// Endereco\n\t\tlet paramEmitenteEndereco = await valorParametro(this.Pool, \"EMITENTE\", \"ENDERECO\");\n\t\tlet paramEmitenteNumero = await valorParametro(this.Pool, \"EMITENTE\", \"NUMERO\");\n\t\tawait this.texto(paramEmitenteEndereco + \", \" + paramEmitenteNumero, \"center\");\n\n\t\t// Bairro, cidade e estado\n\t\tlet paramEmitenteBairro = await valorParametro(this.Pool, \"EMITENTE\", \"BAIRRO\");\n\t\tlet paramEmitenteMunicipio = await valorParametro(this.Pool, \"EMITENTE\", \"MUNICIPIO\");\n\t\tlet paramEmitenteUF = await valorParametro(this.Pool, \"EMITENTE\", \"UF\");\n\t\tawait this.texto(paramEmitenteBairro + \" - \" + paramEmitenteMunicipio + \" - \" + paramEmitenteUF, \"center\");\n\n\t\t// CNPJ e IE\n\t\tlet paramEmitenteCNPJ = await valorParametro(this.Pool, \"EMITENTE\", \"CNPJ\");\n\t\tlet paramEmitenteIE = await valorParametro(this.Pool, \"EMITENTE\", \"IE\");\n\t\tawait this.texto(\"CNPJ \" + paramEmitenteCNPJ + \" IE \" + paramEmitenteIE, \"center\");\n\n\t\t// Linha\n\t\tawait this.linha();\n\t}\n\n\t// Imprime um documento\n\tasync imprimirDocumento(iddocumento, success, fail){\n\t\tawait this.reiniciar();\n\t\tawait this.carregarDadosDocumento(iddocumento);\n\n\t\tlet result = false;\n\n\t\tswitch(this.documento.status){\n\t\t\tcase \"A\":\n\t\t\t\tresult = await this.imprimirDocumentoAtivo();\n\t\t\t\tbreak;\n\t\t\tcase \"C\":\n\t\t\t\tresult = await this.imprimirDocumentoCancelado();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(result && typeof success === \"function\"){\n\t\t\tsuccess();\n\t\t}else if(!result && typeof fail === \"function\"){\n\t\t\tfail();\n\t\t}\n\t}\n\n\t// Imprime um documento ativo\n\tasync imprimirDocumentoAtivo(numerovias){\n\t\tnumerovias = (numerovias === undefined ? 1 : numerovias);\n\n\t\tlet informacoes  = null;\n\t\tlet qrcode = null;\n\n\t\t// Carrega o XML do documento\n\t\tif(this.documento.operacao === \"CU\" && this.documento.xml){\n\t\t\tlet xml = xmlJS.xml2json(this.documento.xml, {compact: true});\n\t\t\txml = JSON.parse(xml);\n\t\t\tinformacoes = xml.CFe.infCFe.infAdic.infCpl._text;\n\t\t\tif(xml.CFe.infCFe.ide.assinaturaQRCODE){\n\t\t\t\tqrcode = xml.CFe.infCFe.ide.assinaturaQRCODE._text;\n\t\t\t}\n\t\t}\n\n\t\t// Cria o cabecalho\n\t\tawait this.imprimirCabecalho();\n\n\t\t// Identificacao do documento\n\t\tlet numero = null;\n\t\tlet dthrcriacao = this.documento.dthrcriacao;\n\t\tlet dtcriacao = dthrcriacao.toLocaleString().split(\" \")[0];\n\t\tlet hrcriacao = String(dthrcriacao.getHours()).lpad(2, \"0\") + \":\" + String(dthrcriacao.getMinutes()).lpad(2, \"0\") + \":\" + String(dthrcriacao.getSeconds()).lpad(2, \"0\");\n\t\tswitch(this.documento.operacao){\n\t\t\tcase \"CU\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : this.documento.iddocumento).lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"CUPOM FISCAL ELETRÔNICO - SAT\", \"center\", true);\n\t\t\t\tawait this.texto(\"COO: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"NC\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"NOTA FISCAL A PARTIR DE CUPOM\", \"center\", true);\n\t\t\t\tawait this.texto(\"Núm: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"OR\":\n\t\t\t\tnumero = String(this.documento.iddocumento ? this.documento.iddocumento : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"ORÇAMENTO - SEM VALOR FISCAL\", \"center\", true);\n\t\t\t\tawait this.texto(\"Núm: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"RE\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"NOTA FISCAL DE REMESSA\", \"center\", true);\n\t\t\t\tawait this.texto(\"Núm: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Linha\n\t\tawait this.linha();\n\n\t\t// Identificacao do consumidor\n\t\tlet cpfcnpj = null;\n\t\tswitch(this.documento.operacao){\n\t\t\tcase \"CU\":\n\t\t\t\tcpfcnpj = (this.documento.cpfcnpj ? this.documento.cpfcnpj : \"não informado\");\n\t\t\t\tawait this.texto(\"CPF/CNPJ do consumidor: \" + cpfcnpj);\n\t\t\t\tbreak;\n\t\t\tcase \"OR\":\n\t\t\t\tcpfcnpj = (this.documento.cpfcnpj ? this.documento.cpfcnpj : \"não informado\");\n\t\t\t\tlet nomeorcamento = (this.documento.nomeorcamento ? this.documento.nomeorcamento : \"não informado\");\n\t\t\t\tawait this.texto(\"Nome do cliente: \" + nomeorcamento);\n\t\t\t\tawait this.texto(\"CPF/CNPJ do cliente: \" + cpfcnpj);\n\t\t\t\tbreak;\n\t\t\tcase \"NC\":\n\t\t\tcase \"RE\":\n\t\t\t\tlet query = [\n\t\t\t\t\t\"SELECT parceiro.nome, parceiro.tipopessoa, parceiro.cpfcnpj,\",\n\t\t\t\t\t\"  parceiro.inscricaoestadual, cidade.nome AS cidade, estado.sigla AS estado,\",\n\t\t\t\t\t\"  parceiro.cep, parceiro.bairro, parceiro.endereco, parceiro.numero,\",\n\t\t\t\t\t\"  parceiro.complemento\",\n\t\t\t\t\t\"FROM parceiro\",\n\t\t\t\t\t\"LEFT JOIN cidade USING (idcidade)\",\n\t\t\t\t\t\"LEFT JOIN estado USING (idestado)\",\n\t\t\t\t\t\"WHERE parceiro.idparceiro = $1\"\n\t\t\t\t].join(\" \");\n\n\t\t\t\tlet res = await this.Pool.query(query, [this.documento.idparceiro]);\n\t\t\t\tlet parceiro = res.rows[0];\n\n\t\t\t\tawait this.texto(\"DADOS DO DESTINATARIO\", \"center\", true);\n\t\t\t\tawait this.texto(\"Nome: \" + parceiro.nome);\n\t\t\t\tawait this.texto((parceiro.tipopessoa === \"F\" ? \"CPF\" : \"CNPJ\") + \": \" + parceiro.cpfcnpj);\n\t\t\t\tif(parceiro.inscricaoestadual){\n\t\t\t\t\tawait this.texto(\"Inscricao estadual: \" + parceiro.inscricaoestadual);\n\t\t\t\t}\n\t\t\t\tawait this.texto(\"Cidade: \" + parceiro.cidade  + \" - \" + parceiro.estado);\n\t\t\t\tawait this.texto(\"CEP: \" + parceiro.cep + \"   Bairro: \" + parceiro.bairro);\n\t\t\t\tawait this.texto(\"Endereço: \" + parceiro.endereco + \", \" + parceiro.numero);\n\t\t\t\tif(parceiro.complemento){\n\t\t\t\t\tawait this.texto(\"Complemento: \" + this.complemento);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Linha\n\t\tawait this.linha();\n\n\t\t// Imprime os produtos\n\t\tif(this.parametroImpressoraModeloImpressao === null){\n\t\t\tthis.parametroImpressoraModeloImpressao = await valorParametro(this.Pool, \"IMPRESSORA\", \"MODELOIMPRESSAO\");\n\t\t}\n\t\tswitch(this.parametroImpressoraModeloImpressao){\n\t\t\tcase '1': await this.imprimirListaProdutosModelo01(); break;\n\t\t\tcase '2': await this.imprimirListaProdutosModelo02(); break;\n\t\t\tdefault: await this.imprimirListaProdutosModelo01(); break;\n\t\t}\n\t\t\n\t\t// Total dos itens\n\t\tlet totaldocumento = this.documento.totaldocumento.format(2, \",\", \".\");\n\t\tawait this.texto(\"TOTAL\" + \" \".repeat(this.colunas - (5 + totaldocumento.length)) + totaldocumento, \"left\", true);\n\t\tawait this.alimentar(1);\n\n\t\t// Imprime os pagamentos\n\t\tawait this.documentopagamentos.forEach(async (documentopagamento, i) => {\n\t\t\tlet totalpagamento = 0;\n\n\t\t\t// Captura os valores\n\t\t\tlet descricao = documentopagamento.formapagamento.removeSpecial();\n\t\t\tif(i + 1 === this.documentopagamentos.length){\n\t\t\t\ttotalpagamento = parseFloat(documentopagamento.totalpagamento) + parseFloat(this.documento.totaltroco);\n\t\t\t}else{\n\t\t\t\ttotalpagamento = documentopagamento.totalpagamento;\n\t\t\t}\n\t\t\ttotalpagamento = totalpagamento.format(2, \",\", \".\");\n\n\t\t\t// Imprime o pagamento no cupom\n\t\t\tawait this.texto(descricao + \" \".repeat(this.colunas - descricao.length - totalpagamento.length) + totalpagamento);\n\t\t});\n\n\t\t// Imprime o troco\n\t\tif(this.documento.totaltroco > 0){\n\t\t\tlet descricao = \"Troco\";\n\t\t\tlet totaltroco = this.documento.totaltroco.format(2, \",\", \".\");\n\t\t\tawait this.texto(descricao + \" \".repeat(this.colunas - descricao.length - totaltroco.length) + totaltroco);\n\t\t}\n\n\t\t// Verifica se eh um documento fiscal\n\t\tif(this.documento.chave){\n\t\t\t// Linha\n\t\t\tawait this.linha();\n\n\t\t\t// Verifica se eh cupom\n\t\t\tif(this.documento.operacao === \"CU\"){\n\t\t\t\t// Observacoes do contribuinte\n\t\t\t\tawait this.texto(\"OBSERVAÇÕES DO CONTRIBUINTE\", \"center\");\n\t\t\t\tawait this.texto(\"ICMS recolhido conforme LC 123/2006 - Simples Nacional.\");\n\t\t\t\tawait this.texto(informacoes);\n\n\t\t\t\t// Linha\n\t\t\t\tawait this.linha();\n\n\t\t\t\t// Numero do SAT\n\t\t\t\tlet paramSatSerie = await valorParametro(this.Pool, \"SAT\", \"SERIE\");\n\t\t\t\tawait this.texto(\"SAT No. \" + paramSatSerie, \"center\");\n\t\t\t\tawait this.texto(dtcriacao + \" - \" + hrcriacao, \"center\");\n\t\t\t}\n\n\t\t\t// Imprime a chave CFe\n\t\t\tlet chave = this.documento.chave.substr(-44);\n\t\t\tawait this.alimentar(1);\n\t\t\tawait this.texto(chave, \"center\");\n\t\t\tawait this.barcode(chave.substr(0, 22));\n\t\t\tawait this.alimentar(1);\n\t\t\tawait this.barcode(chave.substr(22));\n\n\t\t\t// Imprime o QR Code\n\t\t\tif(qrcode){\n\t\t\t\tawait this.alimentar(1);\n\t\t\t\tawait this.qrcode(qrcode);\n\t\t\t}\n\t\t}\n\n\t\t// Cria uma margem no cupom\n\t\tawait this.alimentar(3);\n\n\t\t// Cria uma margem no cupom\n\t\tawait this.guilhotina();\n\n\t\t// Imprime o documento\n\t\tfor(let i = 0; i < numerovias; i++){\n\t\t\tif(!this.imprimir()){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t// Imprime um documento ativo\n\tasync imprimirDocumentoCancelado(numerovias){\n\t\tlet paramSATSerie = await valorParametro(this.Pool, \"SAT\", \"SERIE\");\n\n\t\tlet xml = null;\n\t\tlet qrcode = null;\n\t\tlet xmlcanc = null;\n\t\tlet qrcodecanc = null\n\n\t\t// Carrega o XML do documento\n\t\tif(this.documento.operacao === \"CU\" && this.documento.xml){\n\t\t\txml = xmlJS.xml2json(this.documento.xml, {compact: true});\n\t\t\txml = JSON.parse(xml);\n\t\t\tif(xml.CFe.infCFe.ide.assinaturaQRCODE){\n\t\t\t\tqrcode = xml.CFe.infCFe.ide.assinaturaQRCODE._text;\n\t\t\t}\n\n\t\t\txmlcanc = xmlJS.xml2json(this.documento.xml, {compact: true});\n\t\t\txmlcanc = JSON.parse(xmlcanc);\n\t\t\tif(xmlcanc.CFe.infCFe.ide.assinaturaQRCODE){\n\t\t\t\tqrcodecanc = xmlcanc.CFe.infCFe.ide.assinaturaQRCODE._text;\n\t\t\t}\n\t\t}\n\n\t\t// Cria o cabecalho\n\t\tawait this.imprimirCabecalho();\n\n\t\t// Identificacao do documento\n\t\tlet numero = null;\n\t\tlet dthrcriacao = this.documento.dthrcriacao;\n\t\tlet dtcriacao = dthrcriacao.toLocaleString().split(\" \")[0];\n\t\tlet hrcriacao = String(dthrcriacao.getHours()).lpad(2, \"0\") + \":\" + String(dthrcriacao.getMinutes()).lpad(2, \"0\") + \":\" + String(dthrcriacao.getSeconds()).lpad(2, \"0\");\n\t\tswitch(this.documento.operacao){\n\t\t\tcase \"CU\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : this.documento.iddocumento).lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"CUPOM FISCAL ELETRÔNICO - SAT\", \"center\", true);\n\t\t\t\tawait this.texto(\"COO: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"NC\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"NOTA FISCAL A PARTIR DE CUPOM\", \"center\", true);\n\t\t\t\tawait this.texto(\"Número: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"OR\":\n\t\t\t\tnumero = String(this.documento.iddocumento ? this.documento.iddocumento : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"ORÇAMENTO - SEM VALOR FISCAL\", \"center\", true);\n\t\t\t\tawait this.texto(\"Número: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"RE\":\n\t\t\t\tnumero = String(this.documento.numero ? this.documento.numero : \"\").lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"NOTA FISCAL DE REMESSA\", \"center\", true);\n\t\t\t\tawait this.texto(\"Número: \" + numero + \"  Data: \" + dtcriacao + \"  Hora: \" + hrcriacao, \"center\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tawait this.texto(\"CANCELAMENTO\", \"center\", true);\n\t\tawait this.linha();\n\n\t\t// Dados do documento de venda\n\t\tswitch(this.documento.operacao){\n\t\t\tcase \"CU\":\n\t\t\t\tawait this.texto(\"Dados do cupom fiscal eletronico cancelado\", \"center\", true);\n\t\t\t\tawait this.texto(\"SAT No. \" + paramSATSerie, \"center\");\n\t\t\t\tbreak;\n\t\t\tcase \"OR\":\n\t\t\t\tlet orcamento = this.documento.iddocumento.lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"Dados do orçamento cancelado\", \"center\", true);\n\t\t\t\tawait this.texto(\"Orçamento No. \" + orcamento, \"center\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlet numero = this.documento.numero.lpad(6, \"0\");\n\t\t\t\tawait this.texto(\"Dados do nota fiscal eletronica cancelada\", \"center\", true);\n\t\t\t\tawait this.texto(\"Nota Fiscal No. \" + numero, \"center\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\tawait this.texto(\"TOTAL R$ \" + this.documento.totaldocumento.format(2, \",\", \".\"), \"center\");\n\t\tawait this.texto(dtcriacao + \" \" + hrcriacao, \"center\");\n\n\t\t// Verifica se eh um documento fiscal\n\t\tif(this.documento.chave){\n\n\t\t\t// Chave CFe do documento de venda\n\t\t\tawait this.alimentar(1);\n\t\t\tlet chave = this.documento.chave.substr(-44);\n\t\t\tawait this.texto(chave, \"center\");\n\t\t\tawait this.barcode(chave.substr(0, 22));\n\t\t\tawait this.alimentar(1);\n\t\t\tawait this.barcode(chave.substr(22));\n\n\t\t\t// QR Code do documento de venda\n\t\t\tif(qrcode){\n\t\t\t\tawait this.alimentar(1);\n\t\t\t\tawait this.qrcode(qrcode);\n\t\t\t}\n\t\t}\n\n\t\t// Linha\n\t\tawait this.linha();\n\n\t\tif(this.documento.operacao === \"CU\"){\n\t\t\tlet dthrcancelamento = this.documento.dthrcancelamento;\n\t\t\tlet dtcancelamento = dthrcancelamento.toLocaleString().split(\" \")[0];\n\t\t\tlet hrcancelamento = String(dthrcancelamento.getHours()).lpad(2, \"0\") + \":\" + String(dthrcancelamento.getMinutes()).lpad(2, \"0\") + \":\" + String(dthrcancelamento.getSeconds()).lpad(2, \"0\");\n\n\t\t\t// Dados do documento de cancelamento\n\t\t\tawait this.texto(\"Dados do cupom fiscal eletronico de cancelamento\", \"center\", true);\n\t\t\tawait this.texto(\"SAT No. \" + paramSATSerie, \"center\");\n\t\t\tawait this.texto(dtcancelamento + \" \" + hrcancelamento, \"center\");\n\n\t\t\t// Verifica se eh um documento fiscal\n\t\t\tif(this.documento.chavecanc){\n\n\t\t\t\t// Chave CFe do documento de cancelamento\n\t\t\t\tawait this.alimentar(1);\n\t\t\t\tlet chave = this.documento.chavecanc.substr(-44);\n\t\t\t\tawait this.texto(chave, \"center\");\n\t\t\t\tawait this.barcode(chave.substr(0, 22));\n\t\t\t\tawait this.alimentar(1);\n\t\t\t\tawait this.barcode(chave.substr(22));\n\n\t\t\t\t// QR Code do documento de cancelamento\n\t\t\t\tif(qrcodecanc){\n\t\t\t\t\tawait this.alimentar(1);\n\t\t\t\t\tawait this.qrcode(qrcodecanc);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Cria uma margem no cupom\n\t\tawait this.alimentar(6);\n\n\t\t// Aciona a guilhotina\n\t\tawait this.guilhotina();\n\n\t\t// Imprime o documento\n\t\tif(!this.imprimir()){\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t// Imprime modelo 1 da lista de produtos (impressao em uma linha)\n\tasync imprimirListaProdutosModelo01() {\n\t\t// Cabecalho dos produtos\n\t\tawait this.texto(\"#   Descrição\" + \" \".repeat(this.colunas - 40) + \"   Qtde X Preço       Total\");\n\n\t\t// Linha\n\t\tawait this.linha();\n\n\t\t// Imprime os produtos\n\t\tawait this.documentoprodutos.forEach(async (documentoproduto) => {\n\t\t\t// Sequencial do produto\n\t\t\tlet sequencial = String(documentoproduto.sequencial).lpad(3, \"0\");\n\n\t\t\t// Total do item\n\t\t\tlet totalproduto = (documentoproduto.quantidade * documentoproduto.preco).format(2, \",\", \".\");\n\n\t\t\t// Calculo (preco x quantidade)\n\t\t\tlet quantidade = documentoproduto.quantidade.format(documentoproduto.precisao, \",\", \".\") + \" \" + documentoproduto.sigla;\n\t\t\tlet calculo = quantidade.lpad(10, \" \") + \" X \" + documentoproduto.preco.format(2, \",\", \".\").rpad(8, \" \") + \" \" + totalproduto.lpad(8, \" \");\n\n\t\t\t// Calcula o tamanho maximo da descricao do produto\n\t\t\tlet descricaoLength = this.colunas - (sequencial.length + calculo.length + 2);\n\n\t\t\t// Descricao do produto\n\t\t\tlet descricao = documentoproduto.descricao.removeSpecial().substr(0, descricaoLength).rpad(descricaoLength, \" \");\n\n\t\t\t// Monta o texto final e envia para impressora\n\t\t\tawait this.texto(sequencial + \" \" + descricao + \" \" + calculo);\n\n\t\t\t// Verifica se houve desconto no item\n\t\t\tif(documentoproduto.totaldesconto > 0){\n\t\t\t\tlet totaldesconto = \"-\" + documentoproduto.totaldesconto.format(2, \",\", \".\");\n\t\t\t\tlet texto = \"    Desconto\" + \" \".repeat(this.colunas - (12 + totaldesconto.length)) + totaldesconto;\n\t\t\t\tawait this.texto(texto);\n\t\t\t}\n\n\t\t\t// Verifica se houve acrescimo no item\n\t\t\tif(documentoproduto.totalacrescimo > 0){\n\t\t\t\tlet totalacrescimo = \"+\" + documentoproduto.totalacrescimo.format(2, \",\", \".\");\n\t\t\t\tlet texto = \"    Acrescimo\" + \" \".repeat(this.colunas - (13 + totalacrescimo.length)) + totalacrescimo;\n\t\t\t\tawait this.texto(texto);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Imprime modelo 2 da lista de produtos\n\tasync imprimirListaProdutosModelo02() {\n\t\t// Cabecalho dos produtos\n\t\tawait this.texto(\"Descrição do produto\");\n\t\tawait this.texto(\"Quantidade X Preço\" + \" \".repeat(this.colunas - 23) + \"Total\");\n\n\t\t// Linha\n\t\tawait this.linha();\n\n\t\t// Imprime os produtos\n\t\tfor(let i = 0; i < this.documentoprodutos.length; i++){\n\t\t\tlet documentoproduto = this.documentoprodutos[i];\n\t\t//}\n\t\t//await this.documentoprodutos.forEach(async (documentoproduto) => {\n\n\t\t\t// Descricao do produto\n\t\t\tlet descricao = documentoproduto.descricao.removeSpecial();\n\t\t\t\n\t\t\t// Sequencial do produto\n\t\t\tlet sequencial = String(documentoproduto.sequencial).lpad(3, \"0\");\n\n\t\t\t// Calculo\n\t\t\tlet quantidade = documentoproduto.quantidade.format(documentoproduto.precisao, \",\", \".\") + \" \" + documentoproduto.sigla;\n\t\t\tlet preco = documentoproduto.preco.format(2, \",\", \".\");\n\t\t\tlet totalproduto = (documentoproduto.quantidade * documentoproduto.preco).format(2, \",\", \".\");\n\n\t\t\t// Monta a primeira linha\n\t\t\tlet linha1 = sequencial + \" \" + descricao;\n\t\t\tawait this.texto(linha1);\n\n\t\t\t// Monta a segunda linha\n\t\t\tlet calculo = \"    \" + quantidade + \" X \" + preco;\n\t\t\tlet linha2 = calculo + \" \".repeat(this.colunas - calculo.length - totalproduto.length) + totalproduto;\n\t\t\tawait this.texto(linha2);\n\n\t\t\t// Verifica se houve desconto no item\n\t\t\tif(documentoproduto.totaldesconto > 0){\n\t\t\t\tlet totaldesconto = \"-\" + documentoproduto.totaldesconto.format(2, \",\", \".\");\n\t\t\t\tlet texto = \"    Desconto\" + \" \".repeat(this.colunas - (12 + totaldesconto.length)) + totaldesconto;\n\t\t\t\tawait this.texto(texto);\n\t\t\t}\n\n\t\t\t// Verifica se houve acrescimo no item\n\t\t\tif(documentoproduto.totalacrescimo > 0){\n\t\t\t\tlet totalacrescimo = \"+\" + documentoproduto.totalacrescimo.format(2, \",\", \".\");\n\t\t\t\tlet texto = \"    Acrescimo\" + \" \".repeat(this.colunas - (13 + totalacrescimo.length)) + totalacrescimo;\n\t\t\t\tawait this.texto(texto);\n\t\t\t}\n\t\t}\n\n\t\t// Linha\n\t\tawait this.linha();\n\t}\n\n\t// Imprime uma linha de separacao\n\tasync linha(){\n\t\tawait this.texto(\"-\".repeat(this.colunas));\n\t}\n\n\t// Imprime um QR Code\n\tasync qrcode(qrcode){\n\t\tlet escpos = await this.carregarEscPos();\n\t\tescpos.qrcode(qrcode);\n\t}\n\n\t// Reinicia as configuracoes da impressora para os valor padroes\n\tasync reiniciar(){\n\t\tif(this.colunas === null){\n\t\t\tthis.colunas = parseInt(await valorParametro(this.Pool, \"IMPRESSORA\", \"COLUNAS\"), 10);\n\t\t}\n\t\tif(this.nome === null){\n\t\t\tthis.nome = await valorParametro(this.Pool, \"IMPRESSORA\", \"NOME\");\n\t\t}\n\t\tif(this.modelo === null){\n\t\t\tthis.modelo = await valorParametro(this.Pool, \"IMPRESSORA\", \"MODELO\");\n\t\t}\n\n\t\tlet escpos = await this.carregarEscPos();\n\t\tescpos.reset();\n\t}\n\n\t// Imprime um texto com opcao de alinhamento e negrito\n\tasync texto(texto, align, bold){\n\t\talign = (align === undefined ? \"left\" : align);\n\t\tbold = (bold === undefined ? false : bold);\n\n\t\tif(texto === null){\n\t\t\ttexto = \"\";\n\t\t}\n\n\t\tlet escpos = await this.carregarEscPos();\n\n\t\tswitch(align){\n\t\t\tcase \"center\":\n\t\t\t\ttexto = texto.cpad(this.colunas, \" \");\n\t\t\t\tbreak;\n\t\t\tcase \"left\":\n\t\t\t\ttexto = texto.rpad(this.colunas, \" \");\n\t\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\ttexto = texto.lpad(this.colunas, \" \");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\ttexto = texto.substr(0, this.colunas);\n\n\t\tescpos.text(texto, bold);\n\t}\n\n}\n","import React from \"react\";\nimport $ from \"jquery\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport FormGroup from \"../com/FormGroup.js\";\nimport Row from \"../com/Row.js\";\nimport SubTitle from \"../com/SubTitle.js\";\nimport Title from \"../com/Title.js\";\n\nimport Printer from \"../com/Printer.js\";\n\nimport {currentDate, valorParametro} from \"../def/function.js\";\n\nexport default class Fechamento extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\ttipo: null,\n\t\t\tdtinicial: null,\n\t\t\tdtfinal: null,\n\t\t\tativarFechamentoRelatorio: false,\n\t\t\tativarFechamentoResumo: false\n\t\t};\n\n\t\tthis.gerar = this.gerar.bind(this);\n\t\tthis.imprimir = this.imprimir.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t\tthis.Printer = new Printer(this.Pool);\n\n\t\t// Tipo de documentos que deverao ser contabilizadas\n\t\tlet arrOperacao = [\"CU\"];\n\t\tfor(let i in arrOperacao){\n\t\t\tarrOperacao[i] = \"'\" + arrOperacao[i] + \"'\";\n\t\t}\n\t\tthis.operacaoQuery = \"(\" + arrOperacao.join(\", \") + \")\";\n\t}\n\n\tasync gerar(){\n\t\tif(!$(\"#tipo\").val()){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Por favor, informe o tipo de fechamento antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\tif(!$(\"#dtinicial\").val()){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Por favor, informe a data inicial do fechamento antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\tif(!$(\"#dtfinal\").val()){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Por favor, informe a data final do fechamento antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tawait this.prepararImpressao();\n\n\t\tthis.setState({\n\t\t\ttipo: $(\"#tipo\").val(),\n\t\t\tdtinicial: $(\"#dtinicial\").val(),\n\t\t\tdtfinal: $(\"#dtfinal\").val(),\n\t\t\tativarFechamentoRelatorio: false,\n\t\t\tativarFechamentoResumo: false\n\t\t}, () => {\n\t\t\tthis.setState({\n\t\t\t\tativarFechamentoRelatorio: true\n\t\t\t}, () => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tativarFechamentoResumo: true\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tasync imprimir(){\n\t\tawait this.Printer.alimentar(3);\n\t\tawait this.Printer.guilhotina();\n\t\tawait this.Printer.imprimir();\n\t\twindow.FastMessage.show(\"Fechamento impresso com sucesso!\");\n\t}\n\n\tasync prepararImpressao(){\n\t\tawait this.Printer.reiniciar();\n\n\t\t// Formata as datas\n\t\tlet dtinicial = $(\"#dtinicial\").val().split(\"-\").reverse().join(\"/\");\n\t\tlet dtfinal = $(\"#dtfinal\").val().split(\"-\").reverse().join(\"/\");\n\n\t\t// Cabecalho\n\t\tawait this.Printer.texto(await valorParametro(this.Pool, \"EMITENTE\", \"NOMEFANTASIA\"), \"center\", true);\n\t\tawait this.Printer.texto(\"FECHAMENTO: \" + dtinicial + \" a \" + dtfinal, \"center\", true);\n\t\tawait this.Printer.alimentar();\n\t}\n\n\trender(){\n\t\tlet disabledImprimir = (!this.state.tipo);\n\n\t\treturn (\n\t\t\t<Content className=\"Fechamento\">\n\t\t\t\t<Title>Fechamento</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\" offset=\"3\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<FormGroup type=\"select\" id=\"tipo\" label=\"Fechamento por\" className=\"col-12\" options={{\"data\": \"Data\", \"categoria\": \"Categoria\", \"formapagamento\": \"Forma de pagamento\", \"produto\": \"Produto\"}} defaultValue=\"data\" />\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtinicial\" label=\"Data inicial\" className=\"col-6\" defaultValue={currentDate()} />\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtfinal\" label=\"Data final\" className=\"col-6\" defaultValue={currentDate()} />\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"pr-0\">\n\t\t\t\t\t\t\t\t<Button text=\"Gerar\" block={true} color=\"green\" icon=\"file-play\" onClick={this.gerar} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"pl-0\">\n\t\t\t\t\t\t\t\t<Button text=\"Imprimir\" block={true} color=\"blue\" icon=\"printer\" onClick={this.imprimir} disabled={disabledImprimir} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<FechamentoRelatorio Pool={this.Pool} Printer={this.Printer} tipo={this.state.tipo} dtinicial={this.state.dtinicial} dtfinal={this.state.dtfinal} operacaoQuery={this.operacaoQuery} ativar={this.state.ativarFechamentoRelatorio} />\n\t\t\t\t<FechamentoResumo Pool={this.Pool} Printer={this.Printer} dtinicial={this.state.dtinicial} dtfinal={this.state.dtfinal} operacaoQuery={this.operacaoQuery} ativar={this.state.ativarFechamentoResumo} />\n\t\t\t</Content>\n\t\t)\n\t}\n}\n\nclass FechamentoRelatorio extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdados: []\n\t\t};\n\n\t\tthis.tipoDescritivo = this.tipoDescritivo.bind(this);\n\t}\n\n\tasync carregarDados(props){\n\t\tprops = (props === undefined ? this.props : props);\n\n\t\t// Verifica se deve executar a instrucao\n\t\tif(!props.ativar){\n\t\t\treturn;\n\t\t}\n\n\t\t// Monta a query de acordo com o tipo de fechamento\n\t\tlet query = null;\n\t\tswitch(props.tipo){\n\t\t\tcase \"categoria\":\n\t\t\t\tquery = [\n\t\t\t\t\t\"SELECT categoria.descricao,\",\n\t\t\t\t\t\"  SUM(documentoproduto.quantidade) AS quantidade,\",\n\t\t\t\t\t\"  SUM(documentoproduto.totalproduto) AS total\",\n\t\t\t\t\t\"FROM documentoproduto\",\n\t\t\t\t\t\"INNER JOIN documento USING (iddocumento)\",\n\t\t\t\t\t\"INNER JOIN produto USING (idproduto)\",\n\t\t\t\t\t\"INNER JOIN categoria USING (idcategoria)\",\n\t\t\t\t\t\"WHERE documento.dthrcriacao::DATE BETWEEN $1 AND $2\",\n\t\t\t\t\t\"  AND documento.status = 'A'\",\n\t\t\t\t\t\"  AND documento.operacao IN \" + props.operacaoQuery,\n\t\t\t\t\t\"GROUP BY 1\",\n\t\t\t\t\t\"ORDER BY 3 DESC\"\n\t\t\t\t].join(\" \");\n\t\t\t\tbreak;\n\t\t\tcase \"data\":\n\t\t\t\tquery = [\n\t\t\t\t\t\"SELECT TO_CHAR(documento.dthrcriacao, 'DD/MM/YYYY') AS descricao,\",\n\t\t\t\t\t\"  SUM(documentoproduto.quantidade) AS quantidade,\",\n\t\t\t\t\t\"  SUM(documentoproduto.totalproduto) AS total,\",\n\t\t\t\t\t\"  documento.dthrcriacao::DATE AS dtcriacao\",\n\t\t\t\t\t\"FROM documentoproduto\",\n\t\t\t\t\t\"INNER JOIN documento USING (iddocumento)\",\n\t\t\t\t\t\"WHERE documento.dthrcriacao::DATE BETWEEN $1 AND $2\",\n\t\t\t\t\t\"  AND documento.status = 'A'\",\n\t\t\t\t\t\"  AND documento.operacao IN \" + props.operacaoQuery,\n\t\t\t\t\t\"GROUP BY 1, 4\",\n\t\t\t\t\t\"ORDER BY 4\"\n\t\t\t\t].join(\" \");\n\t\t\t\tbreak;\n\t\t\tcase \"formapagamento\":\n\t\t\t\tquery = [\n\t\t\t\t\t\"SELECT formapagamento.descricao,\",\n\t\t\t\t\t\"  COUNT(documentopagamento.iddocumentopagamento) AS quantidade,\",\n\t\t\t\t\t\"  SUM(documentopagamento.totalpagamento) AS total\",\n\t\t\t\t\t\"FROM documentopagamento\",\n\t\t\t\t\t\"INNER JOIN documento USING (iddocumento)\",\n\t\t\t\t\t\"INNER JOIN formapagamento USING (idformapagamento)\",\n\t\t\t\t\t\"WHERE documento.dthrcriacao::DATE BETWEEN $1 AND $2\",\n\t\t\t\t\t\"  AND documento.status = 'A'\",\n\t\t\t\t\t\"  AND documento.operacao IN \" + props.operacaoQuery,\n\t\t\t\t\t\"GROUP BY 1\",\n\t\t\t\t\t\"ORDER BY 3 DESC\"\n\t\t\t\t].join(\" \");\n\t\t\t\tbreak;\n\t\t\tcase \"produto\":\n\t\t\t\tquery = [\n\t\t\t\t\t\"SELECT produto.descricao,\",\n\t\t\t\t\t\"  SUM(documentoproduto.quantidade) AS quantidade,\",\n\t\t\t\t\t\"  SUM(documentoproduto.totalproduto) AS total\",\n\t\t\t\t\t\"FROM documentoproduto\",\n\t\t\t\t\t\"INNER JOIN documento USING (iddocumento)\",\n\t\t\t\t\t\"INNER JOIN produto USING (idproduto)\",\n\t\t\t\t\t\"WHERE documento.dthrcriacao::DATE BETWEEN $1 AND $2\",\n\t\t\t\t\t\"  AND documento.status = 'A'\",\n\t\t\t\t\t\"  AND documento.operacao IN \" + props.operacaoQuery,\n\t\t\t\t\t\"GROUP BY 1\",\n\t\t\t\t\t\"ORDER BY 3 DESC\"\n\t\t\t\t].join(\" \");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Executa comando SQL\n\t\tlet res = await props.Pool.query(query, [props.dtinicial, props.dtfinal]);\n\n\t\t// Determina o tamanho de cada coluna\n\t\tlet colunas = this.props.Printer.colunas;\n\t\tlet colQuantidade = 6;\n\t\tlet colTotal = 10;\n\t\tlet colDescricao = colunas - colQuantidade - colTotal;\n\n\t\t// Cria o cabecalho da grade na impressao\n\t\tlet texto = this.tipoDescritivo().substr(0, colDescricao).rpad(colDescricao, \" \");\n\t\ttexto += \"Qtde\".substr(0, colQuantidade).cpad(colQuantidade, \" \");\n\t\ttexto += \"Total\".substr(0, colTotal).lpad(colTotal, \" \");\n\t\tawait this.props.Printer.texto(texto, \"left\", true);\n\n\t\t// Alimenta classe da impressora\n\t\tfor(let i in res.rows){\n\t\t\tlet row = res.rows[i];\n\t\t\tlet descricao = row.descricao.removeSpecial();\n\t\t\tlet quantidade = row.quantidade.format(0, \",\", \".\");\n\t\t\tlet total = row.total.format(2, \",\", \".\");\n\n\t\t\tlet texto = descricao.substr(0, colDescricao).rpad(colDescricao, \" \");\n\t\t\ttexto += quantidade.substr(0, colQuantidade).cpad(colQuantidade, \" \");\n\t\t\ttexto += total.substr(0, colTotal).lpad(colTotal, \" \");\n\t\t\tawait this.props.Printer.texto(texto);\n\t\t}\n\t\tawait this.props.Printer.alimentar(2);\n\n\t\t// Atualiza o State com os dados\n\t\tthis.setState({\n\t\t\tdados: res.rows\n\t\t});\n\t}\n\n\tcomponentWillUpdate(nextProps){\n\t\tif(nextProps !== this.props){\n\t\t\tthis.carregarDados(nextProps);\n\t\t}\n\t}\n\n\ttipoDescritivo(){\n\t\tswitch(this.props.tipo){\n\t\t\tcase \"categoria\":\n\t\t\t\treturn \"Categoria\";\n\t\t\tcase \"data\":\n\t\t\t\treturn \"Data\";\n\t\t\tcase \"formapagamento\":\n\t\t\t\treturn \"Forma de pagamento\";\n\t\t\tcase \"produto\":\n\t\t\t\treturn \"Produto\";\n\t\t\tdefault:\n\t\t\t\treturn this.props.tipo;\n\t\t}\n\t}\n\n\trender(){\n\t\tif(!this.props.ativar || this.props.tipo === null){\n\t\t\treturn null;\n\t\t}\n\n\t\tlet t_quantidade = 0;\n\t\tlet t_total = 0;\n\n\t\treturn (\n\t\t\t<Row className=\"mt-5\">\n\t\t\t\t<Col size=\"8\" offset=\"2\">\n\t\t\t\t\t<table className=\"table table-striped\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>{this.tipoDescritivo()}</th>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">Quantidade</th>\n\t\t\t\t\t\t\t\t<th className=\"text-right\">Total</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{this.state.dados.map((e, i) => {\n\t\t\t\t\t\t\t\tt_quantidade += parseFloat(e.quantidade);\n\t\t\t\t\t\t\t\tt_total += parseFloat(e.total);\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<tr key={i}>\n\t\t\t\t\t\t\t\t\t\t<td>{e.descricao}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-center\">{e.quantidade.format(0, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + e.total.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">{t_quantidade.format(0, \",\", \".\")}</th>\n\t\t\t\t\t\t\t\t<th className=\"text-right\">{\"R$ \" + t_total.format(2, \",\", \".\")}</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tfoot>\n\t\t\t\t\t</table>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t);\n\t}\n}\n\nclass FechamentoResumo extends React.Component {\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\ttotalbruto: 0,\n\t\t\ttotalcancelado: 0,\n\t\t\tqtdecancelado: 0,\n\t\t\ttotalativo: 0,\n\t\t\tqtdeativo: 0,\n\t\t\ttotalorcamento: 0\n\t\t};\n\n\t\tthis.carregarDados = this.carregarDados.bind(this);\n\t}\n\n\tasync carregarDados(props){\n\t\tprops = (props === undefined ? this.props : props);\n\n\t\t// Verifica se deve executar a instrucao\n\t\tif(!props.ativar){\n\t\t\treturn;\n\t\t}\n\n\t\tlet query = [\n\t\t\t\"SELECT COALESCE((SELECT SUM(totaldocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND operacao IN (\" + props.operacaoQuery + \")), 0) AS totalbruto,\",\n\t\t\t\"  COALESCE((SELECT SUM(totaldocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND status = 'C' AND operacao IN (\" + props.operacaoQuery + \")), 0) AS totalcancelado,\",\n\t\t\t\"  COALESCE((SELECT COUNT(iddocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND status = 'C' AND operacao IN (\" + props.operacaoQuery + \")), 0) AS qtdecancelado,\",\n\t\t\t\"  COALESCE((SELECT SUM(totaldocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND status = 'A' AND operacao IN (\" + props.operacaoQuery + \")), 0) AS totalativo,\",\n\t\t\t\"  COALESCE((SELECT COUNT(iddocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND status = 'A' AND operacao IN (\" + props.operacaoQuery + \")), 0) AS qtdeativo,\",\n\t\t\t\"  COALESCE((SELECT SUM(totaldocumento) FROM documento WHERE dthrcriacao::DATE BETWEEN $1 AND $2 AND status = 'A' AND operacao IN ('OR')), 0) AS totalorcamento\",\n\t\t].join(\" \");\n\n\t\t// Executa comando SQL\n\t\tlet res = await props.Pool.query(query, [props.dtinicial, props.dtfinal]);\n\t\tlet row = res.rows[0];\n\n\t\t// Monta impressao do resumo\n\t\tlet colResumo2 = 15;\n\t\tlet colResumo1 = this.props.Printer.colunas - colResumo2;\n\t\tawait this.props.Printer.texto(\"RESUMO\", \"center\", true);\n\t\tawait this.props.Printer.texto(\"Total bruto das vendas\".rpad(colResumo1, \" \") + row.totalbruto.format(2, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Total de vendas canceladas\".rpad(colResumo1, \" \") + row.totalcancelado.format(2, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Quantidade de vendas canceladas\".rpad(colResumo1, \" \") + row.qtdecancelado.format(0, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Total liquido das vendas\".rpad(colResumo1, \" \") + row.totalativo.format(2, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Quantidade de vendas\".rpad(colResumo1, \" \") + row.qtdeativo.format(0, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Total liquido das vendas\".rpad(colResumo1, \" \") + (row.totalativo / row.qtdeativo).format(2, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.texto(\"Total bruto dos orcamentos\".rpad(colResumo1, \" \") + row.totalorcamento.format(2, \",\", \".\").lpad(colResumo2, \" \"));\n\t\tawait this.props.Printer.alimentar(2);\n\n\t\t// Atualiza o State com o dados\n\t\tthis.setState({\n\t\t\ttotalbruto: row.totalbruto,\n\t\t\ttotalcancelado: row.totalcancelado,\n\t\t\tqtdecancelado: row.qtdecancelado,\n\t\t\ttotalativo: row.totalativo,\n\t\t\tqtdeativo: row.qtdeativo,\n\t\t\ttotalorcamento: row.totalorcamento\n\t\t});\n\t}\n\n\tcomponentWillUpdate(nextProps){\n\t\tif(nextProps !== this.props){\n\t\t\tthis.carregarDados(nextProps);\n\t\t}\n\t}\n\n\trender(){\n\t\tif(!this.props.ativar || this.props.dtinicial === null || this.props.dtfinal === null){\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"mb-5\">\n\t\t\t\t<SubTitle text=\"Resumo\" />\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"8\" offset=\"2\">\n\t\t\t\t\t\t<table className=\"table table-striped\">\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Total bruto das vendas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + this.state.totalbruto.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Total de vendas canceladas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + this.state.totalcancelado.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Quantidade de vendas canceladas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{this.state.qtdecancelado}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Total liquido de vendas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + this.state.totalativo.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Quantidade de vendas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{this.state.qtdeativo}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Ticket médio das vendas</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + (this.state.totalativo / this.state.qtdeativo).format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td>Total dos orçamentos</td>\n\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + this.state.totalorcamento.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import { default as xlsx } from \"node-xlsx\";\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nconst electron = window.require(\"electron\");\n\nexport default class Importacao {\n\n\tconstructor(Pool){\n\t\tthis.Pool = Pool;\n\t}\n\n\tcorAleatoria(){\n\t\tlet cores = [\n\t\t\t\"#b71c1c\", \"#d32f2f\", \"#f44336\", \"#e57373\", \"#ffcdd2\",\n\t\t\t\"#880e4f\", \"#c2185b\", \"#e91e63\", \"#f06292\", \"#f8bbd0\",\n\t\t\t\"#4a148c\", \"#7b1fa2\", \"#9c27b0\", \"#ba68c8\", \"#e1bee7\",\n\t\t\t\"#311b92\", \"#512da8\", \"#673ab7\", \"#9575cd\", \"#d1c4e9\",\n\t\t\t\"#1a237e\", \"#303f9f\", \"#3f51b5\", \"#7986cb\", \"#c5cae9\",\n\t\t\t\"#0d47a1\", \"#1976d2\", \"#2196f3\", \"#64b5f6\", \"#bbdefb\",\n\t\t\t\"#01579b\", \"#0288d1\", \"#03a9f4\", \"#4fc3f7\", \"#b3e5fc\",\n\t\t\t\"#006064\", \"#0097a7\", \"#00bcd4\", \"#4dd0e1\", \"#b2ebf2\",\n\t\t\t\"#004d40\", \"#00796b\", \"#009688\", \"#4db6ac\", \"#b2dfdb\",\n\t\t\t\"#194D33\", \"#388e3c\", \"#4caf50\", \"#81c784\", \"#c8e6c9\",\n\t\t\t\"#33691e\", \"#689f38\", \"#8bc34a\", \"#aed581\", \"#dcedc8\",\n\t\t\t\"#827717\", \"#afb42b\", \"#cddc39\", \"#dce775\", \"#f0f4c3\",\n\t\t\t\"#f57f17\", \"#fbc02d\", \"#ffeb3b\", \"#fff176\", \"#fff9c4\",\n\t\t\t\"#ff6f00\", \"#ffa000\", \"#ffc107\", \"#ffd54f\", \"#ffecb3\",\n\t\t\t\"#e65100\", \"#f57c00\", \"#ff9800\", \"#ffb74d\", \"#ffe0b2\",\n\t\t\t\"#bf360c\", \"#e64a19\", \"#ff5722\", \"#ff8a65\", \"#ffccbc\",\n\t\t\t\"#3e2723\", \"#5d4037\", \"#795548\", \"#a1887f\", \"#d7ccc8\",\n\t\t\t\"#263238\", \"#455a64\", \"#607d8b\", \"#90a4ae\", \"#cfd8dc\",\n\t\t\t\"#000000\", \"#525252\", \"#969696\", \"#D9D9D9\", \"#FFFFFF\"\n\t\t];\n\t\treturn cores[Math.floor(Math.random() * cores.length)];\n\t}\n\n\tasync incluirCategoria(client, categoria){\n\t\tlet cor = this.corAleatoria();\n\n\t\tlet sql = \"INSERT INTO categoria (descricao, idncm, sinctributacao, cor) VALUES ($1, $2, $3, $4) RETURNING idcategoria\";\n\t\tlet res = await client.query(sql, [categoria.descricao, categoria.idncm, 'S', cor]);\n\n\t\treturn res.rows[0].idcategoria;\n\t}\n\n\tasync incluirProduto(client, produto){\n\t\tconsole.log(produto);\n\n\t\t// Trata alguns valores recebidos\n\t\tif(produto.balanca)\tproduto.balanca = produto.balanca.substr(0, 1).toUpperCase();\n\t\tif(produto.precovariavel) produto.precovariavel = produto.precovariavel.substr(0, 1).toUpperCase();\n\t\tif(produto.preco) produto.preco = produto.preco.toFloat();\n\t\tif(produto.aliqicms) produto.aliqicms = produto.aliqicms.toFloat();\n\t\tif(produto.aliqpis) produto.aliqpis = produto.aliqpis.toFloat();\n\t\tif(produto.aliqcofins) produto.aliqcofins = produto.aliqcofins.toFloat();\n\n\t\t// Balanca para unidade de medida\n\t\tproduto.idunidade = (produto.balanca === \"S\" ? 2 : 1);\n\t\tdelete produto.balanca;\n\n\t\t// Preenche o preco com zero caso venha vazio\n\t\tif(!produto.preco){\n\t\t\tproduto.preco = 0;\n\t\t}\n\n\t\t// Reformata o NCM\n\t\tif(produto.codigoncm){\n\t\t\tproduto.codigoncm = String(produto.codigoncm).removeFormat();\n\t\t\tproduto.codigoncm = produto.codigoncm.substr(0, 4) + \".\" + produto.codigoncm.substr(4, 2) + \".\" + produto.codigoncm.substr(6, 2);\n\t\t}\n\n\t\t// Reformata o CEST\n\t\tif(produto.cest){\n\t\t\tproduto.cest = produto.cest.removeFormat();\n\t\t\tproduto.cest = produto.cest.substr(0, 2) + \".\" + produto.cest.substr(2, 4) + \".\" + produto.cest.substr(6, 2);\n\t\t}\n\n\t\t// Reformata o CFOP\n\t\tif(produto.cfop){\n\t\t\tproduto.cfop = produto.cfop.removeFormat();\n\t\t\tproduto.cfop = produto.cfop.substr(0, 1) + \".\" + produto.cfop.substr(1, 3);\n\t\t}\n\n\t\t// Verifica se deve sincronizar a tributacao\n\t\tconsole.log([produto.csosn, produto.cstpis, produto.cstcofins, (produto.csosn || produto.cstpis || produto.cstcofins)]);\n\t\tif(produto.csosn || produto.cstpis || produto.cstcofins){\n\t\t\tproduto.sinctributacao = \"N\";\n\t\t}else{\n\t\t\tproduto.sinctributacao = \"S\";\n\t\t}\n\n\t\t// Carrega o ID do NCM\n\t\tif(produto.codigoncm && !produto.idncm){\n\t\t\tlet res = await client.query(\"SELECT idncm FROM ncm WHERE codigoncm = $1\", [produto.codigoncm]);\n\t\t\tif(res.rows.length === 0){\n\t\t\t\tthrow new Error(\"O NCM \" + produto.codigoncm + \" não foi encontrado na base de NCMs do SAT-Flex.\");\n\t\t\t}\n\t\t\tproduto.idncm = res.rows[0].idncm;\n\t\t}\n\n\t\t// Verifica se deve consultar a categoria\n\t\tif(produto.categoria && !produto.idcateogria){\n\t\t\tlet res = await client.query(\"SELECT idcategoria FROM categoria WHERE descricao = $1\", [produto.categoria]);\n\t\t\tif(res.rows.length === 0){\n\t\t\t\t// Cria a categoria e retorna o ID\n\t\t\t\tproduto.idcategoria = await this.incluirCategoria(client, {\n\t\t\t\t\tdescricao: produto.categoria,\n\t\t\t\t\tidncm: produto.idncm\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tproduto.idcategoria = res.rows[0].idcategoria;\n\t\t\t}\n\t\t}\n\n\t\t// Remove as colunas que nao vao entrar no SQL\n\t\tdelete produto.codigoncm;\n\t\tdelete produto.categoria;\n\n\t\t// Caputura as colunas e os valores\n\t\tlet columns = Object.keys(produto);\n\t\tlet values = Object.values(produto);\n\t\tlet references = [];\n\t\tfor(let i = 1; i <= values.length; i++){\n\t\t\treferences.push(\"$\" + String(i));\n\t\t}\n\n\t\t// Cria SQL de inclusao do produto e executa\n\t\tlet sql = \"INSERT INTO produto (\" + columns.join(\", \") + \") VALUES (\" + references.join(\", \") + \")\";\n\t\tawait client.query(sql, values);\n\n\t\t// Incrementa o contador de produto importados\n\t\tthis.importados++;\n\t}\n\n\tasync processarPlanilha(fileName, callBack){\n\t\t// Abre um client com o banco de dados\n\t\tconst client = await this.Pool.connect();\n\n\t\ttry{\n\t\t\t// Inicia a transacao\n\t\t\tclient.query(\"BEGIN\");\n\n\t\t\t// Carrega a planilha\n\t\t\tlet planilha = xlsx.parse(fileName);\n\n\t\t\t// Captura os dados a serem lidos\n\t\t\tlet dados = planilha[0].data;\n\n\t\t\t// Remove a primeira linha (cabecalho)\n\t\t\tdados.shift();\n\n\t\t\t// Verifica se existe ao menos um produto\n\t\t\tif(typeof dados !== \"object\" || dados.length === 0 || dados[0].length === 0){\n\t\t\t\tthrow new Error(\"Nenhum produto foi encontrado na planilha.\");\n\t\t\t}\n\n\t\t\t// Percorre as linhas da planilha\n\t\t\tfor(let linha of dados){\n\t\t\t\tif(!linha[0]){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet produto = {\n\t\t\t\t\tdescricao: linha[0],\n\t\t\t\t\tcategoria: linha[1],\n\t\t\t\t\tcodigoean: linha[2],\n\t\t\t\t\tbalanca: linha[3],\n\t\t\t\t\tprecovariavel: linha[4],\n\t\t\t\t\tpreco: linha[5],\n\t\t\t\t\tcodigoncm: linha[6],\n\t\t\t\t\torigem: linha[7],\n\t\t\t\t\tcsosn: linha[8],\n\t\t\t\t\taliqicms: linha[9],\n\t\t\t\t\tcstpis: linha[10],\n\t\t\t\t\taliqpis: linha[11],\n\t\t\t\t\tcstcofins: linha[12],\n\t\t\t\t\taliqcofins: linha[13],\n\t\t\t\t\tcodcontribsocial: linha[14],\n\t\t\t\t\tcest: linha[15],\n\t\t\t\t\tcfop: linha[16]\n\t\t\t\t};\n\n\t\t\t\t// Tenta gravar o produto\n\t\t\t\tawait this.incluirProduto(client, produto);\n\t\t\t}\n\n\t\t\t// Confirma a transacao do banco de dados\n\t\t\tawait client.query(\"COMMIT\");\n\n\t\t\t// Sucesso\n\t\t\tcallBack();\n\t\t}catch(err){\n\t\t\t// Cancela a transacao no banco\n\t\t\tawait client.query(\"ROLLBACK\");\n\t\t\tcallBack(err);\n\t\t}finally{\n\t\t\t// Libera o client com o banco\n\t\t\tclient.release();\n\t\t}\n\t}\n\n\tselecionarPlanilha(){\n\t\tlet {dialog} = electron.remote;\n\t\tdialog.showOpenDialog({\n\t\t\ttitle: \"Selecone a planilha de produtos\",\n\t\t\tfilters: [\n\t\t\t\t{name: \"MS-Excel\", extensions: [\"xls\", \"xlsx\"]}\n\t\t\t]\n\t\t}, (filePaths) => {\n\t\t\tif(filePaths && filePaths.length > 0){\n\t\t\t\tthis.importados = 0;\n\t\t\t\twindow.Loading.show();\n\t\t\t\tthis.processarPlanilha(filePaths[0], (err) => {\n\t\t\t\t\twindow.Loading.hide();\n\t\t\t\t\tif(err) return defaultMessageBoxError(err);\n\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\ttitle: \"Planilha importada com sucesso!\",\n\t\t\t\t\t\ttext: \"A planilha de produtos foi importada com sucesso.<br>Total de produtos: \" + String(this.importados)\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n}\n","import React from \"react\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport Importacao from \"../com/Importacao.js\";\nimport Printer from \"../com/Printer.js\";\n\nconst electron = window.require(\"electron\");\n\nexport default class Ferramentas extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tredirect: null\n\t\t};\n\n\t\tthis.descobrirPortaImpressora = this.descobrirPortaImpressora.bind(this);\n\t\tthis.importarPlanilha = this.importarPlanilha.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tconsoleDesenvolvedor(){\n\t\telectron.remote.getCurrentWebContents().openDevTools();\n\t}\n\n\tdescobrirPortaImpressora(){\n\t\twindow.Loading.show();\n\t\tnew Promise(async (resolve) => {\n\t\t\tlet printer = new Printer(this.Pool);\n\t\t\tfor(let i = 1; i <= 20; i++){\n\t\t\t\tlet nome = \"COM\" + String(i);\n\t\t\t\tlet texto = \"Porta configurada para impressora: \" + nome + \" \".repeat(90);\n\t\t\t\ttry{\n\t\t\t\t\tawait printer.imprimir(nome, texto, \"escpos\");\n\t\t\t\t}catch(err){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tresolve();\n\t\t}).then(() => {\n\t\t\twindow.Loading.hide();\n\t\t\twindow.FastMessage.show(\"Texto enviado para as portas COM\");\n\t\t});\n\t}\n\n\timportarPlanilha(){\n\t\tlet importacao = new Importacao(this.Pool);\n\t\timportacao.selecionarPlanilha();\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Ferramentas</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"8\" offset=\"2\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text=\"Descobrir porta<br>COM da impressora\" icon=\"printer\" size=\"xxl\" block={true} onClick={this.descobrirPortaImpressora} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text=\"Importar planilha<br>de produtos\" icon=\"download\" size=\"xxl\" block={true} onClick={this.importarPlanilha} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t<Button text=\"Abrir console de<br>desenvolvedor\" icon=\"embed2\" size=\"xxl\" block={true} onClick={this.consoleDesenvolvedor} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport \"../css/ListGroup.css\";\n\nexport default class ListGroup extends React.Component {\n\trender(){\n\t\tlet className = [\"list-group\"];\n\n\t\tif(this.props.className){\n\t\t\tclassName.push(this.props.className);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport \"../css/ListItem.css\";\n\nexport default class ListItem extends React.Component {\n\trender(){\n\t\tlet props = Object.assign({}, this.props);\n\n\t\tlet className = [\"list-group-item\"];\n\t\tif(props.className){\n\t\t\tclassName.push(props.className);\n\t\t}\n\t\tif(props.active){\n\t\t\tclassName.push(\"active\");\n\t\t}\n\t\tdelete props.active;\n\t\tdelete props.className;\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")} {...props}>\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport FormControl from \"../com/FormControl.js\";\nimport ListGroup from \"../com/ListGroup.js\";\nimport ListItem from \"../com/ListItem.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/Parametro.css\";\n\nexport default class Parametro extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tlistaGrupo: [],\n\t\t\tlistaParametro: [],\n\t\t\tgrupoAtivo: null,\n\t\t\tparametroAtivo: null,\n\n\t\t\tidparametro: null,\n\t\t\tvalor: null,\n\t\t\tobservacao: null\n\t\t};\n\n\t\tthis.ajustarAltura = this.ajustarAltura.bind(this);\n\t\tthis.carregarListaGrupo = this.carregarListaGrupo.bind(this);\n\t\tthis.carregarListaParametro = this.carregarListaParametro.bind(this);\n\t\tthis.carregarParametro = this.carregarParametro.bind(this);\n\t\tthis.gravar = this.gravar.bind(this);\n\t\tthis.onChangeValor = this.onChangeValor.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tajustarAltura(){\n\t\t$(\"#content .list-group\").each(function(){\n\t\t\tlet height = window.innerHeight - $(this).offset().top - 30;\n\t\t\t$(this).height(height);\n\t\t});\n\t}\n\n\tcarregarListaGrupo(){\n\t\tthis.Pool.query(\"SELECT DISTINCT grupo FROM parametro WHERE visivel = 'S' ORDER BY grupo\", [], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tlistaGrupo: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcarregarListaParametro(grupo){\n\t\tthis.Pool.query(\"SELECT idparametro, nome FROM parametro WHERE visivel = 'S' AND grupo = $1 ORDER BY ordem, nome\", [grupo], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tlistaParametro: res.rows,\n\t\t\t\tgrupoAtivo: grupo,\n\t\t\t\tparametroAtivo: null,\n\n\t\t\t\tidparametro: null,\n\t\t\t\tvalor: null,\n\t\t\t\tobservacao: null\n\t\t\t});\n\t\t});\n\t}\n\n\tcarregarParametro(idparametro){\n\t\tthis.Pool.query(\"SELECT idparametro, valor, observacao FROM parametro WHERE idparametro = $1\", [idparametro], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet row = res.rows.shift();\n\t\t\tthis.setState({\n\t\t\t\tparametroAtivo: idparametro,\n\t\t\t\tidparametro: row.idparametro,\n\t\t\t\tvalor: row.valor,\n\t\t\t\tobservacao: row.observacao\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\twindow.addEventListener(\"resize\", this.ajustarAltura);\n\n\t\tthis.ajustarAltura();\n\t\tthis.carregarListaGrupo();\n\t}\n\n\tcomponentWillUnmount(){\n\t\twindow.removeEventListener(\"resize\", this.ajustarAltura);\n\t}\n\n\tgravar(){\n\t\tlet query = \"UPDATE parametro SET valor = $1 WHERE idparametro = $2\";\n\t\tthis.Pool.query(query, [this.state.valor, this.state.idparametro], (err) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\twindow.FastMessage.show(\"Parâmetro atualizado com sucesso!\");\n\t\t})\n\t}\n\n\tonChangeValor(event){\n\t\tthis.setState({\n\t\t\tvalor: event.target.value\n\t\t});\n\t}\n\n\trender(){\n\t\tlet observacao = null;\n\t\tif(this.state.observacao){\n\t\t\tobservacao = this.state.observacao.replaceAll(\"\\\\n\", \"<br>\");\n\t\t}\n\n\t\treturn (\n\t\t\t<Content className=\"Parametro\">\n\t\t\t\t<Title>Parâmetros do sistema</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"3\" offset=\"1\">\n\t\t\t\t\t\t<ListGroup>\n\t\t\t\t\t\t\t{this.state.listaGrupo.map((row, i) => {\n\t\t\t\t\t\t\t\treturn <ListItem key={i} active={this.state.grupoAtivo === row.grupo} onClick={() => {this.carregarListaParametro(row.grupo)}}>{row.grupo}</ListItem>\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</ListGroup>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"3\">\n\t\t\t\t\t\t<ListGroup>\n\t\t\t\t\t\t\t{this.state.listaParametro.map((row, i) => {\n\t\t\t\t\t\t\t\treturn <ListItem key={i} active={this.state.parametroAtivo === row.idparametro} onClick={() => {this.carregarParametro(row.idparametro)}}>{row.nome}</ListItem>\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</ListGroup>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t<FormControl type=\"textarea\" rows=\"7\" value={this.state.valor} onChange={this.onChangeValor} disabled={!this.state.idparametro} />\n\t\t\t\t\t\t<Button text=\"Gravar alterações\" icon=\"floppy-disk\" color=\"green\" size=\"lg\" block={true} className=\"mt-2 mb-2\" disabled={!this.state.idparametro} onClick={this.gravar} />\n\t\t\t\t\t\t<div className={\"observacao\" + (observacao ? \"\" : \" d-none\")} dangerouslySetInnerHTML={{__html: observacao}}></div>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport FormControl from \"../com/FormControl.js\";\nimport FormGroup from \"../com/FormGroup.js\";\nimport Hr from \"../com/Hr.js\";\nimport Modal from \"../com/Modal.js\";\nimport Row from \"../com/Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class ModalProduto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tshow: this.props.show,\n\t\t\tshowDiv: null,\n\t\t\ttitle: null\n\t\t};\n\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.changeDiv = this.changeDiv.bind(this);\n\t\tthis.changeTitle = this.changeTitle.bind(this);\n\t\tthis.excluir = this.excluir.bind(this);\n\t\tthis.gravar = this.gravar.bind(this);\n\t\tthis.limpar = this.limpar.bind(this);\n\t\tthis.onChangeCategoria = this.onChangeCategoria.bind(this);\n\t\tthis.onChangeInput = this.onChangeInput.bind(this);\n\t\tthis.onChangeSincTributacao = this.onChangeSincTributacao.bind(this);\n\t\tthis.sincronizarTributacao = this.sincronizarTributacao.bind(this);\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false,\n\t\t\tshowDiv: null\n\t\t});\n\t}\n\n\tcarregar(idproduto, callback){\n\t\tlet query = [\n\t\t\t\"SELECT produto.descricao, produto.dthrcriacao,\",\n\t\t\t\"  produto.idcategoria, produto.codigoean, produto.idunidade,\",\n\t\t\t\"  produto.precovariavel, produto.preco, produto.status,\",\n\t\t\t\"  produto.sinctributacao, ncm.codigoncm, produto.origem,\",\n\t\t\t\"  produto.cfop, produto.csosn, produto.aliqicms, \",\n\t\t\t\"  produto.cstpis, produto.aliqpis, produto.cstcofins, \",\n\t\t\t\"  produto.aliqcofins, produto.codcontribsocial, produto.cest\",\n\t\t\t\"FROM produto\",\n\t\t\t\"LEFT JOIN ncm USING (idncm)\",\n\t\t\t\"WHERE produto.idproduto = $1\"\n\t\t].join(\" \");\n\n\t\tthis.props.Pool.query(query, [idproduto], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(res.rows.length === 0){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Produto não encontrado\",\n\t\t\t\t\ttext: \"O produto selecionado não pôde ser encontrado.\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet state = {};\n\t\t\tlet row = res.rows[0];\n\t\t\tfor(let id in row){\n\t\t\t\tlet value = row[id];\n\t\t\t\tswitch(id){\n\t\t\t\t\tcase \"dthrcriacao\":\n\t\t\t\t\t\tvalue = value.toLocaleString();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"preco\":\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tvalue = value.format(2, \",\", \".\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tstate[\"input_\" + id] = value;\n\t\t\t}\n\t\t\tthis.setState(state);\n\n\t\t\tif(typeof callback === \"function\"){\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t}\n\n\tchangeDiv(name){\n\t\tthis.setState({\n\t\t\tshowDiv: name\n\t\t});\n\t}\n\n\tchangeTitle(props){\n\t\tif(props.idproduto){\n\t\t\tprops.Pool.query(\"SELECT descricao FROM produto WHERE idproduto = $1\", [props.idproduto], (err, res) => {\n\t\t\t\tif(err){\n\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\ttitle: \"Alterando produto: \" + res.rows[0].descricao\n\t\t\t\t});\n\t\t\t});\n\t\t}else{\n\t\t\tthis.setState({\n\t\t\t\ttitle: \"Criando novo produto\"\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tif(!nextProps.show){\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.changeTitle(nextProps);\n\n\t\tlet updateShowState = () => {\n\t\t\tthis.setState({\n\t\t\t\tshow: nextProps.show\n\t\t\t}, () => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.changeDiv(\"principal\");\n\t\t\t\t}, 1000);\n\t\t\t});\n\t\t};\n\n\t\tif(nextProps.idproduto){\n\t\t\tthis.carregar(nextProps.idproduto, updateShowState);\n\t\t}else{\n\t\t\tthis.limpar();\n\t\t\tupdateShowState();\n\t\t}\n\t}\n\n\texcluir(){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Excluír produto\",\n\t\t\ttext: \"Tem certeza que deseja excluír o produto <b>\" + this.state.input_descricao + \"</b>?\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tthis.props.Pool.query(\"DELETE FROM produto WHERE idproduto = $1\", [this.props.idproduto], (err, res) => {\n\t\t\t\t\t\t\tif(err){\n\t\t\t\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tshow: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\twindow.FastMessage.show(\"Produto excluído com sucesso.\");\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Não\",\n\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t})\n\t}\n\n\tasync gravar(){\n\t\tlet query = null;\n\n\t\tlet columns = [];\n\t\tlet values = [];\n\t\tfor(let name in this.state){\n\t\t\tif(name.substr(0, 6) === \"input_\"){\n\t\t\t\tlet name2 = name.replace(\"input_\", \"\");\n\t\t\t\tlet value = this.state[name];\n\n\t\t\t\tif(name2 === \"codigoncm\" && value){\n\t\t\t\t\ttry{\n\t\t\t\t\t\tlet res = await this.props.Pool.query(\"SELECT idncm FROM ncm WHERE codigoncm = $1\", [value]);\n\t\t\t\t\t\tif(res.rows.length === 0){\n\t\t\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\t\t\ttitle: \"NCM inexistente\",\n\t\t\t\t\t\t\t\ttext: \"O código de NCM \" + value + \" não pôde ser encontrado.<br>Verifique se foi informado corretamente.\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tname2 = \"idncm\";\n\t\t\t\t\t\tvalue = res.rows[0].idncm;\n\t\t\t\t\t}catch(err){\n\t\t\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif([\"idproduto\", \"dthrcriacao\"].indexOf(name2) > -1){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tswitch(name2){\n\t\t\t\t\tcase \"preco\":\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tif(value){\n\t\t\t\t\t\t\tvalue = value.toFloat();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcolumns.push(name2);\n\t\t\t\tvalues.push(value);\n\t\t\t}\n\t\t}\n\n\t\tif(this.props.idproduto){\n\t\t\tlet num = 1;\n\t\t\tlet sets = [];\n\t\t\tfor(let i in columns){\n\t\t\t\tsets.push(columns[i] + \" = $\" + num++);\n\t\t\t}\n\t\t\tquery = \"UPDATE produto SET \" + sets.join(\", \") + \" WHERE idproduto = \" + this.props.idproduto;\n\t\t}else{\n\t\t\tlet sets = [];\n\t\t\tfor(let i = 0; i < columns.length; i++){\n\t\t\t\tsets.push(\"$\" + (i + 1));\n\t\t\t}\n\t\t\tquery = \"INSERT INTO produto (\" + columns.join(\", \") + \") VALUES (\" + sets.join(\", \") + \")\";\n\t\t}\n\n\t\tthis.props.Pool.query(query, values, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.FastMessage.show(\"Produto gravado com sucesso.\");\n\t\t});\n\t}\n\n\tlimpar(){\n\t\tlet state = {};\n\t\tfor(let name in this.state){\n\t\t\tif(name.substr(0, 6) === \"input_\"){\n\t\t\t\tstate[name] =  null;\n\t\t\t}\n\t\t}\n\t\tthis.setState(state);\n\t}\n\n\tonChangeCategoria(event){\n\t\tthis.onChangeInput(event, () => {\n\t\t\tthis.sincronizarTributacao();\n\t\t});\n\t}\n\n\tonChangeInput(event, callback){\n\t\tlet element = event.target;\n\t\tlet id = element.id.replace(\"modalproduto-\", \"\");\n\t\tlet value = element.value;\n\t\tif(element.type === \"checkbox\"){\n\t\t\tvalue = (element.checked ? \"S\" : \"N\");\n\t\t}\n\n\t\tthis.setState({\n\t\t\t[\"input_\" + id]: value\n\t    }, callback);\n\t}\n\n\tonChangeSincTributacao(event){\n\t\tthis.onChangeInput(event, () => {\n\t\t\tthis.sincronizarTributacao();\n\t\t});\n\t}\n\n\tsincronizarTributacao(){\n\t\tif(this.state.input_sinctributacao !== \"S\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tlet query = [\n\t\t\t\"SELECT ncm.codigoncm, categoria.origem,\",\n\t\t\t\"  categoria.cfop, categoria.csosn, categoria.aliqicms, \",\n\t\t\t\"  categoria.cstpis, categoria.aliqpis, categoria.cstcofins, \",\n\t\t\t\"  categoria.aliqcofins, categoria.codcontribsocial, categoria.cest\",\n\t\t\t\"FROM categoria\",\n\t\t\t\"LEFT JOIN ncm USING (idncm)\",\n\t\t\t\"WHERE categoria.idcategoria = $1\"\n\t\t].join(\" \");\n\n\t\tthis.props.Pool.query(query, [this.state.input_idcategoria], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(res.rows.length === 0){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Categoria não encontrada\",\n\t\t\t\t\ttext: \"A categoria informada no produto não pôde ser encontrada.\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet state = {};\n\t\t\tlet row = res.rows[0];\n\t\t\tfor(let id in row){\n\t\t\t\tlet value = row[id];\n\t\t\t\tswitch(id){\n\t\t\t\t\tcase \"aliqicms\":\n\t\t\t\t\tcase \"aliqpis\":\n\t\t\t\t\tcase \"aliqcofins\":\n\t\t\t\t\t\tvalue = value.format(2, \",\", \".\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tstate[\"input_\" + id] = value;\n\t\t\t}\n\t\t\tthis.setState(state);\n\t\t});\n\t}\n\n\tshouldComponentUpdate(nextProps){\n\t\treturn nextProps.show;\n\t}\n\n\trender(){\n\t\tlet origemOptions = {\n\t\t\t\"0\": \"0 - Nacional, exceto as indicadas nos códigos 3, 4, 5 e 8\",\n\t\t\t\"1\": \"1 - Estrangeira - Importação direta, exceto a indicada no código 6\",\n\t\t\t\"2\": \"2 - Estrangeira - Adquirida no mercado interno, exceto a indicada no código 7\",\n\t\t\t\"3\": \"3 - Nacional, mercadoria ou bem com Conteúdo de Importação superior a 40% e inferior ou igual a 70%\",\n\t\t\t\"4\": \"4 - Nacional, cuja produção tenha sido feita em conformidade com os processos produtivos básicos de que tratam o Decreto-Lei nº 288/67, e as Leis nºs 8.248/91, 8.387/91, 10.176/01 e 11.484/ 07\",\n\t\t\t\"5\": \"5 - Nacional, mercadoria ou bem com Conteúdo de Importação inferior ou igual a 40%\",\n\t\t\t\"6\": \"6 - Estrangeira - Importação direta, sem similar nacional, constante em lista da Resolução CAMEX nº 79/2012 e gás natural\",\n\t\t\t\"7\": \"7 - Estrangeira - Adquirida no mercado interno, sem similar nacional, constante em lista da Resolução CAMEX nº 79/2012 e gás natural\",\n\t\t\t\"8\": \"8 - Nacional, mercadoria ou bem com Conteúdo de Importação superior a 70%\"\n\t\t};\n\n\t\treturn (\n\t\t\t<Modal title={this.state.title} size=\"lg\" show={this.state.show} beforeClose={this.props.beforeClose} afterClose={this.props.afterClose} closeOnOutClick={false}>\n\t\t\t\t<div className={this.state.showDiv !== \"principal\" ? \"d-none\" : \"\"}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-descricao\" className=\"col-8\" label=\"Descrição\" value={this.state.input_descricao} onChange={this.onChangeInput} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-dthrcriacao\" className=\"col-4\" label=\"Criado em\" readOnly={true} value={this.state.input_dthrcriacao} onChange={this.onChangeInput} disabled={true} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-idcategoria\" className=\"col-5\" label=\"Categoria\" dbtable=\"categoria\" dbcolumn=\"descricao\" Pool={this.props.Pool} value={this.state.input_idcategoria} onChange={this.onChangeCategoria} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-codigoean\" className=\"col-4\" label=\"Código EAN\" value={this.state.input_codigoean} onChange={this.onChangeInput} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-idunidade\" className=\"col-3\" label=\"Unidade de venda\" dbtable=\"unidade\" dbcolumn=\"descricao\" Pool={this.props.Pool} value={this.state.input_idunidade} onChange={this.onChangeInput} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-precovariavel\" className=\"col-3\" label=\"Preço variável\" options={{\"S\": \"Sim\", \"N\": \"Não\"}} value={this.state.input_precovariavel} onChange={this.onChangeInput} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-preco\" className=\"col-3\" inputClassName=\"text-center\" label=\"Preço de venda\" InformarValor={{money: true, decimal: 2}} value={this.state.input_preco} onChange={this.onChangeInput} disabled={this.state.input_precovariavel === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-status\" className=\"col-3\" label=\"Status\" options={{\"A\": \"Ativo\", \"I\": \"Inativo\"}} value={this.state.input_status} onChange={this.onChangeInput} />\n\t\t\t\t\t\t<Col size=\"3\" labelMargin={true}>\n\t\t\t\t\t\t\t<Button text=\"Tributações...\" icon=\"file-text\" color=\"blue\" block={true} onClick={() => {this.changeDiv(\"tributacao\")}} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Hr className=\"mt-0\" />\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t\t<Button text=\"Excluír\" icon=\"bin\" color=\"red\" onClick={this.excluir} className={this.props.idproduto ? \"\" : \"d-none\"} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col size=\"6\" className=\"text-right\">\n\t\t\t\t\t\t\t<Button text=\"Cancelar\" icon=\"undo\" color=\"red\" onClick={this.cancelar} />\n\t\t\t\t\t\t\t<Button text=\"Gravar produto\" icon=\"thumbs-up\" color=\"green\" className=\"ml-2\" onClick={this.gravar} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t\t<div className={this.state.showDiv !== \"tributacao\" ? \"d-none\" : \"\"}>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col size=\"12\">\n\t\t\t\t\t\t\t<FormControl type=\"checkbox\" id=\"modalproduto-sinctributacao\" label=\"Usar as mesmas tributações da categoria\" className=\"col-12\" value={this.state.input_sinctributacao} onChange={this.onChangeSincTributacao} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-codigoncm\" label=\"NCM do produto\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"9999.99.99\"}} value={this.state.input_codigoncm} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-origem\" className=\"col-6\" label=\"Origem do produto\" options={origemOptions} value={this.state.input_origem} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-cfop\" label=\"CFOP\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"9.999\"}} value={this.state.input_cfop} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"select\" id=\"modalproduto-csosn\" className=\"col-3\" inputClassName=\"text-center\" label=\"CSOSN\" options={{\"102\": \"102\", \"300\": \"300\", \"400\": \"400\", \"500\": \"500\"}} value={this.state.input_csosn} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-aliqicms\" label=\"Alíquota de ICMS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqicms} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-cstpis\" label=\"CST do PIS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_cstpis} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-aliqpis\" label=\"Alíquota de PIS\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqpis} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-cstcofins\" label=\"CST do Cofins\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_cstcofins} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-aliqcofins\" label=\"Alíquota de Cofins\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{decimal: 2}} value={this.state.input_aliqcofins} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-codcontribsocial\" label=\"Contribuição social\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99\"}} value={this.state.input_codcontribsocial} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<FormGroup type=\"text\" id=\"modalproduto-cest\" label=\"CEST\" className=\"col-3\" inputClassName=\"text-center\" InformarValor={{mask: \"99.999.99\"}} value={this.state.input_cest} onChange={this.onChangeInput} disabled={this.state.input_sinctributacao === \"S\"} />\n\t\t\t\t\t\t<Col size=\"12\" className=\"text-right\">\n\t\t\t\t\t\t\t<Button text=\"Voltar para o produto...\" icon=\"file-text\" color=\"blue\" onClick={() => {this.changeDiv(\"principal\")}} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport {Redirect} from \"react-router\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport DataGrid from \"../com/DataGrid.js\";\nimport FormControl from \"../com/FormControl.js\";\nimport Icon from \"../com/Icon.js\";\nimport ModalProduto from \"../com/ModalProduto.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/Produto.css\";\n\nexport default class Produto extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdataGrid: [],\n\t\t\tpesquisa: \"\",\n\t\t\tidproduto: null,\n\t\t\tshowModalProduto: false,\n\t\t\tredirectToCategoria: false\n\t\t};\n\n\t\tthis.beforeCloseModal = this.beforeCloseModal.bind(this);\n\t\tthis.loadDataGrid = this.loadDataGrid.bind(this);\n\t\tthis.novoProduto = this.novoProduto.bind(this);\n\t\tthis.onChangePesquisa = this.onChangePesquisa.bind(this);\n\t\tthis.onClickBtnCategoria = this.onClickBtnCategoria.bind(this);\n\t\tthis.onKeyUpPesquisa = this.onKeyUpPesquisa.bind(this);\n\t\tthis.pesquisaLimpar = this.pesquisaLimpar.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tbeforeCloseModal(){\n\t\tthis.setState({\n\t\t\tshowModalProduto: false\n\t\t}, () => {\n\t\t\tthis.loadDataGrid();\n\t\t});\n\t}\n\n\tcarregarProduto(idproduto){\n\t\tthis.setState({\n\t\t\tshowModalProduto: true,\n\t\t\tidproduto: idproduto\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.loadDataGrid();\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.Pool.end();\n\t}\n\n\tloadDataGrid(){\n\t\tlet query = [\n\t\t\t\"SELECT produto.idproduto, produto.descricao, categoria.descricao AS categoria,\",\n\t\t\t\"  produto.preco, produto.codigoean, produto.dthrcriacao\",\n\t\t\t\"FROM produto\",\n\t\t\t\"LEFT JOIN categoria USING (idcategoria)\",\n\t\t\t\"WHERE produto.descricao ILIKE '%'||$1||'%'\",\n\t\t\t\"  OR produto.codigoean ILIKE '%'||$1||'%'\",\n\t\t\t\"ORDER BY produto.descricao\"\n\t\t].join(\" \");\n\n\t\tthis.Pool.query(query, [this.state.pesquisa], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err.message);\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tlet data = [];\n\n\t\t\t\tfor(let i in res.rows){\n\t\t\t\t\tlet row = res.rows[i];\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{text: row.descricao, align: \"left\"},\n\t\t\t\t\t\t\t{text: row.categoria, align: \"left\"},\n\t\t\t\t\t\t\t{text: row.preco.format(2, \",\", \".\"), align: \"center\"},\n\t\t\t\t\t\t\t{text: row.codigoean, align: \"center\"},\n\t\t\t\t\t\t\t{text: row.dthrcriacao.toLocaleString(), align: \"center\"}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\tthis.carregarProduto(row.idproduto);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tdataGrid: data\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tnovoProduto(){\n\t\tthis.setState({\n\t\t\tshowModalProduto: true,\n\t\t\tidproduto: null\n\t\t});\n\t}\n\n\tonChangePesquisa(event){\n\t\tthis.setState({\n\t\t\tpesquisa: event.target.value\n\t\t});\n\t}\n\n\tonClickBtnCategoria(){\n\t\tthis.setState({\n\t\t\tredirectToCategoria: true\n\t\t});\n\t}\n\n\tonKeyUpPesquisa(event){\n\t\tif(event.keyCode === 13){\n\t\t\tthis.loadDataGrid();\n\t\t}\n\t}\n\n\tpesquisaLimpar(){\n\t\tthis.setState({\n\t\t\tpesquisa: \"\"\n\t\t}, () => {\n\t\t\tthis.loadDataGrid();\n\t\t});\n\t}\n\n\trender(){\n\t\tif(this.state.redirectToCategoria){\n\t\t\treturn <Redirect to=\"/categoria\" />\n\t\t}\n\n\t\tlet dataGridHeader = [\n\t\t\t{text: \"Descrição\", align: \"left\"},\n\t\t\t{text: \"Categoria\", align: \"left\"},\n\t\t\t{text: \"Preço\", align: \"center\"},\n\t\t\t{text: \"EAN\", align: \"left\"},\n\t\t\t{text: \"Criado em\", align: \"center\"}\n\t\t];\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title model=\"2\">Cadastro de <b>Produtos</b></Title>\n\t\t\t\t<Row className=\"mb-4\">\n\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t<FormControl type=\"search\" id=\"pesquisa\" value={this.state.pesquisa} placeholder=\"Pesquise um produto...\" onKeyUp={this.onKeyUpPesquisa} onChange={this.onChangePesquisa} />\n\t\t\t\t\t\t<Icon name=\"cross\" id=\"pesquisa-limpar\" onClick={this.pesquisaLimpar} className={this.state.pesquisa.length > 0 ? null : \"d-none\"} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"2\" className=\"pl-0\">\n\t\t\t\t\t\t<Button text=\"Buscar\" icon=\"search\" color=\"green\" onClick={this.loadDataGrid} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\" className=\"text-right\">\n\t\t\t\t\t\t<Button text=\"Categorias\" icon=\"layers\" color=\"blue\" className=\"mr-3\" onClick={this.onClickBtnCategoria} />\n\t\t\t\t\t\t<Button text=\"Novo produto\" icon=\"plus\" color=\"green\" onClick={this.novoProduto} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<DataGrid header={dataGridHeader} data={this.state.dataGrid} />\n\t\t\t\t<ModalProduto Pool={this.Pool} show={this.state.showModalProduto} idproduto={this.state.idproduto} beforeClose={this.beforeCloseModal} />\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport {Redirect} from \"react-router\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nexport default class Relatorios extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tredirect: null\n\t\t};\n\t}\n\n\trender(){\n\t\tif(this.state.redirect){\n\t\t\treturn <Redirect to={this.state.redirect} />\n\t\t}\n\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Relatórios</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"3\" offset=\"3\">\n\t\t\t\t\t\t<Button text=\"Fechamento\" icon=\"calendar\" size=\"xxl\" block={true} onClick={() => {this.setState({redirect: \"/fechamento\"})}} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"3\">\n\t\t\t\t\t\t<Button text=\"Estatísticas\" icon=\"chart-dots\" size=\"xxl\" block={true} onClick={() => {this.setState({redirect: \"/estatistica\"})}} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row className=\"mt-4\">\n\t\t\t\t\t<Col size=\"3\" offset=\"3\">\n\t\t\t\t\t\t<Button text=\"Orçamentos\" icon=\"files-empty\" size=\"xxl\" block={true} onClick={() => {this.setState({redirect: \"/relorcamento\"})}} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport {Redirect} from \"react-router\";\nimport $ from \"jquery\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport FormGroup from \"../com/FormGroup.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport Printer from \"../com/Printer.js\";\n\nimport {currentDate, decimaisQuantidade, defaultMessageBoxError, valorParametro} from \"../def/function.js\";\n\nexport default class RelOrcamento extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdtinicial: null,\n\t\t\tdtfinal: null,\n\t\t\tredirect: null\n\t\t};\n\n\t\tthis.acaoOrcamento = this.acaoOrcamento.bind(this);\n\t\tthis.gerar = this.gerar.bind(this);\n\t\tthis.imprimir = this.imprimir.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t\tthis.Printer = new Printer(this.Pool);\n\t}\n\n\tacaoOrcamento(documento){\n\t\tlet info = [\n\t\t\t\"Número: \" + String(documento.iddocumento).lpad(6, \"0\"),\n\t\t\t\"Cliente: \" + (documento.nomeorcamento ? documento.nomeorcamento : \"\"),\n\t\t\t\"Quantidade: \" + documento.totalquantidade.format(decimaisQuantidade(documento.totalquantidade), \",\", \".\"),\n\t\t\t\"Total: R$ \" + documento.totaldocumento.format(2, \",\", \".\")\n\t\t].join(\"<br>\");\n\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"O que você deseja fazer com o orçamento?\",\n\t\t\ttext: info,\n\t\t\tsize: \"lg\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Efetivar orçamento\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tredirect: \"venda/\" + documento.iddocumento\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Excluir\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\ticon: \"bin\",\n\t\t\t\t\tclassName: \"btn-sm\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\t\ttitle: \"Exclusão de orçamento\",\n\t\t\t\t\t\t\ttext: \"Tem certeza que deseja excluír o orçamento?<br>Essa ação não poderá ser desfeita.\",\n\t\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t\t\t\twindow.Loading.show();\n\t\t\t\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\t\t\t\tawait this.Pool.query(\"DELETE FROM documento WHERE iddocumento = $1\", [documento.iddocumento]);\n\t\t\t\t\t\t\t\t\t\t\tawait this.gerar();\n\t\t\t\t\t\t\t\t\t\t}catch(error){\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessageBoxError(error);\n\t\t\t\t\t\t\t\t\t\t}finally{\n\t\t\t\t\t\t\t\t\t\t\twindow.Loading.hide();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext: \"Não\",\n\t\t\t\t\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Voltar\",\n\t\t\t\t\tcolor: \"blue\",\n\t\t\t\t\ticon: \"undo\",\n\t\t\t\t\tonClick: function(){\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tasync gerar(){\n\t\tif(!$(\"#dtinicial\").val()){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Por favor, informe a data inicial do fechamento antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\t\tif(!$(\"#dtfinal\").val()){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttext: \"Por favor, informe a data final do fechamento antes de prosseguir.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tawait this.prepararImpressao();\n\n\t\tthis.setState({\n\t\t\tdtinicial: $(\"#dtinicial\").val(),\n\t\t\tdtfinal: $(\"#dtfinal\").val()\n\t\t});\n\t}\n\n\tasync imprimir(){\n\t\ttry{\n\t\t\tawait this.Printer.alimentar(3);\n\t\t\tawait this.Printer.guilhotina();\n\t\t\tawait this.Printer.imprimir();\n\t\t\twindow.FastMessage.show(\"Relatório impresso com sucesso!\");\n\t\t}catch(err){\n\t\t\tdefaultMessageBoxError(err);\n\t\t}\n\t}\n\n\tasync prepararImpressao(){\n\t\tawait this.Printer.reiniciar();\n\n\t\t// Formata as datas\n\t\tlet dtinicial = $(\"#dtinicial\").val().split(\"-\").reverse().join(\"/\");\n\t\tlet dtfinal = $(\"#dtfinal\").val().split(\"-\").reverse().join(\"/\");\n\n\t\t// Cabecalho\n\t\tawait this.Printer.texto(await valorParametro(this.Pool, \"EMITENTE\", \"NOMEFANTASIA\"), \"center\", true);\n\t\tawait this.Printer.texto(\"ORÇAMENTOS: \" + (dtinicial === dtfinal ? dtinicial : dtinicial + \" à \" + dtfinal), \"center\", true);\n\t\tawait this.Printer.alimentar();\n\t}\n\n\trender(){\n\t\tif(this.state.redirect){\n\t\t\treturn <Redirect to={this.state.redirect} />\n\t\t}\n\n\t\tlet disabledImprimir = (!this.state.dtinicial || !this.state.dtfinal);\n\n\t\treturn (\n\t\t\t<Content className=\"RelOrcamento\">\n\t\t\t\t<Title>Relatório de Orçamento</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\" offset=\"3\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtinicial\" label=\"Data inicial\" className=\"col-6\" defaultValue={currentDate()} />\n\t\t\t\t\t\t\t<FormGroup type=\"date\" id=\"dtfinal\" label=\"Data final\" className=\"col-6\" defaultValue={currentDate()} />\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"pr-0\">\n\t\t\t\t\t\t\t\t<Button text=\"Gerar\" block={true} color=\"green\" icon=\"file-play\" onClick={this.gerar} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"6\" className=\"pl-0\">\n\t\t\t\t\t\t\t\t<Button text=\"Imprimir\" block={true} color=\"blue\" icon=\"printer\" onClick={this.imprimir} disabled={disabledImprimir} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<RelOrcamentoRelatorio Pool={this.Pool} Printer={this.Printer} dtinicial={this.state.dtinicial} dtfinal={this.state.dtfinal} acaoOrcamento={this.acaoOrcamento} />\n\t\t\t</Content>\n\t\t)\n\t}\n}\n\nclass RelOrcamentoRelatorio extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdados: []\n\t\t};\n\t}\n\n\tasync carregarDados(props){\n\t\tprops = (props === undefined ? this.props : props);\n\n\t\t// Monta a query\n\t\tlet query = [\n\t\t\t\"SELECT iddocumento, totalquantidade, totaldocumento, nomeorcamento,\",\n\t\t\t\"  dthrcriacao::DATE as dtcriacao, dthrcriacao::TIME as hrcriacao\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE operacao = $1\",\n\t\t\t\"  AND dthrcriacao::DATE BETWEEN $2 AND $3\",\n\t\t\t\"ORDER BY dthrcriacao\"\n\t\t].join(\" \");\n\n\t\t// Executa comando SQL\n\t\tlet res = await props.Pool.query(query, [\"OR\", props.dtinicial, props.dtfinal]);\n\n\t\t// Determina o tamanho de cada coluna\n\t\tlet colunas = this.props.Printer.colunas;\n\t\tlet colIdDocumento = 7;\n\t\tlet colTotalQuantidade = 6;\n\t\tlet colTotalDocumento = 10;\n\t\tlet colNomeOrcamento = colunas - colIdDocumento - colTotalQuantidade - colTotalDocumento;\n\n\t\t// Cria o cabecalho da grade na impressao\n\t\tlet texto = \"Número\".substr(0, colIdDocumento).rpad(colIdDocumento, \" \");\n\t\ttexto += \"Cliente\".substr(0, colNomeOrcamento).cpad(colNomeOrcamento, \" \");\n\t\ttexto += \"Qtde\".substr(0, colTotalQuantidade).cpad(colTotalQuantidade, \" \");\n\t\ttexto += \"Total\".substr(0, colTotalDocumento).lpad(colTotalDocumento, \" \");\n\t\tawait this.props.Printer.texto(texto, \"left\", true);\n\n\t\t// Alimenta classe da impressora\n\t\tlet t_totalquantidade = 0;\n\t\tlet t_totaldocumento = 0;\n\t\tfor(let i in res.rows){\n\t\t\tlet row = res.rows[i];\n\n\t\t\tlet iddocumento = String(row.iddocumento).lpad(6, \"0\");\n\t\t\tlet nomeorcamento = (row.nomeorcamento === null ? \"\" : String(row.nomeorcamento));\n\t\t\tlet totalquantidade = row.totalquantidade.format(decimaisQuantidade(row.totalquantidade), \",\", \".\");\n\t\t\tlet totaldocumento = row.totaldocumento.format(2, \",\", \".\");\n\n\t\t\ttexto = iddocumento.substr(0, colIdDocumento).rpad(colIdDocumento, \" \");\n\t\t\ttexto += nomeorcamento.substr(0, colNomeOrcamento).rpad(colNomeOrcamento, \" \");\n\t\t\ttexto += totalquantidade.substr(0, colTotalQuantidade).cpad(colTotalQuantidade, \" \");\n\t\t\ttexto += totaldocumento.substr(0, colTotalDocumento).lpad(colTotalDocumento, \" \");\n\t\t\tawait this.props.Printer.texto(texto);\n\n\t\t\tt_totalquantidade += parseFloat(row.totalquantidade);\n\t\t\tt_totaldocumento += parseFloat(row.totaldocumento);\n\t\t}\n\n\t\t// Calcula as casas decimais\n\t\tt_totalquantidade = t_totalquantidade.format(decimaisQuantidade(t_totalquantidade), \",\", \".\");\n\t\tt_totaldocumento = t_totaldocumento.format(2, \",\", \".\");\n\n\t\t// Totalizacao\n\t\ttexto = \"Total\".substr(0, (colIdDocumento + colNomeOrcamento)).rpad((colIdDocumento + colNomeOrcamento), \" \");\n\t\ttexto += String(t_totalquantidade).substr(0, colTotalQuantidade).cpad(colTotalQuantidade, \" \");\n\t\ttexto += String(t_totaldocumento).substr(0, colTotalDocumento).lpad(colTotalDocumento, \" \");\n\t\tawait this.props.Printer.texto(texto, \"left\", true);\n\t\tawait this.props.Printer.alimentar(2);\n\n\t\t// Atualiza o State com os dados\n\t\tthis.setState({\n\t\t\tdados: res.rows\n\t\t});\n\t}\n\n\tcomponentWillUpdate(nextProps){\n\t\tif(nextProps !== this.props){\n\t\t\tthis.carregarDados(nextProps);\n\t\t}\n\t}\n\n\trender(){\n\t\tif(!this.props.dtinicial || !this.props.dtfinal){\n\t\t\treturn null;\n\t\t}\n\n\t\tlet t_totalquantidade = 0;\n\t\tlet t_totaldocumento = 0;\n\n\t\treturn (\n\t\t\t<Row className=\"mt-5\">\n\t\t\t\t<Col size=\"8\" offset=\"2\">\n\t\t\t\t\t<table className=\"table table-striped mb-5\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">Número</th>\n\t\t\t\t\t\t\t\t<th className=\"text-left\">Cliente</th>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">Quantidade</th>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">Total</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{this.state.dados.map((e, i) => {\n\t\t\t\t\t\t\t\tt_totalquantidade += parseFloat(e.totalquantidade);\n\t\t\t\t\t\t\t\tt_totaldocumento += parseFloat(e.totaldocumento);\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<tr key={i} onClick={() => {this.props.acaoOrcamento(e)}}>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-center\">{String(e.iddocumento).lpad(6, \"0\")}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-left\">{e.nomeorcamento}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-center\">{e.totalquantidade.format(decimaisQuantidade(e.totalquantidade), \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-right\">{\"R$ \" + e.totaldocumento.format(2, \",\", \".\")}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t<th className=\"text-center\">{t_totalquantidade.format(decimaisQuantidade(t_totalquantidade), \",\", \".\")}</th>\n\t\t\t\t\t\t\t\t<th className=\"text-right\">{\"R$ \" + t_totaldocumento.format(2, \",\", \".\")}</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tfoot>\n\t\t\t\t\t</table>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nconst fs = window.require(\"fs\");\n\nexport default class Image extends React.Component {\n\trender(){\n\t\tlet props = Object.assign({}, this.props);\n\n\t\tif(props.src){\n\t\t\tif(fs.existsSync(props.src)){\n\t\t\t\tlet ext = props.src.split(\".\").reverse()[0];\n\t\t\t\tlet data = fs.readFileSync(props.src, \"base64\");\n\t\t\t\tprops.src = \"data:image/\" + ext + \";base64,\" + data;\n\t\t\t}else{\n\t\t\t\tprops.src = null;\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<img {...props} alt=\"\" />\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport Hr from \"../com/Hr.js\";\nimport Icon from \"../com/Icon.js\";\nimport Image from \"../com/Image.js\";\nimport Row from \"../com/Row.js\";\nimport Title from \"../com/Title.js\";\n\nimport {defaultMessageBoxError} from \"./../def/function.js\";\n\nimport \"../css/Suporte.css\";\n\nexport default class Suporte extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tlogotipo: null,\n\t\t\tinformativo: null,\n\t\t\ttelefone: null,\n\t\t\temail: null,\n\t\t\tendereco: null\n\t\t};\n\n\t\tthis.carregarDados = this.carregarDados.bind(this);\n\n\t\tthis.Pool = new Pool();\n\t}\n\n\tcarregarDados(){\n\t\tthis.Pool.query(\"SELECT nome, valor FROM parametro WHERE grupo = $1\", [\"REVENDA\"], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet state = {};\n\t\t\tfor(let row of res.rows){\n\t\t\t\tstate[row.nome.toLowerCase()] = row.valor.replaceAll(\"\\n\", \"</br>\");\n\t\t\t}\n\t\t\tthis.setState(state);\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarDados();\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Content>\n\t\t\t\t<Title>Suporte</Title>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"5\" offset=\"1\">\n\t\t\t\t\t\t<Image className=\"logotipo\" src={this.state.logotipo} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"5\" offset=\"1\">\n\t\t\t\t\t\t<p className=\"informativo\" dangerouslySetInnerHTML={{__html: this.state.informativo}}></p>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col className=\"contatos\" size=\"4\" offset=\"1\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"1\"><Icon name=\"phone\" /></Col>\n\t\t\t\t\t\t\t<Col size=\"11\"><p dangerouslySetInnerHTML={{__html: this.state.telefone}}></p></Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Hr />\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"1\"><Icon name=\"mail\" /></Col>\n\t\t\t\t\t\t\t<Col size=\"11\"><p dangerouslySetInnerHTML={{__html: this.state.email}}></p></Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Hr />\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col size=\"1\"><Icon name=\"location\" /></Col>\n\t\t\t\t\t\t\t<Col size=\"11\"><p dangerouslySetInnerHTML={{__html: this.state.endereco}}></p></Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Col from \"./Col.js\";\nimport Row from \"./Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class PainelRapidoPesquisa extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpesquisa: props.pesquisa, // Atual pesquisa\n\t\t\tprodutos: [], // Lista de produtos visiveis\n\t\t\ttotalproduto: null // Total do produto caso seja um produto de balanca\n\t\t};\n\n\t\tthis.carregarProdutos = this.carregarProdutos.bind(this);\n\t}\n\n\tcarregarProdutos(pesquisa){\n\t\tpesquisa = (pesquisa ? pesquisa : this.props.pesquisa);\n\t\tif(typeof pesquisa !== \"string\" || pesquisa.length === 0){\n\t\t\tthis.setState({\n\t\t\t\tprodutos: []\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tlet codigoean = null;\n\t\tlet totalproduto = null;\n\n\t\tlet where = [];\n\t\tif(pesquisa.length === 13 && pesquisa.substr(0, 1) === \"2\"){\n\t\t\tcodigoean = parseInt(pesquisa.substr(1, 6), 10);\n\t\t\ttotalproduto = parseInt(pesquisa.substr(7, 5), 10) / 100;\n\t\t\tpesquisa = codigoean;\n\t\t\twhere.push(\"produto.codigoean = $1\");\n\t\t}else{\n\t\t\twhere.push(\"produto.descricao ILIKE '%'||$1||'%'\");\n\t\t\twhere.push(\"produto.codigoean = $1\");\n\t\t}\n\n\t\tthis.totalproduto = totalproduto;\n\n\t\tlet query = [\n\t\t\t\"SELECT produto.idproduto, produto.descricao, produto.precovariavel,\",\n\t\t\t\"  produto.preco, categoria.cor, unidade.precisao, unidade.descricao AS unidade\",\n\t\t\t\"FROM produto\",\n\t\t\t\"INNER JOIN categoria USING (idcategoria)\",\n\t\t\t\"INNER JOIN unidade USING (idunidade)\",\n\t\t\t\"WHERE \" + where.join(\" OR \"),\n\t\t\t\"ORDER BY descricao\"\n\t\t].join(\" \");\n\n\t\tthis.props.Pool.query(query, [pesquisa], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tprodutos: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarProdutos();\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.carregarProdutos(nextProps.pesquisa);\n\t}\n\n\trender(){\n\t\tlet className = [\"painelrapido\", \"painelrapido-pesquisa\"];\n\n\t\tif(this.props.layoutVendas === \"0\"){\n\t\t\tclassName.push(\"painelrapido-poucosprodutos\");\n\t\t}\n\n\t\t// Define se deve selecionar o produto ao desenhar\n\t\t// Criado para situacao em que o usuario leu um codigo de barras e ja deve carregar o produto\n\t\tlet selecionarProduto = (!isNaN(this.props.pesquisa) && this.state.produtos.length === 1);\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t<Row className=\"painelrapido-produto\">\n\t\t\t\t\t{this.state.produtos.map((produto, i) => {\n\t\t\t\t\t\treturn <Produto key={i} {...produto} onSelectProduto={this.props.onSelectProduto} layoutVendas={this.props.layoutVendas} selecionarProduto={selecionarProduto} totalproduto={this.totalproduto} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nclass Produto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\t//console.log(this.props.selecionarProduto);\n\t\tif(this.props.selecionarProduto){\n\t\t\tthis.props.onSelectProduto(this.props, null, this.props.totalproduto);\n\t\t}\n\t}\n\n\tonClick(event){\n\t\tif(this.props.onSelectProduto){\n\t\t\tthis.props.onSelectProduto(this.props, event, this.props.totalproduto);\n\t\t}\n\t}\n\n\trender(){\n\t\tlet size = (this.props.layoutVendas === \"0\" ? 3 : 2);\n\n\t\treturn (\n\t\t\t<Col size={size}>\n\t\t\t\t<div className=\"painelrapido-produto-item\" style={{borderColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport Col from \"./Col.js\";\nimport Row from \"./Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/PainelRapidoPoucosProdutos.css\";\n\nexport default class PainelRapidoPoucosProdutos extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcategorias: [], // Lista de categorias visiveis\n\t\t\tprodutos: [], // Lista de produtos visiveis\n\t\t\tcategoria: null // Dados da categoria ativa\n\t\t};\n\n\t\tthis.carregarCategorias = this.carregarCategorias.bind(this);\n\t\tthis.carregarProdutos = this.carregarProdutos.bind(this);\n\t\tthis.trocarCategoria = this.trocarCategoria.bind(this);\n\t}\n\n\tcarregarCategorias(){\n\t\tlet query = \"SELECT idcategoria, descricao, cor FROM categoria ORDER BY descricao\";\n\t\tthis.props.Pool.query(query, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tcategorias: res.rows,\n\t\t\t\tcategoria: (res.rows.length > 0 ? res.rows[0] : null)\n\t\t\t}, () => {\n\t\t\t\tthis.carregarProdutos();\n\t\t\t});\n\t\t});\n\t}\n\n\tcarregarProdutos(){\n\t\tif(this.state.categoria === null){\n\t\t\treturn false;\n\t\t}\n\t\tlet query = [\n\t\t\t\"SELECT produto.idproduto, produto.descricao, produto.precovariavel,\",\n\t\t\t\"  produto.preco, unidade.precisao, unidade.descricao AS unidade\",\n\t\t\t\"FROM produto\",\n\t\t\t\"INNER JOIN unidade USING (idunidade)\",\n\t\t\t\"WHERE produto.status = $1\",\n\t\t\t\"  AND produto.idcategoria = $2\",\n\t\t\t\"ORDER BY produto.descricao\"\n\t\t].join(\" \");\n\t\tthis.props.Pool.query(query, [\"A\", this.state.categoria.idcategoria], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tprodutos: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarCategorias();\n\t}\n\n\ttrocarCategoria(categoria){\n\t\tthis.setState({\n\t\t\tcategoria: categoria\n\t\t}, () => {\n\t\t\tthis.carregarProdutos();\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className=\"painelrapido painelrapido-poucosprodutos\">\n\t\t\t\t<Row className=\"painelrapido-categoria\">\n\t\t\t\t\t{this.state.categorias.map((categoria, i) => {\n\t\t\t\t\t\treturn <Categoria key={i} {...categoria} trocarCategoria={this.trocarCategoria} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t\t<Row className=\"painelrapido-produto\">\n\t\t\t\t\t{this.state.produtos.map((produto, i) => {\n\t\t\t\t\t\treturn <Produto key={i} {...produto} cor={this.state.categoria.cor} onSelectProduto={this.props.onSelectProduto} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nclass Categoria extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(){\n\t\tthis.props.trocarCategoria(this.props);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"3\">\n\t\t\t\t<div className=\"painelrapido-categoria-item\" style={{backgroundColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n\nclass Produto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(event){\n\t\tif(this.props.onSelectProduto){\n\t\t\tthis.props.onSelectProduto(this.props, event);\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"3\">\n\t\t\t\t<div className=\"painelrapido-produto-item\" style={{borderColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport Col from \"./Col.js\";\nimport Row from \"./Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class PainelRapidoMediosProdutos extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcategorias: [], // Lista de categorias visiveis\n\t\t\tprodutos: [], // Lista de produtos visiveis\n\t\t\tcategoria: null // Dados da categoria ativa\n\t\t};\n\n\t\tthis.carregarCategorias = this.carregarCategorias.bind(this);\n\t\tthis.carregarProdutos = this.carregarProdutos.bind(this);\n\t\tthis.trocarCategoria = this.trocarCategoria.bind(this);\n\t}\n\n\tcarregarCategorias(){\n\t\tlet query = \"SELECT idcategoria, descricao, cor FROM categoria ORDER BY descricao\";\n\t\tthis.props.Pool.query(query, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tcategorias: res.rows,\n\t\t\t\tcategoria: (res.rows.length > 0 ? res.rows[0] : null)\n\t\t\t}, () => {\n\t\t\t\tthis.carregarProdutos();\n\t\t\t});\n\t\t});\n\t}\n\n\tcarregarProdutos(){\n\t\tif(this.state.categoria === null){\n\t\t\treturn;\n\t\t}\n\t\tlet query = [\n\t\t\t\"SELECT produto.idproduto, produto.descricao, produto.precovariavel,\",\n\t\t\t\"  produto.preco, unidade.precisao, unidade.descricao AS unidade\",\n\t\t\t\"FROM produto\",\n\t\t\t\"INNER JOIN unidade USING (idunidade)\",\n\t\t\t\"WHERE produto.status = $1\",\n\t\t\t\"  AND produto.idcategoria = $2\",\n\t\t\t\"ORDER BY produto.descricao\"\n\t\t].join(\" \");\n\t\tthis.props.Pool.query(query, [\"A\", this.state.categoria.idcategoria], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tprodutos: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarCategorias();\n\t}\n\n\ttrocarCategoria(categoria){\n\t\tthis.setState({\n\t\t\tcategoria: categoria\n\t\t}, () => {\n\t\t\tthis.carregarProdutos();\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className=\"painelrapido painelrapido-mediosprodutos\">\n\t\t\t\t<Row className=\"painelrapido-categoria\">\n\t\t\t\t\t{this.state.categorias.map((categoria, i) => {\n\t\t\t\t\t\treturn <Categoria key={i} {...categoria} trocarCategoria={this.trocarCategoria} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t\t<Row className=\"painelrapido-produto\">\n\t\t\t\t\t{this.state.produtos.map((produto, i) => {\n\t\t\t\t\t\treturn <Produto key={i} {...produto} cor={this.state.categoria.cor} onSelectProduto={this.props.onSelectProduto} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nclass Categoria extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(){\n\t\tthis.props.trocarCategoria(this.props);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"2\">\n\t\t\t\t<div className=\"painelrapido-categoria-item\" style={{backgroundColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n\nclass Produto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(event){\n\t\tif(this.props.onSelectProduto){\n\t\t\tthis.props.onSelectProduto(this.props, event);\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"2\">\n\t\t\t\t<div className=\"painelrapido-produto-item\" style={{borderColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport Col from \"./Col.js\";\nimport Icon from \"./Icon.js\";\nimport Row from \"./Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nexport default class PainelRapidoMuitosProdutos extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcategorias: [], // Lista de categorias visiveis\n\t\t\tprodutos: [], // Lista de produtos visiveis\n\t\t\tcategoria: null // Dados da categoria ativa\n\t\t};\n\n\t\tthis.carregarCategorias = this.carregarCategorias.bind(this);\n\t\tthis.carregarProdutos = this.carregarProdutos.bind(this);\n\t\tthis.trocarCategoria = this.trocarCategoria.bind(this);\n\t\tthis.voltarCategoria = this.voltarCategoria.bind(this);\n\t}\n\n\tcarregarCategorias(){\n\t\tlet query = \"SELECT idcategoria, descricao, cor FROM categoria ORDER BY descricao\";\n\t\tthis.props.Pool.query(query, (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tcategorias: res.rows,\n\t\t\t\tcategoria: null\n\t\t\t}, () => {\n\t\t\t\tthis.carregarProdutos();\n\t\t\t});\n\t\t});\n\t}\n\n\tcarregarProdutos(){\n\t\tif(this.state.categoria === null){\n\t\t\treturn;\n\t\t}\n\t\tlet query = [\n\t\t\t\"SELECT produto.idproduto, produto.descricao, produto.precovariavel,\",\n\t\t\t\"  produto.preco, unidade.precisao, unidade.descricao AS unidade\",\n\t\t\t\"FROM produto\",\n\t\t\t\"INNER JOIN unidade USING (idunidade)\",\n\t\t\t\"WHERE produto.status = $1\",\n\t\t\t\"  AND produto.idcategoria = $2\",\n\t\t\t\"ORDER BY produto.descricao\"\n\t\t].join(\" \");\n\t\tthis.props.Pool.query(query, [\"A\", this.state.categoria.idcategoria], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tprodutos: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarCategorias();\n\t}\n\n\ttrocarCategoria(categoria){\n\t\tthis.setState({\n\t\t\tcategoria: categoria\n\t\t}, () => {\n\t\t\tthis.carregarProdutos();\n\t\t});\n\t}\n\n\tvoltarCategoria(){\n\t\tthis.setState({\n\t\t\tcategoria: null,\n\t\t\tprodutos: []\n\t\t});\n\t}\n\n\trender(){\n\t\tlet painelRapidoCategoria = null;\n\t\tif(this.state.categoria === null){\n\t\t\tpainelRapidoCategoria = (\n\t\t\t\t<Row className=\"painelrapido-categoria\">\n\t\t\t\t\t{this.state.categorias.map((categoria, i) => {\n\t\t\t\t\t\treturn <Categoria key={i} idcategoria={categoria.idcategoria} descricao={categoria.descricao} cor={categoria.cor} trocarCategoria={this.trocarCategoria} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t);\n\t\t}\n\n\t\tlet painelRapidoProduto = null;\n\t\tif(this.state.categoria !== null){\n\t\t\tpainelRapidoProduto = (\n\t\t\t\t<Row className=\"painelrapido-produto\">\n\t\t\t\t\t<Col size=\"2\">\n\t\t\t\t\t\t<div className=\"painelrapido-categoria-item\" style={{backgroundColor: this.state.categoria.cor}} onClick={this.voltarCategoria}>\n\t\t\t\t\t\t\t<Icon name=\"chevron-left\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t\t{this.state.produtos.map((produto, i) => {\n\t\t\t\t\t\treturn <Produto key={i} {...produto} cor={this.state.categoria.cor} onSelectProduto={this.props.onSelectProduto} />\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"painelrapido painelrapido-muitosprodutos\">\n\t\t\t\t{painelRapidoCategoria}\n\t\t\t\t{painelRapidoProduto}\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nclass Categoria extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(){\n\t\tthis.props.trocarCategoria(this.props);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"2\">\n\t\t\t\t<div className=\"painelrapido-categoria-item\" style={{backgroundColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n\nclass Produto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(event){\n\t\tif(this.props.onSelectProduto){\n\t\t\tthis.props.onSelectProduto(this.props, event);\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Col size=\"2\">\n\t\t\t\t<div className=\"painelrapido-produto-item\" style={{borderColor: this.props.cor}} onClick={this.onClick}>\n\t\t\t\t\t<span>{this.props.descricao}</span>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport $ from \"jquery\";\n\nimport \"./../css/PainelRapido.css\";\n\nimport PainelRapidoPesquisa from  \"./PainelRapidoPesquisa.js\";\nimport PainelRapidoPoucosProdutos from  \"./PainelRapidoPoucosProdutos.js\";\nimport PainelRapidoMediosProdutos from  \"./PainelRapidoMediosProdutos.js\";\nimport PainelRapidoMuitosProdutos from  \"./PainelRapidoMuitosProdutos.js\";\n\nimport {defaultMessageBoxError, valorParametro} from \"./../def/function.js\";\n\nexport default class PainelRapido extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tlayoutVendas: null\n\t\t};\n\t}\n\n\tajustarAltura(){\n\t\tif($(\".painelrapido\").length > 0){\n\t\t\tlet height = window.innerHeight - $(\".painelrapido\").offset().top;\n\t\t\t$(\".painelrapido\").height(height);\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\t\twindow.addEventListener(\"resize\", this.ajustarAltura);\n\n\t\tvalorParametro(this.props.Pool, \"DIVERSOS\", \"LAYOUTVENDAS\", (valor) => {\n\t\t\tthis.setState({\n\t\t\t\tlayoutVendas: valor\n\t\t\t});\n\t\t}, (err) => {\n\t\t\tdefaultMessageBoxError(err);\n\t\t});\n\n\t\tthis.ajustarAltura();\n\t}\n\n\tcomponentDidUpdate(){\n\t\tthis.ajustarAltura();\n\t}\n\n\tcomponentWillUnmount(){\n\t\twindow.removeEventListener(\"resize\", this.ajustarAltura);\n\t}\n\n\trender(){\n\t\tif(this.props.pesquisa.length > 0){\n\t\t\treturn <PainelRapidoPesquisa {...this.props} layoutVendas={this.state.layoutVendas} />\n\t\t}\n\n\t\tswitch(this.state.layoutVendas){\n\t\t\tcase \"0\": return <PainelRapidoPoucosProdutos {...this.props} />;\n\t\t\tcase \"1\": return <PainelRapidoMediosProdutos {...this.props} />;\n\t\t\tcase \"2\": return <PainelRapidoMuitosProdutos {...this.props} />;\n\t\t\tdefault: return null;\n\t\t}\n\t}\n\n}\n","import React from \"react\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport FormControl from \"./FormControl.js\";\nimport Label from \"./Label.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport \"../css/VendaAplicarAcrescimo.css\";\n\nexport default class VendaEditarProduto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tacrescimovalor: 0,\n\t\t\tacrescimopercentual: 0,\n\t\t\ttotaldocumento: props.totalbruto,\n\t\t\tshow: props.show\n\t\t};\n\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.onChangeAcrescimoPercentual = this.onChangeAcrescimoPercentual.bind(this);\n\t\tthis.onChangeAcrescimoValor = this.onChangeAcrescimoValor.bind(this);\n\t\tthis.onChangeTotalLiquido = this.onChangeTotalLiquido.bind(this);\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tacrescimovalor: 0,\n\t\t\tacrescimopercentual: 0,\n\t\t\ttotaldocumento: nextProps.totalbruto,\n\t\t\tshow: nextProps.show\n\t\t});\n\t}\n\n\tconfirmar(){\n\t\tthis.props.aplicarAcrescimo(this.props.totalbruto, this.state.acrescimovalor);\n\t}\n\n\tonChangeAcrescimoPercentual(event){\n\t\tlet acrescimopercentual = event.target.value.toFloat();\n\t\tlet acrescimovalor = this.props.totalbruto * acrescimopercentual / 100;\n\t\tlet totaldocumento = this.props.totalbruto - this.props.totaldesconto + acrescimovalor;\n\n\t\tthis.setState({\n\t\t\tacrescimopercentual: acrescimopercentual,\n\t\t\tacrescimovalor: acrescimovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\tonChangeAcrescimoValor(event){\n\t\tlet acrescimovalor = event.target.value.toFloat();\n\t\tlet acrescimopercentual = acrescimovalor / this.props.totalbruto * 100;\n\t\tlet totaldocumento = this.props.totalbruto - this.props.totaldesconto + acrescimovalor;\n\n\t\tthis.setState({\n\t\t\tacrescimopercentual: acrescimopercentual,\n\t\t\tacrescimovalor: acrescimovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\tonChangeTotalLiquido(event){\n\t\tlet totaldocumento = event.target.value.toFloat();\n\t\tif(totaldocumento < this.props.totalbruto){\n\t\t\ttotaldocumento = this.props.totalbruto;\n\t\t}\n\t\tlet acrescimovalor =  totaldocumento - this.props.totalbruto + this.props.totaldesconto;\n\t\tlet acrescimopercentual = acrescimovalor / this.props.totalbruto * 100;\n\n\t\tthis.setState({\n\t\t\tacrescimopercentual: acrescimopercentual,\n\t\t\tacrescimovalor: acrescimovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal id=\"VendaAplicarAcrescimo\" title=\"Aplicando acréscimo...\" show={this.state.show} size=\"md\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Total dos itens</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" disabled={true} value={this.props.totalbruto.format(2, \",\", \".\")} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Total de desconto</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" disabled={true} value={this.props.totaldesconto.format(2, \",\", \".\")} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Acréscimo em percentual</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.acrescimopercentual.format(0, \",\", \".\")} InformarValor={{decimal: 0}} onChange={this.onChangeAcrescimoPercentual} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Acréscimo em valor</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.acrescimovalor.format(2, \",\", \".\")} InformarValor={{decimal: 2, money: true}} onChange={this.onChangeAcrescimoValor} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Total final</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.totaldocumento.format(2, \",\", \".\")} InformarValor={{decimal: 2, money: true}} onChange={this.onChangeTotalLiquido} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<div className=\"text-right mt-2\">\n\t\t\t\t\t<Button icon=\"undo\" color=\"red\" className=\"float-left\" onClick={this.cancelar} />\n\t\t\t\t\t<Button text=\"Confirmar\" icon=\"thumbs-up\" color=\"green\" onClick={this.confirmar} />\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport FormControl from \"./FormControl.js\";\nimport Label from \"./Label.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport \"../css/VendaAplicarDesconto.css\";\n\nexport default class VendaEditarProduto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdescontovalor: 0,\n\t\t\tdescontopercentual: 0,\n\t\t\ttotaldocumento: props.totalbruto,\n\t\t\tshow: props.show\n\t\t};\n\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.onChangeDescontoPercentual = this.onChangeDescontoPercentual.bind(this);\n\t\tthis.onChangeDescontoValor = this.onChangeDescontoValor.bind(this);\n\t\tthis.onChangeTotalLiquido = this.onChangeTotalLiquido.bind(this);\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tdescontovalor: 0,\n\t\t\tdescontopercentual: 0,\n\t\t\ttotaldocumento: nextProps.totalbruto,\n\t\t\tshow: nextProps.show\n\t\t});\n\t}\n\n\tconfirmar(){\n\t\tthis.props.aplicarDesconto(this.props.totalbruto, this.state.descontovalor);\n\t}\n\n\tonChangeDescontoPercentual(event){\n\t\tlet descontopercentual = event.target.value.toFloat();\n\t\tlet descontovalor = this.props.totalbruto * descontopercentual / 100;\n\t\tlet totaldocumento = this.props.totalbruto - descontovalor;\n\n\t\tthis.setState({\n\t\t\tdescontopercentual: descontopercentual,\n\t\t\tdescontovalor: descontovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\tonChangeDescontoValor(event){\n\t\tlet descontovalor = event.target.value.toFloat();\n\t\tlet descontopercentual = descontovalor / this.props.totalbruto * 100;\n\t\tlet totaldocumento = this.props.totalbruto - descontovalor;\n\n\t\tthis.setState({\n\t\t\tdescontopercentual: descontopercentual,\n\t\t\tdescontovalor: descontovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\tonChangeTotalLiquido(event){\n\t\tlet totaldocumento = event.target.value.toFloat();\n\t\tif(totaldocumento > this.props.totalbruto){\n\t\t\ttotaldocumento = this.props.totalbruto;\n\t\t}\n\t\tlet descontovalor = this.props.totalbruto - totaldocumento;\n\t\tlet descontopercentual = descontovalor / this.props.totalbruto * 100;\n\n\t\tthis.setState({\n\t\t\tdescontopercentual: descontopercentual,\n\t\t\tdescontovalor: descontovalor,\n\t\t\ttotaldocumento: totaldocumento\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal id=\"VendaAplicarDesconto\" title=\"Aplicando desconto...\" show={this.state.show} size=\"md\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Total dos itens</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" disabled={true} value={this.props.totalbruto.format(2, \",\", \".\")} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Desconto em percentual</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.descontopercentual.format(0, \",\", \".\")} InformarValor={{decimal: 0}} onChange={this.onChangeDescontoPercentual} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Desconto em valor</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.descontovalor.format(2, \",\", \".\")} InformarValor={{decimal: 2, money: true}} onChange={this.onChangeDescontoValor} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Label>Total final</Label>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<FormControl type=\"text\" className=\"text-center\" value={this.state.totaldocumento.format(2, \",\", \".\")} InformarValor={{decimal: 2, money: true}} onChange={this.onChangeTotalLiquido} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<div className=\"text-right mt-2\">\n\t\t\t\t\t<Button icon=\"undo\" color=\"red\" className=\"float-left\" onClick={this.cancelar} />\n\t\t\t\t\t<Button text=\"Confirmar\" icon=\"thumbs-up\" color=\"green\" onClick={this.confirmar} />\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t)\n\t}\n}\n","import {applicationDirectory} from  \"../def/function.js\";\n\nconst fs = window.require(\"fs\");\nconst childProcess = window.require(\"child_process\");\n\nexport default class ComDLL {\n\n\tconstructor(){\n\t\tthis.appPath = applicationDirectory();\n\t\tthis.childProcess = childProcess;\n\t\tthis.fs = fs;\n\n\t\tthis.srcPath = this.appPath + \"/src\";\n\t\tthis.comDLLPath = this.srcPath + \"/lib/comdll-1.0.0\";\n\t}\n\n\texecute(dllPath, method, args, xml){\n\t\ttry{\n\t\t\tlet commandExec = this.comDLLPath + \"/ComDLL.exe\";\n\t\t\tlet commandArgs = [\n\t\t\t\tthis.srcPath + \"/\" + dllPath,\n\t\t\t\tmethod\n\t\t\t].concat(args);\n\n\t\t\tlet xmlFile = this.comDLLPath + \"/entrada.xml\";\n\t\t\tlet returnFile = this.comDLLPath + \"/retorno.txt\";\n\n\t\t\tif(this.fs.existsSync(xmlFile)){\n\t\t\t\tthis.fs.unlinkSync(xmlFile);\n\t\t\t}\n\t\t\tif(this.fs.existsSync(returnFile)){\n\t\t\t\tthis.fs.unlinkSync(returnFile);\n\t\t\t}\n\n\t\t\tif(xml !== undefined){\n\t\t\t\tthis.fs.writeFileSync(xmlFile, xml, \"utf8\");\n\t\t\t}\n\t\t\tthis.childProcess.execFileSync(commandExec, commandArgs, {\n\t\t\t\ttimeout: 60000\n\t\t\t});\n\t\t\tlet result = this.fs.readFileSync(returnFile);\n\n\t\t\treturn result.toString().trim();\n\t\t}catch(err){\n\t\t\tswitch(err.code){\n\t\t\t\tcase \"ETIMEDOUT\":\n\t\t\t\t\tthrow new Error(\"O tempo máximo de comunicação com o equipamento fiscal SAT foi excedido.<br>Desconecte todos os cabos conectados ao SAT, espere 5 segundos, conecte-os de volta e tente efetuar a operação novamente.<br><br>Caso o problema persista, entre em contato com o suporte.\");\n\t\t\t\tdefault:\n\t\t\t\t\tthrow err;\n\t\t\t}\n\t\t}\n\t}\n\n}\n","import jsontoxml from \"jsontoxml\";\n\nimport ComDLL from \"../com/ComDLL.js\";\nimport {\n\tsleep, valorParametro, writeTemporary\n} from \"../def/function.js\";\n\nconst fs = window.require(\"fs\");\nconst os = window.require(\"os\");\n\nexport default class SAT {\n\n\tconstructor(Pool){\n\t\tthis.Pool = Pool;\n\t\tthis.ComDLL = new ComDLL();\n\t\tthis.jsontoxml = jsontoxml;\n\t\tthis.os = os;\n\t\tthis.fs = fs;\n\n\t\tthis.error = null;\n\t}\n\n\t// Cancela um documento ativo\n\tasync cancelarDocumento(iddocumento){\n\t\t// Carrega os parametros\n\t\tlet paramSATModelo = await valorParametro(this.Pool, \"SAT\", \"MODELO\");\n\t\tlet paramSATAtivacao = await valorParametro(this.Pool, \"SAT\", \"ATIVACAO\");\n\t\t// Carrega o documento\n\t\tlet {documento} = await this.carregarDadosDocumento(iddocumento);\n\n\t\t// Cria o XML do documento fiscal a ser enviado para o SAT\n\t\tlet xmlEntrada = null;\n\t\tif(paramSATModelo === \"sweda\"){\n\t\t\txmlEntrada = await this.gerarXMLCancelamento(iddocumento);\n\t\t}else{\n\t\t\txmlEntrada = documento.xml;\n\t\t}\n\t\twriteTemporary(\"cancelamento.xml\", xmlEntrada);\n\n\t\t// Verifica se deve enviar para o SAT\n\t\tif(paramSATModelo === \"nenhum\"){\n\t\t\treturn {xmlcanc: null, chavecanc: null};\n\t\t}\n\n\t\t// Define a DLL a ser utilizada\n\t\tlet dllPath = \"lib/comdll-1.0.0/SAT-\" + paramSATModelo + \".dll\";\n\n\t\t// Executa o comando na DLL\n\t\tlet retorno = null;\n\t\tlet arrRetorno = null;\n\t\twhile(retorno === null || arrRetorno[1] === \"06098\"){\n\t\t\tif(retorno !== null){\n\t\t\t\tawait sleep(500);\n\t\t\t}\n\t\t\tretorno = this.ComDLL.execute(dllPath, \"CancelarUltimaVenda\", [paramSATAtivacao, documento.chave], xmlEntrada);\n\t\t\tif(retorno === false){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tarrRetorno = retorno.split(\"|\");\n\t\t}\n\n\t\tif(!this.validarRetorno(retorno)){\n\t\t\treturn false;\n\t\t}\n\n\t\tlet xmlSaida = atob(arrRetorno[6]);\n\t\tlet chave = arrRetorno[8].trim();\n\n\t\tif(typeof xmlSaida === \"string\" && xmlSaida.length === 0 && paramSATModelo === \"sweda\"){\n\t\t\tarrRetorno = this.fs.readFileSync(\"C:/Sweda/Retorno.txt\").toString();\n\t\t\txmlSaida = atob(arrRetorno[6]);\n\t\t}\n\n\t\treturn {\n\t\t\txmlcanc: xmlSaida,\n\t\t\tchavecanc: chave\n\t\t};\n\t}\n\n\tasync carregarDadosDocumento(iddocumento){\n\t\tlet documento, documentoprodutos,documentopagamentos;\n\n\t\tlet objectName = this.Pool.constructor.name;\n\n\t\tlet client = null;\n\t\tif(objectName === \"Pool\"){\n\t\t\tclient = await this.Pool.connect();\n\t\t}else{\n\t\t\tclient = this.Pool;\n\t\t}\n\n\t\ttry{\n\t\t\tlet res = await client.query(\"SELECT * FROM documento WHERE iddocumento = $1\", [iddocumento]);\n\t\t\tif(res.rows.length === 0){\n\t\t\t\tthrow new Error(\"Nenhum documento foi encontrado.\");\n\t\t\t}\n\t\t\tdocumento = res.rows[0];\n\n\t\t\tlet queryDocumentoProduto = [\n\t\t\t\t\"SELECT documentoproduto.*, unidade.sigla\",\n\t\t\t\t\"FROM documentoproduto\",\n\t\t\t\t\"LEFT JOIN produto USING (idproduto)\",\n\t\t\t\t\"LEFT JOIN unidade USING (idunidade)\",\n\t\t\t\t\"WHERE documentoproduto.iddocumento = $1\",\n\t\t\t\t\"ORDER BY documentoproduto.sequencial\"\n\t\t\t].join(\" \");\n\t\t\tres = await client.query(queryDocumentoProduto, [iddocumento]);\n\t\t\tdocumentoprodutos = res.rows;\n\n\t\t\tlet queryDocumentoPagamento = [\n\t\t\t\t\"SELECT documentopagamento.*, formapagamento.especie\",\n\t\t\t\t\"FROM documentopagamento\",\n\t\t\t\t\"LEFT JOIN formapagamento USING (idformapagamento)\",\n\t\t\t\t\"WHERE documentopagamento.iddocumento = $1\"\n\t\t\t].join(\" \");\n\t\t\tres = await client.query(queryDocumentoPagamento, [iddocumento]);\n\t\t\tdocumentopagamentos = res.rows;\n\t\t}catch(e){\n\t\t\tthrow e;\n\t\t}finally{\n\t\t\tif(objectName === \"Pool\"){\n\t\t\t\tclient.release();\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tdocumento: documento,\n\t\t\tdocumentoprodutos: documentoprodutos,\n\t\t\tdocumentopagamentos: documentopagamentos\n\t\t};\n\t}\n\n\tasync consultarUltimaSessaoFiscal(){\n\t\t/*\n\t\tlet paramSATAtivacao = await valorParametro(this.Pool, \"SAT\", \"ATIVACAO\");\n\t\t\n\t\tconst retorno = this.ComDLL.execute(dllPath, \"ConsultarUltimaSessaoFiscal\", [paramSATAtivacao]);\n\t\tif(retorno === false){\n\t\t\treturn false;\n\t\t}\n\t\tif(!this.validarRetorno(retorno)){\n\t\t\treturn false;\n\t\t}\n\n\t\tlet arrRetorno = retorno.split(\"|\");\n\n\t\tlet xmlSaida = atob(arrRetorno[6]);\n\t\tlet chave = arrRetorno[8].trim();\n\t\tlet numero = chave.substr(-13, 6);\n\n\t\tif(typeof xmlSaida === \"string\" && xmlSaida.length === 0 && paramSATModelo === \"sweda\"){\n\t\t\tarrRetorno = this.fs.readFileSync(\"C:/Sweda/Retorno.txt\").toString();\n\t\t\txmlSaida = atob(arrRetorno[6]);\n\t\t}\n\n\t\tlet tipo = arrRetorno[1];\n\t\tswitch(arrRetorno[1]){\n\t\t\tcase \"06000\":\n\t\t\t\ttipo = \"venda\";\n\t\t\t\tbreak;\n\t\t\tcase \"07000\":\n\t\t\t\ttipo = \"cancelamento\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn {\n\t\t\ttipo: tipo,\n\t\t\txml: xmlSaida,\n\t\t\tchave: chave,\n\t\t\tnumero: numero\n\t\t};\n\t\t*/\n\t}\n\n\tasync gerarXMLCancelamento(iddocumento, success, fail){\n\t\tlet {documento} = await this.carregarDadosDocumento(iddocumento);\n\n\t\tlet paramDesenvolvedoraCNPJ = await valorParametro(this.Pool, \"DESENVOLVEDORA\", \"CNPJ\");\n\t\tlet paramDesenvolvedoraAssinatura = await valorParametro(this.Pool, \"DESENVOLVEDORA\", \"ASSINATURA\");\n\t\tlet paramSATCaixa = await valorParametro(this.Pool, \"SAT\", \"CAIXA\");\n\n\t\tlet infCFe = [{\n\t\t\tname: \"infCFe\",\n\t\t\tattrs: {\"chCanc\": documento.chave},\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tname: \"ide\",\n\t\t\t\t\tchildren: {\n\t\t\t\t\t\t\"CNPJ\": paramDesenvolvedoraCNPJ.removeFormat(),\n\t\t\t\t\t\t\"signAC\": paramDesenvolvedoraAssinatura,\n\t\t\t\t\t\t\"numeroCaixa\": paramSATCaixa.lpad(3, \"0\")\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"emit\",\n\t\t\t\t\tchildren: []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"dest\",\n\t\t\t\t\tchildren: []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"total\",\n\t\t\t\t\tchildren: []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"infAdic\",\n\t\t\t\t\tchildren: []\n\t\t\t\t}\n\t\t\t]\n\t\t}];\n\n\t\tlet xml = [{\n\t\t\tname: \"CFeCanc\",\n\t\t\tchildren: [infCFe]\n\t\t}];\n\n\t\tlet finalXML = this.jsontoxml(xml);\n\n\t\tif(typeof success === \"function\"){\n\t\t\tsuccess(finalXML);\n\t\t}\n\n\t\treturn finalXML;\n\t}\n\n\tasync gerarXMLDocumento(iddocumento, success, fail){\n\t\tlet {documento, documentoprodutos, documentopagamentos} = await this.carregarDadosDocumento(iddocumento);\n\n\t\tlet paramDesenvolvedoraCNPJ = await valorParametro(this.Pool, \"DESENVOLVEDORA\", \"CNPJ\");\n\t\tlet paramDesenvolvedoraAssinatura = await valorParametro(this.Pool, \"DESENVOLVEDORA\", \"ASSINATURA\");\n\t\t//let paramSATAmbiente = await valorParametro(this.Pool, \"SAT\", \"AMBIENTE\");\n\t\tlet paramSATCaixa = await valorParametro(this.Pool, \"SAT\", \"CAIXA\");\n\t\tlet paramEmitenteCNPJ = await valorParametro(this.Pool, \"EMITENTE\", \"CNPJ\");\n\t\tlet paramEmitenteIE = await valorParametro(this.Pool, \"EMITENTE\", \"IE\");\n\t\tlet paramEmitenteImpostoFederal = await valorParametro(this.Pool, \"EMITENTE\", \"IMPOSTOFEDERAL\");\n\t\tlet paramEmitenteImpostoEstadual = await valorParametro(this.Pool, \"EMITENTE\", \"IMPOSTOESTADUAL\");\n\n\t\tif(!paramEmitenteImpostoFederal) paramEmitenteImpostoFederal = 0;\n\t\tif(!paramEmitenteImpostoEstadual) paramEmitenteImpostoEstadual = 0;\n\n\t\tlet ide = {\n\t\t\tname: \"ide\",\n\t\t\tchildren: {\n\t\t\t\t\"CNPJ\": paramDesenvolvedoraCNPJ.removeFormat(),\n\t\t\t\t\"signAC\": paramDesenvolvedoraAssinatura,\n\t\t\t\t\"numeroCaixa\": paramSATCaixa.lpad(3, \"0\")\n\t\t\t\t//\"tpAmb\": paramSATAmbiente\n\t\t\t}\n\t\t};\n\n\t\tlet emit = {\n\t\t\tname: \"emit\",\n\t\t\tchildren: {\n\t\t\t\t\"CNPJ\": paramEmitenteCNPJ.removeFormat(),\n\t\t\t\t\"IE\": paramEmitenteIE.removeFormat(),\n\t\t\t\t\"cRegTribISSQN\": 1,\n\t\t\t\t\"indRatISSQN\": \"N\"\n\t\t\t}\n\t\t};\n\n\t\tlet destChildren = {};\n\t\tlet destCPFCNPJ = (documento.cpfcnpj ? documento.cpfcnpj.removeFormat() : \"\");\n\t\tif(destCPFCNPJ.length > 11){\n\t\t\tdestChildren = {\"CNPJ\": destCPFCNPJ};\n\t\t}else if(destCPFCNPJ.length > 9){\n\t\t\tdestChildren = {\"CPF\": destCPFCNPJ};\n\t\t}\n\t\tlet dest = {\n\t\t\tname: \"dest\",\n\t\t\tchildren: destChildren\n\t\t};\n\n\t\tlet dets = documentoprodutos.map((documentoproduto) => {\n\t\t\tlet prod = [\n\t\t\t\t{name: \"cProd\", text: documentoproduto.idproduto},\n\t\t\t\t{name: \"xProd\", text: documentoproduto.descricao.replaceAll(\"&\", \"&amp;\")},\n\t\t\t\t{name: \"NCM\", text: documentoproduto.codigoncm.removeFormat()},\n\t\t\t\t{name: \"CFOP\", text: documentoproduto.cfop.removeFormat()},\n\t\t\t\t{name: \"uCom\", text: documentoproduto.sigla},\n\t\t\t\t{name: \"qCom\", text: documentoproduto.quantidade.format(4, \".\", \"\")},\n\t\t\t\t{name: \"vUnCom\", text: documentoproduto.preco},\n\t\t\t\t{name: \"indRegra\", text: \"T\"},\n\t\t\t\t{name: \"vDesc\", text: documentoproduto.totaldesconto},\n\t\t\t\t{name: \"vOutro\", text: documentoproduto.totalacrescimo}\n\t\t\t];\n\t\t\tif(documentoproduto.cest !== null && documentoproduto.cest.length > 0){\n\t\t\t\tprod.push({\n\t\t\t\t\tname: \"obsFiscoDet\",\n\t\t\t\t\tattrs: {\"xCampoDet\": \"Cod. CEST\"},\n\t\t\t\t\tchildren: {\n\t\t\t\t\t\t\"xTextoDet\": documentoproduto.cest.removeFormat()\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet ICMS = {};\n\t\t\tif([\"102\", \"300\", \"400\", \"500\"].indexOf(documentoproduto.csosn) > -1){\n\t\t\t\tICMS = {\"ICMSSN102\": {\"Orig\": documentoproduto.origem, \"CSOSN\": documentoproduto.csosn}};\n\t\t\t}\n\n\t\t\tlet PIS = {};\n\t\t\tif([\"01\", \"02\"].indexOf(documentoproduto.cstpis) > -1){\n\t\t\t\tPIS = {\"PISAliq\": {\"CST\": documentoproduto.cstpis, \"vBC\": documentoproduto.basepis, \"pPIS\": documentoproduto.aliqpis.format(4, \".\", \"\")}};\n\t\t\t}else if([\"03\"].indexOf(documentoproduto.cstpis) > -1){\n\t\t\t\tPIS = {\"PISQtde\": {\"CST\": documentoproduto.cstpis, \"qBCProd\": documentoproduto.quantidade, \"vAliqProd\": documentoproduto.aliqpis.format(4, \".\", \"\")}};\n\t\t\t}else if([\"04\", \"06\", \"07\", \"08\", \"09\"].indexOf(documentoproduto.cstpis) > -1){\n\t\t\t\tPIS = {\"PISNT\": {\"CST\": documentoproduto.cstpis}};\n\t\t\t}else if([\"49\"].indexOf(documentoproduto.cstpis) > -1){\n\t\t\t\tPIS = {\"PISSN\": {\"CST\": documentoproduto.cstpis}};\n\t\t\t}else if([\"99\"].indexOf(documentoproduto.cstpis) > -1){\n\t\t\t\tPIS = {\"PISOutr\": {\"CST\": documentoproduto.cstpis, \"vBC\": documentoproduto.basepis, \"pPIS\": documentoproduto.aliqpis.format(4, \".\", \"\")}};\n\t\t\t}\n\n\t\t\tlet COFINS = {};\n\t\t\tif([\"01\", \"02\"].indexOf(documentoproduto.cstcofins) > -1){\n\t\t\t\tCOFINS = {\"COFINSAliq\": {\"CST\": documentoproduto.cstcofins, \"vBC\": documentoproduto.basecofins, \"pCOFINS\": documentoproduto.aliqcofins.format(4, \".\", \"\")}};\n\t\t\t}else if([\"03\"].indexOf(documentoproduto.cstcofins) > -1){\n\t\t\t\tCOFINS = {\"COFINSQtde\": {\"CST\": documentoproduto.cstcofins, \"qBCProd\": documentoproduto.quantidade, \"vAliqProd\": documentoproduto.aliqcofins.format(4, \".\", \"\")}};\n\t\t\t}else if([\"04\", \"06\", \"07\", \"08\", \"09\"].indexOf(documentoproduto.cstcofins) > -1){\n\t\t\t\tCOFINS = {\"COFINSNT\": {\"CST\": documentoproduto.cstcofins}};\n\t\t\t}else if([\"49\"].indexOf(documentoproduto.cstcofins) > -1){\n\t\t\t\tCOFINS = {\"COFINSSN\": {\"CST\": documentoproduto.cstcofins}};\n\t\t\t}else if([\"99\"].indexOf(documentoproduto.cstcofins) > -1){\n\t\t\t\tCOFINS = {\"COFINSOutr\": {\"CST\": documentoproduto.cstcofins, \"vBC\": documentoproduto.basecofins, \"pCOFINS\": documentoproduto.aliqcofins.format(4, \".\", \"\")}};\n\t\t\t}\n\n\t\t\tlet det = {\n\t\t\t\tname: \"det\",\n\t\t\t\tattrs: {\"nItem\": documentoproduto.sequencial},\n\t\t\t\tchildren: {\n\t\t\t\t\t\"prod\": prod,\n\t\t\t\t\t\"imposto\": {\n\t\t\t\t\t\t\"ICMS\": ICMS,\n\t\t\t\t\t\t\"PIS\": PIS,\n\t\t\t\t\t\t\"COFINS\": COFINS\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn det;\n\t\t});\n\n\t\tlet total = {\n\t\t\tname: \"total\"\n\t\t};\n\n\t\tlet pgtoChildren = documentopagamentos.map((documentopagamento) => {\n\t\t\treturn {\n\t\t\t\tname: \"MP\",\n\t\t\t\tchildren: {\n\t\t\t\t\t\"cMP\": documentopagamento.especie,\n\t\t\t\t\t\"vMP\": documentopagamento.totalpagamento\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tlet pgto = {\n\t\t\tname: \"pgto\",\n\t\t\tchildren: pgtoChildren\n\t\t};\n\n\t\tlet impostoFederal = (documento.totaldocumento * paramEmitenteImpostoFederal.toFloat() / 100).format(2, \",\" , \".\");\n\t\tlet impostoEstadual = (documento.totaldocumento * paramEmitenteImpostoEstadual.toFloat() / 100).format(2, \",\" , \".\");\n\t\tlet impostoAproximado = \"Valor aprox. imposto: R$ \" + impostoFederal + \" Fed / R$ \" + impostoEstadual + \" Est / Fonte SEBRAE\";\n\n\t\tlet infAdic = {\n\t\t\tname: \"infAdic\",\n\t\t\tchildren: {\n\t\t\t\t\"infCpl\": impostoAproximado\n\t\t\t}\n\t\t}\n\n\t\tlet infCFeChildren = [ide, emit, dest].concat(dets).concat([total, pgto, infAdic]);\n\n\t\tlet infCFe = [{\n\t\t\tname: \"infCFe\",\n\t\t\tattrs: {\"versaoDadosEnt\": \"0.07\"},\n\t\t\tchildren: infCFeChildren\n\t\t}];\n\n\t\tlet xml = [{\n\t\t\tname: \"CFe\",\n\t\t\tchildren: [infCFe]\n\t\t}];\n\n\t\tlet finalXML = this.jsontoxml(xml);\n\n\t\tif(typeof success === \"function\"){\n\t\t\tsuccess(finalXML);\n\t\t}\n\n\t\treturn finalXML;\n\t}\n\n\tnovoNumSessao(){\n\t\treturn String(Math.round(Math.random() * Math.pow(10, 6))).lpad(6, \"0\");\n\t}\n\n\t// Transmite o documento fiscal\n\tasync transmitirDocumento(iddocumento){\n\t\t/*\n\t\t// Verifica se a venda ja nao foi processada\n\t\tlet ultimaSessao = await this.consultarUltimaSessaoFiscal();\n\t\tif(ultimaSessao[\"tipo\"] === \"venda\" && ultimaSessao[\"chave\"]){\n\t\t\tconst resDocumento = await this.Pool.query(\"SELECT count(iddocumento) FROM documento WHERE chave = $1\", [ultimaSessao[\"chave\"]]);\n\t\t\tif(resDocumento.rows[0].iddocumento === 0){\n\t\t\t\treturn ultimaSessao;\n\t\t\t}\n\t\t}\n\t\t*/\n\t\t// Carrega os parametros\n\t\tlet paramSATModelo = await valorParametro(this.Pool, \"SAT\", \"MODELO\");\n\t\tlet paramSATAtivacao = await valorParametro(this.Pool, \"SAT\", \"ATIVACAO\");\n\n\t\t// Cria o XML do documento fiscal a ser enviado para o SAT\n\t\tlet xmlEntrada = await this.gerarXMLDocumento(iddocumento);\n\t\twriteTemporary(\"venda.xml\", xmlEntrada);\n\n\t\t// Verifica se deve enviar para o SAT\n\t\tif(paramSATModelo === \"nenhum\"){\n\t\t\treturn {xml: null, chave: null, numero: null};\n\t\t}\n\n\t\t// Define a DLL a ser utilizada\n\t\tlet dllPath = \"lib/comdll-1.0.0/SAT-\" + paramSATModelo + \".dll\";\n\n\t\tlet retorno = null;\n\t\tlet arrRetorno = null;\n\t\twhile(retorno === null || arrRetorno[1] === \"06098\"){\n\t\t\tif(retorno !== null){\n\t\t\t\tawait sleep(500);\n\t\t\t}\n\t\t\tretorno = this.ComDLL.execute(dllPath, \"EnviarDadosVenda\", [paramSATAtivacao], xmlEntrada);\n\t\t\tif(retorno === false){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tarrRetorno = retorno.split(\"|\");\n\t\t}\n\n\t\tif(!this.validarRetorno(retorno)){\n\t\t\treturn false;\n\t\t}\n\n\t\tlet xmlSaida = atob(arrRetorno[6]);\n\t\tlet chave = arrRetorno[8].trim();\n\t\tlet numero = chave.substr(-13, 6);\n\n\t\tif(typeof xmlSaida === \"string\" && xmlSaida.length === 0 && paramSATModelo === \"sweda\"){\n\t\t\tarrRetorno = this.fs.readFileSync(\"C:/Sweda/Retorno.txt\").toString();\n\t\t\txmlSaida = atob(arrRetorno[6]);\n\t\t}\n\n\t\treturn {\n\t\t\txml: xmlSaida,\n\t\t\tchave: chave,\n\t\t\tnumero: numero\n\t\t};\n\t}\n\n\tvalidarRetorno(retorno){\n\t\tlet arrRetorno = retorno.split(\"|\");\n\n\t\tthis.error = null;\n\t\tlet sucesso = false;\n\n\t\tswitch(arrRetorno[1]){\n\t\t\t/*\n\t\t\t * Metodo: AtivarSAT\n\t\t\t */\n\t\t\tcase \"04000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\tcase \"04006\": // CSR ICP-BRASIL criado com sucesso\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\t/*\n\t\t\t * Metodo: EnviarDadosVenda\n\t\t\t */\n\t\t\tcase \"06000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\t/*\n\t\t\t * Metodo: CancelarUltimaVenda\n\t\t\t */\n\t\t\tcase \"07000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\t/*\n\t\t\t * Metodo: ConsultarSAT\n\t\t\t */\n\t\t\tcase \"08000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\t/*\n\t\t\t * Metodo: TesteFimAFim\n\t\t\t */\n\t\t\tcase \"09000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\t/*\n\t\t\t * Metodo: ConsultarStatusOperacional\n\t\t\t */\n\t\t\tcase \"10000\":\n\t\t\t\tsucesso = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.error = arrRetorno[3];\n\t\t\t\tif(this.error === undefined || this.error === null || this.error.length === 0){\n\t\t\t\t\tthis.error = \"Erro desconhecido. (Código \" + arrRetorno[1] + \")\";\n\t\t\t\t}else if([\"98\", \"99\"].indexOf(arrRetorno[1].substr(-2)) > -1){\n\t\t\t\t\tthis.error = \"Não foi possível comunicar com o equipamento fiscal SAT.<br><br>Reinicie o equipamento da seguinte maneira:<br>1. Desconecte todos os cabos ligados ao SAT.<br>2. Aguarde 5 segundos.<br>3. Conecte os cabos de volta ao SAT.<br>4. Tente efetuar a venda novamente.<br><br>Caso o problema persista, entre em contato com nosso suporte.\";\n\t\t\t\t}\n\t\t\t\tsucesso = false;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn sucesso;\n\t}\n\n}\n","import React from \"react\";\nimport ini from \"ini\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport Hr from \"./Hr.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport Printer from \"../com/Printer.js\";\nimport SAT from \"../com/SAT.js\";\n\nimport {currentTimestamp, defaultMessageBoxError, valorParametro} from \"../def/function.js\";\n\nexport default class VendaCancelarCupom extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tiddocumento: null,\n\t\t\tnumero: null,\n\t\t\ttotaldocumento: null,\n\t\t\tcpfcnpj: null,\n\t\t\tshow: false\n\t\t};\n\n\t\tthis.atualizarState = this.atualizarState.bind(this);\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.carregarUltimoDocumento = this.carregarUltimoDocumento.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.outroCupom = this.outroCupom.bind(this);\n\n\t\tthis.Printer = new Printer(this.props.Pool);\n\t\tthis.SAT = new SAT(this.props.Pool);\n\t}\n\n\tatualizarState(data){\n\t\tlet numero = (data.numero ? data.numero : \"\");\n\t\tlet cpfcnpj = (data.cpfcnpj ? data.cpfcnpj : \"não informado\");\n\n\t\tthis.setState({\n\t\t\tiddocumento: data.iddocumento,\n\t\t\tnumero: String(numero).lpad(6, \"0\"),\n\t\t\ttotaldocumento: \"R$ \" + data.totaldocumento.format(2, \",\", \".\"),\n\t\t\tcpfcnpj: cpfcnpj\n\t\t});\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tasync carregarDocumento(localizarNumero){\n\t\tlet query = [\n\t\t\t\"SELECT iddocumento, numero, totaldocumento, cpfcnpj\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE operacao = $1\",\n\t\t\t\"  AND numero = $2\",\n\t\t\t\"ORDER BY iddocumento DESC\",\n\t\t\t\"LIMIT 1\"\n\t\t].join(\" \");\n\n\t\tlet res = await this.props.Pool.query(query, [\"CU\", localizarNumero]);\n\n\t\tif(res.rowCount === 0){\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Houve uma falha\",\n\t\t\t\ttext: \"Nenhum documento foi encontrado com o número \" + localizarNumero + \".\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tlet data = res.rows[0];\n\t\tthis.atualizarState(data);\n\t}\n\n\tasync carregarUltimoDocumento(){\n\t\tlet query = [\n\t\t\t\"SELECT iddocumento, numero, totaldocumento, cpfcnpj\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE operacao = $1\",\n\t\t\t\"ORDER BY iddocumento DESC\",\n\t\t\t\"LIMIT 1\"\n\t\t].join(\" \");\n\n\t\tlet res = await this.props.Pool.query(query, [\"CU\"]);\n\n\t\tif(res.rowCount === 0){\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Houve uma falha\",\n\t\t\t\ttext: \"Nenhum documento foi encontrado.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tlet data = res.rows[0];\n\t\tthis.atualizarState(data);\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tshow: nextProps.show\n\t\t});\n\n\t\tif(!this.state.show && nextProps.show){\n\t\t\tthis.carregarUltimoDocumento();\n\t\t}\n\t}\n\n\tasync confirmar(){\n\t\ttry {\n\t\t\twindow.Loading.show();\n\n\t\t\t// Carrega os parametros\n\t\t\tlet paramSATModelo = await valorParametro(this.props.Pool, \"SAT\", \"MODELO\");\n\n\t\t\t// Cancela venda no SAT\n\t\t\tlet retorno = {xmlcanc: null, chavecanc: null};\n\t\t\tif(paramSATModelo !== \"nenhum\"){\n\t\t\t\tretorno = await this.SAT.cancelarDocumento(this.state.iddocumento);\n\t\t\t\tif(retorno === false){\n\t\t\t\t\tthrow new Error(this.SAT.error);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Atualiza tabela no banco de dados\n\t\t\tlet query = [\n\t\t\t\t\"UPDATE documento SET\",\n\t\t\t\t\"  status = $2, dthrcancelamento = $3,\",\n\t\t\t\t\"  xmlcanc = $4, chavecanc = $5\",\n\t\t\t\t\"WHERE iddocumento = $1\"\n\t\t\t].join(\" \");\n\t\t\tlet values = [\n\t\t\t\tthis.state.iddocumento,\n\t\t\t\t\"C\", currentTimestamp(),\n\t\t\t\tretorno.xmlcanc, retorno.chavecanc\n\t\t\t];\n\t\t\tawait this.props.Pool.query(query, values);\n\n\t\t\t// Imprime o cupom do cancelamento\n\t\t\tlet numeroVias = ini.parse(await valorParametro(this.props.Pool, \"IMPRESSORA\", \"NUMEROVIAS\"));\n\t\t\tfor(let i = 1; i <= numeroVias.cancelamento; i++){\n\t\t\t\tthis.Printer.imprimirDocumento(this.state.iddocumento);\n\t\t\t}\n\n\t\t\t// Mensagem de sucesso\n\t\t\twindow.FastMessage.show(\"Venda cancelada com sucesso!\");\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t}catch(err){\n\t\t\tconsole.error(err.stack);\n\t\t\tdefaultMessageBoxError(err.message);\n\t\t}finally{\n\t\t\twindow.Loading.hide();\n\t\t}\n\t}\n\n\toutroCupom(){\n\t\twindow.InformarValor.show({\n\t\t\ttitle: \"Informe o número do cupom\",\n\t\t\tmask: \"999999\",\n\t\t\tsuccess: (value) => {\n\t\t\t\tthis.carregarDocumento(value);\n\t\t\t}\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal id=\"VendaCancelarCupom\" title=\"Cancelamento de venda\" show={this.state.show} size=\"md\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"12\" className=\"text-left\">\n\t\t\t\t\t\tTem certeza que deseja cancelar a venda?<br />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\tCupom: {this.state.numero}<br />\n\t\t\t\t\t\tTotal: {this.state.totaldocumento}<br />\n\t\t\t\t\t\tCPF: {this.state.cpfcnpj}\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Hr />\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"5\">\n\t\t\t\t\t\t<Button text=\"Outro cupom\" color=\"blue\" onClick={this.outroCupom} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"7\" className=\"text-right\">\n\t\t\t\t\t\t<Button text=\"Sim\" icon=\"thumbs-up\" color=\"green\" className=\"mr-2\" onClick={this.confirmar} />\n\t\t\t\t\t\t<Button text=\"Não\" icon=\"thumbs-down\" color=\"red\" onClick={this.cancelar} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport $ from \"jquery\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport Hr from \"./Hr.js\";\nimport Icon from \"./Icon.js\";\nimport ListGroup from \"./ListGroup.js\";\nimport ListItem from \"./ListItem.js\";\nimport Row from \"./Row.js\";\n\nimport \"../css/VendaDetalhe.css\";\n\nexport default class VendaDetalhe extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\theight: \"0px\"\n\t\t}\n\n\t\tthis.ajustarAltura = this.ajustarAltura.bind(this);\n\t}\n\n\tajustarAltura(){\n\t\tthis.setState({\n\t\t\theight: window.innerHeight\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\twindow.addEventListener(\"resize\", this.ajustarAltura);\n\t\tthis.ajustarAltura();\n\t}\n\n\tcomponentWillUnmount(){\n\t\twindow.removeEventListener(\"resize\", this.ajustarAltura);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className=\"vendadetalhe\" style={{height: this.state.height}}>\n\t\t\t\t<VendaDetalheCabecalho\n\t\t\t\t\tcancelarUltimaVenda={this.props.cancelarUltimaVenda}\n\t\t\t\t\tcancelarVendaAtual={this.props.cancelarVendaAtual}\n\t\t\t\t\tcarregarOrcamento={this.props.carregarOrcamento}\n\t\t\t\t\tlistaDocumentoProduto={this.props.listaDocumentoProduto}\n\t\t\t\t\toperacao={this.props.operacao}\n\t\t\t\t\treimprimirCupom={this.props.reimprimirCupom}\n\t\t\t\t\ttrocarOperacao={this.props.trocarOperacao}\n\t\t\t\t/>\n\t\t\t\t<VendaDetalheCorpo\n\t\t\t\t\taumentarQuantidade={this.props.aumentarQuantidade}\n\t\t\t\t\tdiminuirQuantidade={this.props.diminuirQuantidade}\n\t\t\t\t\teditarProduto={this.props.editarProduto}\n\t\t\t\t\tlistaDocumentoProduto={this.props.listaDocumentoProduto}\n\t\t\t\t\tremoverProduto={this.props.removerProduto}\n\t\t\t\t/>\n\t\t\t\t<VendaDetalheRodape\n\t\t\t\t\tabrirFinalizacao={this.props.abrirFinalizacao}\n\t\t\t\t\tcpfcnpj={this.props.cpfcnpj}\n\t\t\t\t\tinformarCPF={this.props.informarCPF}\n\t\t\t\t\tlistaDocumentoProduto={this.props.listaDocumentoProduto}\n\t\t\t\t\toperacao={this.props.operacao}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass VendaDetalheCabecalho extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.alternarOrcamento = this.alternarOrcamento.bind(this);\n\t\tthis.alternarVenda = this.alternarVenda.bind(this);\n\t\tthis.efetivarOrcamento = this.efetivarOrcamento.bind(this);\n\t\tthis.onClickDocument = this.onClickDocument.bind(this);\n\t\tthis.onClickIcon = this.onClickIcon.bind(this);\n\n\t\tthis.exibindoOpcoes = false;\n\t}\n\n\tabrirOpcoes(){\n\t\tlet opcoes = ReactDOM.findDOMNode(this.opcoes);\n\t\t$(opcoes).stop().animate({\n\t\t\theight: \"show\"\n\t\t}, 350);\n\t\tthis.exibindoOpcoes = true;\n\t}\n\n\talternarOrcamento(){\n\t\tthis.props.trocarOperacao(\"OR\");\n\t}\n\n\talternarVenda(){\n\t\tthis.props.trocarOperacao(\"CU\");\n\t}\n\n\tcomponentDidMount(){\n\t\tdocument.addEventListener(\"click\", this.onClickDocument);\n\t}\n\n\tcomponentWillUnmount(){\n\t\tdocument.removeEventListener(\"click\", this.onClickDocument);\n\t}\n\n\tefetivarOrcamento(){\n\t\twindow.InformarValor.show({\n\t\t\ttitle: \"Número do orçamento\",\n\t\t\tmask: \"999999\",\n\t\t\tsuccess: (value) => {\n\t\t\t\tif(value.length > 0){\n\t\t\t\t\tthis.props.carregarOrcamento(value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tfecharOpcoes(){\n\t\tlet opcoes = ReactDOM.findDOMNode(this.opcoes);\n\t\t$(opcoes).stop().animate({\n\t\t\theight: \"hide\"\n\t\t}, 350);\n\t\tthis.exibindoOpcoes = false;\n\t}\n\n\tonClickDocument(event){\n\t\tlet icon = ReactDOM.findDOMNode(this.icon);\n\t\tif(!this.iconClicked && icon.contains(event.target)){\n\t\t\tthis.iconClicked = true;\n\t\t}else if(this.exibindoOpcoes){\n\t\t\tthis.iconClicked = false;\n\t\t\tthis.fecharOpcoes();\n\t\t}\n\t}\n\n\tonClickIcon(){\n\t\tthis.abrirOpcoes();\n\t}\n\n\trender(){\n\t\tlet countLista = this.props.listaDocumentoProduto.length;\n\t\tlet operacao = this.props.operacao;\n\n\t\tlet titulo = null;\n\t\tswitch(operacao){\n\t\t\tcase \"OR\":\n\t\t\t\ttitulo = \"Orçamento\";\n\t\t\t\tbreak;\n\t\t\tcase \"CU\":\n\t\t\tdefault:\n\t\t\t\ttitulo = \"Detalhe da venda\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"vendadetalhe-cabecalho\">\n\t\t\t\t<div>\n\t\t\t\t\t<h4>{titulo}</h4>\n\t\t\t\t\t<Icon name=\"menu\" onClick={this.onClickIcon} ref={(icon) => { this.icon = icon }} />\n\t\t\t\t\t<div className={\"vendadetalhe-cabecalho-opcoes\"} ref={(opcoes) => { this.opcoes = opcoes }}>\n\t\t\t\t\t\t<ListGroup>\n\t\t\t\t\t\t\t<ListItem className={countLista === 0 ? \" d-none\" : \"\"} onClick={this.props.cancelarVendaAtual}>Cancelar venda atual</ListItem>\n\t\t\t\t\t\t\t<ListItem className={countLista === 0 ? \"\" : \" d-none\"} onClick={this.props.cancelarUltimaVenda}>Cancelar última venda</ListItem>\n\t\t\t\t\t\t\t<ListItem onClick={this.props.reimprimirCupom}>Reimprimir cupom</ListItem>\n\t\t\t\t\t\t\t<ListItem className={operacao !== \"CU\" ? \"\" : \" d-none\"} onClick={this.alternarVenda}>Alternar para venda</ListItem>\n\t\t\t\t\t\t\t<ListItem className={operacao !== \"OR\" ? \"\" : \" d-none\"} onClick={this.alternarOrcamento}>Alternar para orçamento</ListItem>\n\t\t\t\t\t\t\t<ListItem onClick={this.efetivarOrcamento}>Efetivar um orçamento</ListItem>\n\t\t\t\t\t\t</ListGroup>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass VendaDetalheCorpo extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.countLista = props.listaDocumentoProduto.length;\n\t}\n\n\tcomponentDidUpdate(){\n\t\tif(this.props.listaDocumentoProduto.length > this.countLista){\n\t\t\tthis.scrollToBottom();\n\t\t}\n\t\tthis.countLista = this.props.listaDocumentoProduto.length;\n\t}\n\n\tscrollToBottom(){\n\t\t$(\"#vendadetalhe-corpo-conteudo\").stop().animate({\n\t\t\t\"scrollTop\": $(\"#vendadetalhe-corpo-conteudo\").get(0).scrollHeight\n\t\t}, 1000);\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className=\"vendadetalhe-corpo\">\n\t\t\t\t<div>\n\t\t\t\t\t<div id=\"vendadetalhe-corpo-conteudo\">\n\t\t\t\t\t\t{this.props.listaDocumentoProduto.map((documentoproduto, i) => {\n\t\t\t\t\t\t\tdocumentoproduto.i = i;\n\t\t\t\t\t\t\treturn <VendaDetalheCorpoItem key={i} documentoproduto={documentoproduto} aumentarQuantidade={this.props.aumentarQuantidade} diminuirQuantidade={this.props.diminuirQuantidade} editarProduto={this.props.editarProduto} removerProduto={this.props.removerProduto} />\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass VendaDetalheCorpoItem extends React.Component {\n\n\trender(documentoproduto){\n\t\tlet espaco = \"   \";\n\t\tlet preco = \"R$ \" + this.props.documentoproduto.preco.format(2, \",\", \".\");\n\t\tlet quantidade  = this.props.documentoproduto.quantidade.format(this.props.documentoproduto.precisao, \",\", \".\");\n\t\tlet totaldesconto = \"R$ \" + this.props.documentoproduto.totaldesconto.format(2, \",\", \".\");\n\t\tlet totalacrescimo = \"R$ \" + this.props.documentoproduto.totalacrescimo.format(2, \",\", \".\");\n\t\tlet totalproduto = \"R$ \" + this.props.documentoproduto.totalproduto.format(2, \",\", \".\");\n\n\t\tlet calculo = null;\n\t\tif(this.props.documentoproduto.descontounitario > 0 && this.props.documentoproduto.acrescimounitario > 0){\n\t\t\tcalculo = preco + espaco + \"x\" + espaco + quantidade + espaco + \"-\" + espaco + totaldesconto + espaco + \"+\" + espaco + totalacrescimo + espaco + \"=\" + espaco + \"<b>\" + totalproduto + \"</b>\";\n\t\t}else if(this.props.documentoproduto.descontounitario > 0){\n\t\t\tcalculo = preco + espaco + \"x\" + espaco + quantidade + espaco + \"-\" + espaco + totaldesconto + espaco + \"=\" + espaco + \"<b>\" + totalproduto + \"</b>\";\n\t\t}else if(this.props.documentoproduto.acrescimounitario > 0){\n\t\t\tcalculo = preco + espaco + \"x\" + espaco + quantidade + espaco + \"+\" + espaco + totalacrescimo + espaco + \"=\" + espaco + \"<b>\" + totalproduto + \"</b>\";\n\t\t}else{\n\t\t\tcalculo = preco + espaco + \"x\" + espaco + quantidade + espaco + \"=\" + espaco + \"<b>\" + totalproduto + \"</b>\";\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Row className=\"vendadetalhe-produto\" onClick={() => { this.props.editarProduto(this.props.documentoproduto); }}>\n\t\t\t\t\t<Col size=\"8\">\n\t\t\t\t\t\t<div className=\"vendadetalhe-produto-descricao\">{this.props.documentoproduto.descricao}</div>\n\t\t   \t\t\t\t<div className=\"vendadetalhe-produto-calculo\" dangerouslySetInnerHTML={{__html: calculo}}></div>\n\t\t \t\t\t</Col>\n\t\t \t\t\t<Col size=\"4\" className=\"vendadetalhe-produto-botao text-right\">\n\t\t   \t\t\t\t<div>\n\t\t\t\t\t\t\t<Button icon=\"plus\" color=\"green\" onClick={(event) => { this.props.aumentarQuantidade(this.props.documentoproduto); event.stopPropagation(); }} />\n\t\t\t\t\t\t\t<Button icon=\"minus\" color=\"red\" onClick={(event) => { this.props.diminuirQuantidade(this.props.documentoproduto); event.stopPropagation(); }} />\n\t\t   \t\t\t\t</div>\n\t\t\t\t\t\t<Button icon=\"bin\" color=\"red\" onClick={(event) => { this.props.removerProduto(this.props.documentoproduto); event.stopPropagation(); }} />\n\t\t \t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Hr />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass VendaDetalheRodape extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcpfcnpj: props.cpfcnpj\n\t\t};\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tcpfcnpj: nextProps.cpfcnpj\n\t\t});\n\t}\n\n\trender(){\n\t\tlet totalquantidade = 0;\n\t\tlet totalbruto = 0;\n\t\tlet totaldesconto = 0;\n\t\tlet totaldocumento = 0;\n\n\t\tthis.props.listaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\ttotalquantidade += parseFloat(documentoproduto.quantidade);\n\t\t\ttotalbruto += parseFloat(documentoproduto.preco * documentoproduto.quantidade);\n\t\t\ttotaldesconto += parseFloat(documentoproduto.totaldesconto);\n\t\t\ttotaldocumento += parseFloat(documentoproduto.totalproduto);\n\t\t});\n\n\t\treturn (\n\t\t\t<div className=\"vendadetalhe-rodape\">\n\t\t\t\t<div>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t\t<div className=\"vendadetalhe-rodape-informacao mb-3 mt-1\">\n\t\t\t\t\t\t\t\t<div>Quantidade de itens <strong>{totalquantidade}</strong></div>\n\t\t\t\t\t\t\t\t<div>Total dos itens <strong><small>R$</small>{totalbruto.format(2, \",\", \".\")}</strong></div>\n\t\t\t\t\t\t\t\t<div>Total de desconto <strong><small>R$</small>{totaldesconto.format(2, \",\", \".\")}</strong></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={this.props.operacao === \"CU\" ? \"\" : \"d-none\"}>\n\t\t\t\t\t\t\t\t<div className={\"vendadetalhe-rodape-cpfcnpj\" + (this.state.cpfcnpj ? \"\" : \" d-none\")} style={{position: \"absolute\", bottom: \"0px\"}}>\n\t\t\t\t\t\t\t\t\t<span>CPF: <strong>{this.state.cpfcnpj}</strong></span>\n\t\t\t\t\t\t\t\t\t<Button text=\"alterar\" color=\"green\" size=\"xs\" className=\"ml-2\" onClick={this.props.informarCPF} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={this.state.cpfcnpj ? \" d-none\" : \"\"} style={{position: \"absolute\", bottom: \"0px\"}}>\n\t\t\t\t\t\t\t\t\t<Button text=\"Informar CPF\" color=\"green\" size=\"sm\" onClick={this.props.informarCPF} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t\t<div className=\"vendadetalhe-rodape-totaldocumento\">{totaldocumento.format(2, \",\", \".\")}</div>\n\t\t\t\t\t\t\t<Button text=\"F I N A L I Z A R\" icon=\"dollar2\" size=\"lg\" block=\"true\" color=\"green\" disabled={totaldocumento === 0} onClick={this.props.abrirFinalizacao} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"./Button.js\";\nimport FormGroup from \"./FormGroup.js\";\nimport Hr from \"./Hr.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport \"../css/VendaEditarProduto.css\";\n\nexport default class VendaEditarProduto extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tquantidade: this.props.documentoproduto.quantidade,\n\t\t\tpreco: this.props.documentoproduto.preco,\n\t\t\tdescontounitario: this.props.documentoproduto.descontounitario,\n\t\t\tacrescimounitario: this.props.documentoproduto.acrescimounitario,\n\t\t\ttotaldesconto: this.props.documentoproduto.totaldesconto,\n\t\t\ttotalacrescimo: this.props.documentoproduto.totalacrescimo,\n\t\t\ttotalproduto: this.props.documentoproduto.totalproduto,\n\t\t\tshow: this.props.show\n\t\t};\n\n\t\tthis.calcularTotais = this.calcularTotais.bind(this);\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.onChangeAcrescimoPercentual = this.onChangeAcrescimoPercentual.bind(this);\n\t\tthis.onChangeAcrescimoUnitario = this.onChangeAcrescimoUnitario.bind(this);\n\t\tthis.onChangeDescontoPercentual = this.onChangeDescontoPercentual.bind(this);\n\t\tthis.onChangeDescontoUnitario = this.onChangeDescontoUnitario.bind(this);\n\t\tthis.onChangePreco = this.onChangePreco.bind(this);\n\t\tthis.onChangeQuantidade = this.onChangeQuantidade.bind(this);\n\t\tthis.onChangeTotalAcrescimo = this.onChangeTotalAcrescimo.bind(this);\n\t\tthis.onChangeTotalDesconto = this.onChangeTotalDesconto.bind(this);\n\t}\n\n\tcalcularTotais(){\n\t\tlet totalbruto = this.state.preco * this.state.quantidade;\n\t\tlet totalacrescimo = this.state.acrescimounitario * this.state.quantidade;\n\t\tlet totaldesconto = this.state.descontounitario * this.state.quantidade;\n\t\tlet totalproduto = totalbruto - totaldesconto + totalacrescimo;\n\n\t\tthis.setState({\n\t\t\ttotalbruto: totalbruto,\n\t\t\ttotalacrescimo: totalacrescimo,\n\t\t\ttotaldesconto: totaldesconto,\n\t\t\ttotalproduto: totalproduto\n\t\t});\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tquantidade: nextProps.documentoproduto.quantidade,\n\t\t\tpreco: nextProps.documentoproduto.preco,\n\t\t\tdescontounitario: nextProps.documentoproduto.descontounitario,\n\t\t\tacrescimounitario: nextProps.documentoproduto.acrescimounitario,\n\t\t\tshow: nextProps.show\n\t\t}, this.calcularTotais);\n\t}\n\n\tconfirmar(){\n\t\tlet documentoproduto = Object.assign({}, this.props.documentoproduto);\n\n\t\tdocumentoproduto.quantidade = this.state.quantidade;\n\t\tdocumentoproduto.preco = this.state.preco;\n\t\tdocumentoproduto.descontounitario = this.state.descontounitario;\n\t\tdocumentoproduto.acrescimounitario = this.state.acrescimounitario;\n\t\tdocumentoproduto.totaldesconto = this.state.totaldesconto;\n\t\tdocumentoproduto.totalacrescimo = this.state.totalacrescimo;\n\t\tdocumentoproduto.totalproduto = this.state.totalproduto;\n\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t}, () => {\n\t\t\tthis.props.atualizarDocumentoProduto(documentoproduto)\n\t\t});\n\t}\n\n\tonChangeAcrescimoPercentual(event){\n\t\tlet acrescimopercentual = event.target.value.toFloat();\n\t\tlet acrescimounitario  = this.state.preco * acrescimopercentual / 100;\n\n\t\tthis.setState({\n\t\t\tacrescimounitario: acrescimounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeAcrescimoUnitario(event){\n\t\tlet acrescimounitario  = event.target.value.toFloat();\n\n\t\tthis.setState({\n\t\t\tacrescimounitario: acrescimounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeDescontoPercentual(event){\n\t\tlet descontopercentual = event.target.value.toFloat();\n\t\tlet descontounitario  = this.state.preco * descontopercentual / 100;\n\n\t\tthis.setState({\n\t\t\tdescontounitario: descontounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeDescontoUnitario(event){\n\t\tlet descontounitario  = event.target.value.toFloat();\n\n\t\tthis.setState({\n\t\t\tdescontounitario: descontounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangePreco(event){\n\t\tlet preco  = event.target.value.toFloat();\n\n\t\tthis.setState({\n\t\t\tpreco: preco\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeQuantidade(event){\n\t\tlet quantidade  = event.target.value.toFloat();\n\n\t\tthis.setState({\n\t\t\tquantidade: quantidade\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeTotalAcrescimo(event){\n\t\tlet acrescimounitario = event.target.value.toFloat() / this.state.quantidade;\n\n\t\tthis.setState({\n\t\t\tacrescimounitario: acrescimounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\tonChangeTotalDesconto(event){\n\t\tlet descontounitario = event.target.value.toFloat() / this.state.quantidade;\n\n\t\tthis.setState({\n\t\t\tdescontounitario: descontounitario\n\t\t}, this.calcularTotais);\n\t}\n\n\trender(){\n\t\tlet totalbruto = this.state.preco * this.state.quantidade;\n\t\tlet acrescimopercentual = (totalbruto > 0 ? this.state.totalacrescimo / totalbruto * 100 : 0);\n\t\tlet descontopercentual = (totalbruto > 0 ? this.state.totaldesconto / totalbruto * 100 : 0);\n\n\t\tlet decimalQuantidade = this.props.documentoproduto.precisao;\n\n\t\treturn (\n\t\t\t<Modal id=\"VendaEditarProduto\" title={this.props.documentoproduto.descricao} show={this.state.show} size=\"md\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<Row>\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Quantidade\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.quantidade.format(decimalQuantidade, \",\", \".\")} onChange={this.onChangeQuantidade} InformarValor={{decimal: decimalQuantidade}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Preço unitário\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.preco.format(2, \",\", \".\")} onChange={this.onChangePreco} InformarValor={{decimal: 2, money: true}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Valor do item\" className=\"col-4\" inputClassName=\"text-center\" value={totalbruto.format(2, \",\", \".\")} disabled={true} readOnly={true} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Desconto unitário\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.descontounitario.format(2, \",\", \".\")} onChange={this.onChangeDescontoUnitario} InformarValor={{decimal: 2, money: true}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Desconto percentual\" className=\"col-4\" inputClassName=\"text-center\" value={descontopercentual.format(2, \",\", \".\")} onChange={this.onChangeDescontoPercentual} InformarValor={{decimal: 0}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Total de desconto\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.totaldesconto.format(2, \",\", \".\")} onChange={this.onChangeTotalDesconto} InformarValor={{decimal: 2, money: true}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Acréscimo unitário\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.acrescimounitario.format(2, \",\", \".\")} onChange={this.onChangeAcrescimoUnitario} InformarValor={{decimal: 2, money: true}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Acrésc percentual\" className=\"col-4\" inputClassName=\"text-center\" value={acrescimopercentual.format(2, \",\", \".\")} onChange={this.onChangeAcrescimoPercentual} InformarValor={{decimal: 0}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Total de acréscimo\" className=\"col-4\" inputClassName=\"text-center\" value={this.state.totalacrescimo.format(2, \",\", \".\")} onChange={this.onChangeTotalAcrescimo} InformarValor={{decimal: 2, money: true}} />\n\t\t\t\t\t<FormGroup type=\"text\" label=\"Total final\" className=\"col-4 offset-8\" inputClassName=\"text-center\" value={this.state.totalproduto.format(2, \",\", \".\")} disabled={true} readOnly={true} />\n\t\t\t\t</Row>\n\t\t\t\t<Hr />\n\t\t\t\t<div className=\"text-right\">\n\t\t\t\t\t<Button text=\"Confirmar\" icon=\"thumbs-up\" color=\"green\" className=\"mr-2\" onClick={this.confirmar} />\n\t\t\t\t\t<Button text=\"Voltar\" icon=\"thumbs-down\" color=\"red\" onClick={this.cancelar} />\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nexport default class Card extends React.Component {\n\n\trender(){\n\t\tlet className = [this.props.className];\n\t\tclassName.push(\"card\");\n\n\t\treturn (\n\t\t\t<div className={className.join(\" \")}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"./Button.js\";\nimport Card from \"./Card.js\";\nimport Col from \"./Col.js\";\nimport FormGroup from \"./FormGroup.js\";\nimport Hr from \"./Hr.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/VendaFinalizacao.css\";\n\nexport default class VendaFinalizacao extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdocumentopagamentos: props.listaDocumentoPagamento,\n\t\t\tformaspagamento: [],\n\t\t\tshow: false\n\t\t};\n\n\t\tthis.finalizarVenda = this.finalizarVenda.bind(this);\n\t\tthis.removerPagamento = this.removerPagamento.bind(this);\n\n\t\tthis.totalpago = 0;\n\t\tthis.totalrestante = 0;\n\t\tthis.totaltroco = 0;\n\t}\n\n\tcarregarFormasPagamento(){\n\t\tlet query = \"SELECT idformapagamento, descricao, especie FROM formapagamento WHERE status = $1 ORDER BY especie\";\n\t\tthis.props.Pool.query(query, [\"A\"], (err, res) => {\n\t\t\tif(err){\n\t\t\t\tdefaultMessageBoxError(err);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tformaspagamento: res.rows\n\t\t\t});\n\t\t});\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.carregarFormasPagamento();\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tdocumentopagamentos: nextProps.listaDocumentoPagamento,\n\t\t\tshow: nextProps.show\n\t\t});\n\t}\n\n\tfinalizarVenda(){\n\t\tthis.props.finalizarVenda(this.state.documentopagamentos, this.totaltroco);\n\t}\n\n\ticonEspecie(especie){\n\t\tswitch(especie){\n\t\t\tcase \"01\": return \"dollar\";\n\t\t\tcase \"02\": return \"keyboard\";\n\t\t\tcase \"03\":\n\t\t\tcase \"04\": return \"credit-card\";\n\t\t\tcase \"10\":\n\t\t\tcase \"11\":\n\t\t\tcase \"12\":\n\t\t\tcase \"13\": return \"discout\";\n\t\t\tcase \"99\": return \"money\";\n\t\t\tdefault: return \"money\";\n\t\t}\n\t}\n\n\tincluirPagamento(formapagamento){\n\t\twindow.InformarValor.show({\n\t\t\ttitle: formapagamento.descricao,\n\t\t\tdecimal: 2,\n\t\t\tmoney: true,\n\t\t\tvalue: this.totalrestante.format(2, \",\", \".\"),\n\t\t\tsuccess: (valor) => {\n\t\t\t\tvalor = valor.toFloat();\n\t\t\t\tif(!(valor > 0)){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet documentopagamentos = this.state.documentopagamentos;\n\t\t\t\tdocumentopagamentos.push({\n\t\t\t\t\tidformapagamento: formapagamento.idformapagamento,\n\t\t\t\t\tdescricao: formapagamento.descricao,\n\t\t\t\t\ttotalpagamento: valor\n\t\t\t\t});\n\t\t\t\tthis.setState({\n\t\t\t\t\tdocumentopagamentos: documentopagamentos\n\t\t\t\t}, () => {\n\t\t\t\t\tif(formapagamento.especie === \"01\" && this.totalrestante === 0){\n\t\t\t\t\t\tthis.finalizarVenda();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t}\n\n\tremoverPagamento(i){\n\t\tlet documentopagamentos = this.state.documentopagamentos;\n\t\tdocumentopagamentos.splice(i, 1);\n\t\tthis.setState({\n\t\t\tdocumentopagamentos: documentopagamentos\n\t\t});\n\t}\n\n\trender(){\n\t\tthis.totalpago = 0;\n\t\tfor(let documentopagamento of this.state.documentopagamentos){\n\t\t\tthis.totalpago += documentopagamento.totalpagamento;\n\t\t}\n\t\tif(this.totalpago > this.props.totaldocumento){\n\t\t\tthis.totalrestante = 0;\n\t\t\tthis.totaltroco = Math.round((this.totalpago - this.props.totaldocumento) * 100) / 100;\n\t\t}else{\n\t\t\tthis.totalrestante = Math.round((this.props.totaldocumento - this.totalpago) * 100) / 100;\n\t\t\tthis.totaltroco = 0;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={\"vendafinalizacao\" + (this.state.show ? \"\" : \" d-none\")}>\n\t\t\t\t<Modal title=\"Finalização da venda\" size=\"lg\" show={this.state.show} beforeClose={this.props.beforeClose}>\n\t\t\t\t\t<div className=\"vendafinalizacao-totaldocumento\">\n\t\t\t\t\t\t{this.props.totaldocumento.format(2, \",\", \".\")}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Row className=\"vendafinalizacao-formapagamento\">\n\t\t\t\t\t\t{this.state.formaspagamento.map((formapagamento, i) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Col size=\"4\" key={i}>\n\t\t\t\t\t\t\t\t\t<Button text={formapagamento.descricao} block={true} size=\"lg\" icon={this.iconEspecie(formapagamento.especie)} disabled={this.totalrestante === 0} onClick={() => { this.incluirPagamento(formapagamento) }} />\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Hr />\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<FormGroup label=\"Total pago\" className=\"col-3\" inputClassName=\"text-center\" size=\"lg\" value={this.totalpago.format(2, \",\", \".\")} disabled={true} />\n\t\t\t\t\t\t<FormGroup label=\"Total restante\" className=\"col-3\" inputClassName=\"text-center\" size=\"lg\" value={this.totalrestante.format(2, \",\", \".\")} disabled={true} warning={this.totalrestante} />\n\t\t\t\t\t\t<FormGroup label=\"Total de troco\" className=\"col-3\" inputClassName=\"text-center\" size=\"lg\" value={this.totaltroco.format(2, \",\", \".\")} disabled={true} warning={this.totaltroco} />\n\t\t\t\t\t\t<Col size=\"3\" labelMargin={true}>\n\t\t\t\t\t\t\t<Button text=\"Finalizar!\" icon=\"thumbs-up\" block={true} size=\"lg\" color=\"green\" disabled={this.totalrestante > 0} onClick={this.finalizarVenda} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<VendaFinalizacaoListaPagamentos documentopagamentos={this.state.documentopagamentos} removerPagamento={this.removerPagamento} />\n\t\t\t\t</Modal>\n\t\t\t\t<div className=\"vendafinalizacao-botoesextras\">\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t\t<Button text=\"Desconto\" icon=\"folder-minus\" size=\"sm\" block={true} disabled={this.totalpago > 0} onClick={this.props.aplicarDesconto} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t\t<Button text=\"Acréscimo\" icon=\"folder-plus\" size=\"sm\" block={true} disabled={this.totalpago > 0} onClick={this.props.aplicarAcrescimo} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t\t<Button text=\"Incluir 10%\" icon=\"user-plus\" size=\"sm\" block={true} onClick={this.props.incluirDezPorcento} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass VendaFinalizacaoListaPagamentos extends React.Component {\n\trender(){\n\t\tif(this.props.documentopagamentos.length === 0){\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Hr className=\"mt-0\" />\n\t\t\t\t<Row className=\"justify-content-center\">\n\t\t\t\t\t{this.props.documentopagamentos.map((documentopagamento, i) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Col size=\"6\" key={i}>\n\t\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t\t<Col size=\"5\">\n\t\t\t\t\t\t\t\t\t\t\t<span>{documentopagamento.descricao}</span>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col size=\"4\">\n\t\t\t\t\t\t\t\t\t\t\t<span>{documentopagamento.totalpagamento.format(2, \",\", \".\")}</span>\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col size=\"3\">\n\t\t\t\t\t\t\t\t\t\t\t<Button icon=\"bin\" color=\"red\" size=\"sm\" block={true} onClick={() => {this.props.removerPagamento(i)}} />\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from \"react\";\n\nimport Button from \"./Button.js\";\nimport Col from \"./Col.js\";\nimport FormGroup from \"./FormGroup.js\";\nimport Hr from \"./Hr.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\n\nimport {validarCPF, validarCNPJ} from \"../def/function.js\";\n\nexport default class VendaFinalizacaoOrcamento extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tnomeorcamento: this.props.nomeorcamento,\n\t\t\tcpfcnpj: this.props.cpfcnpj,\n\t\t\tshow: this.props.show\n\t\t};\n\n\t\tthis.cancelar = this.cancelar.bind(this);\n\t\tthis.confirmar = this.confirmar.bind(this);\n\t\tthis.onChangeCpfCnpj = this.onChangeCpfCnpj.bind(this);\n\t\tthis.onChangeNomeOrcamento = this.onChangeNomeOrcamento.bind(this);\n\t\tthis.onFocusCpfCnpj = this.onFocusCpfCnpj.bind(this);\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tnomeorcamento: nextProps.nomeorcamento,\n\t\t\tcpfcnpj: nextProps.cpfcnpj,\n\t\t\tshow: nextProps.show\n\t\t});\n\t}\n\n\tconfirmar(){\n\t\tthis.props.finalizarOrcamento(this.state.nomeorcamento, this.state.cpfcnpj);\n\t}\n\n\tonChangeCpfCnpj(event){\n\t\tthis.setState({\n\t\t\tcpfcnpj: event.target.value\n\t\t});\n\t}\n\n\tonChangeNomeOrcamento(event){\n\t\tthis.setState({\n\t\t\tnomeorcamento: event.target.value\n\t\t});\n\t}\n\n\tonFocusCpfCnpj(event){\n\t\twindow.InformarValor.show({\n\t\t\ttitle: \"Informe o CPF ou CNPJ\",\n\t\t\tmask: \"99999999999999\",\n\t\t\tsuccess: (valor) => {\n\t\t\t\tlet cpfcnpj = null;\n\t\t\t\tif(valor.length === 11 && validarCPF(valor)){\n\t\t\t\t\tcpfcnpj = valor.substr(0, 3) + \".\" + valor.substr(3, 3) + \".\" + valor.substr(6, 3) + \"-\" + valor.substr(9, 2);\n\t\t\t\t}else if(valor.length === 14 && validarCNPJ(valor)){\n\t\t\t\t\tcpfcnpj = valor.substr(0, 2) + \".\" + valor.substr(2, 3) + \".\" + valor.substr(5, 3) + \"/\" + valor.substr(8, 4) + \"-\" + valor.substr(12, 2);\n\t\t\t\t}else if(valor.length > 0){\n\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\ttitle: \"CPF ou CNPJ inválido\",\n\t\t\t\t\t\ttext: \"O CPF ou CNPJ informado é inválido.\"\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tcpfcnpj: cpfcnpj\n\t\t\t\t});\n\t\t\t},\n\t\t\tfail: () => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcpfcnpj: null\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal id=\"VendaFinalizacaoOrcamento\" show={this.state.show} size=\"sm\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<Row>\n\t\t\t\t\t<FormGroup type=\"text\" className=\"col-12\" label=\"Nome do cliente\" value={this.state.nomeorcamento} onChange={this.onChangeNomeOrcamento} />\n\t\t\t\t\t<FormGroup type=\"text\" className=\"col-12\" label=\"CPF/CNPJ\" value={this.state.cpfcnpj} onChange={this.onChangeCpfCnpj} onFocus={this.onFocusCpfCnpj} />\n\t\t\t\t</Row>\n\t\t\t\t<Hr className=\"mt-0\" />\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"6\">\n\t\t\t\t\t\t<Button text=\"Cancelar\" color=\"red\" block={true} onClick={this.cancelar} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"6\" className=\"pl-0\">\n\t\t\t\t\t\t<Button text=\"Confirmar\" color=\"green\" block={true} onClick={this.confirmar} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n","import React from \"react\";\n\nimport Col from \"./Col.js\";\nimport ListGroup from \"./ListGroup.js\";\nimport ListItem from \"./ListItem.js\";\nimport Modal from \"./Modal.js\";\nimport Row from \"./Row.js\";\nimport Printer from \"./Printer.js\";\n\nimport {defaultMessageBoxError} from \"../def/function.js\";\n\nimport \"../css/VendaReimprimirCupom.css\";\n\nexport default class VendaReimprimirCupom extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tlistaUltimosDocumentos: [],\n\t\t\tshow: false\n\t\t};\n\n\t\tthis.carregarUltimosDocumentos = this.carregarUltimosDocumentos.bind(this);\n\t\tthis.imprimir = this.imprimir.bind(this);\n\t}\n\n\tatualizarState(data){\n\t\tlet numero = (data.numero ? data.numero : \"\");\n\t\tlet cpfcnpj = (data.cpfcnpj ? data.cpfcnpj : \"não informado\");\n\n\t\tthis.setState({\n\t\t\tiddocumento: data.iddocumento,\n\t\t\tnumero: String(numero).lpad(6, \"0\"),\n\t\t\ttotaldocumento: \"R$ \" + data.totaldocumento.format(2, \",\", \".\"),\n\t\t\tcpfcnpj: cpfcnpj\n\t\t});\n\t}\n\n\tcancelar(){\n\t\tthis.setState({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tasync carregarDocumento(localizarNumero){\n\t\tlet query = [\n\t\t\t\"SELECT iddocumento, numero, totaldocumento, cpfcnpj\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE operacao = $1\",\n\t\t\t\"  AND numero = $2\",\n\t\t\t\"ORDER BY iddocumento DESC\",\n\t\t\t\"LIMIT 1\"\n\t\t].join(\" \");\n\n\t\tlet res = await this.props.Pool.query(query, [\"CU\", localizarNumero]);\n\n\t\tif(res.rowCount === 0){\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Houve uma falha\",\n\t\t\t\ttext: \"Nenhum documento foi encontrado com o número \" + localizarNumero + \".\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tlet data = res.rows[0];\n\t\tthis.atualizarState(data);\n\t}\n\n\tasync carregarUltimosDocumentos(){\n\t\tlet query = [\n\t\t\t\"SELECT iddocumento, dthrcriacao, totaldocumento, totalquantidade, cpfcnpj\",\n\t\t\t\"FROM documento\",\n\t\t\t\"WHERE operacao = $1\",\n\t\t\t\"ORDER BY dthrcriacao DESC\",\n\t\t\t\"LIMIT 3\"\n\t\t].join(\" \");\n\n\t\tlet res = await this.props.Pool.query(query, [\"CU\"]);\n\n\t\tlet data = [];\n\t\tfor(let row of res.rows){\n\t\t\tdata.push(row);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tlistaUltimosDocumentos: data\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tthis.setState({\n\t\t\tshow: nextProps.show\n\t\t});\n\n\t\tif(!this.state.show && nextProps.show){\n\t\t\tthis.carregarUltimosDocumentos();\n\t\t}\n\t}\n\n\tasync imprimir(iddocumento){\n\t\tlet printer = new Printer(this.props.Pool);\n\t\tawait printer.imprimirDocumento(iddocumento, () => {\n\t\t\tthis.setState({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t\twindow.FastMessage.show(\"Cupom enviado para impressora com sucesso!\");\n\t\t}, (err) => {\n\t\t\tif(err) defaultMessageBoxError(err);\n\t\t});\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal id=\"VendaReimprimirCupom\" title=\"Reimpressão de cupom\" show={this.state.show} size=\"md\" beforeClose={this.props.beforeClose} >\n\t\t\t\t<ListGroup>\n\t\t\t\t\t{this.state.listaUltimosDocumentos.map((documento, i) => {\n\t\t\t\t\t\tlet dthrcriacao = documento.dthrcriacao.toLocaleString();\n\t\t\t\t\t\tlet totaldocumento = \"R$ \" + documento.totaldocumento.format(2, \",\", \".\");\n\t\t\t\t\t\tlet totalquantidade = Math.round(documento.totalquantidade);\n\t\t\t\t\t\tlet cpfcnpj = documento.cpfcnpj;\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<ListItem key={i} onClick={() => {this.imprimir(documento.iddocumento)}}>\n\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t\t<Col size=\"12\">\n\t\t\t\t\t\t\t\t\t\t<h3 className=\"text-center\">{dthrcriacao}</h3>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t<Col size=\"4\" className=\"text-center\">\n\t\t\t\t\t\t\t\t\t\t<span>Total documento</span>\n\t\t\t\t\t\t\t\t\t\t<h4>{totaldocumento}</h4>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t<Col size=\"4\" className=\"text-center\">\n\t\t\t\t\t\t\t\t\t\t<span>Qtde de itens</span>\n\t\t\t\t\t\t\t\t\t\t<h4>{totalquantidade}</h4>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t<Col size=\"4\" className=\"text-center\">\n\t\t\t\t\t\t\t\t\t\t<span>CPF/CNPJ</span>\n\t\t\t\t\t\t\t\t\t\t<h4>{cpfcnpj}</h4>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</ListGroup>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n}\n","import React from \"react\";\nimport $ from \"jquery\";\nimport ini from \"ini\";\n\nimport {Pool} from \"../def/postgresql.js\";\n\nimport Button from \"../com/Button.js\";\nimport Col from \"../com/Col.js\";\nimport Content from \"../com/Content.js\";\nimport FormControl from \"../com/FormControl.js\";\nimport Icon from \"../com/Icon.js\";\nimport PainelRapido from \"../com/PainelRapido.js\";\nimport Row from \"../com/Row.js\";\nimport VendaAplicarAcrescimo from \"../com/VendaAplicarAcrescimo.js\";\nimport VendaAplicarDesconto from \"../com/VendaAplicarDesconto.js\";\nimport VendaCancelarCupom from  \"../com/VendaCancelarCupom.js\";\nimport VendaDetalhe from \"../com/VendaDetalhe.js\";\nimport VendaEditarProduto from \"../com/VendaEditarProduto.js\";\nimport VendaFinalizacao from \"../com/VendaFinalizacao.js\";\nimport VendaFinalizacaoOrcamento from \"../com/VendaFinalizacaoOrcamento.js\";\nimport VendaReimprimirCupom from \"../com/VendaReimprimirCupom.js\";\n\nimport Printer from \"../com/Printer.js\";\nimport SAT from \"../com/SAT.js\";\n\nimport \"../def/prototype.js\";\nimport {\n\tdefaultMessageBoxError, temporaryDirectory, validarCPF,\n\tvalidarCNPJ, valorParametro, writeTemporary\n} from \"../def/function.js\";\n\nimport \"../css/Venda.css\";\n\nconst fs = window.require(\"fs\");\n\nexport default class Venda extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tlet documentoproduto = this.criarObjetoDocumentoProduto();\n\n\t\tthis.state = {\n\t\t\tdocumentoproduto: documentoproduto, // Produto atual que esta sendo editado\n\t\t\tlistaDocumentoProduto: [], // Lista de produtos que compoe a venda\n\t\t\tlistaDocumentoPagamento: [], // Lista de pagamentos que compoe a venda\n\t\t\toperacao: \"CU\", // Operacao (CU: Cupom, OR: Orcamento)\n\t\t\tcpfcnpj: null, // CPF/CNPJ do cliente\n\t\t\tnomeorcamento: null, // Nome do cliente\n\t\t\tiddocumentoorcamento: null, // ID do orcamento de origem\n\t\t\tpesquisa: \"\", // Conteudo da pesquisa\n\t\t\tpesquisaEfetiva: \"\", // O real termo sendo pesquisado\n\t\t\tshowEditarProduto: false, // Se deve exibir o modal da edicao de produtos\n\t\t\tshowVendaAplicarDesconto: false, // Se deve exibir o modal da aplicacao de desconto\n\t\t\tshowVendaAplicarAcrescimo: false, // Se deve exibir o modal da aplicacao de acrescimo\n\t\t\tshowVendaCancelarCupom: false, // Se deve exibir o modal de cancelamento de cupom\n\t\t\tshowVendaFinalizacao: false, // Se deve exibir o modal da finalizacao de venda\n\t\t\tshowVendaFinalizacaoOrcamento: false, // Se deve exibir o modal da finalizacao de orcamento\n\t\t\tshowVendaReimprimirCupom: false // Se deve exibir o modal de reimpressao de cupom\n\t\t};\n\n\t\tthis.abrirFinalizacao = this.abrirFinalizacao.bind(this);\n\t\tthis.aplicarAcrescimo = this.aplicarAcrescimo.bind(this);\n\t\tthis.aplicarDesconto = this.aplicarDesconto.bind(this);\n\t\tthis.atualizarDocumentoProduto = this.atualizarDocumentoProduto.bind(this);\n\t\tthis.aumentarQuantidade = this.aumentarQuantidade.bind(this);\n\t\tthis.cancelarUltimaVenda = this.cancelarUltimaVenda.bind(this);\n\t\tthis.cancelarVendaAtual = this.cancelarVendaAtual.bind(this);\n\t\tthis.carregarOrcamento = this.carregarOrcamento.bind(this);\n\t\tthis.carregarTemporario = this.carregarTemporario.bind(this);\n\t\tthis.diminuirQuantidade = this.diminuirQuantidade.bind(this);\n\t\tthis.editarProduto = this.editarProduto.bind(this);\n\t\tthis.finalizarDocumento = this.finalizarDocumento.bind(this);\n\t\tthis.finalizarOrcamento = this.finalizarOrcamento.bind(this);\n\t\tthis.finalizarVenda = this.finalizarVenda.bind(this);\n\t\tthis.gravarTemporario = this.gravarTemporario.bind(this);\n\t\tthis.incluirDezPorcento = this.incluirDezPorcento.bind(this);\n\t\tthis.incluirProduto = this.incluirProduto.bind(this);\n\t\tthis.informarCPF = this.informarCPF.bind(this);\n\t\tthis.onChangePesquisa = this.onChangePesquisa.bind(this);\n\t\tthis.onClickBuscar = this.onClickBuscar.bind(this);\n\t\tthis.onKeyUpPesquisa = this.onKeyUpPesquisa.bind(this);\n\t\tthis.pesquisaLimpar = this.pesquisaLimpar.bind(this);\n\t\tthis.reimprimirCupom = this.reimprimirCupom.bind(this);\n\t\tthis.reiniciar = this.reiniciar.bind(this);\n\t\tthis.removerProduto = this.removerProduto.bind(this);\n\t\tthis.trocarOperacao = this.trocarOperacao.bind(this);\n\n\t\tthis.Pool = new Pool();\n\n\t\tthis.temporaryFileName = \"venda.tmp\";\n\t}\n\n\tabrirFinalizacao(){\n\t\tswitch(this.state.operacao){\n\t\t\tcase \"CU\":\n\t\t\t\tthis.setState({\n\t\t\t\t\tshowVendaFinalizacao: true\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"OR\":\n\t\t\t\tthis.setState({\n\t\t\t\t\tshowVendaFinalizacaoOrcamento: true\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\taplicarAcrescimo(totalbruto, totalacrescimo){\n\t\tif(isNaN(totalbruto) || isNaN(totalacrescimo)){\n\t\t\tthis.setState({\n\t\t\t\tshowVendaAplicarAcrescimo: true\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\n\t\tlistaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\tlet totalproduto = documentoproduto.preco * documentoproduto.quantidade;\n\t\t\tlet acrescimoproduto  = totalacrescimo * (totalproduto / totalbruto);\n\t\t\tlet acrescimounitario = acrescimoproduto / documentoproduto.quantidade;\n\t\t\tdocumentoproduto.acrescimounitario = acrescimounitario;\n\t\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\t});\n\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto,\n\t\t\tshowVendaAplicarAcrescimo: false\n\t\t});\n\t}\n\n\taplicarDesconto(totalbruto, totaldesconto){\n\t\tif(isNaN(totalbruto) || isNaN(totaldesconto)){\n\t\t\tthis.setState({\n\t\t\t\tshowVendaAplicarDesconto: true\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\n\t\tlistaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\tlet totalproduto = documentoproduto.preco * documentoproduto.quantidade;\n\t\t\tlet descontoproduto = Math.round(totaldesconto * (totalproduto / totalbruto) * 100) / 100;\n\t\t\tlet descontounitario = Math.round(descontoproduto / documentoproduto.quantidade * 100) / 100;\n\t\t\tdocumentoproduto.descontounitario = descontounitario;\n\t\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\t});\n\n\t\tlet calcularDiferenca = () => {\n\t\t\tlet t_descontoproduto = 0;\n\t\t\tlistaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\t\tt_descontoproduto += documentoproduto.descontounitario * documentoproduto.quantidade;\n\t\t\t});\n\t\t\tlet diferenca = totaldesconto - t_descontoproduto;\n\t\t\tdiferenca = Math.round(diferenca * 100) / 100;\n\t\t\treturn diferenca;\n\t\t};\n\n\t\tlet i = 0;\n\t\tlet diferenca = calcularDiferenca();\n\t\twhile(diferenca !== 0 && i++ < 20){\n\t\t\tlet index = Math.round(Math.random() * (listaDocumentoProduto.length - 1));\n\t\t\tlet documentoproduto = listaDocumentoProduto[index];\n\t\t\tlet descontounitario = documentoproduto.descontounitario;\n\t\t\tlet descontoproduto = (descontounitario * documentoproduto.quantidade) + diferenca;\n\t\t\tdescontounitario = Math.round(descontoproduto / documentoproduto.quantidade * 100) / 100;\n\t\t\tdocumentoproduto.descontounitario = descontounitario;\n\t\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\t\tdiferenca = calcularDiferenca();\n\t\t}\n\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto,\n\t\t\tshowVendaAplicarDesconto: false\n\t\t});\n\t}\n\n\tatualizarDocumentoProduto(documentoproduto){\n\t\tlet i = documentoproduto.i;\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\t\tlistaDocumentoProduto[i] = documentoproduto;\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto\n\t\t});\n\t}\n\n\taumentarQuantidade(documentoproduto){\n\t\tlet i = documentoproduto.i;\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\t\tdocumentoproduto = listaDocumentoProduto[i];\n\t\tdocumentoproduto.quantidade++;\n\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\tlistaDocumentoProduto[i] = documentoproduto;\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto\n\t\t});\n\t}\n\n\tcalcularDocumentoProduto(documentoproduto){\n\t\tdocumentoproduto.totaldesconto = documentoproduto.descontounitario * documentoproduto.quantidade;\n\t\tdocumentoproduto.totalacrescimo = documentoproduto.acrescimounitario * documentoproduto.quantidade;\n\t\tdocumentoproduto.totalproduto = (documentoproduto.preco * documentoproduto.quantidade) - documentoproduto.totaldesconto + documentoproduto.totalacrescimo;\n\t}\n\n\tcancelarUltimaVenda(){\n\t\tthis.setState({\n\t\t\tshowVendaCancelarCupom: true\n\t\t});\n\t}\n\n\tcancelarVendaAtual(){\n\t\twindow.MessageBox.show({\n\t\t\ttitle: \"Cancelamento de venda\",\n\t\t\ttext: \"Tem certeza que deseja cancelar a venda atual?\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tcpfcnpj: null,\n\t\t\t\t\t\t\tlistaDocumentoProduto: [],\n\t\t\t\t\t\t\tlistaDocumentoPagamento: []\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Não\",\n\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tasync carregarOrcamento(iddocumento){\n\t\ttry{\n\t\t\twindow.Loading.show();\n\n\t\t\tlet queryDocumento = \"SELECT iddocumento, cpfcnpj, nomeorcamento FROM documento WHERE operacao = $1 AND iddocumento = $2\";\n\t\t\tlet resDocumento = await this.Pool.query(queryDocumento, [\"OR\", iddocumento]);\n\t\t\tif(resDocumento.rows.length === 0){\n\t\t\t\tthrow new Error(\"Orçamento de número <b>\" + iddocumento + \"</b> não pôde ser encontrado.\");\n\t\t\t}\n\t\t\tlet documento = resDocumento.rows[0];\n\n\t\t\tlet listaDocumentoProduto = [];\n\t\t\tlet queryDocumentoProduto = \"SELECT * FROM documentoproduto WHERE iddocumento = $1\";\n\t\t\tlet resDocumentoProduto = await this.Pool.query(queryDocumentoProduto, [documento.iddocumento]);\n\t\t\tfor(let row of resDocumentoProduto.rows){\n\t\t\t\tlistaDocumentoProduto.push(this.criarObjetoDocumentoProduto({\n\t\t\t\t\tidproduto: row.idproduto,\n\t\t\t\t\tdescricao: row.descricao,\n\t\t\t\t\tunidade: row.unidade,\n\t\t\t\t\tprecisao: row.precisao,\n\t\t\t\t\tprecovariavel: row.precovariavel,\n\t\t\t\t\tquantidade: row.quantidade,\n\t\t\t\t\tpreco: row.preco,\n\t\t\t\t\tdescontounitario: row.descontounitario,\n\t\t\t\t\ttotaldesconto: row.totaldesconto,\n\t\t\t\t\tacrescimounitario: row.acrescimounitario,\n\t\t\t\t\ttotalacrescimo: row.totalacrescimo,\n\t\t\t\t\ttotalproduto: row.totalproduto\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\toperacao: \"CU\",\n\t\t\t\tcpfcnpj: documento.cpfcnpj,\n\t\t\t\tnomeorcamento: documento.nomeorcamento,\n\t\t\t\tlistaDocumentoProduto: listaDocumentoProduto,\n\t\t\t\tiddocumentoorcamento: iddocumento\n\t\t\t});\n\t\t}catch(err){\n\t\t\tdefaultMessageBoxError(err);\n\t\t}finally{\n\t\t\twindow.Loading.hide();\n\t\t}\n\t}\n\n\tasync carregarTemporario(){\n\t\tlet filename = temporaryDirectory() + \"/\" + this.temporaryFileName;\n\t\tif(fs.existsSync(filename)){\n\t\t\tlet content = fs.readFileSync(filename);\n\t\t\tlet state = JSON.parse(content);\n\t\t\tif(typeof state === \"object\"){\n\t\t\t\tthis.setState(state);\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\t\tif(this.props.match.params.id){\n\t\t\tthis.carregarOrcamento(this.props.match.params.id);\n\t\t}else{\n\t\t\tthis.carregarTemporario();\n\t\t}\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.Pool.end();\n\t}\n\n\tcomponentWillUpdate(nextProps, nextState){\n\t\tthis.gravarTemporario(nextState);\n\t}\n\n\tcriarObjetoDocumentoProduto(documentoproduto){\n\t\treturn $.extend({\n\t\t\t\"idproduto\": null,\n\t\t\t\"descricao\": null,\n\t\t\t\"unidade\": \"Unidade\",\n\t\t\t\"precisao\": 0,\n\t\t\t\"precovariavel\": \"N\",\n\t\t\t\"quantidade\": 0,\n\t\t\t\"preco\": 0,\n\t\t\t\"descontounitario\": 0,\n\t\t\t\"totaldesconto\": 0,\n\t\t\t\"acrescimounitario\": 0,\n\t\t\t\"totalacrescimo\": 0,\n\t\t\t\"totalproduto\": 0\n\t\t}, documentoproduto);\n\t}\n\n\tdiminuirQuantidade(documentoproduto){\n\t\tlet i = documentoproduto.i;\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\t\tdocumentoproduto = listaDocumentoProduto[i];\n\t\tif(documentoproduto.quantidade - 1 <= 0){\n\t\t\treturn true;\n\t\t}\n\t\tdocumentoproduto.quantidade--;\n\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\tlistaDocumentoProduto[i] = documentoproduto;\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto\n\t\t});\n\t}\n\n\teditarProduto(documentoproduto){\n\t\tthis.setState({\n\t\t\tdocumentoproduto: documentoproduto,\n\t\t\tshowEditarProduto: true\n\t\t});\n\t}\n\n\tasync finalizarDocumento(){\n\t\twindow.Loading.show();\n\n\t\t// Abre um client com o banco para fazer transacao\n\t\tconst client = await this.Pool.connect();\n\t\ttry{\n\t\t\t// Inicia a transacao\n\t\t\tawait client.query(\"BEGIN\");\n\n\t\t\t// Ajusta o TimeZone no banco dados\n\t\t\t//await client.query(\"SET timezone = 'America/Sao_Paulo'\");\n\n\t\t\t// Cria o documento\n\t\t\tlet sqlInsertDocumento = [\n\t\t\t\t\"INSERT INTO documento (operacao, modelo, cpfcnpj, nomeorcamento, totaltroco)\",\n\t\t\t\t\"VALUES ($1, $2, $3, $4, $5)\",\n\t\t\t\t\"RETURNING iddocumento\"\n\t\t\t].join(\" \");\n\t\t\tlet resDocumento = await client.query(sqlInsertDocumento, [\n\t\t\t\tthis.state.operacao, \"65\", this.state.cpfcnpj,\n\t\t\t\tthis.state.nomeorcamento, this.state.totaltroco\n\t\t\t]);\n\n\t\t\t// Captura o id do documento gravado\n\t\t\tlet iddocumento = resDocumento.rows[0].iddocumento;\n\n\t\t\t// Captura todos os codigos de produtos\n\t\t\tlet listaIdProduto = [];\n\t\t\tfor(let documentoproduto of this.state.listaDocumentoProduto){\n\t\t\t\tlistaIdProduto.push(documentoproduto.idproduto);\n\t\t\t}\n\n\t\t\t// Carrega as informacoes necessarias para incluir o produto\n\t\t\tlet queryProduto = [\n\t\t\t\t\"SELECT produto.idproduto, ncm.codigoncm, produto.origem,\",\n\t\t\t\t\"  produto.csosn, produto.aliqicms, produto.cstpis, produto.aliqpis,\",\n\t\t\t\t\"  produto.cstcofins, produto.aliqcofins, produto.codcontribsocial,\",\n\t\t\t\t\"  produto.cest, produto.cfop\",\n\t\t\t\t\"FROM produto\",\n\t\t\t\t\"LEFT JOIN ncm USING (idncm)\",\n\t\t\t\t\"WHERE idproduto IN (\" + listaIdProduto.join(\", \") + \")\"\n\t\t\t].join(\" \");\n\n\t\t\tlet resProduto = await client.query(queryProduto);\n\n\t\t\t// Organiza os produtos carregados\n\t\t\tlet listaProdutos = {};\n\t\t\tfor(let row of resProduto.rows){\n\t\t\t\tlet idproduto = row.idproduto;\n\t\t\t\tdelete row.idproduto;\n\t\t\t\tlistaProdutos[idproduto] = row;\n\t\t\t}\n\n\t\t\t// Percorre os itens da venda\n\t\t\tlet sequencial = 1;\n\t\t\tfor(let documentoproduto of this.state.listaDocumentoProduto){\n\t\t\t\tlet produto = listaProdutos[documentoproduto.idproduto];\n\n\t\t\t\tlet sqlInsertDocumentoProduto = [\n\t\t\t\t\t\"INSERT INTO documentoproduto (\",\n\t\t\t\t\t\"  iddocumento, sequencial, idproduto,\",\n\t\t\t\t\t\"  descricao, preco, quantidade,\",\n\t\t\t\t\t\"  descontounitario, acrescimounitario, codigoncm,\",\n\t\t\t\t\t\"  origem, csosn, aliqicms,\",\n\t\t\t\t\t\"  cstpis, aliqpis, cstcofins,\",\n\t\t\t\t\t\"  aliqcofins, codcontribsocial, cest,\",\n\t\t\t\t\t\"  cfop\",\n\t\t\t\t\t\") VALUES (\",\n\t\t\t\t\t\"  $1, $2, $3,\",\n\t\t\t\t\t\"  $4, $5, $6,\",\n\t\t\t\t\t\"  $7, $8, $9,\",\n\t\t\t\t\t\"  $10, $11, $12,\",\n\t\t\t\t\t\"  $13, $14, $15,\",\n\t\t\t\t\t\"  $16, $17, $18,\",\n\t\t\t\t\t\"  $19\",\n\t\t\t\t\t\")\"\n\t\t\t\t].join(\" \");\n\n\t\t\t\tawait client.query(sqlInsertDocumentoProduto, [\n\t\t\t\t\tiddocumento, sequencial++, documentoproduto.idproduto,\n\t\t\t\t\tdocumentoproduto.descricao, documentoproduto.preco, documentoproduto.quantidade,\n\t\t\t\t\tdocumentoproduto.descontounitario, documentoproduto.acrescimounitario, produto.codigoncm,\n\t\t\t\t\tproduto.origem, produto.csosn, produto.aliqicms,\n\t\t\t\t\tproduto.cstpis, produto.aliqpis, produto.cstcofins,\n\t\t\t\t\tproduto.aliqcofins, produto.codcontribsocial, produto.cest,\n\t\t\t\t\tproduto.cfop\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\t// Verifica se eh cupom\n\t\t\tif(this.state.operacao === \"CU\"){\n\t\t\t\tlet listaDocumentoPagamento = this.state.listaDocumentoPagamento;\n\n\t\t\t\t// Verifica se existe troco, e se caso sim, abate o valor da ultima finalizadora informada\n\t\t\t\tif(this.state.totaltroco > 0){\n\t\t\t\t\tlet i = listaDocumentoPagamento.length - 1;\n\t\t\t\t\tlistaDocumentoPagamento[i].totalpagamento -= this.state.totaltroco;\n\t\t\t\t}\n\n\t\t\t\t// Grava os pagamentos\n\t\t\t\tfor(let documentopagamento of listaDocumentoPagamento){\n\t\t\t\t\tlet sqlInsertDocumentoPagamento = [\n\t\t\t\t\t\t\"INSERT INTO documentopagamento (iddocumento, idformapagamento, totalpagamento)\",\n\t\t\t\t\t\t\"VALUES ($1, $2, $3)\"\n\t\t\t\t\t].join(\" \");\n\n\t\t\t\t\tawait client.query(sqlInsertDocumentoPagamento, [\n\t\t\t\t\t\tiddocumento, documentopagamento.idformapagamento, documentopagamento.totalpagamento\n\t\t\t\t\t]);\n\t\t\t\t}\n\n\t\t\t\t// Transmite o documento atraves do SAT\n\t\t\t\tlet sat = new SAT(client);\n\t\t\t\tlet retorno = await sat.transmitirDocumento(iddocumento);\n\t\t\t\tif(retorno === false){\n\t\t\t\t\tthrow new Error(sat.error);\n\t\t\t\t}\n\n\t\t\t\t// Atualiza os dados do documento fiscal\n\t\t\t\tawait client.query(\"UPDATE documento SET xml = $1, chave = $2, numero = $3 WHERE iddocumento = $4\", [retorno.xml, retorno.chave, retorno.numero, iddocumento]);\n\t\t\t}\n\n\t\t\t// Apaga o orcamento origem se houver\n\t\t\tif(this.state.iddocumentoorcamento){\n\t\t\t\tawait client.query(\"DELETE FROM documento WHERE iddocumento = $1\", [this.state.iddocumentoorcamento]);\n\t\t\t}\n\n\t\t\t// Confirma a transacao do banco de dados\n\t\t\tawait client.query(\"COMMIT\");\n\n\t\t\t// Mensagem de sucesso\n\t\t\tif(this.state.totaltroco > 0){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttext: \"<div class='text-center'><h5>Venda finalizada com sucesso!</h5><h3>Total de troco</h3><h1><small>R$</small>\" + this.state.totaltroco.format(2, \",\", \".\") + \"</h1></div>\"\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tswitch(this.state.operacao){\n\t\t\t\t\tcase \"CU\":\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twindow.FastMessage.show(\"Venda finalizada com sucesso!\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"OR\":\n\t\t\t\t\t\twindow.FastMessage.show(\"Orçamento finalizado com sucesso!\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Imprime o documento\n\t\t\tlet numeroVias = ini.parse(await valorParametro(this.Pool, \"IMPRESSORA\", \"NUMEROVIAS\"));\n\t\t\tnumeroVias = (this.state.operacao === \"OR\" ? numeroVias.orcamento : numeroVias.venda);\n\n\t\t\tif(await valorParametro(this.Pool, \"IMPRESSORA\", \"CONFIRMACAO\") === \"S\"){\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Imprimir cupom\",\n\t\t\t\t\ttext: \"Deseja imprimir o cupom da venda realizada?\",\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t\tfor(let i = 1; i <= numeroVias; i++){\n\t\t\t\t\t\t\t\t\tlet printer = new Printer(this.Pool);\n\t\t\t\t\t\t\t\t\tawait printer.imprimirDocumento(iddocumento);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: \"Não\",\n\t\t\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tfor(let i = 1; i <= numeroVias; i++){\n\t\t\t\t\tlet printer = new Printer(this.Pool);\n\t\t\t\t\tawait printer.imprimirDocumento(iddocumento);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Prepara a tela para uma nova venda\n\t\t\tthis.reiniciar();\n\t\t}catch(err){\n\t\t\tawait client.query(\"ROLLBACK\");\n\t\t\tdefaultMessageBoxError(err);\n\t\t}finally{\n\t\t\tclient.release();\n\t\t\twindow.Loading.hide();\n\t\t}\n\t}\n\n\tfinalizarOrcamento(nomeorcamento, cpfcnpj){\n\t\tthis.setState({\n\t\t\tnomeorcamento: nomeorcamento,\n\t\t\tcpfcnpj: cpfcnpj,\n\t\t\tlistaDocumentoPagamento: [],\n\t\t\ttotaltroco: 0,\n\t\t\tshowVendaFinalizacaoOrcamento: false\n\t\t}, () => {\n\t\t\tthis.finalizarDocumento();\n\t\t});\n\t}\n\n\tfinalizarVenda(documentopagamentos, totaltroco){\n\t\tthis.setState({\n\t\t\tlistaDocumentoPagamento: documentopagamentos,\n\t\t\ttotaltroco: totaltroco,\n\t\t}, () => {\n\t\t\tthis.finalizarDocumento();\n\t\t});\n\t}\n\n\tasync gravarTemporario(state){\n\t\tstate = (state === undefined ? this.state : state);\n\t\twriteTemporary(this.temporaryFileName, JSON.stringify(state));\n\t}\n\n\tincluirDezPorcento(){\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\n\t\tlistaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\tdocumentoproduto.acrescimounitario = documentoproduto.preco * 0.1;\n\t\t\tthis.calcularDocumentoProduto(documentoproduto);\n\t\t});\n\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto\n\t\t});\n\t}\n\n\tincluirProduto(produto, event, totalproduto){\n\t\tproduto = Object.assign({}, produto);\n\n\t\tlet informarPeso = (produto) => {\n\t\t\twindow.InformarValor.show({\n\t\t\t\ttitle: \"Quantidade em \" + produto.unidade.toLowerCase() + \"s\",\n\t\t\t\tdecimal: produto.precisao,\n\t\t\t\tsuccess: (valor) => {\n\t\t\t\t\tproduto.quantidade = valor.toFloat();\n\t\t\t\t\tthis.incluirProdutoDefinitivo(produto);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tif(produto.precovariavel === \"S\"){\n\t\t\twindow.InformarValor.show({\n\t\t\t\ttitle: \"Preço do produto\",\n\t\t\t\tmoney: true,\n\t\t\t\tdecimal: 2,\n\t\t\t\tsuccess: (valor) => {\n\t\t\t\t\tproduto.preco = valor.toFloat();\n\t\t\t\t\tif(produto.precisao > 0 && !totalproduto){\n\t\t\t\t\t\tinformarPeso(produto);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.incluirProdutoDefinitivo(produto, totalproduto);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}else if(produto.precisao > 0 && !totalproduto){\n\t\t\tinformarPeso(produto);\n\t\t}else{\n\t\t\tthis.incluirProdutoDefinitivo(produto, totalproduto);\n\t\t}\n\t}\n\n\tincluirProdutoDefinitivo(produto, totalproduto){\n\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\n\t\tif(totalproduto){\n\t\t\tproduto.quantidade = totalproduto / produto.preco;\n\t\t}else if(!produto.quantidade){\n\t\t\tproduto.quantidade = 1;\n\t\t}\n\n\t\tlet documentoproduto = this.criarObjetoDocumentoProduto({\n\t\t\tidproduto: produto.idproduto,\n\t\t\tdescricao: produto.descricao,\n\t\t\tunidade: produto.unidade,\n\t\t\tprecisao: produto.precisao,\n\t\t\tprecovariavel: produto.precovariavel,\n\t\t\tquantidade: produto.quantidade,\n\t\t\tpreco: produto.preco\n\t\t});\n\n\t\tthis.calcularDocumentoProduto(documentoproduto);\n\n\t\tlet found = false;\n\t\tlistaDocumentoProduto.forEach((documentoproduto2) => {\n\t\t\tif(found){\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet documentoprodutoComp1 = Object.assign({}, documentoproduto);\n\t\t\tlet documentoprodutoComp2 = Object.assign({}, documentoproduto2);\n\n\t\t\tdelete documentoprodutoComp1.quantidade;\n\t\t\tdelete documentoprodutoComp2.quantidade;\n\t\t\tdelete documentoprodutoComp1.totalproduto;\n\t\t\tdelete documentoprodutoComp2.totalproduto;\n\t\t\tdelete documentoprodutoComp2.i;\n\n\t\t\tif(JSON.stringify(documentoprodutoComp1) === JSON.stringify(documentoprodutoComp2)){\n\t\t\t\tdocumentoproduto2.quantidade += documentoproduto.quantidade;\n\t\t\t\tthis.calcularDocumentoProduto(documentoproduto2);\n\t\t\t\tfound = true;\n\t\t\t}\n\t\t});\n\n\t\tif(parseFloat(documentoproduto.preco) === 0){\n\t\t\twindow.MessageBox.show({\n\t\t\t\ttitle: \"Produto sem preço\",\n\t\t\t\ttext: \"O preço do produto precisa ser maior que zero.\"\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif(!found){\n\t\t\tlistaDocumentoProduto.push(documentoproduto);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tlistaDocumentoProduto: listaDocumentoProduto,\n\t\t\tpesquisa: \"\",\n\t\t\tpesquisaEfetiva: \"\"\n\t\t});\n\t}\n\n\tinformarCPF(){\n\t\twindow.InformarValor.show({\n\t\t\ttitle: \"Informe o CPF ou CNPJ\",\n\t\t\tmask: \"99999999999999\",\n\t\t\tsuccess: (valor) => {\n\t\t\t\tlet cpfcnpj = null;\n\t\t\t\tif(valor.length === 11 && validarCPF(valor)){\n\t\t\t\t\tcpfcnpj = valor.substr(0, 3) + \".\" + valor.substr(3, 3) + \".\" + valor.substr(6, 3) + \"-\" + valor.substr(9, 2);\n\t\t\t\t}else if(valor.length === 14 && validarCNPJ(valor)){\n\t\t\t\t\tcpfcnpj = valor.substr(0, 2) + \".\" + valor.substr(2, 3) + \".\" + valor.substr(5, 3) + \"/\" + valor.substr(8, 4) + \"-\" + valor.substr(12, 2);\n\t\t\t\t}else if(valor.length > 0){\n\t\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\t\ttitle: \"CPF ou CNPJ inválido\",\n\t\t\t\t\t\ttext: \"O CPF ou CNPJ informado é inválido.<br>Por favor, digite novamente.\",\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: \"Ok\",\n\t\t\t\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\t\t\t\tcolor: \"blue\",\n\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\t\t\t\tthis.informarCPF();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.setState({\n\t\t\t\t\tcpfcnpj: cpfcnpj\n\t\t\t\t});\n\t\t\t},\n\t\t\tfail: () => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcpfcnpj: null\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tonChangePesquisa(event){\n\t\tthis.setState({\n\t\t\tpesquisa: event.target.value\n\t\t});\n\t}\n\n\tonClickBuscar(){\n\t\tthis.setState({\n\t\t\tpesquisaEfetiva: this.state.pesquisa\n\t\t});\n\t}\n\n\tonKeyUpPesquisa(event){\n\t\tif(event.keyCode === 13){\n\t\t\tthis.onClickBuscar();\n\t\t}\n\t}\n\n\tpesquisaLimpar(){\n\t\tthis.setState({\n\t\t\tpesquisa: \"\",\n\t\t\tpesquisaEfetiva: \"\"\n\t\t});\n\t}\n\n\treimprimirCupom(){\n\t\tthis.setState({\n\t\t\tshowVendaReimprimirCupom: true\n\t\t});\n\t}\n\n\treiniciar(){\n\t\tlet documentoproduto = this.criarObjetoDocumentoProduto();\n\n\t\tthis.setState({\n\t\t\tdocumentoproduto: documentoproduto,\n\t\t\tlistaDocumentoProduto: [],\n\t\t\tlistaDocumentoPagamento: [],\n\t\t\t//operacao: \"CU\",\n\t\t\tcpfcnpj: null,\n\t\t\tnomeorcamento: null,\n\t\t\tiddocumentoorcamento: null,\n\t\t\tpesquisa: \"\",\n\t\t\tpesquisaEfetiva: \"\",\n\t\t\tshowEditarProduto: false,\n\t\t\tshowVendaFinalizacao: false,\n\t\t\tshowVendaFinalizacaoOrcamento: false,\n\t\t\tshowVendaAplicarDesconto: false,\n\t\t\tshowVendaAplicarAcrescimo: false\n\t\t});\n\t}\n\n\tremoverProduto(documentoproduto){\n\t\tlet totalproduto = \"R$ \" + documentoproduto.totalproduto.format(2, \",\", \".\");\n\n\t\twindow.MessageBox.show({\n\t\t\ttext: \"Tem certeza que deseja remover o produto?<br><br>\" + documentoproduto.descricao + \"<span class='float-right'>\" + totalproduto + \"</span>\",\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ttext: \"Sim\",\n\t\t\t\t\ticon: \"thumbs-up\",\n\t\t\t\t\tcolor: \"green\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t\tlet listaDocumentoProduto = this.state.listaDocumentoProduto;\n\t\t\t\t\t\tlistaDocumentoProduto.splice(documentoproduto.i, 1);\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tlistaDocumentoProduto: listaDocumentoProduto\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: \"Não\",\n\t\t\t\t\ticon: \"thumbs-down\",\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\twindow.MessageBox.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\ttrocarOperacao(operacao){\n\t\tthis.setState({\n\t\t\toperacao: operacao\n\t\t});\n\t}\n\n\trender(){\n\t\tlet totalbruto = 0;\n\t\tlet totaldesconto = 0;\n\t\tlet totaldocumento = 0;\n\t\tthis.state.listaDocumentoProduto.forEach((documentoproduto) => {\n\t\t\ttotalbruto += parseFloat(documentoproduto.preco * documentoproduto.quantidade);\n\t\t\ttotaldesconto += parseFloat(documentoproduto.totaldesconto);\n\t\t\ttotaldocumento += parseFloat(documentoproduto.totalproduto);\n\t\t});\n\n\t\tlet contentClassName = \"operacao-\" + this.state.operacao;\n\n\t\treturn (\n\t\t\t<Content className={contentClassName}>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col size=\"7\">\n\t\t\t\t\t\t<Row className=\"mb-4 mt-4\">\n\t\t\t\t\t\t\t<Col size=\"9\">\n\t\t\t\t\t\t\t\t<FormControl type=\"search\" id=\"pesquisa\" value={this.state.pesquisa} placeholder=\"Pesquise um produto...\" onKeyUp={this.onKeyUpPesquisa} onChange={this.onChangePesquisa} />\n\t\t\t\t\t\t\t\t<Icon name=\"cross\" id=\"pesquisa-limpar\" onClick={this.pesquisaLimpar} className={this.state.pesquisa.length > 0 ? null : \"d-none\"} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col size=\"3\" className=\"pl-0\">\n\t\t\t\t\t\t\t\t<Button text=\"Buscar\" icon=\"search\" color=\"green\" block={true} onClick={this.onClickBuscar} />\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<PainelRapido\n\t\t\t\t\t\t\tPool={this.Pool}\n\t\t\t\t\t\t\tpesquisa={this.state.pesquisaEfetiva}\n\t\t\t\t\t\t\tonSelectProduto={this.incluirProduto}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col size=\"5\" className=\"pr-0\">\n\t\t\t\t\t\t<VendaDetalhe\n\t\t\t\t\t\t\tabrirFinalizacao={this.abrirFinalizacao}\n\t\t\t\t\t\t\taumentarQuantidade={this.aumentarQuantidade}\n\t\t\t\t\t\t\tcancelarUltimaVenda={this.cancelarUltimaVenda}\n\t\t\t\t\t\t\tcancelarVendaAtual={this.cancelarVendaAtual}\n\t\t\t\t\t\t\tcarregarOrcamento={this.carregarOrcamento}\n\t\t\t\t\t\t\treimprimirCupom={this.reimprimirCupom}\n\t\t\t\t\t\t\tcpfcnpj={this.state.cpfcnpj}\n\t\t\t\t\t\t\tdiminuirQuantidade={this.diminuirQuantidade}\n\t\t\t\t\t\t\teditarProduto={this.editarProduto}\n\t\t\t\t\t\t\tinformarCPF={this.informarCPF}\n\t\t\t\t\t\t\tlistaDocumentoProduto={this.state.listaDocumentoProduto}\n\t\t\t\t\t\t\toperacao={this.state.operacao}\n\t\t\t\t\t\t\tremoverProduto={this.removerProduto}\n\t\t\t\t\t\t\ttrocarOperacao={this.trocarOperacao}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<VendaEditarProduto\n\t\t\t\t\tshow={this.state.showEditarProduto}\n\t\t\t\t\tdocumentoproduto={this.state.documentoproduto}\n\t\t\t\t\tatualizarDocumentoProduto={this.atualizarDocumentoProduto}\n\t\t\t\t\tbeforeClose={() => {this.setState({showEditarProduto: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaFinalizacao\n\t\t\t\t\tPool={this.Pool}\n\t\t\t\t\tshow={this.state.showVendaFinalizacao}\n\t\t\t\t\ttotaldocumento={totaldocumento}\n\t\t\t\t\taplicarAcrescimo={this.aplicarAcrescimo}\n\t\t\t\t\taplicarDesconto={this.aplicarDesconto}\n\t\t\t\t\tincluirDezPorcento={this.incluirDezPorcento}\n\t\t\t\t\tfinalizarVenda={this.finalizarVenda}\n\t\t\t\t\tlistaDocumentoPagamento={this.state.listaDocumentoPagamento}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaFinalizacao: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaFinalizacaoOrcamento\n\t\t\t\t\tnomeorcamento={this.state.nomeorcamento}\n\t\t\t\t\tcpfcnpj={this.state.cpfcnpj}\n\t\t\t\t\tfinalizarOrcamento={this.finalizarOrcamento}\n\t\t\t\t\tshow={this.state.showVendaFinalizacaoOrcamento}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaFinalizacaoOrcamento: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaAplicarDesconto\n\t\t\t\t\ttotalbruto={totalbruto}\n\t\t\t\t\tshow={this.state.showVendaAplicarDesconto}\n\t\t\t\t\taplicarDesconto={this.aplicarDesconto}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaAplicarDesconto: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaAplicarAcrescimo\n\t\t\t\t\ttotalbruto={totalbruto}\n\t\t\t\t\ttotaldesconto={totaldesconto}\n\t\t\t\t\tshow={this.state.showVendaAplicarAcrescimo}\n\t\t\t\t\taplicarAcrescimo={this.aplicarAcrescimo}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaAplicarAcrescimo: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaCancelarCupom\n\t\t\t\t\tPool={this.Pool}\n\t\t\t\t\tshow={this.state.showVendaCancelarCupom}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaCancelarCupom: false})}}\n\t\t\t\t/>\n\t\t\t\t<VendaReimprimirCupom\n\t\t\t\t\tPool={this.Pool}\n\t\t\t\t\tshow={this.state.showVendaReimprimirCupom}\n\t\t\t\t\tbeforeClose={() => {this.setState({showVendaReimprimirCupom: false})}}\n\t\t\t\t/>\n\t\t\t</Content>\n\t\t)\n\t}\n}\n","import {currentTimestamp} from \"../def/function.js\";\n\nexport default class Processo {\n\tconstructor(Pool, referencia){\n\t\tthis.Pool = Pool;\n\t\tthis.referencia = referencia;\n\t\tthis.dthrinicial = currentTimestamp();\n\t}\n\n\tasync atualizarProcesso(){\n\t\tlet sql = \"UPDATE processo SET dthrinicial = $2, dthrfinal = $3 WHERE referencia = $1\";\n\t\tlet values = [this.referencia, this.dthrinicial, currentTimestamp()];\n\t\tawait this.Pool.query(sql, values);\n\t}\n\n\tasync verificarIntervalo(){\n\t\tthis.dthrinicial = currentTimestamp();\n\n\t\tlet res = await this.Pool.query(\"SELECT status, dthrinicial, intervalo FROM processo WHERE referencia = $1\", [this.referencia]);\n\t\tlet row = res.rows[0];\n\n\t\tif(row.status !== \"A\"){\n\t\t\treturn false;\n\t\t}\n\t\tif(row.dthrinicial === null){\n\t\t\treturn true;\n\t\t}\n\t\tif(Date.now() >= row.dthrinicial.getTime() + row.intervalo * 60000){\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n}\n","import Processo from \"./Processo.js\";\nimport Servidor from \"./Servidor.js\";\n\nimport {serialNumber, temporaryDirectory, valorParametro} from \"../def/function.js\";\n\nconst fs = window.require(\"fs\");\nconst os = window.require(\"os\");\nconst ftp = window.require(\"ftp\");\nconst childProcess = window.require(\"child_process\");\n\nexport default class ProcessoAutomatico {\n\n\tconstructor(Pool){\n\t\tthis.Pool = Pool;\n\t\tthis.interval = null;\n\t\tthis.running = false;\n\n\t\twindow.ProcessoAutomatico = this;\n\n\t\tthis.executandoBackup = false;\n\t}\n\n\tasync iniciar(){\n\t\tthis.interval = setInterval(async () => { this.executar() }, 1000 * 60); // Cria o intervalo para executar a cada 1 minuto\n\t\tsetTimeout(async () => { this.executar() }, 1000 * 10); // Executa uma primeira vez 10s depois de iniciar\n\t}\n\n\tpausar(){\n\t\tclearInterval(this.interval);\n\t}\n\n\tasync executar(){\n\t\tif(this.running){\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tthis.running = true;\n\t\t\tawait this.executarRefreshView();\n\t\t\tawait this.executarVerificarDtVerificacao();\n\t\t\tawait this.executarVerificarTerminal();\n\t\t\tawait this.executarBackup();\n\t\t}catch(err){\n\t\t\tthrow err;\n\t\t}finally{\n\t\t\tthis.running = false;\n\t\t}\n\t}\n\n\tasync executarBackup(){\n\t\t// Verifica se ja nao tem backup em execucao\n\t\tif(this.executandoBackup){\n\t\t\treturn;\n\t\t}\n\n\t\t// Carrega e verifica o processo\n\t\tlet processo = new Processo(this.Pool, \"BACKUP\");\n\t\tif(!await processo.verificarIntervalo()){\n\t\t\treturn;\n\t\t}\n\n\t\t// Carrega os modulos\n\t\tif(this.fs === undefined) this.fs = fs;\n\t\tif(this.os === undefined) this.os = os;\n\t\tif(this.ftp === undefined) this.ftp = ftp;\n\t\tif(this.childProcess === undefined) this.childProcess = childProcess;\n\n\t\t// Se macos, nao efetua backup\n\t\tif(this.os.platform() === \"darwin\"){\n\t\t\treturn;\n\t\t}\n\n\t\t// Captura os dados de conexao as FTP\n\t\tlet dadosFTP = null;\n\t\ttry{\n\t\t\tdadosFTP = {\n\t\t\t\thost: await valorParametro(this.Pool, \"BACKUP\", \"HOST\"),\n\t\t\t\tport: await valorParametro(this.Pool, \"BACKUP\", \"PORTA\"),\n\t\t\t\tuser: await valorParametro(this.Pool, \"BACKUP\", \"USUARIO\"),\n\t\t\t\tpassword: await valorParametro(this.Pool, \"BACKUP\", \"SENHA\")\n\t\t\t};\n\t\t}catch(err){\n\t\t\tconsole.log(\"Erro ao efetuar backup: não foi possível carregar os parâmetros do FTP.\");\n\t\t\treturn false;\n\t\t}\n\n\t\t// Define que esta executando backup\n\t\tthis.executandoBackup = true;\n\n\t\t// Define a localizacao do pg_dump\n\t\tlet pgDump = null;\n\t\tswitch(this.os.platform()){\n\t\t\tcase \"win32\":\n\t\t\t\tpgDump = \"C:/Program Files/PostgreSQL/14/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/13/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/12/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/11/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/10/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/9.6/bin/pg_dump.exe\";\n\t\t\t\tif(!this.fs.existsSync(pgDump)) pgDump = \"C:/Program Files/PostgreSQL/9.3/bin/pg_dump.exe\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Define o diretorio de trabalho\n\t\tlet tempDir = temporaryDirectory();\n\n\t\t// Verifica se o diretorio existe\n\t\tif(!this.fs.existsSync(tempDir)){\n\t\t\tthis.fs.mkdirSync(tempDir);\n\t\t}\n\n\t\t// Limpa os backups do diretorio temporario\n\t\tlet files = this.fs.readdirSync(tempDir);\n\t\tfor(let file of files){\n\t\t\tif(file.substr(-7) === \".backup\"){\n\t\t\t\tthis.fs.unlinkSync(tempDir + \"/\" + file);\n\t\t\t}\n\t\t}\n\n\t\t// Executa o backup via pg_dump\n\t\tlet date = new Date();\n\t\tlet currTimeStr = date.getFullYear() + \"-\" + String(date.getMonth() + 1).lpad(2, \"0\") + \"-\" + String(date.getDate()).lpad(2, \"0\") + \"-\" + String(date.getHours()).lpad(2, \"0\") + \"-\" + String(date.getMinutes()).lpad(2, \"0\") + \"-\" + String(date.getSeconds()).lpad(2, \"0\");\n\t\tlet fileName = tempDir + \"/\" + currTimeStr + \".backup\";\n\t\tlet command = \"\\\"\" + pgDump + \"\\\" -F c -b -w -U postgres -f \\\"\" + fileName + \"\\\" satflex\";\n\t\tthis.childProcess.execSync(command);\n\n\t\t// Caputura o numero de serie do terminal\n\t\tif(this.serialNumber === undefined){\n\t\t\tthis.serialNumber = await serialNumber();\n\t\t}\n\n\t\t// Define o arquivo local e remoto\n\t\tlet localFile = fileName;\n\t\tlet remoteFile = \"/\" + this.serialNumber + \"/\" + currTimeStr + \".backup\";\n\n\t\t// Copia o arquivo para o servidor de backup\n\t\tlet client = new this.ftp();\n\t\tclient.on(\"ready\", () => {\n\t\t\tclient.cwd(\"/\", () => {\n\t\t\t\tclient.mkdir(this.serialNumber, true, (err) => {\n\t\t\t\t\tif(err){\n\t\t\t\t\t\tthis.executandoBackup = false;\n\t\t\t\t\t\tthrow err;\n\t\t\t\t\t}\n\t\t\t\t\tclient.put(localFile, remoteFile, false, (err) => {\n\t\t\t\t\t\tif(err) throw err;\n\t\t\t\t\t\tclient.end();\n\t\t\t\t\t\tprocesso.atualizarProcesso();\n\t\t\t\t\t\tthis.executandoBackup = false;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}).connect(dadosFTP);\n\t}\n\n\tasync executarRefreshView(){\n\t\t// Carrega e verifica o processo\n\t\tlet processo = new Processo(this.Pool, \"REFRESH_VIEW\");\n\t\tif(!await processo.verificarIntervalo()){\n\t\t\treturn;\n\t\t}\n\n\t\t// Atualiza as views materializadas\n\t\tlet views = [\"v_vendaprodutodiario\", \"v_vendapagamentodiario\"];\n\t\tfor(let view of views){\n\t\t\tawait this.Pool.query(\"REFRESH MATERIALIZED VIEW \" + view);\n\t\t}\n\n\t\t// Atualiza o processo no banco de dados\n\t\tawait processo.atualizarProcesso();\n\t}\n\n\tasync executarVerificarDtVerificacao(){\n\t\t// Carrega e verifica o processo\n\t\tlet processo = new Processo(this.Pool, \"VERIFICAR_DTVERIFICACAO\");\n\t\tif(!await processo.verificarIntervalo()){\n\t\t\treturn;\n\t\t}\n\n\t\t// Captura as datas para comparacao\n\t\tlet dtverificacao = await valorParametro(this.Pool, \"SISTEMA\", \"DTVERIFICACAO\");\n\t\tlet dtatual = new Date();\n\n\t\t// Verifica se ja passou mais de 10 dias sem comunicar com o servidor\n\t\tif(dtverificacao !== null && dtverificacao.length > 0){\n\t\t\tdtverificacao = new Date(dtverificacao);\n\t\t}else{\n\t\t\tdtverificacao = null;\n\t\t}\n\t\tif(dtverificacao === null || ((dtatual.getTime() - dtverificacao.getTime()) / (1000 * 3600 * 24)) > 10){\n\t\t\t// Atualiza status do sistema para: Bloqueado por falta de comunicacao\n\t\t\tlet sql = \"UPDATE parametro SET valor = $3 WHERE grupo = $1 AND nome = $2\";\n\t\t\tthis.Pool.query(sql, [\"SISTEMA\", \"STATUS\", \"0002\"]);\n\t\t}\n\n\t\t// Atualiza o processo no banco de dados\n\t\tawait processo.atualizarProcesso();\n\t}\n\n\tasync executarVerificarTerminal(){\n\t\t// Carrega e verifica o processo\n\t\tlet processo = new Processo(this.Pool, \"VERIFICAR_TERMINAL\");\n\t\tif(!await processo.verificarIntervalo()){\n\t\t\treturn;\n\t\t}\n\n\t\t// Verifica o terminal no servidor\n\t\tif(!this.servidor) this.servidor = new Servidor(this.Pool);\n\t\tlet status = await this.servidor.verificarTerminal();\n\t\tif(status === false){\n\t\t\tconsole.log(\"Houve uma falha ao verificar o terminal no servidor.\");\n\t\t}else{\n\t\t\t// Atualiza o status do terminal\n\t\t\tthis.Pool.query(\"UPDATE parametro SET valor = $3 WHERE grupo = $1 AND nome = $2\", [\"SISTEMA\", \"STATUS\", status]);\n\n\t\t\t// Atualiza a data de verificacao\n\t\t\tlet dtatual = new Date().toISOString().substr(0, 10);\n\t\t\tthis.Pool.query(\"UPDATE parametro SET valor = $3 WHERE grupo = $1 AND nome = $2\", [\"SISTEMA\", \"DTVERIFICACAO\", dtatual]);\n\t\t}\n\n\t\t// Atualiza o processo no banco de dados\n\t\tawait processo.atualizarProcesso();\n\t}\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { HashRouter, Route } from \"react-router-dom\";\n\nimport \"./lib/bootstrap-4.0.0/bootstrap.js\";\n\nimport Menu from \"./com/Menu.js\";\nimport { FastMessageEmitter, FastMessageModal } from \"./com/FastMessage.js\";\nimport { InformarValorEmitter, InformarValorModal } from \"./com/InformarValor.js\";\nimport { LoadingEmitter, LoadingElement } from \"./com/Loading.js\";\nimport { MessageBoxEmitter, MessageBoxModal } from \"./com/MessageBox.js\";\nimport Servidor from \"./com/Servidor.js\";\n\nimport Categoria from \"./view/Categoria.js\";\nimport Configuracoes from \"./view/Configuracoes.js\";\nimport Contador from \"./view/Contador.js\";\nimport Estatistica from \"./view/Estatistica.js\";\nimport Fechamento from \"./view/Fechamento.js\";\nimport Ferramentas from \"./view/Ferramentas.js\";\nimport Parametro from \"./view/Parametro.js\";\nimport Produto from \"./view/Produto.js\";\nimport Relatorios from \"./view/Relatorios.js\";\nimport RelOrcamento from \"./view/RelOrcamento.js\";\nimport Suporte from \"./view/Suporte.js\";\nimport Venda from \"./view/Venda.js\";\n\nimport { valorParametro } from \"./def/function.js\";\n\nimport ProcessoAutomatico from \"./com/ProcessoAutomatico.js\";\n\nimport \"./css/index.css\";\nimport \"./font/gotham/gotham.css\";\n\nimport { Pool } from \"./def/postgresql.js\";\n\nclass App extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\twindow.FastMessage = new FastMessageEmitter();\n\t\twindow.InformarValor = new InformarValorEmitter();\n\t\twindow.Loading = new LoadingEmitter();\n\t\twindow.MessageBox = new MessageBoxEmitter();\n\n\t\tthis.state = {\n\t\t\tFastMessage: window.FastMessage,\n\t\t\tInformarValor: window.InformarValor,\n\t\t\tLoading: window.Loading,\n\t\t\tMessageBox: window.MessageBox\n\t\t};\n\n\t\tthis.Pool = new Pool();\n\t\tthis.processoAutomatico = new ProcessoAutomatico(this.Pool);\n\t\twindow.processoAutomatico = this.processoAutomatico;\n\t\t\n\t\t// Utilizado apenas para debug\n\t\twindow.servidor = new Servidor(this.Pool);\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.processoAutomatico.iniciar();\n\t\twindow.addEventListener(\"keydown\", this.onKeyDown);\n\n\t\tthis.verificarTerminal();\n\t}\n\n\tcomponentWillUnmount(){\n        window.removeEventListener(\"keydown\", this.onKeyDown);\n    }\n\n\tonKeyDown(e){\n\t\tif(e.ctrlKey && e.keyCode === 73){\n\t\t\tconst electron = window.require('electron');\n\t\t\telectron.remote.getCurrentWebContents().toggleDevTools();\n\t\t}\n\t}\n\n\tasync verificarTerminal(){\n\t\tlet status = await valorParametro(this.Pool, \"SISTEMA\", \"STATUS\");\n\t\tlet telefone = await valorParametro(this.Pool, \"REVENDA\", \"TELEFONE\");\n\t\tswitch(status){\n\t\t\tcase \"0000\": // Ativo\n\t\t\t\tbreak;\n\t\t\tcase \"0001\": // Bloqueado\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Terminal bloqueado\",\n\t\t\t\t\ttext: \"Seu terminal foi bloqueado, para mais informações, entre em contato com o suporte pelo número <b>\" + telefone + \"</b>.\",\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: \"Sair do SAT-Flex\",\n\t\t\t\t\t\t\tcolor: \"primary\",\n\t\t\t\t\t\t\tonClick: function(){\n\t\t\t\t\t\t\t\twindow.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"0002\": // Falta de comunicacao\n\t\t\t\twindow.MessageBox.show({\n\t\t\t\t\ttitle: \"Terminal bloqueado\",\n\t\t\t\t\ttext: \"Seu terminal foi bloqueado por falta de comunicação com a Internet. Verifique sua conexão com a Internet e tente novamente.<br> Caso o problema persista, entre em contato com o suporte pelo número <b>\" + telefone + \"</b>.\",\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: \"Sair do SAT-Flex\",\n\t\t\t\t\t\t\tcolor: \"primary\",\n\t\t\t\t\t\t\tonClick: function(){\n\t\t\t\t\t\t\t\twindow.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<HashRouter>\n\t\t\t\t\t<Route path=\"/\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Menu />\n\t\t\t\t\t\t\t<div id=\"viewContainer\">\n\t\t\t\t\t\t\t\t<Route exact path=\"/\" component={Venda} />\n\t\t\t\t\t\t\t\t<Route exact path=\"/venda\" component={Venda} />\n\t\t\t\t\t\t\t\t<Route exact path=\"/venda/:id\" component={Venda} />\n\t\t\t\t\t\t\t\t<Route path=\"/categoria\" component={Categoria} />\n\t\t\t\t\t\t\t\t<Route path=\"/configuracao\" component={Configuracoes} />\n\t\t\t\t\t\t\t\t<Route path=\"/contador\" component={Contador} />\n\t\t\t\t\t\t\t\t<Route path=\"/estatistica\" component={Estatistica} />\n\t\t\t\t\t\t\t\t<Route path=\"/fechamento\" component={Fechamento} />\n\t\t\t\t\t\t\t\t<Route path=\"/ferramentas\" component={Ferramentas} />\n\t\t\t\t\t\t\t\t<Route path=\"/parametro\" component={Parametro} />\n\t\t\t\t\t\t\t\t<Route path=\"/produto\" component={Produto} />\n\t\t\t\t\t\t\t\t<Route path=\"/relatorio\" component={Relatorios} />\n\t\t\t\t\t\t\t\t<Route path=\"/relorcamento\" component={RelOrcamento} />\n\t\t\t\t\t\t\t\t<Route path=\"/suporte\" component={Suporte} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Route>\n\t\t\t\t</HashRouter>\n\t\t\t\t<FastMessageModal FastMessageEmitter={this.state.FastMessage} />\n\t\t\t\t<InformarValorModal InformarValorEmitter={this.state.InformarValor} />\n\t\t\t\t<LoadingElement LoadingEmitter={this.state.Loading} />\n\t\t\t\t<MessageBoxModal MessageBoxEmitter={this.state.MessageBox} />\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}